; KFM's constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
;Amount of life to start with
life = 950
power = 5000
;attack power (more is stronger)
attack = 100
;defensive power (more is stronger)
defence = 100
;Percentage to increase defense everytime player is knocked down
fall.defence_up = 50
;Time which player lies down for, before getting up
liedown.time = 30
;Number of points for juggling
airjuggle = 30
;Default hit spark number for HitDefs
sparkno = 2
;Default guard spark number
guard.sparkno = 40
;1 to enable echo on KO
KO.echo = 0
;Volume offset (negative for softer)
volume = 0
;Variables with this index and above will not have their values
;reset to 0 between rounds or matches. There are 60 int variables,
;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
;If omitted, then it defaults to 60 and 40 for integer and float
;variables repectively, meaning that none are persistent, i.e. all
;are reset. If you want your variables to persist between matches,
;you need to override state 5900 from common1.cns.
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = 1.35    ;1.25 ;Original 1.1    ;Horizontal scaling factor.
yscale = 1.35    ;Original 1.1       ;Vertical scaling factor.
ground.back = 120    ;Player width (back, ground)
ground.front = 110   ;Player width (front, ground)
air.back = 140        ;Player width (back, air)
air.front = 95      ;Player width (front, air)
height = 240          ;Height of player (for opponent to jump over)
attack.dist = 640    ;Default attack distance
proj.attack.dist = 360 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = -3, -320   ;Approximate position of head
mid.pos = -18, -171    ;Approximate position of midsection
shadowoffset = -2     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y). Recommended 0,0

[Velocity]
walk.fwd  = 14.0;12.5     ;Walk forward
walk.back = -11 ;-10.5    ;Walk backward
run.fwd  = 30, 0  ;28,0  ;Run forward (x, y)
run.back = -18,0 ;Hop backward (x, y)
jump.neu = 0,-36;-37   ;Neutral jumping velocity (x, y)
jump.back = -12    ;Jump back Speed (x, y)
jump.fwd = 12       ;Jump forward Speed (x, y)
runjump.back = -18,-32 ;Running jump speeds (opt)
runjump.fwd = 28,-16      ;.
airjump.neu = 0,-30      ;.
airjump.back = -12      ;Air jump speeds (opt)
airjump.fwd = 12         ;.
air.gethit.groundrecover = -.15,-3.5  ;Velocity for ground recovery state (x, y) **MUGEN 1.0**
air.gethit.airrecover.mul = .5,.2     ;Multiplier for air recovery velocity (x, y) **MUGEN 1.0**
air.gethit.airrecover.add = 0,-4.5    ;Velocity offset for air recovery (x, y) **MUGEN 1.0**
air.gethit.airrecover.back = -1       ;Extra x-velocity for holding back during air recovery **MUGEN 1.0**
air.gethit.airrecover.fwd = 0         ;Extra x-velocity for holding forward during air recovery **MUGEN 1.0**
air.gethit.airrecover.up = -2         ;Extra y-velocity for holding up during air recovery **MUGEN 1.0**
air.gethit.airrecover.down = 1.5      ;Extra y-velocity for holding down during air recovery **MUGEN 1.0**

[Movement]
airjump.num = 2       ;Number of air jumps allowed (opt)
airjump.height = ;35   ;Minimum distance from ground before you can air jump (opt)
yaccel = 1.5;1.25  ;1.75         ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching
stand.friction.threshold = 2          ;If player's speed drops below this threshold while standing, stop his movement **MUGEN 1.0**
crouch.friction.threshold = .05       ;If player's speed drops below this threshold while crouching, stop his movement **MUGEN 1.0**
air.gethit.groundlevel = 25           ;Y-position at which a falling player is considered to hit the ground **MUGEN 1.0**
air.gethit.groundrecover.ground.threshold = -20 ;Y-position below which falling player can use the recovery command **MUGEN 1.0**
air.gethit.groundrecover.groundlevel = 10   ;Y-position at which player in the ground recovery state touches the ground **MUGEN 1.0**
air.gethit.airrecover.threshold = -1  ;Y-velocity above which player may use the air recovery command **MUGEN 1.0**
air.gethit.airrecover.yaccel = 1.75    ;Vertical acceleration for player in the air recovery state **MUGEN 1.0**
air.gethit.trip.groundlevel = 15      ;Y-position at which player in the tripped state touches the ground **MUGEN 1.0**
down.bounce.offset = 0, 20            ;Offset for player bouncing off the ground (x, y) **MUGEN 1.0**
down.bounce.yaccel = 1.75               ;Vertical acceleration for player bouncing off the ground **MUGEN 1.0**
down.bounce.groundlevel = 12          ;Y-position at which player bouncing off the ground touches the ground again **MUGEN 1.0**
down.friction.threshold = .05         ;If the player's speed drops below this threshold while lying down, stop his movement **MUGEN 1.0**

;Default language victory quotes (optional).  **MUGEN 1.0**
;If this section is included, the default language victory quotes must be in English.
[Quotes]
; Up to 100 victory quotes can be specified per language (victory0 - victory99)
; General Victory Quotes
;General Quotes
victory1 = "See!  Speed and weight are a good combo."
victory2 = "That was fun maybe we should share some pizzas sometime.  Your treat of course."
victory3 = "Yeah, I get told I'm fast for my size a lot."
victory4 = "I can make a lot of force come from these hips."
victory5 = "I had a good time thanks for the fight."

; Jumbo Victory quotes

victory6 = "Wow!  You're huge and strong!  Its a good thing your speed is horrendous."
victory7 = "Being beaten by a bunny is really gonna kill your intimidation factor."
Victory8 = "Your cosplay is spot on!  I knew immediately who you were."
Victory9 = "I thought my butt drops were good but yours are far more intimidating."

; Ryu Victory Quotes

victory10 = "Wow, I'm so glad I could fight you.  You're influence is why we all could do this."
victory11 = "You are so efficient with everything you do.  Its so impressive to see in person."

; Ken Victory Quotes
victory12 = "Wow!  How do you light your fist on fire like that?  Isn't that dangerous?"
victory13 = "Does anything beat your uppercut?! I tried throwing my entire mass at you and you still stopped me!"

; KFM victory quotes
victory14 = "It is a treat to see your Kung Fu...Man.  Wow, You're name isn't really creative its almost as bad as a always moving fat bunny being named for it."
victory15 = "I feel like I owe you a great deal of appreciation just being here."

; Evil Ryu Victory quotes
victory16 = "Really?!  You don't need to do the whole edgelord thing Ryu!"

; Evil Ken Victory quotes
victory17 = "Ugghh.  You need to snap out of it.  This whole Hot Topic version of you isn't that appealing."

;Chunli victory quotes
victory18 = "Are you sure you're the strongest woman in the world?  You know She Hulk is a thing right?"
victory19 = "The thickness of your legs has been greatly overhyped to me."
victory20 = "I'm probably the only one you'll run into that doesn't think your legs are enormous."

; Thunder Thighs Lucario Victory quotes
victory21 = "Maybe we should team up some day.  Thunder thighs should stick together."
victory22 = "Indulging on Poffins/beans is the way to go.  Thats a good look for you."

; Toriel Victory quotes
victory23 = "You got a motherly aura about you, Ms. Goat lady.  It was a pleasure to meet you."
victory24 = "I really hope this doesn't mean I can't have that butterscotch-cinnamon pie of yours."

; Jiggly Bunny
victory25 = "Woah now!  There can't be 2 of us.  I wanna be known as 'Jiggly Bunny' not just 'A Jiggly Bunny'"
victory26 = "It was like fighting a mirror.  An incredibly cute, sexy & wide mirror."

;vs Bertha Hippo
victory27 = "Thanks for the lessons coach!  I guess they are working pretty well huh?"
victory28 = "Your weighty techniques are working well with my speed.  Thanks for teaching me."
victory29 = "We should eat after this, I'm not covering your bill of course."

;vs Katrina Crocodile
victory30 = "All those bite attacks, please don't take my sweet ass so literally."
victory31 = "Your hide is so thick and rough, it must be nice to have that extra HP."
victory32 = "I hope you don't get rude stares with that figure, I know how that is."

;vs Enorma Pig
victory33 = "I guess your guns don't help you if I'm in your face constantly do they."
victory34 = "Ha, like I'm actually gonna give you a chance to reload. Get serious."
victory35 = "Its a shame you don't use more melee techniques I could of learned from you."

;vs Aroma Skunk
victory36 = "Really!?  I thought you didn't gas your friends!  That's dirty Aroma."
victory37 = "Yeah your gas stinks but this ass does way more direct damage than yours."
victory38 = "Your gas can control space but if I'm your face you'll never get a chance to use it."

;vs Lardo Rat
victory39 = "Eh, fear of being eaten by my opponent is something I'm over."
victory40 = "So you eat cats huh?  Well not fighting like that you won't."
victory41 = "With your size and look I thought you would be more threatening."

;vs Zafta Giraffe
victory42 = "All that range must be really convenient."
victory43 = "You're range is like triple my height.  But I can still get in on you."
victory44 = "You got some nice taste in shorts."

;vs Makuyama
victory45 = "I just beat a bear, you should really be humbled."
victory46 = "Wow, I don't even have to fear ursines anymore."
victory47 = "You're damage is scary, but you can't keep up with me."

;vs Pastilla Skunk
victory48 = "I don't care how deadly your poisons are.  Mess with me again and you'll get a swift several hundred-pound ass to the face."
victory49 = "Wow, look at all this junk you threw at me.  Sure was effective at stopping me from decking you."
victory50 = "You're gassing techniques go too far at times.  I do not appreciate being shrunken down and poisoned!"

;Vs Jumba Elephant, fellow fast big girl, Taught by Bertha who has beef with her.
Victory51 = "Wow you're a gigantic sexy elephant that can do ninja stuff!  That's so cool!!!  When you get back up can you tell me who taught you I wanna give it a shot as well?"
Victory52 = "You and Bertha should get past your grudges.  You two would be incredible on the same team."
Victory53 = "Let me guess, everyone told you that it was silly to be a ninja as an elephant and you did it anyway.  Please keep going with it."

;Vs Twiggi Bunny, fellow rabbit.  Nice to each other
victory54 = "Your long range is not gonna keep me out."
victory55 = "Oh that cursed form of yours isn't too bad.  You do get those stretchy powers."
victory56 = "If you can't gain weight via magic or transformation have you considered the old fashioned way.  Since I could help with that route." 

;Vs Ra Lord
Victory57 = "Don't think we are free just because you're a snake."
Victory58 = "I bet you didn't expect a bunny to be as fast as me did you?"
Victory59 = "Oh my, am I too fast and heavy for you? I'll make sure to go faster and be heavier next time."

;Vs Violet Bunny, Violet slept with her boyfriend years ago.  Bitter but still befriended
Victory60 = "Thank you for doing my outfit for me.  I love how form fitting it is and that it actually fits."
Victory61 = "You slept with my boyfriend on my worst day years ago!  So that beating I gave feels really good."
victory62 = "It's still hard to not be mad at you." 

;vs Battu, Guest character.
Victory63 = "I already know about cute things being deceptively dangerous."
victory64 = "You're such an adorable space rodent, but I won't let my guard down."
victory65 = "I wish I could do that size trick.  I'd crush all my Ex's if I could."

;vs Julian, Gay Hippo Model
Victory66 = "Hey, I've seen you a few times.  You were in a few ads I saw when looking for clothes."
victory67 = "You're just as handsome in person.  But wow you can't fight at all."
victory68 = "I've been trained by a badass hippo.  I'm not really scared of other hippos anymore."

;Vs Rapid, Pay  back for cheating
victory69 = "Ha ha, I wanted to do that for a while.  The irony is that I learned how to defend myself with a really pervy style, so you probably enjoyed it somewhat."
victory70 = "I don't care how many years ago it was!  You hurt me on your own free will and never truely made amends for it."
Victory71 = "Violet and I are cool, but its gonna be a long while before I could ever forgive you."

;vs Noah, cute shark boi
victory72 = "I don't know where you came from but I love how your rocking that outfit."
victory73 = "I can dodge arrows so you may wanna learn to evade my ass flying toward your face?"
victory74 = "Those dogs are so handy as back up, but in the future I'll make sure to dodge them and just sit on the funny fish guy."

;vs Akai, femboi speedster red panda
victory75 = "Since I won you clearly have to change your color scheme.  No wearing Yellow for you."
victory76 = "Its crazy that your moobs are bigger than my chest.  "
victory77 = "I didn't expect you to be faster than me, but you don't use speed as well as I do."

;vs Andy
victory78 = "Not even a fancy suit of armor can stop my bunns."
victory79 = "That huge heavy shield didn't stop me from finding my openings."
victory80 = "I didn't expect my butt to do damage to such durable armor.  But it looks like my training paid off."

;Vs Montana
Victory81 = "You may think flight gives you a huge advantage but I've fought birds you know."
victory82 = "Its so cool to see more big girls use what they got in battle."
victory83 = "You can stink almost as bad as my roommate."

;vs Texas
Victory84 = "You sure have plenty of experience against my ass attacks.  What have bunnies did to you in Gold Springs?"
victory85 = "You're a pretty brave sheriff to be fighting all those big bodies solo.  But I'd stay away from T.A.W. if I were you."
Victory86 = "I think I remember you not handling my Gattling Bunn so well last time."
  
;Alternate language victory quotes (optional).
;0 or more alternate language sections may be added, preceded by the
;ISO 639-1 code followed by a ".", e.g. "[ja.Quotes]".
;See language setting in mugen.cfg.
[ja.Quotes]
victory1 = "カンフー突き手を破らぬ限り、お前に勝ち目はない！"
victory2 = "十年早いんだぞ"
victory3 = "お前は見覚えがあるな。テレビにでも…？"
victory4 = "お前の動きは見破りやすすぎる。　なに、カンフー突き手が覚えたいんだと？　素人には無理だぞ"
victory5 = "ふー。　いい汗だった"
victory6 = "もっと強い相手に挑戦したい"
victory7 = "なんだと！彼女はここにもいないと？"

;---------------------------------------------------------------------------
; Variable usage:
; This is a record of the variables that KFM uses. Keeping a record of your
; variable usage helps you avoid careless mistakes later.
; var(1)  - Used in kfm.cmd for combo condition (updated every tick)
; var(2)  - Used in Kung Fu Throw (state 800) to remember if fwd was being
;           held (remembered from state 800 through state 810).
; var(4) - Jump counter
; var(5) - EX counters

;var (6) - flip kick counter
;var (7) - Wall kick limiter
;var (8) - ground bounce limiter
;var (9) - Weight damage magnifier scan
;var (10) - weight based damage locked in
;var (11) - Launcher limiter
;var(15) - Facing variable
;var (16) - Air Throw Damage
;var (21) - Gatling Bunn counter
;var (22) - Gatling Bunn loop check
;var (26) - gatling bunn distance set
;var (24) - dive butt set
;var (29) - Jump infinite check
;var (35) - buttdrop for ai
;var(36) - Long Jump check
;fvar(10) - Combo damage dampener
;var(18) - Combo damage counter
;var(45) - Run check


;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S
physics = N

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181



;---------------------------------------------------------------------------
; Win pose 1 - Jump for Joy
; CNS difficulty: basic
[Statedef 181]
type = S
physics = N
ctrl = 0
velset = 0,0

[state 181, anim]
type = changeanim
trigger1 = anim != 181
value = 181

[state 180, 2]
type = posadd
trigger1 = animelem = 5
y = -5

[state 180, 2]
type = posadd
trigger1 = animelem = 6
y = -0.5

[state 180, 2]
type = posadd
trigger1 = animelem = 7
y = 3

[state 180, 2]
type = posset
trigger1 = animelem = 8
y = 0

[state 18x, Win snd announce]
type = playsnd
triggerall = teammode = Single
trigger1 = time = 20
trigger1 = life != lifemax
value = S180,1
channel = 1
persistent = 0

[state 18x, Win snd announce]
type = playsnd
triggerall = teammode = Single
trigger1 = time = 20
trigger1 = life = lifemax
value = S180,1
channel = 1
persistent = 0

[State 180, 4]
type = EnvShake
trigger1 = animelem = 8
time = 15
ampl = 4
freq = 100
phase = 100


;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[state 191, version]
type = explod
trigger1 = time = 0
anim = ifelse(facing = -1,9101,9100)
scale = 1,1
postype = Back
pos = ifelse(facing =1, 20, 157),360 ; Nice!
ontop = 1

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[state 195, 1]
type = poweradd
trigger1 = time = 1
value = 100

[state 195, 1]
type = poweradd
trigger1 = time = 55
value = 400

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Stand Light Punch
; CNS difficulty: easy
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 200                       ;Change animation (Def: no change)
poweradd = 6                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 10, 0                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 2, Hit                
pausetime = 4, 4                
guard.pausetime = 6,6
guard.hittime = 7
sparkno = 0                     
sparkxy = 0, -250              
hitsound = S0, 4                 
guardsound = S120, 0                
ground.type = High             
ground.slidetime = 12           
ground.hittime  = 12            
ground.velocity = -6            
airguard.velocity = -4,-1     
air.type = High                 
air.velocity = -4,-2         
air.hittime = 15 
guard.velocity = -12            
guard.hittime = 10
guard.slidetime = 10  
guard.dist = 280
ground.cornerpush.veloff = -6 
guard.cornerpush.veloff = -12     
fall.recovertime = 30      

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 200,  Not active]
trigger1 = animelemtime(4) = 0
type = statetypeset
movetype = I


[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Punch 2nd Hit
[Statedef 201]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 201                       ;Change animation (Def: no change)
poweradd = 6                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 201, 2]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 201, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 10, 0                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 2, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 4, 4                ;Time attacker pauses, time opponent shakes
guard.pausetime = 6,6
guard.hittime = 5
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = 0, -250                ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S0, 4                  ;Sound to play on hit
guardsound = S120, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 12             ;Time that the opponent slides back
ground.hittime  = 12             ;Time opponent is in hit state
ground.velocity = -8             
airguard.velocity = -4,-1     
air.type = High                  
air.velocity = -4,-2           
air.hittime = 15     
guard.velocity = -12         
guard.hittime = 10
guard.slidetime = 10
guard.dist = 280
ground.cornerpush.veloff = -6 
guard.cornerpush.veloff = -10
fall.recovertime = 30

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 200,  Not active]
trigger1 = animelemtime(4) = 0
type = statetypeset
movetype = I

[State 201, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Standing strong punch
; CNS difficulty: easy
; Note the width controller. It makes KFM's push box larger, so he doesn't
; stand so close to the opponent. Hit Ctrl-C and look at the red bar at his
; feet.
; The sprpriority for this state is at -1, instead of the usual 2 for
; attacks. This makes KFM appear behind the opponent initially.
; The SprPriority controller in [State 210, 4] brings KFM to the front when
; his arm has swung over.
; To stop KFM from pausing in his swing frame, there is a ChangeAnim in
; [State 210, 3] that detects if the hit has come in contact with the
; opponent during that frame, and switches to the next animation element
; (notice the elem=6 parameter). If you don't see what I mean, try commenting
; out that controller, then hit someone with this attack.
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 35
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 2

[State 210, 1]
type = PlaySnd
trigger1 = animelemTime(3) = 0
value = 0, 2

[state 210, width]
type = width
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
value = 40,0
ignorehitpause = 1

[state 210, width]
type = width
trigger1 = animelemtime(5) >= 0 && animelemtime(8) < 0
value = 50,0
ignorehitpause = 1

[state 210, width]
type = width
trigger1 = animelemtime(8) >= 0 && animelemtime(10) < 0
value = 70,0
ignorehitpause = 1

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = hard
damage    = 50
guardflag = MA
pausetime = 10,10
sparkno = 2
sparkxy = -100,-280
hitsound   = S0,4
guardsound = S120, 0
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -24
air.velocity = -10,-4
guard.velocity = -30           
guard.hittime = 16
guard.slidetime = 16
guard.dist = 360
fall.recovertime = 30
ground.cornerpush.veloff = -36
guard.cornerpush.veloff = -36

[state 210, 3]
type = velset
trigger1 = animelem = 4
x = 40
persistent = 0

[State 210, shake]
type = EnvShake
trigger1 = animelem = 9
time = 15
ampl = 2
freq = 100
phase = 100
persistent = 0

[state 210, sfx]
type = playsnd
trigger1 = animelem = 9
value = 40, 0
persistent = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 210,  Not active]
trigger1 = animelemtime(6) = 0
type = statetypeset
movetype = I

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick
; CNS difficulty: easy
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 7
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 230, 2]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype  = Medium
damage    = 15
guardflag = MA
pausetime = 6,6
sparkno = 0
sparkxy = -40,-200
hitsound   = S0,6
guardsound = S120, 0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -6
air.velocity = -2.5,-3.5
guard.velocity = -14              
guard.hittime = 11
guard.slidetime = 11
guard.dist = 360
ground.cornerpush.veloff = -6 
guard.cornerpush.veloff = -10
fall.recovertime = 30

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 230,  Not active]
trigger1 = animelemtime(3) = 0
type = statetypeset
movetype = I

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick 2nd hit
; CNS difficulty: easy
[Statedef 231]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 7
ctrl = 0
velset = 0,0
anim = 231
sprpriority = 2

[State 231, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 0

[State 231, 2]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype  = Heavy
damage    = 15
guardflag = MA
pausetime = 6,6
sparkno = 0
sparkxy = -40,-230
hitsound   = S0,6
guardsound = S120, 0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -7
air.velocity = -12.5,-3.5
guard.velocity = -14              
guard.hittime = 10
guard.slidetime = 10
guard.dist = 360
ground.cornerpush.veloff = -6 
guard.cornerpush.veloff = -10
fall.recovertime = 30

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 231,  Not active]
trigger1 = animelemtime(3) = 0
type = statetypeset
movetype = I


[State 231, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong kick
; CNS difficulty: easy
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 35
ctrl = 0
anim = 240
sprpriority = 2

[state 240, velset]
type = velset
trigger1 = time = 0
trigger1 = prevstateno != 100
x = 0
y = 0

[state 440, width]
type = width
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
value = 60,0
ignorehitpause = 1

[state 440, width]
type = width
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
value = 80,0
ignorehitpause = 1

[state 440, width]
type = width
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
value = 80,0
ignorehitpause = 1

[state 440, width]
type = width
trigger1 = animelemtime(7) >= 0 && animelemtime(8) < 0
value = 110,0
ignorehitpause = 1

[state 440, width]
type = width
trigger1 = animelemtime(8) >= 0 
value = 80,0
ignorehitpause = 1

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Heavy
damage    = 60
guardflag = MA
pausetime = 12,12
sparkno = 2
sparkxy = -100,-270
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -36
air.velocity = -13,-5
guard.velocity = -30             
guard.hittime = 15
guard.slidetime = 15
id = 240
guard.dist = 640
fall.recovertime = 30
ground.cornerpush.veloff = -72
guard.cornerpush.veloff = -81


[State 240, shake]
type = EnvShake
trigger1 = animelem = 7
time = 15
ampl = 2
freq = 100
phase = 100
persistent = 0

[state 240, sfx]
type = playsnd
trigger1 = animelem = 7
value = 40, 0
persistent = 0

[State 240, 3]
type = veladd
trigger1 = AnimElem = 4
trigger1 = !movecontact
x = 50

[state 240, movement]
type = velset
trigger1 = movecontact
x = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 240,  Not active]
trigger1 = animelemtime(6) = 0
type = statetypeset
movetype = I

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Jab
[Statedef 400]
type    = C
movetype= A
physics = C
poweradd= 12
juggle = 1
ctrl = 0
velset = 0,0
anim = 400
sprpriority = 2

[State 400, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = 1
persistent = 0
attr = C, NA
animtype  = light
damage    = 20
guardflag = MA
pausetime = 7,7
sparkno = 0
sparkxy = -100,-185
hitsound   = S0,6
guardsound = S120, 0
ground.type = Low
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = -8
air.velocity = -12.5,-3.5
guard.velocity = -12             
guard.hittime = 12
guard.slidetime = 12
guard.dist = 360
fall.recovertime = 30

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 400,  Not active]
trigger1 = animelemtime(4) = 0
type = statetypeset
movetype = I

[State 400, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
; Crouching Fierce 
[Statedef 410]
type    = C
movetype= A
physics = C
ctrl = 0
velset = 0,0

[State 410, 3]
type = ChangeState
trigger1 = var(11) > 0
value = 411

[state 410, 4]
type = changestate
trigger1 = var(11) <= 0
value = 412 


;---------------------------------------------------------------------------
; Crouching Fierce - Launcher
[Statedef 411]
type    = C
movetype= A
physics = C
poweradd= 40
juggle = 5
ctrl = 0
velset = 0,0
anim = 410
sprpriority = 2

[State 411, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 0

[State 411, 2]
type = HitDef
trigger1 = 1
persistent = 0
attr = C, NA
animtype  = up
damage    = ifelse(prevstateno=210,20,65)
guardflag = MA
pausetime = 18,18
sparkno = 3
sparkxy = -20,-300
hitsound   = 5,4
guardsound = S120, 0
ground.type = high
ground.slidetime = 2
ground.hittime  = 42
air.hittime = 42
ground.velocity = -2,-47
air.velocity = -2,-42
guard.velocity = -27             
guard.hittime = 12
guard.slidetime = 12
airguard.hittime = 18
airguard.velocity = -8,-12
guard.dist = 360
ground.cornerpush.veloff = -20
guard.cornerpush.veloff = -24
fall.recovertime = 45

[state 411, move]
type = velset
trigger1 = animelem = 3
x = 45
persistent = 0

[state 411, launcher limiter]
type = varadd
trigger1 = movehit
v = 11
value = -1

[state 411, jump out]
type = changestate
trigger1 = command = "holdup"
triggerall = movehit
trigger2 = ailevel > 0
value = 42
ctrl = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -4
persistent = 0
ignorehitpause = 1

[state 411,  Not active]
trigger1 = animelemtime(6) = 0
type = statetypeset
movetype = I

[State 411, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching Fierce - Ender to prevent infinites
[Statedef 412]
type    = C
movetype= A
physics = C
poweradd= 40
juggle = 5
ctrl = 0
velset = 0,0
anim = 410
sprpriority = 2

[State 412, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 0

[State 412, 2]
type = HitDef
trigger1 = 1
persistent = 0
attr = C, NA
animtype  = up
damage    = 55
guardflag = MA
pausetime = 10,10
sparkno = 2
sparkxy = -20,-300
hitsound   = S5000,2
guardsound = S120, 0
ground.type = high
ground.slidetime = 2
ground.hittime  = 42
air.hittime = 42
ground.velocity = -5,-4
air.velocity = -5,-4
guard.velocity = -16             
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -6,-6
ground.cornerpush.veloff = -20
guard.cornerpush.veloff = -24
fall = 1
guard.dist = 360
fall.recovertime = 45

[state 412, move]
type = velset
trigger1 = animelem = 3
x = 20
persistent = 0

[state 412, launcher limiter]
type = varadd
trigger1 = movehit
v = 11
value = -1

[state 412, jump out]
type = changestate
triggerall = movehit
trigger1 = command = "holdup"
value = 42
ctrl = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 412,  Not active]
trigger1 = animelemtime(6) = 0
type = statetypeset
movetype = I

[State 412, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;----------------------------------------------------------------------------------

;Crouching shorts
[Statedef 430]
type    = C
movetype= A
physics = C
poweradd= 14
ctrl = 0
juggle = 1
velset = 0,0
anim = 430
sprpriority = 2

[State 430, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 0

[State 430, 2]
type = HitDef
trigger1 = time > 0
persistent = 0
attr = C, NA
animtype  = light
damage    = 22
guardflag = LA
hitflag = MA
pausetime = 7,7
sparkno = 0
sparkxy = 100,-150
hitsound   = S0,6
guardsound = S120, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -8
air.velocity = -12.5,-3.5
guard.velocity = -12            
guard.hittime = 12
guard.slidetime = 12
guard.dist = 360
fall.recovertime = 30

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 430,  Not active]
trigger1 = animelemtime(3) = 0
type = statetypeset
movetype = I

[State 400, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------

;Crouching roundhouse
[Statedef 440]
type    = C
movetype= A
physics = C
poweradd= 40
juggle = 15
ctrl = 0
velset = 0,0
anim = 440
sprpriority = -2

[state 440, projectile immunity]
type = nothitby
trigger1 = animelemtime(2) >= 0 && animelemtime(7) < 0
value = ,AP
ignorehitpause = 1

[state 440, width]
type = width
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
value = 60,0
ignorehitpause = 1

[state 440, width]
type = width
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
value = 90,0
ignorehitpause = 1

[state 440, width]
type = width
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
value = 75,0
ignorehitpause = 1

[state 440, sprpriority]
type = sprpriority
trigger1 = animelemtime(5) = 0
value = 2


[State 440, 2]
type = HitDef
trigger1 = 1
persistent = 0
attr = C, NA
animtype  = heavy
damage    = ifelse(p2statetype = A, 35, 70)
hitflag = MAFD
guardflag = L
pausetime = 10,10
sparkno = 2
nochainid = 1400
sparkxy = -40,-85
hitsound   = S5000,2
guardsound = S120, 0
fall = 1
p1sprpriority = -2
fall.recover = 0
ground.type = trip
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -5, -18
air.velocity = -5, -14
guard.velocity = -36             
guard.hittime = 13   ;-13
guard.slidetime = 13
guard.dist = 640
fall.recovertime = 30

[state 440, slide]
type = veladd
trigger1 = animelem = 3
x = 60

[State 440,Dust]
type = MakeDust
trigger1 = animelem = 3 || animelem = 4 || animelem = 5
pos = -45, 0
spacing = 2

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 440,  Not active]
trigger1 = animelemtime(5) = 0
type = statetypeset
movetype = I

[State 440, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 10
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 15
guardflag = HA
priority = 3
pausetime = 6,6
sparkno = 0
sparkxy = -10,-80
hitsound   = S5000,0
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -4
air.velocity = -4,-9
air.hittime = 16
guard.velocity = -6            
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -5,-3
airguard.hittime = 14
guard.dist = 480
fall.recovertime = 30

[State 600, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 600,  Not active]
trigger1 = animelemtime(4) = 0
type = statetypeset
movetype = I

[state 600, 3]
type = changestate
trigger1 = animtime = 0
value = 50 ;605
;--------------------------------------------------------------------------------------------------
;Jump Medium Punch
; CNS difficulty: easy
[Statedef 601]
type    = A
movetype= A
physics = A
poweradd= 25
ctrl = 0
anim = 601
sprpriority = 2

[State 601, 1]
type = PlaySnd
trigger1 = time = 1
value = S0, 0

[state 630, velset]
type = velset
trigger1 = movecontact
y = -10
persistent = 0
ignorehitpause = 1

[State 630, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 30
guardflag = HA
priority = 5
pausetime = 8,8
guard.pausetime = 8,6
guard.hittime = 8
sparkno = 1
sparkxy = -20,-280
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -8
air.velocity = -8,-8
air.hittime = 18
guard.velocity = -9           
guard.hittime = 17
guard.slidetime = 17
airguard.velocity = -8,-4
airguard.hittime = 18
guard.dist = 480
fall.recovertime = 30

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 601,  Not active]
trigger1 = animelemtime(4) = 0
type = statetypeset
movetype = I

[state 630, 3]
type = changestate
trigger1 = animtime = 0
value = 50

;--------------------------------------------------------------------------------------------------
;Jump Strong Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
poweradd= 30
ctrl = 0
sprpriority = 2

[state 610, 1]
type = changeanim
trigger1 = anim != 610
value = 610

[STATE 610, combo reduction]
type = varadd
trigger1 = prevstateno = 1050 || prevstateno = 1060 || prevstateno = 1070
v = 18
value = -36
persistent = 0

[state 610, 3]
type = changestate
trigger1 = animtime = 0
trigger1 = command != "holdy"
trigger2 = (prevstateno = 1050) || (prevstateno = 1060)|| (prevstateno = 1070)
trigger2 = animtime = 0
value = 611

[state 610, 4]
type = changestate
trigger1 = animtime = 0
trigger1 = command = "holdy"
value = 612

;---------------------------------------------------------------------------
;Jumping Fierce tap
[Statedef 611]
type    = A
movetype= A
physics = A
ctrl = 0
sprpriority = 2

[state 611, anim]
type = changeanim
trigger1 = anim != 611
value = 611

[State 611, 2]
type = PlaySnd
trigger1 = Time = 8
value = S0, 2

[state 611, jump combo infinite check]
type = varadd
triggerall = numenemy
trigger1 = movehit = 1
trigger1 = enemy,statetype != A
v = 29
value = 1
ignorehitpause = 1
persistent = 0

[State 611, 3]
type = HitDef
triggerall = var(8) > 1
trigger1 = Time = 0
persistent = 0
attr = A, NA
damage = 60
guardflag = HA
Hitflag = MAF
priority = 4,hit
pausetime = 10,10
sparkno = 2
sparkxy = -20,-230
hitsound   = S5000,2
guardsound = S120, 0
animtype = heavy
ground.type = High
ground.slidetime = 24
ground.hittime  = floor(24/var(29))
ground.velocity = -12
air.velocity = -6, 40
guard.velocity = -14           
guard.hittime = 19
guard.slidetime = 19
airguard.velocity = -14,10
airguard.hittime = 17
air.fall = 1
guard.dist = 480
fall.recovertime = 30

[State 611, 3]
type = HitDef
triggerall = var(8) <= 1
trigger1 = Time = 0
persistent = 0
attr = A, NA
damage = 60
guardflag = HA
Hitflag = MAF
priority = 6,hit
pausetime = 10,10
guard.pausetime = 10,8
guard.hittime = 8
sparkno = 2
sparkxy = -20,-230
hitsound   = S5000,2
guardsound = S120, 0
animtype = heavy
ground.type = High
ground.slidetime = 24
ground.hittime  = floor(24/var(29))
ground.velocity = -12
air.velocity = -12, 40
air.fall = 1
guard.velocity = -14           
guard.hittime = 19
guard.slidetime = 19
airguard.velocity = -12,10
airguard.hittime = 17
guard.dist = 480
fall.recovertime = 30

[state 611, targetstate]
type = targetstate
triggerall = var(8) > 0
triggerall = numenemy
trigger1 = enemynear,statetype = A
trigger1 = movehit
value = 614
ignorehitpause = 1
persistent = 0

[state 611, butt drop A.I.]
type = varset
trigger1 = movehit
var(35) = 1
ignorehitpause = 1

[state 612, limiter]
type = varadd
trigger1 = movehit
trigger1 = p2statetype = A
var(8) = -1
ignorehitpause = 1
persistent = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 611,  Not active]
trigger1 = animelemtime(4) = 0
type = statetypeset
movetype = I


[state 611, 3]
type = changestate
trigger1 = animtime = 0
value = 50


;---------------------------------------------------------------------------
;Jumping Fierce Hold
[Statedef 612]
type    = A
movetype= A
physics = A
ctrl = 0
sprpriority = 2

[state 612, anim]
type = changeanim
trigger1 = anim != 612
value = 612

[State 612, 2]
type = PlaySnd
trigger1 = Time = 8
value = S0, 2

[state 612, jump combo infinite check]
type = varadd
trigger1 = movehit = 1
triggerall = numenemy
trigger1 = enemy,statetype != A
v = 29
value = 1
ignorehitpause = 1
persistent = 0

[State 612, 3]
type = HitDef
triggerall = var(8) > 0
trigger1 = Time = 0
persistent = 0
attr = A, NA
Hitflag = MAF
damage = 80
guardflag = HA
priority = 4,hit
pausetime = 12,12
sparkno = 3
sparkxy = -20,-230
hitsound   = 5,4
guardsound = S120, 0
animtype = heavy
ground.type = High
ground.slidetime = 24
ground.hittime  = floor(24/var(29))
ground.velocity = 0, 40
air.velocity = -5, 60
guard.velocity = -16   
air.fall = 1        
guard.hittime = 22
guard.slidetime = 22
airguard.velocity = -16,10
airguard.hittime = 22
guard.dist = 480
fall.recovertime = 30

[State 612, 3]
type = HitDef
triggerall = var(8) <= 0
trigger1 = Time = 0
persistent = 0
attr = A, NA
Hitflag = MAF
damage = 80
guardflag = HA
priority = 4,hit
pausetime = 12,12
sparkno = 3
sparkxy = -20,-230
hitsound   = 5,4
guardsound = S120, 0
animtype = heavy
ground.type = High
ground.slidetime = 35
ground.hittime  = floor(35/var(29))
ground.velocity = 0, 40
air.velocity = -5, 60
air.fall = 1
guard.velocity = -16           
guard.hittime = 22
guard.slidetime = 22
airguard.velocity = -16,10
airguard.hittime = 22
guard.dist = 480
fall.recovertime = 30



[state 612, targetstate]
type = targetstate
trigger1 = movehit
trigger1 = var(8) > 0
trigger1 = hitpausetime = 11
value = 617
ignorehitpause = 1

[state 612, limiter]
type = varadd
trigger1 = movehit
var(8) = -1
ignorehitpause = 1
persistent = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 612,  Not active]
trigger1 = animelemtime(5) = 0
type = statetypeset
movetype = I


[state 612, 3]
type = changestate
trigger1 = animtime = 0
value = 50

;----------------------------------------------------------------------
;Small Ground Bounce - Freeze
[statedef 614]
type = A
movetype = H
physics = N

[State 614, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 614]
type = changeanim
trigger1 = time = 0
value = 5160
ignorehitpause = 1

[state 614, changestate]
type = changestate
trigger1 = hitshakeover
value = 615
;---------------------------------------------------------------------------
;Ground bounce - Going down
[statedef 615]
;Custom Hit state, ground bounce
type = A
movetype = H
physics = N


[state 615, velocity]
type = hitvelset
trigger1 = time = 0
y = gethitvar(yvel)
x = gethitvar(xvel)

[state 615, anim]
type = changeanim
trigger1 = time = 0
value = 5160

[state 615]
type = gravity
trigger1 = 1

[state 615, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 616

;-----------------------------------------------------------------------------
;Ground Bounce - Impact / bouncing
[statedef 616]
type = A
movetype = H
physics = N
anim = 5160

[state 616, impact]
type = velset
trigger1 = time = 0
y = 0

[State 616, 8]
type = Explod
trigger1 = Time = 0
anim = F62
postype = p1
pos = 0, 0
ontop = 1
scale = 1.7, 0.5
persistent = 0
ownpal = 1

[State 616, 10]
type = PlaySnd
trigger1 = Time = 0
value = F7,2
persistent = 0

[state 616, shake]
type = envshake
trigger1 = time = 0
ampl = 5
freq = 50
phase = 50
time = 10

[state 616, impact 2]
type = posset
trigger1 = time = 0
y = 0

[state 616, bounce]
type = velset
trigger1 = time = 1
y = -16

[state 616, gravity]
type = gravity
trigger1 = time > 1

[state 616, down]
type = selfstate
trigger1 = time >= 2 
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 5110
;---------------------------------------------------------------------------
;Hard Ground Bounce - Freeze
[statedef 617]
type = A
movetype = H
physics = N

[State 617, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 617]
type = changeanim
trigger1 = time = 0
value = 5160
ignorehitpause = 1

[state 617, changestate]
type = changestate
trigger1 = hitshakeover
value = 618


;---------------------------------------------------------------------------
;Hard Ground bounce - going down
[statedef 618]
;Custom Hit state, ground bounce
type = A
movetype = H
physics = N


[state 618, anim]
type = changeanim
trigger1 = time = 0
value = 5160

[state 618, velocity]
type = hitvelset
trigger1 = time = 0
y = gethitvar(yvel)
x = gethitvar(xvel)

[state 618]
type = veladd
trigger1 = 1
y = 1.22

[state 618, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 619

;-----------------------------------------------------------------------------
;Hard Ground Bounce - Impact/bounce
[statedef 619]
type = A
movetype = H
physics = N
anim = 5160

[state 619, impact]
type = velset
trigger1 = time = 0
y = 0

[State 619, 8]
type = Explod
trigger1 = Time = 0
anim = F62 
postype = p1
pos = 0, 0
ontop = 1
scale = 2, 1
persistent = 0
ownpal = 1

[State 619, 10]
type = PlaySnd
trigger1 = Time = 0
value = F7,2
persistent = 0

[state 619, shake]
type = envshake
trigger1 = time = 0
ampl = 5
freq = 50
phase = 50
time = 10

[state 619, impact 2]
type = posset
trigger1 = time = 0
y = 0

[state 619, bounce]
type = velset
trigger1 = time = 1
y = -30

[state 619, gravity]
type = veladd
trigger1 = time > 1
y = 1.22

[state 619, down]
type = selfstate
trigger1 = time >= 2 
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 5100


;---------------------------------------------------------------------------
;Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type    = A
movetype= A
physics = A
poweradd= 10
ctrl = 0
anim = 630
sprpriority = 2

[State 630, 1]
type = PlaySnd
trigger1 = time = 1
value = S0, 0

[State 630, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 20
guardflag = HA
priority = 3
pausetime = 6,6
sparkno = 0
sparkxy = -5,-50
hitsound   = S5000,0
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -5
air.velocity = -2,-11
air.hittime = 14
guard.velocity = -6          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -6,-4
airguard.hittime = 14
guard.dist = 360
fall.recovertime = 30

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 630,  Not active]
trigger1 = animelemtime(4) = 0
type = statetypeset
movetype = I

[state 630, 3]
type = changestate
trigger1 = animtime = 0
value = 50

;---------------------------------------------------------------------------
;Jump Medium Kick
; CNS difficulty: easy
[Statedef 631]
type    = A
movetype= A
physics = A
poweradd= 12
ctrl = 0
anim = 631
sprpriority = 2

[state 631, velset]
type = veladd
trigger1 = time = 7
x  = 0.5
ignorehitpause = 0

[State 630, 1]
type = PlaySnd
trigger1 = time = 1
value = S0, 0

[state 630, velset]
type = velset
trigger1 = movecontact
y = -8
persistent = 0
ignorehitpause = 1

[State 630, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 25
guardflag = HA
priority = 5
pausetime = 8,8
sparkno = 1
sparkxy = -20,-210
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -14
air.velocity = -4,-9
air.hittime = 28
guard.velocity = -16          
guard.hittime = 17
guard.slidetime = 17
airguard.velocity = -14,-6
airguard.hittime = 22
guard.dist = 360
fall.recovertime = 30

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -4
persistent = 0
ignorehitpause = 1

[state 631,  Not active]
trigger1 = animelemtime(6) = 0
type = statetypeset
movetype = I

[state 630, 3]
type = changestate
trigger1 = animtime = 0
value = 50

;---------------------------------------------------------------------------
;Jump Medium Kick 2nd hit
; CNS difficulty: easy
[Statedef 632]
type    = A
movetype= A
physics = A
poweradd= 13
ctrl = 0
anim = 632
sprpriority = 2

[state 632, velset]
type = veladd
trigger1 = time = 11
x  = 0.5

[State 632, 1]
type = PlaySnd
trigger1 = time = 1
value = S0, 0

[state 632, velset]
type = velset
trigger1 = movecontact
y = -8
persistent = 0
ignorehitpause = 1

[State 632, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 25
guardflag = HA
priority = 5
pausetime = 8,8
sparkno = 1
sparkxy = -20,-210
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -14
air.velocity = -4,-9
air.hittime = 32
guard.velocity = -16          
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = -14,-6
airguard.hittime = 22
guard.dist = 360
fall.recovertime = 30


[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -2
persistent = 0
ignorehitpause = 1

[state 632,  Not active]
trigger1 = animelemtime(4) = 0
type = statetypeset
movetype = I

[state 632, 3]
type = changestate
trigger1 = animtime = 0
value = 50
;-----------------------------------------------------------------------------------------------
;Dive Butt 
[Statedef 635]
type    = A
movetype= A
physics = N
poweradd= 80
ctrl = 0
juggle = 5
anim = 639
sprpriority = 2
facep2 = 1

[state 635, push]
type = playerpush
trigger1 = 1
value = 0

;MAX tripple jump height
[state -2, butt drop damage]
type = varSet
trigger1 = pos y < -1040
trigger1 = time = 0
var(9) = 160

;Above Super Jump
[state -2, butt drop damage]
type = varSet
trigger1 = pos y >= -1040 && pos y < -700
trigger1 = time = 0
var(9) = 160


;super jump peak
[state -2, drop damage]
type = varset
trigger1 = pos y >= -700 && pos y < -630
trigger1 = time = 0
var(9) = 140


;super jump any
[state -2, drop damage]
type = varset
trigger1 = pos y >= -630 && pos y < -455
trigger1 = time = 0
var(9) = 120


;normal jump peak
[state -2, drop damage]
type = varset
trigger1 = pos y >= -455 && pos y < -380
trigger1 = time = 0
var(9) = 100


;normal jump any
[state -2, drop damage]
type = varset
trigger1 = pos y >= -380 && pos y < -200
trigger1 = time = 0
var(9) = 80


;small hop
[state -2, drop damage]
type = varset
trigger1 = pos y >= -200 &&pos y < 0
trigger1 = time = 0
var(9) = 60


[state 635, sfx]
type = playsnd
trigger1 = time = 0
value = S1, 0



[state 638, after image]
type = null
trigger1 = animelemtime(3) = 0
time = 18
length = 8
timegap = 1
framegap = 4
palcolor = 256
palbright = 0,0,0
palcontrast = 256,256,256
trans = "none"

[state 635, freeze]
type = velset
trigger1 = time = 0
y = 0

[state 635, slow]
type = velmul
trigger1 = time = 0
x = 0.1

[State 635, 3]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 3 
attr = A, SA
damage  = 50
hitflag = MAFD
guardflag = HA
priority = 4
pausetime = 6,8
nochainid = 1400
guard.pausetime = 8,6
sparkno = 3
sparkxy = -10,-80
hitsound   = 5,4
guardsound = S120, 0
animtype = heavy
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -16,0
air.velocity = -2,-28
persistent = 0
guard.velocity = -16         
guard.hittime = 13
guard.slidetime = 13
airguard.velocity = -12,4
airguard.hittime = 20
down.velocity = ifelse(var(8) > 1, 0, -20),ifelse(var(8) > 1, -27, 0)
fall.animtype = up
envshake.ampl = ifelse(enemynear,statetype = L, -8, 0)
envshake.time = ifelse(enemynear,statetype = L, 12, 0)
guard.dist = 480
guard.kill = 0
fall = 0
air.hittime = 30
air.fall = 0
fall.recover = 1
fall.recovertime = 45
guard.kill = 0

[state 635, ground bounce limiter]
type = varadd
triggerall = numenemy
trigger1 = movehit
trigger1 = enemynear,statetype = L
var(8) = -1
ignorehitpause = 1

;[state 641, targetstate]
;type = targetstate
;trigger1 = movehit
;trigger1 = p2statetype != A
;value = 660


[state 635, forward movement]
type = velset
trigger1 = animelemtime(3) = 0
persistent = 0
x = 18

[state 635, aim]
type = veladd
triggerall = animelemtime(3) >= 0
trigger1 = command = "holdfwd"
trigger1 = ailevel = 0
trigger2 = p2bodydist x > 50
trigger2 = ailevel > 0
x = 0.75
persistent = 1

[state 635, aim]
type = veladd
triggerall = animelemtime(3) >= 0
trigger1 = command = "holdback"
trigger1 = ailevel = 0
trigger2 = p2bodydist x < -50
trigger2 = ailevel > 0
x = -1.25
persistent = 1

[state 635, 3 X Gravity]
type = veladd
trigger1 = animelemtime(3) >= 0
y = 4.5

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[State 635, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > 80
value = 636
ctrl = 0




;---------------------------------------------------------------------------
;Butt Drop Bounce
[Statedef 636]
type    = C
movetype= I
physics = N
ctrl = 0
movehitpersist = 1

[state 636, anim]
type = changeanim
trigger1 = time = 0
value = 643 

[state 636, sfx]
type = playsnd
trigger1 = time = 0
value = S0,5

[state 636, push]
type = playerpush
trigger1 = 1
value = 0

[state 633, ctrlset]
type = ctrlset
trigger1 = time = 3
trigger1 = movehit
value = 1

[state 6636, on ground]
type = posset
trigger1 = time = 0
y = 0

[state 636, on ground]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 636, fx]
type = explod
trigger1 = time = 0
anim = F61
postype = p1
pos = 0,0
scale = 5,2
ownpal = 1

[State 636, quakes]
type = envshake
trigger1 = time = 0
time = 12
ampl = -4

[state 636, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;Jump Strong Kick
; CNS difficulty: easy
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 5
poweradd= 40
ctrl = 0
anim = 640
sprpriority = 2


;[state 640, playerpush]
;type = playerpush
;trigger1 = 1 
;value = 0

[state 640, sfx]
type = playsnd
trigger1 = time = 0
value = S1, 0

[state 640, jump combo infinite check]
type = varadd
triggerall = numenemy
trigger1 = movehit = 1
trigger1 = enemy,statetype != A
v = 29
value = 1
ignorehitpause = 1
persistent = 0

[State 640, 3]
type = HitDef
trigger1 = Time < 12
attr = A, NA
damage    = 10
hitflag = MAF
guardflag = HA
priority = 4
pausetime = 2,2
guard.pausetime = 2,2
guard.hittime = 6
sparkno = 2
sparkxy = -20,-125
hitsound   = S5000,2
guardsound = S120, 0
animtype = heavy
ground.type = High
ground.slidetime = 24
ground.hittime  = 8
ground.velocity = -2
air.velocity = -3,-4
persistent = 0
guard.velocity = -3         
guard.hittime = 10
guard.slidetime = 10
airguard.velocity = -4,-4
airguard.hittime = 8
guard.dist = 360
fall.recovertime = 30

[State 640, 3]
type = HitDef
trigger1 = animelem = 5 
attr = A, NA
damage    = 60
hitflag = MAF
guardflag = HA
priority = 4
pausetime = 10,10
sparkno = 2
sparkxy = -20,-80
hitsound   = S5000,2
guardsound = S120, 0
animtype = heavy
ground.type = High
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -7
air.velocity = -7,-4
persistent = 0
guard.velocity = -8          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = -8,-4
airguard.hittime = 22
guard.dist = 360
fall.recovertime = 30

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 230,  Not active]
trigger1 = animelemtime(6) = 0
type = statetypeset
movetype = I

[state 640, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
;buttland 2
[statedef 643]
type    = C
movetype= I
physics = C

[state 643, stop]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 643, on ground]
type = posset
trigger1 = time = 0
y = 0


[state 643, anim]
type = changeanim
trigger1 = anim != 642
value = 642

;[state 643, sfx]
;type = playsnd
;trigger1 = time = 0
;value = S1,1
;volume = 50


[state 643, push]
type = playerpush
trigger1 = 1
value = 1



[State 642, quakes]
type = envshake
trigger1 = time = 0
time = 8
ampl = -2
freq = 60
phase = 60

[state 643, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[statedef 644]
type = A
movetype = I
physics = S
velset = 0,0

[state 644, posset]
type = posset
trigger1 = 1
y = 0

[state 644, end]
type = changestate
trigger1 = 1
ctrl = 1
value = 0 
 


;--------------------------------------------------------------
;Air Launcher
[Statedef 645]
type    = A
movetype= A
physics = A
;juggle  = 5
poweradd= 45
ctrl = 0
anim = 645
sprpriority = 2


;[state 640, playerpush]
;type = playerpush
;trigger1 = 1 
;value = 0


[State 640, 3]
type = HitDef
trigger1 = 1
persistent = 0
attr = A, NA
damage    = 40
hitflag = MAF
guardflag = HA
priority = 4
pausetime = 18,18
guard.pausetime = 2,2
guard.hittime = 6
sparkno = 3
sparkxy = -20,-125
hitsound   = 5,4
guardsound = S120, 0
animtype = heavy
ground.type = High
ground.slidetime = 24
ground.hittime  = 24
air.hittime = 24
ground.velocity = -4,-24
air.velocity = -3,-26
persistent = 0
guard.velocity = -3         
guard.hittime = 5
guard.slidetime = 5
airguard.velocity = -4,-4
airguard.hittime = 8
guard.dist = 360
fall.recovertime = 45
forcenofall = 1


[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 645,  Not active]
trigger1 = animelemtime(5) = 0
type = statetypeset
movetype = I

[state 645, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Alternate Jump Strong Kick
; CNS difficulty: easy
[Statedef 646]
type    = A
movetype= A
physics = N
poweradd= 80
ctrl = 0
anim = 646
sprpriority = 2

[state 640, jump combo infinite check]
type = varadd
triggerall = numenemy
trigger1 = movehit = 1
trigger1 = enemy,statetype != A
v = 29
value = 1
ignorehitpause = 1
persistent = 0

[state 646, gravity]
type = gravity
trigger1 = 1

[state 640, playsnd]
type = playsnd
trigger1 = animelemtime(5) = 0
value = 646,0
ignorehitpause = 1
persistent = 0


[State 640, 3]
type = HitDef
trigger1 = 1
attr = A, NA
damage    = 16,2
hitflag = MAF
guardflag = HA
priority = 4
pausetime = 2,2
guard.pausetime = 2,2
guard.hittime = 18
sparkno = 2
sparkxy = 0,-230
hitsound   = F5,1;S1,3
guardsound = S120, 0
animtype = heavy
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -27
air.velocity = -7,-6
persistent = 3
guard.velocity = -12          
guard.hittime = 13
guard.slidetime = 13
airguard.velocity = -8,-4
airguard.hittime = 22
guard.dist = 360
guard.kill = 0

[state x, block bounce]
type = null;velmul
trigger1 = moveguarded
x = -0.25
persistent = 0

[state x, block bounce]
type = null;velset
trigger1 = moveguarded
y = -16
persistent = 0

[state x, changestate]
type = changestate
triggerall = !moveguarded
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

[state x, changestate]
type = changestate
triggerall = moveguarded
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 647

[state x, combo damage score]
type = varadd
trigger1 = movehit
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 646,  Not active]
trigger1 = animelemtime(14) = 0
type = statetypeset
movetype = I

[state 646, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1
;--------------------------------------------------------------------------
;light butt bump recovery
[statedef 647]
type = S
movetype = I
physics = S
anim = 647

[state 1002, fallstop]
type = velset
trigger1 = time = 0
y = 0

[state 1002, skid]
type = velmul
trigger1 = time = 0
x = 0.5

[State 1002, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = time < 12
postype = p1
anim = F120
pos = 30, 0
sprpriority = 3
persistent = 2

[State 1002, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = time < 12
postype = p1
anim = F120
pos = 154, 0
sprpriority = -2
persistent = 2

[State 1002, 4]
type = EnvShake
trigger1 = time = 0
time = 15
ampl = 4
freq = 100
phase = 100

[state 1002, pos set]
type = posset
trigger1 = 1
y = 0


[state 1001, changestate]
type = changestate
trigger1 = animtime = 0
value  = 0
ctrl = 1


;--------------------------------------------------------------------------

;Butt Drop
[Statedef 650]
type    = A
movetype= A
physics = N
poweradd= 80
ctrl = 0
anim = 650
sprpriority = 2
facep2 = 1

[state 650, push]
type = playerpush
trigger1 = 1
value = 0


[State X, Blink Yellow]
type = PalFX
trigger1 = time = 0
time = 8
add = 255,255,255 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause
persistent = 0

;MAX tripple jump height
[state -2, butt drop damage]
type = varSet
trigger1 = pos y < -1040
trigger1 = time = 0
var(9) = 180

;Above Super Jump
[state -2, butt drop damage]
type = varSet
trigger1 = pos y >= -1040 && pos y < -700
trigger1 = time = 0
var(9) = 160


;super jump peak
[state -2, drop damage]
type = varset
trigger1 = pos y >= -700 && pos y < -630
trigger1 = time = 0
var(9) = 160


;super jump any
[state -2, drop damage]
type = varset
trigger1 = pos y >= -630 && pos y < -455
trigger1 = time = 0
var(9) = 140


;normal jump peak
[state -2, drop damage]
type = varset
trigger1 = pos y >= -455 && pos y < -380
trigger1 = time = 0
var(9) = 120


;normal jump any
[state -2, drop damage]
type = varset
trigger1 = pos y >= -380 && pos y < -200
trigger1 = time = 0
var(9) = 100


;small hop
[state -2, drop damage]
type = varset
trigger1 = pos y >= -200 && pos y < 0
trigger1 = time = 0
var(9) = 80



[state 650, sfx]
type = playsnd
trigger1 = time = 0
value = S1, 0



[state 641, afterimage]
type = null
trigger1 = time = 0
;length = 1
time = 9
timegap = 1

[state 641, freeze]
type = velset
trigger1 = time = 0
y = 0

[state 641, slow]
type = velmul
trigger1 = time = 0
x = 0.1

[State 641, 3]
type = HitDef
trigger1 = animelem = 5  
attr = A, SA
damage  = floor(var(9)),ceil(var(9)*0.2)
hitflag = MAF
guardflag = HAF
priority = 4
pausetime = 14,14
guard.pausetime = 12,8
sparkno = 3
sparkxy = -10,-80
hitsound   = 5,4
guardsound = S120, 0
animtype = heavy
ground.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -16,-4
air.velocity = -10,8
persistent = 0
guard.velocity = -50    
guard.hittime = 35
guard.slidetime = 35
airguard.velocity = -12,4
airguard.hittime = 45
guard.dist = 480
fall = 1
fall.recover = 0

;--------------------------

[state 650, enemy state]
type = targetstate
triggerall = vel y > 0
triggerall = numenemy
trigger1 = movehit
trigger1 = enemy,statetype != A
value = 660

;Ride down mechanic
[state 650, Ride down]
type = targetbind
triggerall = numenemy
trigger1 = movehit
trigger1 = enemy,statetype = A
pos = 0, -20

[state 650, state of ride down]
type = targetstate
triggerall = numenemy
trigger1 = movehit
trigger1 = enemy,statetype = A
value = 655

;--------------------------------------

[state 641, forward movement]
type = velset
trigger1 = animelemtime(5) = 0
x = 18
persistent = 0

[state 641, aim]
type = veladd
triggerall = animelem = 5
trigger1 = command = "holdfwd"
trigger1 = ailevel = 0
trigger2 = p2bodydist x > 50
trigger2 = ailevel > 0
x = 0.75
persistent = 1

[state 641, aim]
type = veladd
triggerall = animelem = 5
trigger1 = command = "holdback"
trigger1 = ailevel = 0
trigger2 = p2bodydist x < -50
trigger2 = ailevel > 0
x = -1.25
persistent = 1

[state 641, grav]
type = gravity
trigger1 = animelemtime(5) >= 0

[state 641, grav]
type = gravity
trigger1 = animelemtime(5) >= 0

[state 641, grav]
type = gravity
trigger1 = animelemtime(5) >= 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[State 641, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 651
ctrl = 0



;---------------------------------------------------------------------------
;Butt Drop Bounce
[Statedef 651]
type    = C
movetype= A
physics = N
ctrl =0
movehitpersist = 1
sprpriority = -2

[state 651, explod]
type = explod
trigger1 = !numexplod(6510)
id = 6510
anim = 6510
postype  = p1
pos = 0,0
bindtime = -1
removeongethit = 1
removetime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ignorehitpause = 0

[state 651, anim]
type = changeanim
trigger1 = anim != 651
value = 651 

[state 651, sfx]
type = playsnd
trigger1 = time = 0
value = S650,0

[state 651, sfx]
type = playsnd
trigger1 = time = 0
value = S650,0

[state 651, sfx]
type = playsnd
trigger1 = time = 0
value = S650,0

[state 651, push]
type = playerpush
trigger1 = 1
value = 0

[state 651, on ground]
type = posset
trigger1 = time = 0
y = 0

[state 651, on ground]
type = velset
trigger1 = time = 0
y = 0

[state 651, on ground]
type = velmul
trigger1 = time = 0
x = 0.1

[state 651, fx]
type = explod
trigger1 = time = 0
anim = F61
postype = p1
pos = 0,0
scale = 5,2
ownpal = 1

[State 651, 3]
type = HitDef
trigger1 = !movecontact
persistent = 0
attr = C, SA
damage    = var(9) 
hitflag = FD
guardflag = MA 
getpower = 75
priority = 4
pausetime = 14,14
guard.pausetime = 14,14
guard.hittime = 14
sparkno = 3
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120, 0
animtype = back
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
air.velocity = 0,0
persistent = 0
p2stateno = 660

[state 651, bounce]
type = velset
trigger1 = time = 9
y = -18

[state 651, movetypeset]
type = statetypeset
trigger1 = time = 9
statetype = A


[State 651, quakes]
type = envshake
trigger1 = time = 0
time = 20
ampl = -16

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = 6
persistent = 0
ignorehitpause = 1

[state 651, grav]
type = gravity
trigger1 = time > 9

[state 651, end early]
type = changestate
triggerall = !movehit
trigger1 = vel y > 0
trigger1 = pos y > -vel y 
trigger1 = time > 9
value = 52

[state 651, end]
type = changestate
triggerall = movehit
trigger1 =  vel y > 0
trigger1 = pos y > -vel y
trigger1 = time > 9
value = 652
ctrl = 0

;---------------------------------------------------------------------------
;buttland 2
[statedef 652]
type    = C
movetype= I
physics = C
sprpriority = -2

[state 651, removeexplod]
type = removeexplod
trigger1 = time = 0
trigger2 = numexplod(6520)
id = 6510

[state 652, sfx]
type = playsnd
trigger1 = time = 0
value = S650,0


[state 651, explod]
type = explod
trigger1 = !numexplod(6520)
id = 6520
anim = 6520
postype  = p1
pos = 0,0
bindtime = -1
removeongethit = 1
removetime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ignorehitpause = 0

[state 652, stop]
type = velset
trigger1 = time = 0
x = 0
y = 0


[state 652, anim]
type = changeanim
trigger1 = anim != 652
value = 652

[state 652, push]
type = playerpush
trigger1 = 1
value = 0

[state 652, on ground]
type = posset
trigger1 = time = 0
y = 0

[State 652, quakes]
type = envshake
trigger1 = time = 0
time = 15
ampl = 10
freq = 100
phase = 100

[state 651, bounce]
type = velset
trigger1 = time = 9
y = -8

[state 651, statetypeset]
type = statetypeset
trigger1 = time = 9
statetype = A

[state 651, gravity]
type = gravity
trigger1 = time > 9

[state 651, end earlier]
type = changestate
trigger1 = time = 25
value = 50
ctrl = 1

[state 652, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos Y > -vel y 
trigger1 = time > 9
value = 52



;---------------------------------------------------------------------------
;Rode down
[statedef 655]
type = A
movetype = H
physics = N

[state 655, anim]
type = changeanim2
trigger1 = time = 0
value = 655

[State 655, 2]
type = changeState
trigger1 = !gethitvar(isbound)
value = 660


;---------------------------------------------------------------------------
;Empty jump 
[statedef 605]
type    = A
movetype= I
physics = A
ctrl = 1

[state 605, anim]
type = changeanim
trigger1 = time = 0
value = 44


;===========================================================================
;---------------------------Crushed State-----------------------------------
;===========================================================================
; Moderate Crushed State
[statedef 660]
type    = L
movetype= H
physics = N
ctrl = 0
velset = 0,0

[state 660, 1]
type = changeanim
trigger1 = time = 0
value = 5080

[state 660, 1]
type = changeanim
trigger1 = time = 4
value = 5110


[state 660, 1]
type = changeanim
trigger1 = time = 5
value = 5080

[state 660, 1]
type = changeanim
trigger1 = time = 9
value = 5110

[state 660, 1]
type = changeanim
trigger1 = time = 10
value = 5080

[state 660, 1]
type = changeanim
trigger1 = time = 14
value = 5110

[State 660, flatten]
type = AngleDraw
trigger1 = time > 0
value = 0
scale = 1.1,0.6

[state 660, on ground]
type = posset
trigger1 = 1
y = 0

[state 660, passthrough]
type = playerpush
trigger1 = 1
value = 0


[State 660, Width]
type = Width
trigger1 = time > 0
value = 0,0

[State 660, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[state 660, invunerable]
type = nothitby
trigger1 = 1
value = SCA,AA

[State 660, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 660, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 660, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 660, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 660, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 660, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 660, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 660, 11] ;If just died
type = selfState
triggerall = !alive && p2stateno = 0 && roundstate = 3
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

;[State 660, 12]
;type = VarSet
;trigger1 = SysVar(0)
;trigger1 = Time = 0
;sysvar(0) = 0

[State 660, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 660, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 660, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 660, get up]
type = selfstate
trigger1 = life >= 1
trigger1 = time > 86 ;95
value = 5120

[state 660, flat death]
type = changestate
trigger1 = !alive
trigger1 = time > 20
value = 5150

;===========================================================================
;      Wall Bounce State - Bring to Player
;===========================================================================
[statedef 670]
type = A
movetype = H
physics = N

[State 672, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 670]
type = changeanim
trigger1 = time = 0
value = 5030
ignorehitpause = 1

[state 670, changestate]
type = changestate
trigger1 = hitshakeover
value = 671
;------------------------------------------------------------------------

[statedef 671]
type    = A
movetype= H
physics = N

[state 671, anim]
type = changeanim
trigger1 = anim != 5030
value = 5030

[State 670, Velocity]
type = velset
trigger1 = Time = 0
x = facing * gethitvar(xvel)
y = gethitvar(yvel)

[State 670, Gravity]
type = veladd
trigger1 = 1
y = 0.44


;[State 670, No scroll]
;type = ScreenBound
;triggerall = Pos y < -15
;trigger1 = BackEdgeBodyDist < 65
;trigger2 = FrontEdgeBodyDist < 65
;value = 1
;movecamera = 0,1

[State 670, Hit wall]
type = ChangeState
triggerall = Pos y < 0
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 672

[State 670, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Hit wall - part 2 bounce off wall
[statedef 672]
type    = A
movetype= H
physics = N

[State 672, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 672, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 672, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 672, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 672, Spark]
type = Explod
trigger1 = Time = 1
anim = F72
pos = 0,const(size.mid.pos.y)
postype = back
sprpriority = 3
ownpal = 1

[state 672, anim]
type = changeanim
trigger1 = anim != 5030
value = 5030

[State 672, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,0

[State 672, State]
type = ChangeState
trigger1 = time = 10
value = 673
;--------------------------------------------------------------------------
;wall bounce - part 3 fall toward ground
[Statedef 673]
type    = A
movetype= H
physics = N

[State 673, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -35

[State 673, Vel X]
type = VelSet
trigger1 = Time = 0
x = abs(p2bodydist x*0.02)

[State 673, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[state 673, gravity]
type = gravity
trigger1 = 1

[State 673, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 673, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 673, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 673, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 673, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;===========================================================================
; Neutral Wall Bounce State
;===========================================================================

[statedef 675]
type = A
movetype = H
physics = N

[State 675, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 675, anim]
type = changeanim
trigger1 = time = 0
value = 5030
ignorehitpause = 1

[state 675, changestate]
type = changestate
trigger1 = hitshakeover
value = 676
;------------------------------------------------------------------------

[statedef 676]
type    = A
movetype= H
physics = N

[State 676, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[state 676, anim]
type = changeanim
trigger1 = time = 0
value = 5030

[State 676, Gravity]
type = gravity
trigger1 = 1

[State 676, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 676, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 677

[State 676, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Hit wall - part 2 bounce off wall
[statedef 677]
type    = A
movetype= H
physics = N

[State 677, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 677, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[STATE 677, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State 677, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 677, envshake]
type = envshake
trigger1 = time =0
ampl = -12
time = 12


[State 677, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 677, Spark]
type = Explod
trigger1 = Time = 1
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3
ownpal = 1

[State 677, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 5030

[State 677, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,0

[State 677, State]
type = ChangeState
trigger1 = time = 10
value = 678
;--------------------------------------------------------------------------
;wall bounce - part 3 fall toward ground
[Statedef 678]
type    = A
movetype= H
physics = N

[State 678, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 678, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -28

[State 678, Vel X]
type = VelSet
trigger1 = Time = 0
x = 6

[State 678, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[state 678, gravity]
type = gravity
trigger1 = 1

;[State 678, Gravity]
;type = VelAdd
;trigger1 = 1
;y = .35

[State 678, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 678, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 678, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 678, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 678, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Dodge Roll
[statedef 700]
type = S
movetype = I
physics = N
poweradd = 20
ctrl = 0

[State 700, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 23
length = 20
;palcolor = 256
;palinvertall = 0
;palbright = 30,30,30
;palcontrast = 120,120,220
;palpostbright = 0,0,0
paladd = 10,10,25
;palmul = .65,.65,.75
timegap = 1
framegap = 8
;trans = "add" ;"none","add1","sub"
;ignorehitpause = 
;persistent =


[state 700, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 700, poweradd]
type = poweradd
triggerall = numenemy
trigger1 = enemynear,hitdefattr = SCA,AA
trigger1 = time = 13
value = 125
persistent = 0

[state 700, hitby]
type = hitby
trigger1 = animtime < -6
value = SCA,AT

[state 700, hitby]
type = hitby
trigger1 = animtime >= -6  && animtime < -2
value = SCA, AA, AT

[state 700, hitby]
type = hitby
trigger1 = animtime >= -2
value = SCA, AA, AT, AP

[state 700, anim]
type = changeanim
trigger1 = time = 0
value = 1401

[state 700, velset]
type = velset
trigger1 = time = 0
x = 18


[state 700, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;Kung Fu Throw - Attempt
; CNS difficulty: medium-advanced
; Description: Throws are not difficult to make, although then can be
;     tedious at times. Throw attempt states have a HitDef of a
;     special format. The key parameters in a throw are p1stateno
;     and p2stateno. If the HitDef successfully connects, then
;     the attacker will change to the state number specified by
;     p1stateno, and the opponent will be change to the state
;     number assigned to p2stateno. The special thing about p2stateno
;     is that the opponent will be temporarily brought into the
;     attacker's state file. In this case, no matter who the
;     opponent is, he will be taken to state 820 of this file (kfm.cns)
;     and remain here until the end of the throw (look at his debug
;     information when he is being thrown; the text changes to yellow
;     to mean that he is in another player's state file).
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2


[State 800, 1]
type = HitDef
triggerall = p2movetype != A
Trigger1 = Time = 0
attr = S, NT          
hitflag = M-         
priority = 1, Miss    
sparkno = -1          
p1sprpriority = 1 
id = 800                          
p1facing = 1
p2facing = -1          
p1stateno = 810       
p2stateno = 820       
guard.dist = 0        
fall.recover = 0


[State 800, 1]
type = HitDef
triggerall = p2movetype = A
Trigger1 = Time = 0
attr = S, NT          
hitflag = M-         
priority = 1, Miss    
sparkno = -1          
p1sprpriority = 1 
id = 800                          
p1facing = 1
p2facing = -1          
p1stateno = 810       
p2stateno = 822       
guard.dist = 0        
fall.recover = 0    

[state 800,  Not active]
trigger1 = animelemtime(3) = 0
type = statetypeset
movetype = I 

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Grab Escape - p2
[statedef 805]
type = A
movetype = H
physics = S
ctrl = 0
facep2 = 1
sprpriority = 4

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = SelfAnimExist(805)
value = 805

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = !selfanimexist(805)
value = 120

;[state 1400, dim]
;type = bgpalfx
;trigger1 = time = 0
;time = 8
;mul = 200,200,200

;[state 805, freeze]
;type = pause
;trigger1 = time = 0
;time = 8
;endcmdbuftime = 8

;[state 805, sound]
;type = playsnd
;trigger1 = time = 0
;value = S805,0

[state 805, pos y]
type = posset
trigger1 = time = 0
y = 0

[state 805, velset]
type = velset
trigger1 = time = 10
x= -50

[state 805, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 805, end]
type = selfstate
trigger1 = time = 35
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Grab Escape - p1
[statedef 806]
type = A
movetype = H
physics = S
ctrl = 0

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = SelfAnimExist(130)
value = 130

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = !selfanimexist(805)
value = 130

[state 1400, dim]
type = bgpalfx
trigger1 = time = 0
time = 8
mul = 200,200,200

[state 805, freeze]
type = pause
trigger1 = time = 0
time = 12
endcmdbuftime = 8

[state 805, sound]
type = playsnd
trigger1 = time = 0
value = S805,0

[state 805, pos y]
type = posset
trigger1 = time = 0
y = 0

[state 805, turn]
type = turn
trigger1 = prevstateno = 820
trigger1 = time = 0
persistent = 0
ignorehitpause

[state 805, velset]
type = velset
trigger1 = time = 10
x= -50

[state 805, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 805, end]
type = selfstate
trigger1 = time = 35
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;Kung Fu Throw - Throwing the opponent

[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 100

[state 810, tech]
type = changestate
triggerall = numtarget
trigger1 = target(800),stateno = 805
value = 806
persistent = 1

[state 810, width]
type = width
trigger1 = 1
edge = 350,350

[State 810, Holding Direction?]
type = VarSet
trigger1 = Time = 0
var(2) = command = "holdfwd"


[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElemtime(1) >= 0 && Animelemtime(2) < 0
pos = 75, -225

[State 810, Bind 2]
type = TargetBind
trigger1= AnimElemtime(2) >= 0 && Animelemtime(3) < 0
pos = 75, -225

[State 810, holdfwd - Turn 6] ;If was holding fwd before, turn now
type = Turn
trigger1 = var(2)
trigger1 = AnimElem = 2

[State 810, holdfwd - Pos 6] ;If was holding fwd before, move a little
type = PosAdd
trigger1 = var(2)
trigger1 = AnimElemtime(2) = 6
x = -37

[State 810, holdfwd - Turn Target 6] ;If was holding fwd before, turn target too
type = TargetFacing
trigger1 = var(2)
trigger1 = AnimElemtime(2) = 6
value = 1




[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElemtime(3) >= 0 && Animelemtime(4) < 0
pos = 75, -225

[State 810, Bind 4]
type = TargetBind
trigger1 = AnimElemtime(4) >= 0 && Animelemtime(5) < 0
pos = 75, -225

[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElemtime(5) >= 0 && Animelemtime(6) < 0
pos = 50, -265

[State 810, Bind 6]
type = TargetBind
trigger1 = AnimElemtime(6) >= 0 && Animelemtime(7) < 0
pos = -175, -285

[State 810, Bind 7]
type = TargetBind
trigger1 = AnimElemtime(7) >= 0 
pos = -310, -65

[state 810, explod]
type = explod
trigger1 = animelem = 7
anim = F61
scale = 2,1
postype = p1
pos = -310, 0
ownpal = 1


[state 810, snd]
type = playsnd
trigger1 = animelem = 7
persistent = 0
value = F7,2

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 7
value = -110

[state 810, poweradd]
type = poweradd
trigger1 = animelem = 7
value = 200
persistent = 0

[State 810, 7 quake]
type = EnvShake
trigger1 = animelem = 7
persistent = 0
time = 30
ampl = -20
freq = 100
phase = 20

[State 810, Throw 11]
type = TargetState
trigger1 = animtime = 0
value = 821

[state x, combo dampener]
type = varadd
trigger1 = animtime = 0
v = 18
value = -18
persistent = 0
ignorehitpause =1

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 5120
ctrl = 0

;---------------------------------------------------------------------------
;Jiggly Bunny Suplex victim
[Statedef 820]
type    = A
movetype= H
physics = N
poweradd = 50
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[state 820, screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,0
value = 0

[state 820, tech throw]
type = changestate
triggerall = time < 12
trigger1 = ailevel = 0
trigger1 = command = "holdfwd" || command = "holdback"
trigger1 = command = "y" || command = "b" || command = "z" || command = "c"
trigger2 = command = "x" && command = "a"
trigger3 = ailevel > 4 
trigger3 = random < (ailevel * ifelse(ailevel>7,1,3))
value = 805


;In case attacker loses binding on player for any reason, this controller
;guarantees that the player will never get stuck in this thrown state.
[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
;Jiggly Bunny Suplex victim Untechable
[Statedef 822]
type    = A
movetype= H
physics = N
poweradd = 50
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[state 820, screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,0
value = 0

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
;Thrown by Kung Fu Throw - thrown into the air
; (a custom gethit state)
; Description: This state has the opponent flying through the air and
;     falling down onto the ground. The SelfState controller sets the
;     opponent back using to his own state file when he his the ground.
;     Controllers 821,2 and 821,3 allow the opponent to recover by
;     hitting his recovery command when he is falling.
[Statedef 821]
type    = A
movetype= H
physics = N
velset = -10,-16
poweradd = 40

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = 1.25

[State 821, 2] ; Recover near ground (use ChangeState)
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

;[State 821, 3] ; Recover in mid air (use SelfState)
;type = SelfState
;triggerall = Vel Y > 0
;triggerall = alive
;triggerall = CanRecover
;trigger1 = Command = "recovery"
;value = 5210 ;HITFALL_AIRRECOVER

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;===========================================================================
;------------------------------Air Grab-------------------------------------
;===========================================================================
;Attempt Portion - Original
[Statedef 830]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 830
poweradd = 30
sprpriority = 2

[State 830, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, ST          
hitflag = A-         
priority = 1, Miss    
sparkno = -1          
p1sprpriority = 1                           
p1facing = 1
p2facing = 1   
id = 800       
p1stateno = 840       
p2stateno = 850       
guard.dist = 0        
fall.recover = 0   

[state 830, damage set]
type = varset
trigger1 = time = 0
v = 16
value = -150

[State 830, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1    

;--------------------------------------------------------------------------
;Attempt portion Comboable
[Statedef 831]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 830
sprpriority = 2

[State 831, 1]
type = HitDef
Trigger1 = p2stateno != [150,155]
attr = A, ST          
hitflag = AF   
id = 800 
priority = 1, Miss    
sparkno = -1          
p1sprpriority = 1                           
p1facing = 1
p2facing = 1          
p1stateno = 841       
p2stateno = 850       
guard.dist = 0        
fall.recover = 0   

[state 831, damage set]
type = varset
trigger1 = time = 0
v = 16
value = -90

[state 831, combo damage]
type = varadd
trigger1 = time = 0
v = 18
value = -5

[State 831, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1   

;--------------------------------------------------------------------------
;Grab Escape - p2
[statedef 835]
type = A
movetype = H
physics = N
anim = 43
ctrl = 0

;[state 1400, dim]
;type = bgpalfx
;trigger1 = time = 0
;time = 8
;mul = 200,200,200

;[state 805, freeze]
;type = pause
;trigger1 = time = 0
;time = 8
;endcmdbuftime = 8

;[state 805, sound]
;type = playsnd
;trigger1 = time = 0
;value = S805,0

[state 835, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 835, posset]
type = posset
trigger1 = time = 0
y = enemynear,pos y 
persistent = 0
ignorehitpause = 1


[state 835, targetfacing]
type = targetfacing
trigger1 = time = 0
value = -1
persistent = 1

[state 835, velset]
type = velset
trigger1 = time = 1
x= -12
y= -2

[state 835, gravity]
type = veladd
trigger1 = time > 0
y = 1.25

[state 835, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 835, end1]
type = selfstate
trigger1 = time >= 30
value = 50
ctrl = 1

[state 835, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;--------------------------------------------------------------------------
;Grab Escape - p1
[statedef 836]
type = A
movetype = H
physics = N
anim = 43
ctrl = 0

[state 836, targetbind]
type = targetbind
trigger1 = time = 0
pos = 300,0

[state 1400, dim]
type = bgpalfx
trigger1 = time = 0
time = 12
mul = 200,200,200

[state 805, freeze]
type = pause
trigger1 = time = 0
time = 12
endcmdbuftime = 8

[state 805, sound]
type = playsnd
trigger1 = time = 0
value = S805,0

[state 835, targetfacing]
type = targetfacing
trigger1 = time = 0
value = -1
persistent = 1

[state 835, velset]
type = velset
trigger1 = time = 1
x= -9
y= -2

[state 835, gravity]
type = veladd
trigger1 = time > 0
y = 1.25

[state 835, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 835, end1]
type = selfstate
trigger1 = time >= 29
value = 50
ctrl = 1

[state 835, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52


;--------------------------------------------------------------------------
;Throw Portion - Original
[statedef 840]
type    = A
movetype= A
physics = N
anim = 840
poweradd = 60

[state 810, tech]
type = changestate
triggerall = numtarget
trigger1 = target(800),stateno = 835
value = 836
persistent = 1

[state 840, gravity]
type = gravity
trigger1 = 1

[state 840, velset]
type = velset
trigger1 = time = 0
y = -20

[state 840, edge]
type = width
trigger1 = 1
edge = 300,300

[state 840,velocity]
type = velmul
trigger1 = 1
x = 1

[state 848, playerpush]
type = playerpush
trigger1 = 1
value = 0

[State 840, turn target] 
type = null ;targetfacing
trigger1 = AnimElem = 1
value = 0

[State 840, Bind 1]
type = TargetBind
trigger1 = AnimElemtime(1) >= 0 && Animelemtime(2) < 0
pos = 215, -165

[State 840, Bind 2]
type = TargetBind
trigger1= AnimElemtime(2) >= 0 && Animelemtime(3) < 0
pos = 150, -120

[State 840, Bind 2]
type = TargetBind
trigger1= AnimElemtime(3) >= 0 && Animelemtime(4) < 0
pos = 120, -75


[State 840, Bind 2]
type = TargetBind
trigger1= AnimElemtime(4) >= 0
pos = 120, -65

[state 840, changestate]
type = changestate
trigger1 = pos y > -10
value = 845


;---------------------------------------------------------------------------
;Throw Portion - Comboable
[statedef 841]
type    = A
movetype= A
physics = N
anim = 840
poweradd = 60

[state 841, gravity]
type = gravity
trigger1 = 1

[state 841, velset]
type = velset
trigger1 = time = 0
y = -20

[state 841, edge]
type = width
trigger1 = 1
edge = 300,300

[state 841, playerpush]
type = playerpush
trigger1 = 1
value = 0

[State 840, turn target] 
type = null ; targetfacing
trigger1 = AnimElem = 1
value = 0

[State 841, Bind 1]
type = TargetBind
trigger1 = AnimElemtime(1) >= 0 && Animelemtime(2) < 0
pos = 215, -165

[State 841, Bind 2]
type = TargetBind
trigger1= AnimElemtime(2) >= 0 && Animelemtime(3) < 0
pos = 150, -120

[State 841, Bind 2]
type = TargetBind
trigger1= AnimElemtime(3) >= 0 && Animelemtime(4) < 0
pos = 120, -75


[State 841, Bind 2]
type = TargetBind
trigger1= AnimElemtime(4) >= 0
pos = 120, -65

[state 841, changestate]
type = changestate
trigger1 = pos y > -10
value = 845


;---------------------------------------------------------------------------
;Air Grab Landing
[Statedef 845]
type    = C
movetype= A
physics = N
velset = 0,0
anim = 845

[state 840, sfx]
type = playsnd
trigger1 = time = 0
value = S1,4

[state 840, hitadd]
type = hitadd
trigger1 = time = 0
value = 1

[state 641, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 5,2
ownpal = 1

[State 840, turn target] 
type = null ; targetfacing
trigger1 = AnimElem = 1
value = 0

[state 845, targetstate]
type = targetstate
trigger1 = time = 0
value = 855


[State 845, Bind 2]
type = TargetBind
trigger1= AnimElemtime(1) >= 0
pos = 75, -22

[state 845, poweradd]
type = poweradd
trigger1 = animelem = 1
value = 250
persistent = 0

[State 845, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 1
value = var(16)
persistent = 0

[State 810, quakes]
type = envshake
trigger1 = time = 0
time = 30
ampl = 16

[state 848, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 845, end state]
type = changestate
trigger1 = animtime = 0
value = 848

[state 845, playerpush]
type = playerpush
trigger1 = 1
value = 0


;---------------------------------------------------------------------------
; bounce off
[statedef 848]
type = A
movetype = I
physics = N
velset = 12,-16
anim = 44
ctrl = 0

[state 848, land]
type = changestate
trigger1 = time > 5
trigger1 = Pos y > 0
trigger1 = Pos y > vel Y
value = 52
ctrl = 1

[state 848, gravity]
type = gravity
trigger1 = time > 2

[state 848, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 848, invun]
type = nothitby
trigger1 = 1
value = SCA






;---------------------------------------------------------------------------
;Air Grab Victim
[Statedef 850]
type    = A
movetype= H
physics = N
poweradd = 100

[State 850, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 850

[state 850, tech throw]
type = changestate
triggerall = time < 12
triggerall = p2stateno != 841
trigger1 = command = "holdfwd" || command = "holdback"
trigger1 = command = "y" || command = "b" || command = "z" || command = "c"
trigger2 = command = "x" && command = "a"
value = 835

[State 850, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
[Statedef 855]
type    = A
movetype= H
physics = N

[State 855, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 855

[state 855, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 848, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 855, 2]
type = changestate
trigger1 = animtime = 0
value = 858


;[State 850, 2]
;type = SelfState
;trigger1 = !gethitvar(isbound)
;value = 5050
;---------------------------------------------------------------------------
[statedef 858]
type = A
movetype = H
physics = N

[state 858, 1]
type = changeanim
trigger1 = time = 0
value = 5080

[state 858, power]
type = poweradd
trigger1 = time = 0
value = 100

[state 858, 2]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 858, 3]
type = posset
trigger1 = time = 0
y = 0


[state 848, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 858, selfstate]
type = selfstate
trigger1 = time > 12
value = 5110




;===========================================================================
;-----------------------------Butt Bump-------------------------------------
;===========================================================================


;---------------------------------------------------------------------------
;Light Butt Bump start
[statedef 1000]
type    = S
movetype= A
physics = S
poweradd= 60
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1000

[state 1000, Jump]
type = changestate
trigger1 = animtime = 0
value = 1001

;-----------------------------------------------------------------------------
;light butt bump active
[Statedef 1001]
type = A
movetype = A
physics = N
Juggle = 5
anim = 1001

[state 44, fx]
type = explod
trigger1 = time = 0
anim = F61
postype = p1
pos = 0,0
scale = 1.5,1.5

[state 1000, snd]
type = playsnd
trigger1 = time = 0
value = S1000,0

[state 1000, 3]
type = velset
trigger1 = animelem = 1
x = 40 ;35
y = -12
persistent = 0

[State 1001, 2]
type = HitDef
trigger1 = animelem = 3
attr = A, SA
animtype  = back
damage    = 50,10
guardflag = MA
hitflag = MAF
pausetime = 1,1
guard.pausetime = 8,8
sparkno = 3
priority = 6, hit
sparkxy = -100,-180
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = 2, 0
air.velocity = 2, -2
guard.velocity = -18          
guard.hittime = 28 ;-6
guard.slidetime = 28
airguard.velocity = -18,-4
airguard.hittime = 6
guard.dist = 640

[State 1001, 2]
type = HitDef
trigger1 = animelem = 4
trigger1 = animtime < 12
attr = A, SA
animtype  = back
damage    = 50,10
guardflag = MA
hitflag = MAF
pausetime = 12,12
guard.pausetime = 7,8
sparkno = 3
id = 1000
priority = 6, hit
sparkxy = -100,-180
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -20, -15
air.velocity = -20, -10
fall = 1
fall.recover = 0
guard.velocity = -27         
guard.hittime = 30 ;-6
guard.slidetime = 30
airguard.velocity = -18,-4
airguard.hittime = 20
guard.dist = 640
envshake.ampl = 6
envshake.time = 12

[state 1001, gravity]
type = gravity
trigger1 = time > 1

;[state 1001, brakes]
;type = velset
;trigger1 = animtime = 18
;trigger1 = !movecontact
;x = 0

;[state 1001, statetypeset]
;type = statetypeset
;trigger1 = animtime = 18
;trigger1 = !movecontact
;movetype = I

[state 1001, playerpush]
type = playerpush
trigger1 = p2statetype = L
value = 0
persistent = 1 

[state 1001, playerpush]
type = playerpush
trigger1 = p2statetype != L
value = 1
persistent = 1

[state 1001, recov anim]
type = changestate
trigger1 = numtarget(1000)
trigger1 = movecontact
trigger1 = anim = 1001
value = 1003
ignorehitpause = 1


[state x, combo damage score]
type = varadd
trigger1 = animelem = 4
trigger1 = movehit
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[State 1001, 5]
type = ChangeState
trigger1 = pos y > 0
trigger1 = Vel Y > pos Y
value = 1002


;-----------------------------------------------------------------------------
;light butt bump recovery
[statedef 1002]
type = S
movetype = I
physics = S
anim = 1005

[state 1002, fallstop]
type = velset
trigger1 = time = 0
y = 0

[state 1002, skid]
type = velmul
trigger1 = time = 0
x = 0.5

[State 1002, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = time < 12
postype = p1
anim = F120
pos = 30, 0
sprpriority = 3
persistent = 2

[State 1002, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = time < 12
postype = p1
anim = F120
pos = 154, 0
sprpriority = -2
persistent = 2

[State 1002, 4]
type = EnvShake
trigger1 = time = 0
time = 15
ampl = 4
freq = 100
phase = 100

[state 1002, pos set]
type = posset
trigger1 = 1
y = 0


[state 1001, changestate]
type = changestate
trigger1 = animtime = 0
value  = 0
ctrl = 1

;-----------------------------------------------------------------------------
;Butt Bump Hit aniamtion state
[statedef 1003]
type = A
movetype = I
physics = N
anim = 1002
movehitpersist = 1

[state 1003, gravity]
type = gravity
trigger1 = 1

[state 1003, bounce up]
type = veladd
trigger1 = time = 0
trigger1 = moveguarded
y = -18
persistent = 0

[state 1003, bounce up]
type = veladd
trigger1 = time = 0
trigger1 = movehit
y = -9
persistent = 0

[state 1003, on hit mul]
type = velmul
trigger1 = time = 0
x = ifelse(movehit,-0.12,-0.24)
persistent = 0

[State 1003, 5]
type = ChangeState
trigger1 = pos y > 0
trigger1 = Vel Y > pos Y
value = 1002


;-----------------------------------------------------------------------------
;Hard Butt Bump start
[statedef 1010]
type    = S
movetype= A
physics = S
poweradd= 80
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1010

[state 1010, Jump]
type = changestate
trigger1 = animtime = 0
value = 1011

;-----------------------------------------------------------------------------
;heavy butt bump active
[Statedef 1011]
type = A
movetype = A
physics = N
Juggle = 5
anim = 1001

[state 1011, 3]
type = velset
trigger1 = animelem = 1
x = 60;45
y = -12
persistent = 0

[state 44, fx]
type = explod
trigger1 = time = 0
anim = F61
postype = p1
pos = 0,0
scale = 1.5,1.5

[state 1011, playsnd]
type = playsnd
trigger1 = time = 0
value = 1000,0

[State 1001, 2]
type = HitDef
trigger1 = animelem = 3
attr = A, SA
animtype  = back
damage    = 60,12
guardflag = MA
hitflag = MAF
pausetime = 1,1
guard.pausetime = 12,12
sparkno = 3
priority = 6, hit
sparkxy = -100,-180
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = 2, 0
air.velocity = 2, -2
guard.velocity = -20         
guard.hittime = 22 ;-6
guard.slidetime = 22
airguard.velocity = -20,-4
airguard.hittime = 18
guard.dist = 640

[State 1011, 2]
type = HitDef
trigger1 = animtime < 11
trigger1 = animelem = 4
attr = A, SA
animtype  = back
damage    = 60,12
guardflag = MA
hitflag = MAF
id = 1010
pausetime = 12,12
sparkno = 3
priority = 6, hit
sparkxy = -100,-185
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -40, -15
air.velocity = -40,-10
fall = 1
fall.recover = 0
guard.velocity = -27          
guard.hittime = 24 ;-8
guard.slidetime = 24 ;-8
airguard.velocity = -20,-4
airguard.hittime = 18
guard.dist = 640
envshake.ampl = 8
envshake.time = 12


[state 1011, gravity]
type = gravity
trigger1 = time > 1

;[state 1001, brakes]
;type = velset
;trigger1 = animtime = 12
;trigger1 = !movecontact
;x = 0

;[state 1001, statetypeset]
;type = statetypeset
;trigger1 = animtime = 12
;trigger1 = !movecontact
;movetype = I

[state 1001, playerpush]
type = playerpush
trigger1 = p2statetype = L
value = 0
persistent = 1 

[state 1001, playerpush]
type = playerpush
trigger1 = p2statetype != L
value = 1
persistent = 1

[state 1011, recov anim]
type = changestate
trigger1 = numtarget(1010)
trigger1 = movecontact
trigger1 = anim = 1001
value = 1013

[state x, combo damage score]
type = varadd
trigger1 = numtarget(1010)
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[State 1011, 5]
type = ChangeState
trigger1 = pos y > 0
trigger1 = Vel Y > pos Y
value = 1012


;-----------------------------------------------------------------------------
;heavy butt bump recovery
[statedef 1012]
type = S
movetype = I
physics = S
anim = 1015

[state 1012, fallstop]
type = velset
trigger1 = time = 0
y = 0

[state 1012, Skid]
type = velmul
trigger1 = time = 0
x = 0.5

[State 20, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = time < 12
postype = p1
anim = F120
pos = 30, 0
sprpriority = 3
persistent = 2

[State 20, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = time < 12
postype = p1
anim = F120
pos = 154, 0
sprpriority = -2
persistent = 2

[State 1012, 4]
type = EnvShake
trigger1 = time = 0
time = 15
ampl = 4
freq = 100
phase = 100

[state 1012, remove explod]
type = removeexplod
trigger1 = 1
id = 3001

[state 1012, remove explod]
type = removeexplod
trigger1 = 1
id = 3006

[state 1012, pos set]
type = posset
trigger1 = 1
y = 0

[STATE 1012, invun]
type = nothitby
trigger1 = prevstateno = 3004
value = SCA

[state 1012, changestate]
type = changestate
trigger1 = animtime = 0
value  = 0
ctrl = 1

;---------------------------------------------------------------------------
;Butt Bump Hit aniamtion state
[statedef 1013]
type = A
movetype = I
physics = N
anim = 1002
movehitpersist = 1

[state 1013, gravity]
type = gravity
trigger1 = 1

[state 1013, bounce up]
type = veladd
trigger1 = moveguarded
trigger1 = time = 0
y = -18
persistent = 0

[state 1013, bounce up]
type = veladd
trigger1 = movehit
trigger1 = time = 0
y = -9
persistent = 0

[state 1013, on hit mul]
type = velmul
trigger1 = time = 0
x = ifelse(movehit,-0.15,-0.18)
persistent = 0

[State 1013, 5]
type = ChangeState
trigger1 = pos y > 0
trigger1 = Vel Y > pos Y
value = 1012


;---------------------------------------------------------------------------
;EX Butt Bump start
[statedef 1020]
type    = S
movetype= A
physics = S
poweradd= -500
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1020

[state 1020, Jump]
type = changestate
trigger1 = animtime = 0
value = 1021

[state 1020, count]
type = varset
trigger1 = time = 0
V = 5
value = 1

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 200,100,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

;-----------------------------------------------------------------------------
;EX butt bump active
[Statedef 1021]
type = A
movetype = A
physics = N
anim = 1001

[state 1021, wall bounce limiter]
type = varadd
trigger1 = movehit
v = 7
value = -1
persistent = 0
ignorehitpause = 1

[state 44, fx]
type = explod
trigger1 = time = 0
anim = F61
postype = p1
pos = 0,0
scale = 1.5,1.5

[state 1011, playsnd]
type = playsnd
trigger1 = time = 0
value = 1000,0

[state 1001, afterimage]
type = afterimage
trigger1 = time = 0
;length = 1
time = 5
timegap = 1

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 200,100,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1021, 3]
type = velset
trigger1 = animelem = 1
x = 80
y = -12
persistent = 0


;[state 1001, statetypeset]
;type = statetypeset
;trigger1 = animtime = 12
;trigger1 = !movecontact
;movetype = I

;[state 1021, brakes]
;type = velmul
;trigger1 = animtime = 12
;trigger1 = !movecontact
;x = 0

[State 1021, 2]
type = HitDef
trigger1 = animelem = 3
attr = A, SA
animtype  = back
damage    = 60,12
guardflag = MA
hitflag = MAF
pausetime = 1,1
guard.pausetime = 12,12
sparkno = 3
priority = 6, hit
sparkxy = -100,-180
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = 2, 0
air.velocity = 2, -2
guard.velocity = -64          
guard.hittime = 30 ;-6
guard.slidetime = 30
airguard.velocity = -24,-4
airguard.hittime = 26
guard.dist = 640

[State 1021, combo hit]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
animtype  = hard
getpower = 0
damage    = 60,12
guardflag = MA
hitflag = MAF
id = 1020
pausetime = 14,14
sparkno = 3
priority = 6, hit
sparkxy = 100,-185
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
air.hittime = 16
guard.slidetime = 30
guard.velocity = -64
guard.hittime = 30
airguard.velocity = -24,-8
ground.velocity = -65,-24
air.velocity = -65,ifelse(var(7)>0,-18,-4)
guard.dist = 640
fall = 1
fall.recover = 0
envshake.ampl = 6
envshake.time = 12

[state 1021, targetstate]
type = targetstate
triggerall = numtarget(1020)
trigger1 = movehit
trigger1 = hitpausetime=13
trigger1 = var(7) > 0
ignorehitpause = 1
value = 670



[state 1021, gravity]
type = gravity
trigger1 = pos y < -1

[state x, combo damage score]
type = varadd
triggerall = numtarget(1020)
trigger1 = movehit = 1
v = 18
value = -12
persistent = 0
ignorehitpause = 1

[state 1003, bounce up]
type = veladd
trigger1 = numtarget(1020)
trigger1 = moveguarded
y = -18
persistent = 0

[state 1003, bounce up]
type = veladd
trigger1 = numtarget(1020)
trigger1 = movehit
y = -6
persistent = 0

[state 1003, on hit mul]
type = velmul
trigger1 = numtarget(1020)
trigger1 = movecontact
x = ifelse(movehit,-0.08,-0.16)
persistent = 0

[state 1001, playerpush]
type = playerpush
trigger1 = p2statetype = L
value = 0
persistent = 1 

[state 1001, playerpush]
type = playerpush
trigger1 = p2statetype != L
value = 1
persistent = 1

[state 1021, recov anim]
type = changeanim
trigger1 = numtarget(1020)
trigger1 = movecontact
trigger1 = anim = 1001
value = 1002
ignorehitpause = 0
persistent = 0

[State 1021, end]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y > -vel Y
value = 1022


;-----------------------------------------------------------------------------
;EX butt bump recovery
[statedef 1022]
type = S
movetype = I
physics = S
anim = 1025

[state 1022, fallstop]
type = velset
trigger1 = time = 0
y = 0

[state 1022, skid]
type = velmul
trigger1 = time = 0
x = 0.5

[State 20, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = time < 12
postype = p1
anim = F120
pos = 30, 0
sprpriority = 3
persistent = 2

[State 20, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = time < 12
postype = p1
anim = F120
pos = 154, 0
sprpriority = -2
persistent = 2


[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 200,100,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1022, removeexlod]
type = removeexplod
trigger1 = time = 0
id = 3001

[State 1022, 4]
type = EnvShake
trigger1 = time = 0
time = 15
ampl = 4
freq = 100
phase = 100

[state 1021, changestate]
type = changestate
trigger1 = animtime = 0
value  = 0
ctrl = 1

;-----------------------------------------------------------------------------
;---------------------------------------------------------------------------
;Butt Bump Hit aniamtion state
[statedef 1023]
type = A
movetype = I
physics = N
anim = 1002
movehitpersist = 1

[state 1013, gravity]
type = gravity
trigger1 = 1

[state 1013, bounce up]
type = veladd
trigger1 = moveguarded
trigger1 = time = 0
y = -18
persistent = 0

[state 1013, bounce up]
type = veladd
trigger1 = movehit
trigger1 = time = 0
y = -6
persistent = 0

[state 1013, on hit mul]
type = velmul
trigger1 = time = 0
x = ifelse(movehit,-0.08,-0.16)
persistent = 0

[State 1013, 5]
type = ChangeState
trigger1 = pos y > 0
trigger1 = Vel Y > pos Y
value = 1012

;=============================================================================
;------------------------------Rising butt------------------------------------
;=============================================================================
;Rising butt L
[statedef 1050]
type = A
movetype = A
Physics = N
Ctrl = 0
velset = 0,0
anim = 1050
poweradd = 60

[state 1050, 1]
type = nothitby
trigger1 = time < 12
trigger1 = !movehit
value = SCA

[state 1050, safe on hit] ;mostly for boss type characters
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause = 1

[State 1050, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 3
trigger1 = anim != 1061
attr = S, SA
animtype  = heavy
damage    = 10,ifelse(enemy,statetype = A,3,1)
guardflag = MA
hitflag = MAF
pausetime = 8,8
id = 1050
priority = 7,hit
sparkno = 2
sparkxy = -20,-195
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = 4
air.velocity = 4,-10
guard.dist = 480

[State 1050, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 4
;trigger1 = anim != 1061
persistent = 0
attr = A, SA
animtype  = up
damage    = 100,ifelse(enemy,statetype = A,30,10)
guardflag = MA
pausetime = 12,12
guard.hittime = 24
sparkno = 3
id = 1051
priority = 6,hit
sparkxy = -20,-195
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 40
air.hittime = 30
ground.velocity = -6.5, -40
air.velocity = -6,ifelse(movehit=1,-28,-35)
guard.velocity = -8          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = -24,-18
airguard.hittime = 28
fall = 1
fall.recover = 0
guard.dist = 480


[state 44, fx]
type = explod
trigger1 = anim != 1061
trigger1 = animelemtime(4) = 0
anim = F61
postype = p1
pos = 0,0
scale = 2,2

[state 1050, lift]
type = velset
trigger1 = animelem = 4
trigger1 = anim != 1061
x = 12
y = -35
persistent = 0

[state 1000, snd]
type = playsnd
trigger1 = animelem = 4
trigger1 = anim != 1061
value = S1000,0

[state 1050, grav]
type = gravity
trigger1 = pos y < -1
ignorehitpause = 0 

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1050, slow down x]
type = null
triggerall = animelemtime(4) >= 0
trigger1 = movehit
x = 0.25

[state 1050, add on punch]
type = changestate
trigger1 = command = "y" || command = "x" || command = "a" || command = "b"
triggerall = movehit
triggerall = animelemtime(4) >= 0
trigger2 = ailevel 
trigger2 = random < ailevel * 36
value = 1080
ignorehitpause = 1

[state 1050, change anim]
type = changestate
trigger1 = numtarget(1051)
trigger1 = animelemtime(4) > 0
trigger1 = anim = 1050
value = 1052
ignorehitpause = 1
persistent = 0


[state 1050, end]
type = changestate
trigger1 = vel y > 0
value = 1051

;----------------------------------------------------------------------------
;recovery
[statedef 1051]
type    = A
physics = N
movetype = I
ctrl = 0

[state 1051, velset]
type = velmul
trigger1 = time = 0
x = 0.5

[state 1051, velset]
type = velmul
trigger1 = time = 6
x = 0.1

[state 1051, velset]
type = velmul
trigger1 = time = 12
x = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 44

[state 1051, grav]
type = gravity
trigger1 = 1

[state 1051, landing]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;----------------------------------------------------------------------------
;Rising Ass animation change
;Wasn't working with just change anim in IKEMEN so change state is used.
[statedef 1052]
type = U
physics = U
movetype = A
movehitpersist = 1
anim = 1061

[state 1052, gravity]
type = gravity
trigger1 = 1 

[state 1052, safe on hit] ;mostly for boss type characters
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause = 1

[state 1070, add on punch]
type = changestate
trigger1 = command = "y"  || command = "x" || command = "a" || command = "b"
triggerall = movehit
trigger2 = ailevel
trigger2 = random < ailevel * 36
value = 1080
ignorehitpause = 1

[state 1052, changestate]
type  = changestate
trigger1 = vel y > 0 
value = 1051


;----------------------------------------------------------------------------;
;Rising Butt landings
[Statedef 1055]
type    = C
physics = S
movetype = I
ctrl = 0
anim = 47

[State 52, 4]
type = EnvShake
trigger1 = time = 0
time = 15
ampl = 4
freq = 100
phase = 100

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[state 1055, control]
type = ctrlset
trigger1 = time > 3
value = 1

[State 52, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------
;Rising Butt H
[statedef 1060]
type = A
movetype = A
Physics = N
Ctrl = 0
velset = 0,0
anim = 1060
poweradd = 80

[state 1060, nothitby]
type = nothitby
trigger1 = time < 18
trigger1 = !movehit
value = A

[state 1050, safe on hit] ;mostly for boss type characters
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause = 1

[State 1050, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 3
trigger1 = anim != 1061
attr = S, SA
animtype  = hard
damage    = 10,ifelse(enemy,statetype = A,3,1)
guardflag = MA
pausetime = 8,8
priority = 5,hit
id = 1060
guard.pausetime = 6,6
guard.hittime = 6
sparkno = 2
sparkxy = -20,-195
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = 4
guard.slidetime = 16
guard.velocity = -8
air.velocity = 4,-15
guard.dist = 480


[State 1060, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 4
;trigger1 = anim != 1061
persistent = 0
attr = A, SA
animtype  = up
damage    = 122,ifelse(enemy,statetype = A,36,12)
guardflag = MA
pausetime = 12,12
sparkno = 3
id = 1061
sparkxy = -20,-195
priority = 7,hit
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 40
air.hittime = 40
ground.velocity = -7,ifelse(movehit=1,-10,-45)
air.velocity = -7,ifelse(movehit=1,-5,-37)
guard.velocity = -8          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -24,-18
airguard.hittime = 28
fall = 1
fall.recover = 0
guard.dist = 480




[state 1060, lift]
type = velset
trigger1 = animelem = 4
trigger1 = anim != 1061
x = 20
y = -42
persistent = 0

[state 1000, snd]
type = playsnd
trigger1 = animelem = 4
trigger1 = anim != 1061
value = S1000,0

[state 44, fx]
type = explod
trigger1 = anim != 1061
trigger1 = animelemtime(4) = 0
anim = F61
postype = p1
pos = 0,0
scale = 2,2

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1060, grav]
type = gravity
trigger1 = time > 8 
ignorehitpause = 0

[state 1060, slow down x]
type = null
triggerall = animelemtime(4) >= 0
trigger1 = movehit

x = 0.25

[state 1060, add on punch]
type = changestate
trigger1 = command = "y"  || command = "x" || command = "a" || command = "b"
triggerall = animelemtime(4) >= 0
triggerall = movehit
trigger2 = ailevel
trigger2 = random < ailevel * 36
value = 1080
ignorehitpause = 1

[state 1050, change anim]
type = changestate
trigger1 = numtarget(1061)
trigger1 = animelemtime(4) > 0
trigger1 = anim = 1060
value = 1052
ignorehitpause = 1
persistent = 0


[state 1060, end]
type = changestate
trigger1 = vel y > 0
value = 1051

;-----------------------------------------------------------------------------

;EX Rising Butt 
[statedef 1070]
type = A
movetype = A
Physics = N
Ctrl = 0
velset = 0,0
anim = 1060

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 200,100,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1070, getpower]
type = poweradd
trigger1 = time = 1
value = -500

[state 1070, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1071, afterimage]
type = afterimage
trigger1 = animelem = 4
time = 9
timegap = 1

[State 1070, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 3
trigger1 = anim != 1061
attr = S, SA
animtype  = hard
damage    = 10,ifelse(enemy,statetype = A,3,1)
getpower = 0
guardflag = MA
pausetime = 6,6
guard.pausetime = 6,6
guard.hittime = 6
priority = 5,hit
id = 1070
sparkno = 1
sparkxy = -20,-195
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = 4
guard.slidetime = 16
guard.velocity = -8
air.velocity = 4,-15
guard.dist = 480


[State 1070, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 4
trigger1 = anim != 1061
attr = A, SA
animtype  = up
damage    = 130,ifelse(enemy,statetype = A,36,12)
getpower = 0
guardflag = MA
pausetime = 12,12
sparkno = 3
sparkxy = -20,-195
hitsound   = S1,3
priority = 5,hit
id = 1071
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 45
air.hittime = 45
ground.velocity = -7, -50
air.velocity = -7,-47
airguard.velocity = -2,-8
guard.velocity = -12          
guard.hittime = 22
guard.slidetime = 22
airguard.velocity = -24,-18
airguard.hittime = 32
fall = 1
fall.recover = 0
guard.dist = 480


[state 1070, lift]
type = velset
trigger1 = animelem = 4
trigger1 = anim != 1061
x = 20
y = -50
persistent = 0

[state 1000, snd]
type = playsnd
trigger1 = animelem = 4
trigger1 = anim != 1061
value = S1000,0

[state 1000, snd]
type = playsnd
trigger1 = animelem = 4
trigger1 = anim != 1061
value = S1000,0

[state 1070, grav]
type = gravity
trigger1 = time > 8 

[state 1070, slow down x]
type = null
triggerall = animelemtime(4) >= 0
trigger1 = movehit

x = 0.25

[state 1070, add on punch]
type = changestate
trigger1 = command = "y"  || command = "x" || command = "a" || command = "b"
triggerall = animelemtime(4) >= 0
triggerall = movehit
trigger2 = ailevel
trigger2 = random < ailevel * 36
value = 1080
ignorehitpause = 1

[state 642, combo damage]
type = varadd
trigger1 = time = 0
v = 18
value = -3

[state 1050, change anim]
type = changestate
trigger1 = numtarget(1071)
trigger1 = animelemtime(4) > 0
trigger1 = anim = 1060
value = 1052
ignorehitpause = 1
persistent = 0

[state 1070, end]
type = changestate
trigger1 = vel y > 0
value = 1051

;-----------------------------------------------------------------------------

;recovery
[statedef 1071]
type    = A
physics = N
ctrl = 0

[state 1071, velset]
type = velset
trigger1 = time = 0
x = 0

[State 1071, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 44

[state 1071, grav]
type = gravity
trigger1 = 1

[state 1071, landing]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;----------------------------------------------------------------------------
;Spike Add on
;----------------------------------------------------------------------------
;Jumping Fierce tap
[Statedef 1080]
type    = A
movetype= A
physics = A
ctrl = 0
sprpriority = 2
anim = 1080

[State 1080, 2]
type = PlaySnd
trigger1 = Time = 8
value = S0, 2

[State 1080, 3]
type = HitDef
trigger1 = Time = 0
persistent = 0
attr = A, NA
damage = 30
guardflag = MA
Hitflag = MAF
priority = 4,hit
pausetime = 10,10
sparkno = 2
sparkxy = -20,-230
hitsound   = S5000,2
guardsound = S120, 0
animtype = heavy
ground.type = High
ground.slidetime = 24
ground.hittime  = floor(24/var(29))
ground.velocity = -12
air.velocity = -6, 40
guard.velocity = -14           
guard.hittime = 19
guard.slidetime = 19
airguard.velocity = -14,10
airguard.hittime = 17
air.fall = 1
guard.dist = 480
fall.recovertime = 30

[state 1080, butt drop A.I.]
type = varset
trigger1 = movehit
var(35) = 1
ignorehitpause = 1

[state 1080, changestate]
type = changestate
triggerall = movehit
trigger1 = command = "x" || command = "y" || command = "a"  || command = "b"
value = 1081
ignorehitpause = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1


[state 1080, 3]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;---------------------------------------------------------------------------------------
;Dive Butt 
[Statedef 1081]
type    = A
movetype= A
physics = N
poweradd= 20
ctrl = 0
anim = 650
sprpriority = 2
facep2 = 1

[state 1081, push]
type = playerpush
trigger1 = 1
value = 0

[state 1081, sfx]
type = playsnd
trigger1 = time = 0
value = S1, 0

[state 1081, freeze]
type = velset
trigger1 = time = 0
y = 0

[state 1081, slow]
type = velmul
trigger1 = time = 0
x = 0.1

[State 1081, 3]
type = HitDef
trigger1 = !movecontact
attr = A, SA
damage  = 30
hitflag = MAFD
guardflag = HAF
priority = 4
pausetime = 14,14
guard.pausetime = 12,8
sparkno = 3
sparkxy = -10,-80
hitsound   = 5,4
guardsound = S120, 0
animtype = heavy
ground.type = low
id = 1081
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -16,-4
air.velocity = -10,8
persistent = 0
guard.velocity = -30      
guard.hittime = 35
guard.slidetime = 35
airguard.velocity = -12,4
airguard.hittime = 16
guard.dist = 480
fall = 1
fall.recover = 0

;--------------------------

[state 1081, enemy state]
type = targetstate
triggerall = numtarget(1081)
triggerall = vel y > 0
trigger1 = movehit
trigger1 = enemy,statetype != A
value = 660

;Ride down mechanic
[state 1081, Ride down]
type = targetbind
triggerall = numenemy
trigger1 = movehit
trigger1 = enemy,statetype = A
pos = 0, -20

[state 1081, state of ride down]
type = targetstate
triggerall = numenemy
trigger1 = movehit
trigger1 = enemy,statetype = A
value = 655

;--------------------------------------

[state 1081, forward movement]
type = velset
trigger1 = animelemtime(5) = 0
x = 18
persistent = 0

[state 1081, aim]
type = veladd
triggerall = animelem = 5
trigger1 = command = "holdfwd"
trigger1 = ailevel = 0
trigger2 = p2bodydist x > 50
trigger2 = ailevel > 0
x = 0.75
persistent = 1

[state 1081, aim]
type = veladd
triggerall = animelem = 5
trigger1 = command = "holdback"
trigger1 = ailevel = 0
trigger2 = p2bodydist x < -50
trigger2 = ailevel > 0
x = -1.25
persistent = 1

[state 1081, grav]
type = gravity
trigger1 = animelemtime(5) >= 0

[state 1081, grav]
type = gravity
trigger1 = animelemtime(5) >= 0

[state 1081, grav]
type = gravity
trigger1 = animelemtime(5) >= 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[State 1081, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1082
ctrl = 0



;---------------------------------------------------------------------------
;Butt Drop Bounce
[Statedef 1082]
type    = C
movetype= A
physics = N
ctrl =0
movehitpersist = 1
anim = 651

[state 1082, sfx]
type = playsnd
trigger1 = time = 0
value = S650,0

[state 1082, sfx]
type = playsnd
trigger1 = time = 0
value = S650,0

[state 1082, sfx]
type = playsnd
trigger1 = time = 0
value = S650,0

[state 1082, push]
type = playerpush
trigger1 = 1
value = 0

[state 1082, on ground]
type = posset
trigger1 = time = 0
y = 0

[state 1082, on ground]
type = velset
trigger1 = time = 0
y = 0

[state 1082, on ground]
type = velmul
trigger1 = time = 0
x = 0.1

[state 1082, fx]
type = explod
trigger1 = time = 0
anim = F61
postype = p1
pos = 0,0
scale = 5,2
ownpal = 1

[State 1082, 3]
type = HitDef
trigger1 = !movecontact
persistent = 0
attr = C, SA
damage    = 30 
hitflag = FD
guardflag = MA 
getpower = 20
priority = 4
pausetime = 14,14
guard.pausetime = 14,14
guard.hittime = 14
sparkno = 3
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120, 0
animtype = back
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
air.velocity = 0,0
persistent = 0
p2stateno = 660

[state 1082, bounce]
type = velset
trigger1 = time = 9
y = -16

[state 1082, movetypeset]
type = statetypeset
trigger1 = time = 9
statetype = A


[State 1082, quakes]
type = envshake
trigger1 = time = 0
time = 20
ampl = -16

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = 6
persistent = 0
ignorehitpause = 1

[state 1082, grav]
type = gravity
trigger1 = time > 9

[state 230,  Not active]
trigger1 = time = 9
type = statetypeset
movetype = I


[state 1082, end]
type = changestate
trigger1 =  vel y > 0
trigger1 = pos y > -vel y
trigger1 = time > 9
value = 1083
ctrl = 0

;---------------------------------------------------------------------------
;buttland 2
[statedef 1083]
type    = C
movetype= I
physics = C

[state 1083, stop]
type = velset
trigger1 = time = 0
x = 0
y = 0


[state 1083, anim]
type = changeanim
trigger1 = anim != 652
value = 652

[state 1083, push]
type = playerpush
trigger1 = 1
value = 0

[state 1083, on ground]
type = posset
trigger1 = time = 0
y = 0

[state 1083, bounce 2nd]
type = velset
trigger1 = time = 9
y = -8

[state 1083, gravity]
type = gravity
trigger1 = time > 9


[State 1083, quakes]
type = envshake
trigger1 = time = 0
time = 15
ampl = 10
freq = 100
phase = 100

[state 1083, end]
type = changestate
trigger1 = time > 9
trigger1 = vel y > 0
trigger1 = pos y > -vel y 
value = 52





;=============================================================================
;------------------------------Sommersault Kick-------------------------------
;=============================================================================

;Flip Kick Light Start
[statedef 1100]
type    = S
movetype= A
physics = S
poweradd = 60
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1100

[state 1100, nothitby]
type = nothitby
trigger1 = animelemtime(3) >= 0
value = ,AP,AT

[state 1100, 3]
type = velset
trigger1 = animelem = 3
x = 8
persistent = 0

[State 1100, 5]
type = ChangeState
trigger1 = animtime = 0
value = 1101

;------------------------------------------------------------------------------
;Air Flip Kick Light
[statedef 1101]
type = A
movetype = A
physics = N
poweradd = 15
anim = 1101

[state 1101, sfx]
type = playsnd
trigger1 = time = 0
value = S1, 0

[state 1101, fx]
type = explod
trigger1 = time = 0
anim = F61
postype = p1
pos = 0,0
scale = 1.2,1.2

[state 1101, nothitby]
type = nothitby
trigger1 = 1
value = ,AP,AT

[state 1101, launch]
type = velset
trigger1 = animelem = 1
x = 22
y = -16
persistent = 0

[state 1101, gravity]
type = gravity
trigger1 = pos y < -1

[State 1101, 2]
type = HitDef
trigger1 = animelem = 2
attr = A, SA
animtype  = light
damage    = 34,4
guardflag = HA
getpower = 30
pausetime = 4,4
priority = 2,dodge
guard.pausetime = 3,1
guard.hittime = 11
sparkno = 1
sparkxy = -100,-125
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -6.5
air.velocity = -6,-9
guard.dist = 480

[State 1101, 2]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
animtype  = light
damage    = 34,4
guardflag = HA
pausetime = 4,4
getpower = 30
guard.pausetime = 3,1
guard.hittime = 11
priority = 2,dodge
sparkno = 1
sparkxy = -100,-160
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -6.5
air.velocity = -6,-9
guard.dist = 230

[state 1101, landing]
type = changestate
trigger1 = pos y > 0
trigger1 = vel y > -pos y
value = 1102

;---------------------------------------------------------------------------------
;Flip Kick Land Light
[statedef 1102]
type = S
movetype = A
physics = S
anim = 1102

[state 1102, on ground]
type = velset
trigger1 = time = 0
y = 0

[state 1102, on ground]
type = posset
trigger1 = time = 0
y = 0

[State 1102, 2]
type = HitDef
trigger1 = animelem = 1
attr = S, SA
animtype  = light
damage    = 34,4
guardflag = HA
pausetime = 8,8
guard.pausetime = 10,10
sparkno = 3
getpower = 30
priority = 2,dodge
sparkxy = -100,-190
hitsound   = S5000,2
guardsound = S120, 0
ground.type = High
ground.slidetime = ifelse(var(18) > 97, 20, 16)
ground.hittime  = ifelse(var(18) > 97, 20, 16)
ground.velocity = ifelse(var(18) > 97, -8, -55)
guard.hittime = 16;-3       16
guard.slidetime = 16
guard.velocity = -30  ;-20
air.velocity = ifelse(var(18) > 97, -6, -36),-4
airguard.hittime = 18;18
guard.dist = 250
fall = ifelse(var(6) < 1, 1, 0)
air.fall = 1
ground.cornerpush.veloff = ifelse(var(18) > 97,-8,-80)

[state 1102, flip kick limiter]
type = varadd
trigger1 = movehit
v = 6
value = -2
persistent = 0

[state 1102, skid]
type = velmul
trigger1 = 1
x = 0.5
persistent = 0

[State 1102, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = animelem = 2
postype = p1
anim = F120
pos = 20, 0
sprpriority = 3
persistent = 2

[State 1102, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = animelem = 2
postype = p1
anim = F120
pos = 112, -6
sprpriority = -2
persistent = 2

[state 1102, ctrlset]
type = ctrlset
triggerall = movehit
trigger1 = animelemtime(2) > 0
value = 1

[state x, combo damage score]
type = varadd
trigger1 = movehit
v = 18
value = ifelse(var(18) > 97, -9,-18)
persistent = 0
ignorehitpause = 1

[state 1102,  Not active]
trigger1 = animelemtime(2) = 0
type = statetypeset
movetype = I

[state 1102, end with hit]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Flip Kick Hard
[statedef 1110]
type    = S
movetype= A
physics = S
poweradd = 80
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1110

[state 1110, 3]
type = velset
trigger1 = animelem = 2
x = 12
persistent = 0


[state 1110, nothitby]
type = nothitby
trigger1 = animelemtime(2) > 0
value = ,AP


[State 1110, 5]
type = ChangeState
trigger1 = animtime = 0
value = 1111

;------------------------------------------------------------------------------
;Air Flip Kick Hard
[statedef 1111]
type = A
movetype = A
physics = N
poweradd = 15
anim = 1101

[state 1111, fx]
type = explod
trigger1 = time = 0
anim = F61
postype = p1
pos = 0,0
scale = 1.2,1.2

[state 1111, sfx]
type = playsnd
trigger1 = time = 0
value = S1, 0

[state 1111, nothitby]
type = nothitby
trigger1 = 1
value = ,AP

[state 1111, launch]
type = velset
trigger1 = animelem = 1
x = 32
y = -16
persistent = 0

[state 1111, gravity]
type = gravity
trigger1 = time > 1

[State 1111, 2]
type = HitDef
trigger1 = animelem = 2
attr = A, SA
animtype  = hard
damage    = 43,4
getpower = 30
guardflag = HA
pausetime = 4,4
guard.pausetime = 3,1
guard.hittime = 11
sparkno = 1
priority = 2,dodge
sparkxy = -100,-125
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6.5
air.velocity = -6,-9
guard.dist = 480

[State 1111, 2]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
animtype  = hard
damage    = 43,4
guardflag = HA
pausetime = 4,4
getpower = 30
guard.pausetime = 3,1
guard.hittime = 11
sparkno = 1
priority = 2,dodge
sparkxy = -100,-160
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6.5
air.velocity = -6,-9
guard.dist = 480


[state 1111, landing]
type = changestate
trigger1 = pos y > 0
trigger1 = vel y > pos y
value = 1112

;---------------------------------------------------------------------------------
;Flip Kick Land Hard
[statedef 1112]
type = S
movetype = A
physics = S
ctrl = 0
anim = 1112

[state 1112, on ground]
type = velset
trigger1 = time = 0
y = 0

[state 1102, on ground]
type = posset
trigger1 = time = 0
y = 0

[State 1112, 2]
type = HitDef
trigger1 = animelem = 1
attr = S, SA
animtype  = hard
damage    = 43,4
guardflag = HA
pausetime = 8,8
getpower = 30
guard.pausetime = 10,10
sparkno = 3
priority = 2,dodge
sparkxy = -100,-190
hitsound   = S5000,2
guardsound = S120, 0
ground.type = High
ground.slidetime = ifelse(var(18) > 97, 20, 16)
ground.hittime  = ifelse(var(18) > 97, 20, 16)
ground.velocity = ifelse(var(18) > 97, -8, -55)
guard.hittime = 14 ;-5    12
guard.slidetime = 14
guard.velocity = -32 ;-24
air.velocity = ifelse(var(18) > 97, -6, -36),-4
airguard.velocity = -12,-4
airguard.hittime = 16
guard.dist = 480
fall = ifelse(var(6) < 1, 1, 0)
ground.cornerpush.veloff = ifelse(var(18) > 97,-8,-80)
air.fall = 1


[state 1112, skid]
type = velmul
trigger1 = 1
x = 0.5
persistent = 0

[State 1102, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = animelem = 2
postype = p1
anim = F120
pos = 20, 0
sprpriority = 3
persistent = 2

[State 1102, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = animelem = 2
postype = p1
anim = F120
pos = 112, -6
sprpriority = -2
persistent = 2

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = ifelse(var(18) > 97,-9,-18)
persistent = 0
ignorehitpause = 1

[state 1102, ctrlset]
type = ctrlset
triggerall = movehit
trigger1 = animelemtime(2) > 0
value = 1

[state 1102, flip kick limiter]
type = varadd
trigger1 = movehit
v = 6
value = -2
persistent = 0

[state 1112,  Not active]
trigger1 = animelemtime(2) = 0
type = statetypeset
movetype = I

[state 1112, end with hit]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------

;EX Flip Kick 
[statedef 1120]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 1120

[state 1120, poweradd]
type = poweradd
trigger1 = time = 1
value = -500

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 200,100,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause



[state 1120, 3]
type = velset
trigger1 = animelem = 2
x = 12
persistent = 0

;[state 1120, flip kick limiter]
;type = varset
;trigger1 = var(6) < 1
;v = 6
;value = 1
;persistent = 0


[state 1120, nothitby]
type = nothitby
trigger1 = 1
value = ,AP


[State 1120, 5]
type = ChangeState
trigger1 = animtime = 0
value = 1121

;------------------------------------------------------------------------------
;EX Air Flip Kick 
[statedef 1121]
type = A
movetype = A
physics = N
anim = 1101

[state 1101, fx]
type = explod
trigger1 = time = 0
anim = F61
postype = p1
pos = 0,0
scale = 1.2,1.2

[state 1121, sfx]
type = playsnd
trigger1 = time = 0
value = S1, 0

[state 1121, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 200,100,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1121, launch]
type = velset
trigger1 = animelem = 1
x = ifelse(p2bodydist x > 1000, 45, floor(p2bodydist x *0.06))
y = -16
persistent = 0

[state 1121, gravity]
type = gravity
trigger1 = time > 1

[State 1121, 2]
type = HitDef
trigger1 = animelem = 1
attr = A, SA
animtype  = hard
damage    = 36,4
getpower = 0
guardflag = HA
pausetime = 4,4
priority = 2,dodge
guard.pausetime = 3,3
guard.hittime = 11
sparkno = 1
sparkxy = -100,-125
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6.5
air.velocity = -6,-9
guard.dist = 480

[State 1121, 2]
type = HitDef
trigger1 = animelem = 3
attr = A, SA
animtype  = hard
damage    = 36,6
guardflag = HA
getpower = 0
priority = 2,dodge
pausetime = 4,4
guard.pausetime = 3,3
guard.hittime = 11
sparkno = 1
sparkxy = -100,-160
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6.5
air.velocity = -6,-9
guard.dist = 480


[state 1121, landing]
type = changestate
trigger1 = pos y > 0
trigger1 = vel y > pos y
value = 1122

;---------------------------------------------------------------------------------
;EX Flip Kick Land 
[statedef 1122]
type = S
movetype = A
physics = S
anim = 1122

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 200,100,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1120, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1122, on ground]
type = velset
trigger1 = time = 0
y = 0

[state 1122, on ground]
type = posset
trigger1 = time = 0
y = 0

[State 1122, 2]
type = HitDef
trigger1 = animelem = 1
attr = S, SA
animtype  = hard
damage    = 36,4
getpower = 0
guardflag = HA
pausetime = 8,8
guard.pausetime = 10,10
priority = 2,hit
sparkno = 3
sparkxy = -100,-190
hitsound   = S5000,2
guardsound = S120, 0
ground.type = High
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -8
guard.hittime = 18 ;1
guard.slidetime = 18
airguard.hittime = 22
air.velocity = -6,-9
guard.dist = 480
fall = ifelse(var(6)>0,0,1)
air.fall = 1


[state 1122, skid]
type = velmul
trigger1 = 1
x = 0.5
persistent = 0

[State 1102, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = animelem = 2
postype = p1
anim = F120
pos = 20, 0
sprpriority = 3
persistent = 2

[State 1102, front walk balk dust 2]
type = explod
triggerall = vel x > 5
trigger1 = animelem = 2
postype = p1
anim = F120
pos = 112, -6
sprpriority = -2
persistent = 2

[state 1122, ctrlset]
type = ctrlset
triggerall = movehit
trigger1 = animelemtime(2) > 0
value = 1

[state 1120, combo damage]
type = varadd
trigger1 = movehit
v = 18
value = ifelse(var(18) > 97, -9,-12)
persistent = 0
ignorehitpause = 1

[state 1122, flip kick limiter]
type = varadd
trigger1 = movehit
v = 6
value = -1
persistent = 0

[state 1122,  Not active]
trigger1 = animelemtime(2) = 0
type = statetypeset
movetype = I

[state 1122, end with hit]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;===========================================================================
; Gattling Bunn
;===========================================================================

;Light version
[Statedef 1150]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 50
ctrl = 0
velset = 0,0
anim = 1150
sprpriority = 2

[state 1150, Gattling Bunn]
type = varset
trigger1 = time = 0
v = 21
value = 0
persistent = 0

[state 1150, lunge]
type = velset
trigger1 = animelemtime(2)=0
x = 18
persistent = 0

[State 1150, 2]
type = HitDef
trigger1 = animelem = 3 
attr = S, SA
animtype  = light
damage    = 18,2
guardflag = MA
pausetime = 2,2
sparkno = 0
sparkxy = -100,-230
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6
air.velocity = -4,0
persistent = 0
guard.velocity = -7          
guard.hittime = 17
guard.slidetime = 17
airguard.velocity = -3,-4
airguard.hittime = 7
guard.dist = 360
p2facing = 1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1150, mash counter]
type = varadd
trigger1 = command = "a" || command = "b" ||command = "c"
v = 21
value = ifelse(command="c", 10,5)
persistent = 1

[State 1150, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 1151



;--------------------------------------------------------------------------
;another part Light Gattling Bunn
[Statedef 1151]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 15
ctrl = 0
velset = 0,0
anim = 1151
sprpriority = 2

[state 1150, width]
type = width
trigger1 = 1
value = 120,30
ignorehitpause = 1

[state 1151, velset]
type = velset
trigger1 = 1
x = -0.05

;--------------------------------------------------


[state 1150, Gattling Bunn]
type = varset
trigger1 = time = 0
v = 21
value = 0
persistent = 0

[state 1161, loopset]
type = varset
trigger1 = time = 0
v = 22
value = 1
persistent = 0

[State 1151, 2]
type = HitDef
trigger1 = animelem = 3 
attr = S, SA
animtype  = light
damage    = 18,2
guardflag = MA
pausetime = 1,1
sparkno = 0
sparkxy = -100,-230
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6
air.velocity = -4.5,0
persistent = 0
guard.velocity = -7          
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -4,-4
airguard.hittime = 7
guard.dist = 360
p2facing = 1

[State 1151, 2]
type = HitDef
trigger1 = animelem = 7 
attr = S, SA
animtype  = light
damage    = 18,2
guardflag = MA
pausetime = 1,1
sparkno = 0
sparkxy = -100,-230
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6
air.velocity = -4.5,0
persistent = 0
guard.velocity = -7         
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -4,-4
airguard.hittime = 7
guard.dist = 360
p2facing = 1


[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -4
persistent = 0
ignorehitpause = 1

[state 1151, mash counter]
type = varadd
trigger1 = command = "a" || command = "b" ||command = "c"
v = 21
value = ifelse(command="c", 10,5)
persistent = 1

[State 1151, 4]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = !ailevel
trigger1 = var(21) >= 10
trigger2 = movecontact
trigger2 = ailevel
value = 1152

[State 1151, 4]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = var(21) < 10
trigger1 = !ailevel
trigger2 = !movecontact
trigger2 = ailevel
value = 1153
;---------------------------------------------------------------------------
;another part Light Gattling Bunn
[Statedef 1152]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 15
ctrl = 0
velset = 0,0
anim = 1151
sprpriority = 2

;--------------------------------------------------

[state 1150, width]
type = width
trigger1 = 1
value = 120,30
ignorehitpause = 1

[state 1152, Gattling Bunn]
type = varset
trigger1 = time = 0
v = 21
value = 0
persistent = 0

[state 1152, loopset]
type = varset
trigger1 = time = 0
v = 22
value = 1
persistent = 0

[State 1152, 2]
type = HitDef
trigger1 = animelem = 3 
attr = S, SA
animtype  = light
damage    = 18,2
guardflag = MA
pausetime = 1,1
sparkno = 0
sparkxy = -100,-230
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6
air.velocity = -4.5,0
persistent = 0
guard.velocity = -7         
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -4,-4
airguard.hittime = 7
guard.dist = 360
p2facing = 1

[State 1152, 2]
type = HitDef
trigger1 = animelem = 7 
attr = S, SA
animtype  = light
damage    = 18,2
guardflag = MA
pausetime = 1,1
sparkno = 0
sparkxy = -100,-230
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6
air.velocity = -4.5,0
persistent = 0
guard.velocity = -7        
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -4,-4
airguard.hittime = 7
guard.dist = 360
p2facing = 1


[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -4
persistent = 0
ignorehitpause = 1

[state 1152, mash counter]
type = varadd
trigger1 = command = "a" || command = "b" ||command = "c"
v = 21
value = ifelse(command="c", 10,5)
persistent = 1

[State 1152, 4]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = !ailevel
trigger1 = var(21) >= 10
trigger2 = movecontact
trigger2 = ailevel
value = 1151

[State 1151, 4]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = var(21) < 10
trigger1 = !ailevel
trigger2 = !movecontact
trigger2 = ailevel
value = 1153



;--------------------------------------------------------------------------
;End
[statedef 1153]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1152

[state 1153, ctrlset]
type = ctrlset
trigger1 = time > 10
value = 1

[state 1153, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
;Heavy Version
[Statedef 1160]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 50
ctrl = 0
velset = 0,0
anim = 1160
sprpriority = 2

[state 1160, Gattling Bunn]
type = varset
trigger1 = time = 0
v = 21
value = 0
persistent = 0

[state 1160, lunge]
type = velset
trigger1 = animelemtime(2)=0
x = 30
persistent = 0

[State 1160, 2]
type = HitDef
trigger1 = animelem = 3 
attr = S, SA
animtype  = light
damage    = 20,4
guardflag = MA
pausetime = 2,2
sparkno = 0
sparkxy = -100,-230
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6
air.velocity = -4,-2
persistent = 0
guard.velocity = -7          
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -4,-4
airguard.hittime = 7
guard.dist = 360
p2facing = 1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1161, mash counter]
type = varadd
trigger1 = command = "a" || command = "b" ||command = "c"
v = 21
value = ifelse(command="c", 10,5)
persistent = 1

[State 1160, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 1161



;--------------------------------------------------------------------------
;another part Light Gattling Bunn
[Statedef 1161]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 15
ctrl = 0
velset = 0,0
anim = 1161
sprpriority = 2

[state 1161, velset]
type = velset
trigger1 = 1
x = -0.05

[state 1150, width]
type = width
trigger1 = 1
value = 120,30
ignorehitpause = 1

;--------------------------------------------------

[state 1160, Gattling Bunn]
type = varset
trigger1 = time = 0
v = 21
value = 0
persistent = 0

[state 1161, loopset]
type = varset
trigger1 = time = 0
v = 22
value = 1
persistent = 0

[State 1161, 2]
type = HitDef
trigger1 = animelem = 3 
attr = S, SA
animtype  = light
damage    = 20,4
guardflag = MA
pausetime = 2,2
sparkno = 0
sparkxy = -100,-230
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -6
air.velocity = -4,-2
persistent = 0
guard.velocity = -7         
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -4,-4
airguard.hittime = 7
guard.dist = 360
p2facing = 1

[State 1161, 2]
type = HitDef
trigger1 = animelem = 7 
attr = S, SA
animtype  = light
damage    = 20,4
guardflag = MA
pausetime = 2,2
sparkno = 0
sparkxy = -100,-230
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -6
air.velocity = -4,-2
persistent = 0
guard.velocity = -7          
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -4,-4
airguard.hittime = 7
guard.dist = 360
p2facing = 1


[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -4
persistent = 0
ignorehitpause = 1

[state 1161, mash counter]
type = varadd
trigger1 = command = "a" || command = "b" ||command = "c"
v = 21
value = ifelse(command="c", 10,5)
persistent = 1

[State 1161, 4]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = !ailevel
trigger1 = var(21) >= 10
trigger2 = movecontact
trigger2 = ailevel
value = 1162

[State 1161, 4]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = var(21) < 10
trigger1 = !ailevel
trigger2 = !movecontact
trigger2 = ailevel
value = 1163
;---------------------------------------------------------------------------
;another part Light Gattling Bunn
[Statedef 1162]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 15
ctrl = 0
velset = 0,0
anim = 1161
sprpriority = 2

;--------------------------------------------------

[state 1150, width]
type = width
trigger1 = 1
value = 120,30
ignorehitpause = 1

[state 1162, Gattling Bunn]
type = varset
trigger1 = time = 0
v = 21
value = 0
persistent = 0

[state 1162, loopset]
type = varset
trigger1 = time = 0
v = 22
value = 1
persistent = 0

[State 1162, 2]
type = HitDef
trigger1 = animelem = 3 
attr = S, SA
animtype  = light
damage    = 20,4
guardflag = MA
pausetime = 2,2
sparkno = 0
sparkxy = -100,-230
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -6
air.velocity = -4,-2
persistent = 0
guard.velocity = -7          
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -4,-4
airguard.hittime = 7
guard.dist = 360

[State 1162, 2]
type = HitDef
trigger1 = animelem = 7 
attr = S, SA
animtype  = light
damage    = 20,4
guardflag = MA
pausetime = 2,2
sparkno = 0
sparkxy = -100,-230
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -6
air.velocity = -4,-2
persistent = 0
guard.velocity = -7        
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -4,-4
airguard.hittime = 7
guard.dist = 360


[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -4
persistent = 0
ignorehitpause = 1

[state 1162, mash counter]
type = varadd
trigger1 = command = "a" || command = "b" ||command = "c"
v = 21
value = ifelse(command="c", 10,5)
persistent = 1

[State 1162, 4]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = !ailevel
trigger1 = var(21) >= 10
trigger2 = movecontact
trigger2 = ailevel
value = 1161

[State 1162, 4]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = var(21) < 10
trigger1 = !ailevel
trigger2 = !movecontact
trigger2 = ailevel
value = 1163



;--------------------------------------------------------------------------
;End
[statedef 1163]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1162

[state 1163, ctrlset]
type = ctrlset
trigger1 = time > 14
value = 1

[state 1162, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;===========================================================================
; Air Butt Bump
;===========================================================================

[statedef 1200]
type = A
movetype = A
Physics = N
Ctrl = 0
anim = 1200
velset = 0,0
poweradd = 70

[state 1200, movement]
type = velset
trigger1 = animelem = 1
y = -1
x = 1

[state 1000, snd]
type = playsnd
trigger1 = animelem = 2
value = S1000,0

[state 1200, movement]
type = velset
triggerall = anim != 1201
trigger1 = animelemtime(2) = 0
y = -8
x = 25

[state 1200, gravity]
type = gravity
trigger1 = time > 6
trigger2 = movecontact

;[state 1200, brakes]
;type = velmul
;trigger1 = animtime = 22
;trigger1 = !movecontact
;x = 0.25


[State 1200, 2]
type = HitDef
trigger1 = 1
persistent = 0
attr = A, SA
animtype  = back
damage    = 100,10
Hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = 3
priority = 7
sparkxy = 100,-180
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -25, -15
air.velocity = -25, -15
fall = 1
fall.recover = 0
guard.velocity = -18          
guard.hittime = 19 ;-6
guard.slidetime = 19
airguard.velocity = -18,-4
airguard.hittime = 16
guard.dist = 640


[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1001, recov anim]
type = changestate
trigger1 = movecontact
value = 1202
persistent = 0
ignorehitpause = 1

[state 1200, freedom]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

[state 1200,  Not active]
trigger1 = animelemtime(5) = 0
type = statetypeset
movetype = I

[State 1200, 5]
type = ChangeState
trigger1 = pos y > 0
trigger1 = Vel Y > pos Y
value = 1002

;---------------------------------------------------------------------------
;Air Butt Bump Recovery
[statedef 1202]
type = A
movetype = I
physics = A
movehitpersist =1

[state 1202, anim]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 1200
value = 1201

[state 1202, anim]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 1210
value = 1211

[state 1202, anim]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 1220
value = 1221

;Light
[state 1202, on hit mul]
type = velmul
trigger1 = Prevstateno = 1200
trigger1 = time = 0
x = ifelse(movehit, -0.12,-0.36)
persistent = 0

[state 1001, bounce up]
type = veladd
trigger1 = Prevstateno = 1200
trigger1 = time = 0
y = ifelse(movehit, -12, -18)
persistent = 0

;Heavy
[state 1201, on hit mul]
type = velmul
trigger1 = prevstateno = 1210
trigger1 = time = 0
x = ifelse(movehit, -0.12, -0.24)
persistent = 0

[state 1210, bounce up]
type = veladd
trigger1 = prevstateno = 1210
trigger1 = time = 0
y = ifelse(movehit, -12, -24)
persistent = 0

;EX
[state 1220, on hit mul]
type = velmul
trigger1 = prevstateno = 1220
trigger1 = time = 0
x = ifelse(movehit, -0.12, -0.36)
persistent = 0

[state 1001, bounce up]
type = veladd
trigger1 = prevstateno = 1220
trigger1 = time = 0
y = ifelse(movehit, -12, -18)
persistent = 0

[state 1001, changestate]
type = changestate
trigger1 = animtime = 0
value  = 50
ctrl = 1

;---------------------------------------------------------------------------
;Hard Air Butt Bump
[statedef 1210]
type = A
movetype = A
Physics = N
Ctrl = 0
anim = 1210
velset = 0,0
poweradd = 80

[state 1210, movement]
type = velset
trigger1 = animelem = 1
y = -1
x = 1

[state 1000, snd]
type = playsnd
trigger1 = animelem = 2
value = S1000,0

[state 1210, movement]
type = velset
trigger1 = animelemtime(2) = 0
y = -8
x = 32

[state 1210, gravity]
type = gravity
trigger1 = time > 8
trigger2 = movecontact


[State 1200, 2]
type = HitDef
trigger1 = 1
persistent = 0
attr = A, SA
animtype  = back
damage    = 120,12
Hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = 3
priority = 7
sparkxy = 100,-180
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 25
ground.hittime  = 1
ground.velocity = -20, -15
air.velocity = -20, -15
fall = 1
fall.recover = 0
guard.velocity = -22          
guard.hittime = 17 ;-8
guard.slidetime = 17
airguard.velocity = -18,-4
airguard.hittime = 14
guard.dist = 640

[state 1210, recov anim]
type = changestate
trigger1 = movecontact
value = 1202
persistent = 0
ignorehitpause = 1

[state 1210, freedom]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1210,  Not active]
trigger1 = animelemtime(5) = 0
type = statetypeset
movetype = I

[State 1210, 5]
type = ChangeState
trigger1 = pos y > 0
trigger1 = Vel Y > pos Y
value = 1012

;---------------------------------------------------------------------------
;ex air butt bump
[statedef 1220]
type = A
movetype = A
Physics = N
Ctrl = 0
anim = 1220
velset = 0,0

[state 1220, poweradd]
type = poweradd
trigger1 = time = 0
value = -500
persistent = 0

[state 1000, snd]
type = playsnd
trigger1 = animelem = 2
value = S1000,0

[state 1220, wall bounce limiter]
type = varadd
trigger1 = movehit = 1
v = 7
value = -1
persistent = 0
ignorehitpause = 1


[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 200,100,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1220, movement]
type = velset
trigger1 = animelem = 1
y = -1
x = 1

[state 1220, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1220, movement]
type = velset
trigger1 = animelemtime(2) = 0
y = -8
x = 40

[state 1220, gravity]
type = gravity
trigger1 = time > 4
trigger2 = movecontact

[State 1220, 2]
type = HitDef
trigger1 = 1
attr = A, SA
animtype  = back
damage    = 100,10
persistent = 0
getpower = 0
Hitflag = MAF
guardflag = MA
pausetime = 14,14
guard.pausetime = 12,12
sparkno = 3
priority = 7
id = 1220
sparkxy = 100,-180
hitsound   = S1,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 25
ground.hittime  = 40
air.hittime = 40
ground.velocity = -65,ifelse(var(7) > 1, -24, -8)
air.velocity = -65, ifelse(var(7) > 1, -18, 12)
airguard.hittime = 25
guard.hittime = 25
guard.slidetime = 25
guard.velocity = -16
airguard.velocity = -4,-2
fall.recover = 0
guard.dist = 640
fall = 1

[state 1220, targetstate]
type = targetstate
trigger1 = movehit
trigger1 = var(7) > 0
trigger1 = hitpausetime = 11
value = 670
id = 1220
ignorehitpause = 1



[state 1001, recov anim]
type = changestate
trigger1 = movecontact
value = 1202
persistent = 0


[state 1220, passthrough]
type = playerpush
trigger1 = 1
value = 0

[state 1200, freedom]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1


[state x, combo damage score]
type = varadd
trigger1 = movehit
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 1220,  Not active]
trigger1 = animelemtime(5) = 0
type = statetypeset
movetype = I

[State 1200, 5]
type = ChangeState
trigger1 = pos y > 0
trigger1 = Vel Y > pos Y
value = 1022

;===========================================================================
; Defensive Options
;===========================================================================

; Dodge roll
[statedef 1400]
type    = A
physics = S
ctrl = 0
anim = 1400
sprpriority = 1

[state 1400, poweradd]
type = poweradd
trigger1 = time = 0
value = -1000
persistent = 0

[state 1001, afterimage]
type = afterimage
trigger1 = time = 0
;length = 1
time = 5
timegap = 1

[state 1400, freeze]
type = pause
trigger1 = time = 0
time = 8
endcmdbuftime = 8
movetime = 0

[state 1400, dim]
type = bgpalfx
trigger1 = time = 0
time = 8
mul = 200,200,200

[State 1400, 1]
type = VelSet
trigger1 = animelem = 7, < 0
x = -18
persistent = 1

[state 1400, 2]
type = velset
trigger1 = animelem = 8
x = 0
persistent = 1

[State 1400, 4]
type = EnvShake
trigger1 = animelem = 4 || animelem = 6
time = 5
ampl = 2
freq = 100
phase = 100


[state 1400, HB]
Type = hitby
trigger1 = 1
value = SCA,AT

[State 1400, 3]
type = ChangeState
trigger1 = animtime = 0 
value = 0
ctrl = 1
;------------------------------------------------------------------
; Dodge roll
[statedef 1401]
type    = A
physics = S
ctrl = 0
anim = 1401
sprpriority = 1

[state 1400, poweradd]
type = poweradd
trigger1 = time = 0
value = -1000
persistent = 0

[state 1401, playerpush]
type = playerpush
trigger1 = 1
value = 0

[State 1020, Blink Yellow]
type = PalFX
trigger1 = 1
time = 1
add = 32,16,0
sinadd = 64,32,5,3

[state 1001, afterimage]
type = afterimage
trigger1 = time = 0
;length = 1
time = 5
timegap = 1

[state 1400, freeze]
type = pause
trigger1 = time = 0
time = 8
movetime = 0

[State 1400, 1]
type = VelSet
trigger1 = animelem = 7, < 0
x = 18
persistent = 1

[state 1400, 2]
type = velset
trigger1 = animelem = 8
x = 0
persistent = 1

[State 1400, 4]
type = EnvShake
trigger1 = animelem = 2 || animelem = 6
time = 5
ampl = 2
freq = 100
phase = 100


[state 1400, HB]
Type = hitby
trigger1 = 1
value = SCA,AT

[State 1400, 3]
type = ChangeState
trigger1 = animtime = 0 
value = 0
ctrl = 1

;==========================================================================
; Super Portrait
;==========================================================================
[Statedef 3100]
type = S
movetype = I
physics = S
sprpriority = -4

[state 3100, explod]
type = explod
trigger1 = time = 0
anim = 3100
id = 3100
ownpal = 1
bindtime = -1
scale = 1,1
sprpriority = -4
postype = back
supermovetime = 90
pausemovetime  = 90
removetime = 45
supermove = 9999

[state 3100, move]
trigger1 = time = 0
type = velset
x = -0.15

;[state 3100, move]
;trigger1 = time = 20
;type = velset
;x = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =  1
flag = noBG

[State 9999,Destory self]
type = DestroySelf
trigger1 = time = 45

;===========================================================================
;                         Super Combo                                       
;===========================================================================
;Total damage: 480  Heals: 120
;Initial Bump
[statedef 3000]
type    = U
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 3002

[state 3000, jump]
type = velset
trigger1 = statetype != A
trigger1 = animelemtime(1) = 1
y = -10

[state 3000, velset]
type = velset
trigger1 = animelemtime(3) = 0
x = 0
y = 0

[state 3000, statetypeset]
type = statetypeset
trigger1 = animelemtime(3) = 0
statetype = A

[state x, Minimum Super combo damage]
type = varset
trigger1 = time = 0
trigger1 = var(18) < 90
v = 18
value = 90
ignorehitpause = 1

[state 3000, no bg]
type = assertspecial
trigger1 = animelemtime(1) >= 4 && animelemtime(9) < 0
flag = nobg
ignorehitpause = 1
persistent = 1

[state 3000, velset]
type = velset
trigger1 = animelem = 10
x = 64
y = 0

[state 41, after image]
type = afterimage
trigger1 = animelemtime(10) = 0
time = 12
timegap = 1
framegap = 3
length = 12
palcolor = 256
palbright= 128,128,128
paladd= 96,64,0
palcontrast= 256,256,256
trans = "none"

[state 3000, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3000, eat cake health]
type = lifeadd
trigger1 = animelemtime(5) = 0
value = 30

[state 3000, eat cake health]
type = lifeadd
trigger1 = animelemtime(6) = 0
value = 30

[state 3000, eat cake health]
type = lifeadd
trigger1 = animelemtime(7) = 0
value = 60


[State 3000, Super Pause]
type = SuperPause
trigger1 = animelemtime(3) = 0
sound = S3000, 0
poweradd = -3000
pos = -10,-200
time = 60
movetime = 60


[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(3) >= 0  && animelemtime(3) < 15
anim = 3100
postype = back
sprpriority = -3
supermovetime = 60
removetime = 1
pausemovetime = 60
scale = (3-(time*0.15))*(1),(3-(time*0.15))*(1)
pos = 0,60-time*5
ownpal = 1


[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(3) = 15
anim = 3100
postype = back
vel = -0.1,0
sprpriority = -3
supermovetime = 60
removetime = 45
pausemovetime = 60
pos = 0,0
scale = 1,1
ownpal = 1



[State 3000, 1]
type = HitDef
Trigger1 = !movecontact
attr = A, HA          
hitflag = MAF  
guardflag = MA        
priority = 4, Miss    
damage = 25,50
getpower = 0
givepower = 95
pausetime = 30,30
sparkno = 3
id = 3000
p1facing = 1
p2facing = 1
envshake.ampl = 12
envshake.time = 8
sparkxy = -150,-210
hitsound   = S3010,2
guardsound = S120, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 30
ground.velocity = -2
air.velocity = -2,-10
air.hittime = 18  
kill = 0 
guard.dist = 640
fall.recover = 0

[state 3000, targetstate]
type = targetstate
triggerall = numtarget(3000)
trigger1 = movehit
;trigger1 = hitpausetime = 29
value = 3010
ignorehitpause = 1

[state 3000, hit]
type = changestate
triggerall = numtarget(3000)
trigger1 = movehit
;trigger1 = hitpausetime = 29
value = 3001
ignorehitpause = 1

[state 3000, slowdown]
type = velmul
trigger1 = animelemtime(13) = 0
x = 0.5
y = 0

[state 3000, slowdown]
type = velmul
trigger1 = animelemtime(15) = 0
x = 0.5
y = 0

[state 3000, slowdown]
type = velmul
trigger1 = animelemtime(17) = 0
x = 0.5
y = 0

[state 3000, gravity]
type = gravity
trigger1 = animelemtime(19) > 0

[state 3000, missed]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52 



;---------------------------------------------------------------------------       
;Auto Combo portion
[statedef 3001]
type    = A
physics = N
movetype = A
ctrl = 0
sprpriority = 1
velset = 0,0

[state 3001, anim]
type = changeanim
trigger1 = time = 0
value = 3010

[state 3001, nothitby]
type = nothitby
trigger1 = 1
value = SCA

;==========================================================================
; Binds
;==========================================================================

;[State 3001, Bind 1-12]
;type = TargetBind
;trigger1 = Animelemtime(16) < 0
;pos = 160,-240
;ignorehitpause = 1

;[State 3001, Bind 12-49]
;type = TargetBind
;trigger1 = AnimElemtime(16) >= 0 && Animelemtime(24) < 0
;pos = 180, -240

;[State 3001, Bind 12-49]
;type = TargetBind
;trigger1 = AnimElemtime(24) >= 0 && Animelemtime(35) < 0
;pos = 200, -240

;[State 3001, Bind 12-49]
;type = TargetBind
;trigger1 = AnimElemtime(35) >= 0 && Animelemtime(44) < 0
;pos = 220, -240


;[State 3001, Bind 12-49]
;type = TargetBind
;trigger1 = AnimElemtime(44) >= 0 
;pos = 240, -240

;=================
;Target life add
;=================

[state 3001, targetlifeadd]
type = targetlifeadd
trigger1 = animelemtime(4) = 0
value = ceil(fvar(10)*-22)
kill = 0

[state 3001, targetlifeadd]
type = targetlifeadd
trigger1 = animelemtime(7) = 0
value = ceil(fvar(10)*-22)
kill = 0

[state 3001, targetlifeadd]
type = targetlifeadd
trigger1 = animelemtime(10) = 0
value = ceil(fvar(10)*-37)
kill = 0

[state 3001, targetlifeadd]
type = targetlifeadd
trigger1 = animelemtime(17) = 0
value = ceil(fvar(10)*-42)
kill = 0

[state 3001, targetlifeadd]
type = targetlifeadd
trigger1 = animelemtime(25) = 0
value = ceil(fvar(10)*-42)
kill = 0

[state 3001, targetlifeadd]
type = targetlifeadd
trigger1 = animelemtime(36) = 0
value = ceil(fvar(10)*-47)
kill = 0

[state 3001, targetlifeadd]
type = targetlifeadd
trigger1 = animelemtime(45) = 0
value = ceil(fvar(10)*-47)
kill = 0

;====================
;targetpoweradd
;====================
[state 3001, hit count add]
type = targetpoweradd
trigger1 = animelemtime(4) = 0
trigger2 = animelemtime(7) = 0
trigger3 = animelemtime(10) = 0
trigger4 = animelemtime(17) = 0
trigger5 = animelemtime(25) = 0
trigger6 = animelemtime(36) = 0
trigger7 = animelemtime(45) = 0
value = 70
persistent = 1
ignorehitpause = 0

;====================
;hitadd
;====================
[state 3001, hit count add]
type = hitadd
trigger1 = animelemtime(4) = 0
trigger2 = animelemtime(7) = 0
trigger3 = animelemtime(10) = 0
trigger4 = animelemtime(17) = 0
trigger5 = animelemtime(25) = 0
trigger6 = animelemtime(36) = 0
trigger7 = animelemtime(45) = 0
value = 1
persistent = 1
ignorehitpause = 0

;====================
;Sounds
;====================

[state 3001, playsnd]
type = playsnd
trigger1 = animelemtime(4) = 0
trigger2 = animelemtime(7) = 0
trigger3 = animelemtime(10) = 0
value = F5,0
persistent = 1

[state 3001, playsnd]
type = playsnd
trigger1 = animelemtime(17) = 0
trigger2 = animelemtime(25) = 0
trigger3 = animelemtime(36) = 0
trigger4 = animelemtime(45) = 0
value = S1,3
persistent = 1

;======================
;Pauses
;======================

[state 3001, pause]
type = pause
trigger1 = animelemtime(4) = 1
trigger2 = animelemtime(7) = 1
trigger3 = animelemtime(10) = 1
trigger4 = animelemtime(17) = 1
trigger5 = animelemtime(25) = 1
trigger6 = animelemtime(36) = 1
trigger7 = animelemtime(45) = 1
time = 2
persistent = 1

;===================================
;Targetveladd
;===================================

[state 3001, pause]
type = targetveladd
trigger1 = animelemtime(4) = 0
trigger2 = animelemtime(7) = 0
trigger3 = animelemtime(10) = 0
trigger4 = animelemtime(17) = 0
trigger5 = animelemtime(25) = 0
trigger6 = animelemtime(36) = 0
trigger7 = animelemtime(45) = 0
x = -2
persistent = 1


;===================================
; Hitsparks
;===================================

[state 3001, hitspark]
type = explod
trigger1 = animelemtime(4) = 0
anim = F1
postype = p1
pos = 90,-60
removetime= -2
persistent = 1
sprpriority = 5

[state 3001, hitspark]
type = explod
trigger1 = animelemtime(7) = 0
anim = F1
postype = p1
pos = 100,-35
removetime= -2
persistent = 1
sprpriority = 5

[state 3001, hitspark]
type = explod
trigger1 = animelemtime(10) = 0
anim = F1
postype = p1
pos = 120,-300
removetime= -2
persistent = 1
sprpriority = 5

[state 3001, hitspark]
type = explod
trigger1 = animelemtime(17) = 0
anim = F2
postype = p1
pos = 180,-280
removetime= -2
persistent = 1
sprpriority = 5

[state 3001, hitspark]
type = explod
trigger1 = animelemtime(25) = 0
anim = F2
postype = p1
pos = 180,-280
removetime= -2
persistent = 1
sprpriority = 5

[state 3001, hitspark]
type = explod
trigger1 = animelemtime(36) = 0
anim = F2
postype = p1
pos = 180,-280
removetime= -2
persistent = 1
sprpriority = 5

[state 3001, hitspark]
type = explod
trigger1 = animelemtime(45) = 0
anim = F2
postype = p1
pos = 180,-280
removetime= -2
persistent = 1
sprpriority = 5


;;;---------------------------Hitdefs Obsolete




;movement
[state 3001, vel 1]
trigger1 = animelem = 14
type = veladd
x = 2

[state 3001, brakes 1]
type = velset
trigger1 = animelem = 17
x = 0

[state 3001, vel 2]
trigger1 = animelem = 22
type = veladd
x = 2

[state 3001, brakes 2]
type = velset
trigger1 = animelem = 25
x = 0

[state 3001, spr priority]
type = sprpriority
trigger1 = animelem = 32
value = -2

[state 3001, vel 3]
trigger1 = animelem = 33
type = veladd
x = 2

[state 3001, brakes 3]
type = velset
trigger1 = animelem = 36
x = 0

[state 3001, vel 4]
trigger1 = animelem = 42
type = veladd
x = 9

[state 3001, brakes 4]
type = velset
trigger1 = animelem = 45
x = 0

;[state 3001, end hit]
[state 3001, end hit]
type = changestate
trigger1 = animtime = 0
value = 3002

;-------------------------------------------------------------------------
;Final Bump
[statedef 3002]
type    = A
physics = N
movetype = A
ctrl = 0
sprpriority = 3
velset = 0,0
anim = 3000

[state 3002, velset]
type = velset
trigger1 = animelem = 1
x = -4

[state 3002, velset]
type = velset
trigger1 = animelem = 2
x = -10

[state 3002, slowdown]
type = velmul
trigger1 = animelemtime(3) = 0
x = 0.5

[state 3002, slowdown]
type = velmul
trigger1 = animelemtime(4) = 0
x = 0.5

[state 3002, slowdown]
type = velmul
trigger1 = animelemtime(5) = 0
x = 0.5



[state 3002, expand snd]
type = playsnd
trigger1 = animelemtime(1) =1 
value = S3000,1

[state 3002, expand snd]
type = playsnd
trigger1 = animelemtime(1) =1 
value = S3000,1


[state 3002, explod]
type = explod
trigger1 = time = 0
trigger1 = anim = 3000
anim = 3001
scale = Const(size.xscale),Const(size.yscale)
sprpriority = 2
bindtime = -1
id = 3001
postype = p1
pos = 0,0

[state 3002, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3002, move]
type = velset
trigger1 = animelem = 6
trigger1 = anim = 3000
x = 45
y = -5

;======================
; Change & targetstate
;======================

[state 3002, targetstate]
type = targetstate
trigger1 = animelemtime(6) = 3
id = 3000
value = 3005

[state 3002, changestate]
type = changestate
trigger1 = animelemtime(6) = 3
value = 3003






[State 3001, Obsolete]
type = HitDef
Trigger1 = animelem = 6
persistent = 0
attr = A, HA          
hitflag = MAF  
guardflag = MA        
priority = 4, hit
sparkno = -1 
damage = 215,20
getpower = 0
givepower = 500
pausetime = 0,0
id = 3000
guard.pausetime = 12,12
guard.hittime = 12
sparkno = 0
sparkxy = -150,-210
hitsound   = S1,3
guardsound = S120, 0
ground.type = high
ground.slidetime = 6
ground.hittime  = 75
guard.hittime = 12
p1stateno = 3003
p2stateno = 3005
ground.velocity = -30,-20
air.velocity = -30,-20
air.hittime = 75
fall = 1
fall.recover = 0
guard.dist = 160

[state 3002, gravity]
type = gravity
trigger1 = anim = 3001
trigger1 = time > 26

[state 3002, endstate]
type = changestate
trigger1 = animtime = 0
value = 50

[state 3002, endstate]
type = changestate
trigger1 = pos y > 0
trigger1 = vel y > pos y
value = 1012


;--------------------------------------------------------------------------
; Face wedge
[statedef 3003]
type    = A
physics = N
movetype = A
ctrl = 0
sprpriority = 3
anim = 3005

[state 3003, velset]
type = velset
trigger1 = time = 0
x = 0.4
y = -0.1

[state 3003, hitadd]
type = hitadd
trigger1 = time = 0
value = 1
ignorehitpause = 1
persistent = 0

[state 3003, targetlifeadd]
type = targetlifeadd
trigger1 = time = 0
value = ceil(fvar(10) * -185)
persistent = 0

[state 3002, final bump snd]
type = playsnd
trigger1 = time = 0
value = S3010,0


[state 3003, sound]
type = playsnd
trigger1 = time = 0
value = S3010,0

[state 3003, sound]
type = playsnd
trigger1 = time = 0
value = S3010,0

[state 3003, width]
type = width
trigger1 = 1
edge = 250,100

[state 3002, wob animation 2]
type = explod
trigger1 = time = 0
anim = 3006
bindtime = -1
scale = Const(size.xscale),Const(size.yscale)
id = 3006
pos = 0,0
postype = p1
bindtime = -1
persistent = 0
ignorehitpause = 1

[state 3002, slow-mo]
type = pause
trigger1 = animtime < 12
time = 2
persistent = 1

[state 3003, end]
type = targetlifeadd
trigger1 = time = 16
value = floor(-11 * fvar(10))

[state 3003, targetlifeadd]
type = targetpoweradd
trigger1 = time = 16
value = 10

[state 3003, hitadd]
type = hitadd
trigger1 = time = 16
value = 1
ignorehitpause = 1


[state 3002, explod remove]
type = removeexplod
trigger1 = 1
id = 3001
ignorehitpause = 1

[state 3002, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3003, targetbind]
type = targetbind
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
pos = 198, -274

[state 3003, targetbind]
type = targetbind
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
pos = 198, -274

[state 3003, targetbind]
type = targetbind
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
pos = 198, -274

[state 3003, targetbind]
type = targetbind
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
pos = 198, -274

[state 3003, targetbind]
type = targetbind
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
pos = 198, -274

[state 3003, targetbind]
type = targetbind
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
pos = 198, -274

[state 3003, targetbind]
type = targetbind
trigger1 = animelemtime(7) >= 0 && animelemtime(8) < 0
pos = 198, -274

[state 3003, targetbind]
type = targetbind
trigger1 = animelemtime(8) >= 0 && animelemtime(9) < 0
pos = 198, -274


[state 3003, end]
type = changestate
trigger1 = time = 24
value = 3004

;----------------------------------------------------------------------------------
; bounce off
[statedef 3004]
type = A
physics = N
movetype = I
anim = 3006
sprpriority = -2

[state 3006, removeexplod]
type = removeexplod
trigger1 = 1
id = 3006

[state 3004, bounce]
type = velset
trigger1 = time = 0
x = -18
y = -14

[state 3004, nothitby]
type = nothitby
trigger1 = 1
value = SCA


[state 3004, gravity]
type = gravity
trigger1 = 1

[state 3002, endstate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1012

;--------------------------------------------------------------------------
;victim
[statedef 3005]
type = A
movetype = H
physics = N

[state 3005, anim]
type = changeanim2
trigger1 = time = 0
value = 3008

[state 3005, stop sound]
type = stopsnd
trigger1 = time = 15
channel = 1

[state 3005, velset]
;trigger1 = !gethitvar(isbound)
trigger1 = animtime = 0
type = velset
x = -45
y = -15

[state 3000, posadd]
type = posadd
trigger1 = animtime = 0
y = -const(size.head.pos.y)


[state 3005, selfstate]
type = selfstate
trigger1 = animtime = 0
value = 5050

;---------------------------------------------------------------------------
; Combo protion victim
[statedef 3010]
type = A
movetype = H
physics = N

[state 3010, anim]
type = changeanim2
trigger1 = time = 0
value = 3015

[state 3010, velmul]
type = velmul
trigger1 = 1
x = 0.1
y = 0


[state 3010, screenbound]
type = screenbound
trigger1 = 1
movecamera = 0,0

[state 3005, selfstate]
type = selfstate
;trigger1 = !gethitvar(isbound)
trigger1 = animtime = 0
value = 5050

;===========================================================================
;Super Upperbutt
; Damage = 280 & invunerable
;===========================================================================
[statedef 3040]
type = A
movetype = A
Physics = N
Ctrl = 0
velset = 0,0
anim = 3040

[state x, combo damage score]
type = varset
trigger1 = var(18) < 70
v = 18
value = 70
persistent = 0
ignorehitpause = 1

[state 3040, 1]
type = nothitby
trigger1 = time < 70
value = SCA

[state 3000, no bg]
type = assertspecial
trigger1 = animelemtime(2) = [0,60]
flag = nobg
ignorehitpause = 1

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelemtime(2) = 0
sound = S3000, 0
poweradd = -1000
pos = -10,-200
time = 60
movetime = 60


[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(2) =[0, 14]
anim = 3100
postype = back
sprpriority = -3
supermovetime = 60
removetime = 1
pausemovetime = 60
scale = (3-(time*0.15))*(1),(3-(time*0.15))*(1)
pos = 0,60-time*5
ownpal = 1


[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(2) = 15
anim = 3100
postype = back
vel = -0.1,0
sprpriority = -3
supermovetime = 60
removetime = 45
pausemovetime = 60
pos = 0,0
scale = 1,1
ownpal = 1

[State 3040, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 3
attr = A, HA
animtype  = Heavy
damage    = 10,ifelse(enemy,statetype = A, 6,2)
guardflag = MA
hitflag = MAF
getpower = 0
pausetime = 2,2
priority = 7,hit
sparkno = 2
sparkxy = -20,-195
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = 4
air.velocity = 4,-10
guard.dist = 360

[State 3040, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 4 
persistent = 0
attr = A, HA
animtype  = UP
damage    = 20,ifelse(enemy,statetype = A,6,2)
guardflag = MA
pausetime = 6,6
getpower = 0
sparkno = 3
priority = 6,hit
sparkxy = -60,-280
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
air.hittime = 30
ground.velocity = 2, -54
air.velocity = 1,-48
guard.velocity = -8          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = 2,-44
airguard.hittime = 22
guard.dist = 360

[State 3040, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 5 
persistent = 0
attr = A, HA
animtype  = UP
damage    = 20,ifelse(enemy,statetype = A,6,2)
guardflag = MA
pausetime = 6,6
getpower = 0
sparkno = 3
priority = 6,hit
sparkxy = -60,-280
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
air.hittime = 30
ground.velocity = 2, -54
air.velocity = 1,-48
guard.velocity = -8          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = 2,-44
airguard.hittime = 22
guard.dist = 360

[State 3040, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 6 
persistent = 0
attr = A, HA
animtype  = UP
damage    = 20,ifelse(enemy,statetype = A,6,2)
guardflag = MA
pausetime = 6,6
getpower = 0
sparkno = 3
priority = 6,hit
sparkxy = -60,-280
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
air.hittime = 30
ground.velocity = 2, -54
air.velocity = 1,-48
guard.velocity = -8          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = 2,-44
airguard.hittime = 22
guard.dist = 360

[State 3040, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 7 
persistent = 0
attr = A, HA
animtype  = UP
damage    = 20,ifelse(enemy,statetype = A,6,2)
guardflag = MA
pausetime = 6,6
getpower = 0
sparkno = 3
priority = 6,hit
sparkxy = -60,-280
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
air.hittime = 30
ground.velocity = 2, -54
air.velocity = 1,-48
guard.velocity = -8          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = 2,-44
airguard.hittime = 22
guard.dist = 360

[State 3040, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 8 
persistent = 0
attr = A, HA
animtype  = UP
damage    = 20,ifelse(enemy,statetype = A,6,2)
guardflag = MA
pausetime = 6,6
getpower = 0
sparkno = 3
priority = 6,hit
sparkxy = -60,-280
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
air.hittime = 30
ground.velocity = 2, -54
air.velocity = 1,-48
guard.velocity = -8          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = 2,-44
airguard.hittime = 22
guard.dist = 360

[State 3040, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 9 
persistent = 0
attr = A, HA
animtype  = UP
damage    = 20,ifelse(enemy,statetype = A,6,2)
guardflag = MA
pausetime = 6,6
getpower = 0
sparkno = 3
priority = 6,hit
sparkxy = -60,-280
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
air.hittime = 30
ground.velocity = 2, -54
air.velocity = 1,-48
guard.velocity = -8          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = 2,-44
airguard.hittime = 22
guard.dist = 360

[State 3040, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 10 
persistent = 0
attr = A, HA
animtype  = UP
damage    = 20,ifelse(enemy,statetype = A,6,2)
guardflag = MA
pausetime = 8,8
getpower = 0
sparkno = 3
priority = 6,hit
sparkxy = -60,-280
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
air.hittime = 30
ground.velocity = 2, -54
air.velocity = 1,-48
guard.velocity = -8          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = 2,-44
airguard.hittime = 22
guard.dist = 360
envshake.ampl = 4
envshake.time = 8

[State 3040, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 11
persistent = 0
attr = A, HA
animtype  = UP
damage    = 20,ifelse(enemy,statetype = A,6,2)
guardflag = MA
pausetime = 12,12
getpower = 0
sparkno = 3
priority = 6,hit
sparkxy = -60,-280
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
air.hittime = 30
ground.velocity = 2, -54
air.velocity = 1,-48
guard.velocity = -8          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = 2,-44
airguard.hittime = 22
guard.dist = 360
envshake.ampl = 4
envshake.time = 12

[State 3040, 2]
type = HitDef
triggerall = numenemy
trigger1 = animelem = 12 
persistent = 0
attr = A, HA
animtype  = UP
damage    = 110,ifelse(enemy,statetype = A,33,11)
guardflag = MA
pausetime = 22,22
getpower = 0
sparkno = 4
priority = 6,hit
sparkxy = -60,-280
hitsound   = S5000,2
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
air.hittime = 30
ground.velocity = -8, -33
air.velocity = -8,-33
guard.velocity = -8          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = -9,-48
airguard.hittime = 22
guard.dist = 360
envshake.ampl = 8
envshake.time = 16
air.cornerpush.veloff = -40
fall = 1
fall.recover = 0


[state 3040, lift]
type = velset
trigger1 = animelem = 4
x = 18
y = -56
persistent = 0

[state 3040, grav]
type = gravity
trigger1 = pos y < -1
ignorehitpause = 0 



[state 3040, end]
type = changestate
trigger1 = vel y > 0
value = 3041

;----------------------------------------------------------------------------
;1st Fall
[statedef 3041]
type    = A
physics = N
movetype = I
ctrl = 0



[state 3041, velset]
type = velmul
trigger1 = time = 0
x = 0

[state 3040, 1]
type = nothitby
trigger1 = 1
value = SCA

[State 3041, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 44

[state 3041, grav]
type = gravity
trigger1 = 1

[state 3041, landing]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52


;--------------------------------------------------------------------------
; Flip Kick Tweark Combo  Damage: ~200 and combo starter
;--------------------------------------------------------------------------
;Super Flip Kick
[statedef 3080]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
sprpriority = 2

[state 3080, anim]
type = changeanim
trigger1 = anim != 3080
value = 3080


[state 3000, no bg]
type = assertspecial
trigger1 = animelemtime(1) >= 0  && animelemtime(7) < 48
flag = nobg
ignorehitpause = 1
persistent = 1

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelemtime(1) = 0
sound = S3000, 0
poweradd = -1000
pos = -10,-200
time = 60
movetime = 60


[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(1) >= 0 && animelemtime(7) < 3
anim = 3100
postype = back
sprpriority = -3
supermovetime = 60
removetime = 1
pausemovetime = 60
scale = (3-(time*0.15))*(1),(3-(time*0.15))*(1)
pos = 0,60-time*5
ownpal = 1


[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(7) = 3
anim = 3100
postype = back
vel = -0.1,0
sprpriority = -3
supermovetime = 60
removetime = 45
pausemovetime = 60
pos = 0,0
scale = 1,1
ownpal = 1

[state 3080, nothitby]
type = nothitby
trigger1 = 1
value = ,AP

[state x, combo damage score]
type = varset
trigger1 = var(18) < 70
v = 18
value = 70
persistent = 0
ignorehitpause = 1

[state 3080, 3]
type = velset
trigger1 = animelem = 3
x = 8
persistent = 0

[State 3080, 5]
type = ChangeState
trigger1 = animtime = 0
value = 3081

;------------------------------------------------------------------------------
;Air Flip Kick Light
[statedef 3081]
type = A
movetype = A
physics = N
poweradd = 15
anim = 1101

[state 3081, sfx]
type = playsnd
trigger1 = time = 0
value = S1, 0



[state 3081, nothitby]
type = nothitby
trigger1 = 1
value = ,AP

[state 3081, launch]
type = velset
trigger1 = animelem = 1
x = ifelse(p2bodydist x < 1000, floor(p2bodydist x * 0.08), 45) 
y = -16
persistent = 0

[state 3081, gravity]
type = gravity
trigger1 = pos y < -1

[State 3081, 2]
type = HitDef
trigger1 = animelem = 2
attr = A, HA
animtype  = light
damage    = 20,2
guardflag = HA
getpower = 0
pausetime = 2,2
priority = 2,dodge
guard.pausetime = 3,1
guard.hittime = 11
sparkno = 1
sparkxy = -100,-125
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -6.5
air.velocity = -6,-9
guard.dist = 640

[State 3081, 2]
type = HitDef
trigger1 = animelem = 4
attr = A, HA
animtype  = light
damage    = 20,2
guardflag = HA
pausetime = 2,2
getpower = 0
guard.pausetime = 3,1
guard.hittime = 11
priority = 2,dodge
sparkno = 1
sparkxy = -100,-160
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -6.5
air.velocity = -6,-9
guard.dist = 640

[state 3081, landing]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 3082

;---------------------------------------------------------------------------------
;Flip Kick Land Light
[statedef 3082]
type = S
movetype = A
physics = S
anim = 3082

[state 3082, on ground]
type = velset
trigger1 = time = 0
y = 0

[state 3082, on ground]
type = posset
trigger1 = time = 0
y = 0

[State 3082, 2]
type = HitDef
trigger1 = animelem = 1
attr = S, HA
animtype  = light
damage    = 20,2
guardflag = HA
pausetime = 6,6
getpower = 0
guard.pausetime = 12,12
sparkno = 3
priority = 2,dodge
sparkxy = -100,-190
hitsound   = S5000,2
guardsound = S120, 0
ground.type = High
ground.slidetime = 34
ground.hittime  = 34
ground.velocity = -6
guard.hittime = 4
guard.slidetime = 4
guard.velocity = -8
air.velocity = -6,-9
guard.dist = 250

[state 3082, skid]
type = velmul
trigger1 = 1
x = 0.2
persistent = 0

;[state 1102, end]
;type = changestate
;trigger1 = animtime = 0
;trigger1 = movehit
;value = 1103

[state 1200,  Not active]
trigger1 = animelemtime(2) = 0
trigger1 = !movecontact
type = statetypeset
movetype = I

[state 3082, end with hit]
type = changestate
triggerall = movecontact
trigger1 = animelemtime(2) = 2
value = 3083

[state 3082, end with hit]
type = changestate
triggerall = !movecontact
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Gattling Bunn!
[Statedef 3083]
type    = S
movetype= A
physics = S
juggle  = 5
ctrl = 0
velset = 0,0
anim = 3085
sprpriority = 2

[state 1150, width]
type = width
trigger1 = 1
value = 120,30
ignorehitpause = 1

[state 1150, Gattling Bunn]
type = varset
trigger1 = time = 0
v = 21
value = 0
persistent = 0

[state 3083, moveforward]
type = veladd
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(5) = 0
trigger3 = animelemtime(9) = 0
trigger4 = animelemtime(13) = 0
trigger5 = animelemtime(17) = 0
trigger6 = animelemtime(21) = 0
trigger7 = animelemtime(25) = 0
trigger8 = animelemtime(29) = 0
trigger9 = animelemtime(33) = 0
trigger10 = animelemtime(37) = 0
trigger11 = animelemtime(41) = 0
trigger12 = animelemtime(45) = 0
x = 3.25

[State 1150, 2]
type = HitDef
trigger1 = animelem = 2 
attr = S, HA
animtype  = light
damage    = 10,2
getpower = 0
guardflag = MA
pausetime = 2,2
numhits = 2
sparkno = 1
sparkxy = -100,-230
hitsound   = 5,1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = 1
air.velocity = 1,0
persistent = 0
guard.velocity = -7          
guard.hittime = 8
guard.slidetime = 8
airguard.velocity = -5,-4
airguard.hittime = 7
guard.dist = 190

[State 1150, 2]
type = HitDef
trigger1 = animelem = 5 
attr = S, HA
animtype  = light
damage    = 10,2
getpower = 0
guardflag = MA
pausetime = 2,2
numhits = 2
sparkno = 1
sparkxy = -100,-230
hitsound   = 5,1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = 1
air.velocity = 1,0
persistent = 0
guard.velocity = -7        
guard.hittime = 8
guard.slidetime = 8
airguard.velocity = -5,-4
airguard.hittime = 7
guard.dist = 190

[State 1150, 2]
type = HitDef
trigger1 = animelem = 9
attr = S, HA
animtype  = light
damage    = 10,2
getpower = 0
guardflag = MA
pausetime = 2,2
numhits = 2
sparkno = 1
sparkxy = -100,-230
hitsound   = 5,1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = 1
air.velocity = 1,0
persistent = 0
guard.velocity = -7        
guard.hittime = 8
guard.slidetime = 8
airguard.velocity = -5,-4
airguard.hittime = 7
guard.dist = 190

[State 1150, 2]
type = HitDef
trigger1 = animelem = 13
attr = S, HA
animtype  = light
damage    = 10,2
getpower = 0
guardflag = MA
pausetime = 2,2
numhits = 2
sparkno = 1
sparkxy = -100,-230
hitsound   = 5,1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = 1
air.velocity = 1,0
persistent = 0
guard.velocity = -7        
guard.hittime = 8
guard.slidetime = 8
airguard.velocity = -5,-4
airguard.hittime = 7
guard.dist = 190

[State 1150, 2]
type = HitDef
trigger1 = animelem = 17 
attr = S, HA
animtype  = light
damage    = 10,2
guardflag = MA
getpower = 0
pausetime = 2,2
numhits = 2
sparkno = 1
sparkxy = -100,-230
hitsound   = 5,1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = 1
air.velocity = 1,0
persistent = 0
guard.velocity = -7        
guard.hittime = 8
guard.slidetime = 8
airguard.velocity = -5,-4
airguard.hittime = 7
guard.dist = 190

[State 1150, 2]
type = HitDef
trigger1 = animelem = 21 
attr = S, HA
animtype  = light
damage    = 10,2
guardflag = MA
getpower = 0
pausetime = 2,2
numhits = 2
sparkno = 1
sparkxy = -100,-230
hitsound   = 5,1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = 1
air.velocity = 1,0
persistent = 0
guard.velocity = -7        
guard.hittime = 8
guard.slidetime = 8
airguard.velocity = -5,-4
airguard.hittime = 7
guard.dist = 190

[State 1150, 2]
type = HitDef
trigger1 = animelem = 25
attr = S, HA
animtype  = light
damage    = 10,2
getpower = 0
guardflag = MA
pausetime = 2,2
numhits = 2
sparkno = 1
sparkxy = -100,-230
hitsound   = 5,1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = 1
air.velocity = 1,0
persistent = 0
guard.velocity = -7        
guard.hittime = 8
guard.slidetime = 8
airguard.velocity = -5,-4
airguard.hittime = 7
guard.dist = 190

[State 1150, 2]
type = HitDef
trigger1 = animelem = 29 
attr = S, HA
animtype  = light
damage    = 10,2
getpower = 0
guardflag = MA
pausetime = 2,2
numhits = 2
sparkno = 1
sparkxy = -100,-230
hitsound   = 5,1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = 1
air.velocity = 1,0
persistent = 0
guard.velocity = -7        
guard.hittime = 8
guard.slidetime = 8
airguard.velocity = -5,-4
airguard.hittime = 7
guard.dist = 190

[State 1150, 2]
type = HitDef
trigger1 = animelem = 33
attr = S, HA
animtype  = light
damage    = 10,2
guardflag = MA
getpower = 0
pausetime = 2,2
numhits = 2
sparkno = 1
sparkxy = -100,-230
hitsound   = 5,1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = 1
air.velocity = 1,0
persistent = 0
guard.velocity = -7        
guard.hittime = 8
guard.slidetime = 8
airguard.velocity = -5,-4
airguard.hittime = 7
guard.dist = 190

[State 1150, 2]
type = HitDef
trigger1 = animelem = 37
attr = S, HA
animtype  = light
damage    = 10,2
guardflag = MA
getpower = 0
pausetime = 2,2
numhits = 2
sparkno = 1
sparkxy = -100,-230
hitsound   = 5,1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = 1
air.velocity = 1,0
persistent = 0
guard.velocity = -7        
guard.hittime = 8
guard.slidetime = 8
airguard.velocity = -5,-4
airguard.hittime = 7
guard.dist = 190

[State 1150, 2]
type = HitDef
trigger1 = animelem = 41
attr = S, HA
animtype  = light
getpower = 0
damage    = 10,2
guardflag = MA
pausetime = 2,2
numhits = 2
sparkno = 1
sparkxy = -100,-230
hitsound   = 5,1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = 1
air.velocity = 1,0
persistent = 0
guard.velocity = -7        
guard.hittime = 8
guard.slidetime = 8
airguard.velocity = -5,-4
airguard.hittime = 7
guard.dist = 190

[State 3083, 2]
type = HitDef
trigger1 = animelem = 45
attr = S, HA
animtype  = UP
damage    = 70,14
getpower = 0
guardflag = MA
pausetime = 18,18
sparkno = 3
sparkxy = -100,-230
hitsound   = 5,4
guardsound = S120, 0
ground.type = high
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -2,-47;ifelse(var(11) > 1, -49, -4)
air.velocity = -2,-42;ifelse(var(11) > 1, -45, -4)
persistent = 0
guard.velocity = -7        
guard.hittime = 8
envshake.ampl = 8
envshake.time = 12
envshake.freq = 75
envshake.phase = 75
guard.slidetime = 8
airguard.velocity = -5,-4
airguard.hittime = 7
guard.dist = 190
fall = 1
fall.recover = 0

[state x, combo damage score]
type = varadd
trigger1 = animelemtime(45) = 0
trigger1 = movehit
v = 18
value = -18
persistent = 0
ignorehitpause = 1

[state 3083, jump out]
type = changestate
triggerall = movehit
triggerall = animelemtime(45) > 0
trigger1 = command = "holdup"
trigger2 = ailevel > 0
value = 42
ctrl = 0

[State 3083, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;==========================================================================
;[Info]
;author = "Inktrebuchet" 
;versiondate = 12/13/2018                  
;goal = Detect enemy's projectile (helper). For use with AI.
;       敵の発射物（helper）を検出する。 AIで使用する場合。
;==========================================================================
;                Notes
;==========================================================================
;notes:
;-Enemy's projectile now has a PlayerID use PlayerID(helper(33333333),var(3)) as a redirect.
;
;base examples of trigger use: 
;
;;Enemy's projectile helper's distance from character.
;trigger1 = PlayerIDExist(helper(33333333),var(3))
;trigger1 = PlayerID(helper(33333333),var(3)), p2bodydist x 
;
;;Enemy's projectile helper's velocity.
;trigger1 = PlayerIDExist(helper(33333333),var(3))
;trigger1 = PlayerID(helper(33333333),var(3)), Vel X
;
;==========================================================================
;                Helper var usage.
;==========================================================================
; numhelper(33333333) Variable usage:
; This is a record of the variables that are used
;
; var(0) - highest playerid + 1
; var(3) - projectile player id while it exists
; 
;==========================================================================
[Statedef 33333333]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0, 0
 
;==========================================================================
;                Config Section
;==========================================================================
anim = 9741                   ; blank animation
 
;==========================================================================
 
[state 33333333, Clipboard] 
type = DisplayToClipboard
trigger1 = 1
text = "Highest Playerid = %d , Projectile helper's PlayerId = %d\nBy Inktrebuchet"
params = var(0)-1, var(3)
;==========================================================================
;                Detect Enemy's Projectile Helper
;==========================================================================
[State 33333333, 0]
type = Null
trigger1 = var(0) = 0
trigger1 = (var(0) := id)
ignorehitpause = 1
 
[state 33333333, 1] 
type = varadd
trigger1 = PlayerIdExist(var(0)) 
trigger2 = PlayerIdExist(var(0)+1) 
trigger3 = PlayerIdExist(var(0)+2) 
trigger4 = PlayerIdExist(var(0)+3) 
trigger5 = PlayerIdExist(var(0)+4) 
trigger6 = PlayerIdExist(var(0)+5) 
trigger7 = PlayerIdExist(var(0)+6) 
trigger8 = PlayerIdExist(var(0)+7) 
trigger9 = PlayerIdExist(var(0)+8) 
trigger10 = PlayerIdExist(var(0)+9) 
trigger11 = PlayerIdExist(var(0)+10) 
trigger12 = PlayerIdExist(var(0)+11) 
trigger13 = PlayerIdExist(var(0)+12) 
trigger14 = PlayerIdExist(var(0)+13) 
trigger15 = PlayerIdExist(var(0)+14) 
trigger16 = PlayerIdExist(var(0)+15) 
trigger17 = PlayerIdExist(var(0)+16) 
trigger18 = PlayerIdExist(var(0)+17) 
trigger19 = PlayerIdExist(var(0)+18) 
trigger20 = PlayerIdExist(var(0)+19) 
trigger21 = PlayerIdExist(var(0)+20) 
trigger22 = PlayerIdExist(var(0)+21) 
trigger23 = PlayerIdExist(var(0)+22) 
trigger24 = PlayerIdExist(var(0)+23) 
trigger25 = PlayerIdExist(var(0)+24) 
trigger26 = PlayerIdExist(var(0)+25) 
v = 0
value = 1
ignorehitpause = 1
 
[State 33333333, 2]
type = Null
triggerall = PlayerIdExist(Root,ID)
trigger1 = PlayerIdExist(var(0)-1)
trigger1 = cond(root,teamside = 1, PlayerID(var(0)-1),teamside = 2, PlayerID(var(0)-1),teamside = 1)
trigger1 = PlayerID(var(0)-1),hitdefattr = ASC, NP, SP, HP
trigger1 = var(3) := (var(0)-1)
trigger2 = PlayerIdExist(var(0)-2)
trigger2 = cond(root,teamside = 1, PlayerID(var(0)-2),teamside = 2, PlayerID(var(0)-2),teamside = 1)
trigger2 = PlayerID(var(0)-2),hitdefattr = ASC, NP, SP, HP
trigger2 = var(3) := (var(0)-2)
trigger3 = PlayerIdExist(var(0)-3)
trigger3 = cond(root,teamside = 1, PlayerID(var(0)-3),teamside = 2, PlayerID(var(0)-3),teamside = 1)
trigger3 = PlayerID(var(0)-3),hitdefattr = ASC, NP, SP, HP
trigger3 = var(3) := (var(0)-3)
trigger4 = PlayerIdExist(var(0)-4)
trigger4 = cond(root,teamside = 1, PlayerID(var(0)-4),teamside = 2, PlayerID(var(0)-4),teamside = 1)
trigger4 = PlayerID(var(0)-4),hitdefattr = ASC, NP, SP, HP
trigger4 = var(3) := (var(0)-4)
trigger5 = PlayerIdExist(var(0)-5)
trigger5 = cond(root,teamside = 1, PlayerID(var(0)-5),teamside = 2, PlayerID(var(0)-5),teamside = 1)
trigger5 = PlayerID(var(0)-5),hitdefattr = ASC, NP, SP, HP
trigger5 = var(3) := (var(0)-5)
trigger6 = PlayerIdExist(var(0)-6)
trigger6 = cond(root,teamside = 1, PlayerID(var(0)-6),teamside = 2, PlayerID(var(0)-6),teamside = 1)
trigger6 = PlayerID(var(0)-6),hitdefattr = ASC, NP, SP, HP
trigger6 = var(3) := (var(0)-6)
trigger7 = PlayerIdExist(var(0)-7)
trigger7 = cond(root,teamside = 1, PlayerID(var(0)-7),teamside = 2, PlayerID(var(0)-7),teamside = 1)
trigger7 = PlayerID(var(0)-7),hitdefattr = ASC, NP, SP, HP
trigger7 = var(3) := (var(0)-7)
trigger8 = PlayerIdExist(var(0)-8)
trigger8 = cond(root,teamside = 1, PlayerID(var(0)-8),teamside = 2, PlayerID(var(0)-8),teamside = 1)
trigger8 = PlayerID(var(0)-8),hitdefattr = ASC, NP, SP, HP
trigger8 = var(3) := (var(0)-8)
trigger9 = PlayerIdExist(var(0)-9)
trigger9 = cond(root,teamside = 1, PlayerID(var(0)-9),teamside = 2, PlayerID(var(0)-9),teamside = 1)
trigger9 = PlayerID(var(0)-9),hitdefattr = ASC, NP, SP, HP
trigger9 = var(3) := (var(0)-9)
trigger10 = PlayerIdExist(var(0)-10)
trigger10 = cond(root,teamside = 1, PlayerID(var(0)-10),teamside = 2, PlayerID(var(0)-10),teamside = 1)
trigger10 = PlayerID(var(0)-10),hitdefattr = ASC, NP, SP, HP
trigger10 = var(3) := (var(0)-10)
ignorehitpause = 1
 
[State 33333333, BindToRoot]
type = BindToRoot
trigger1 = PlayerIdExist(Root,ID)
time = 1
facing = 1
pos =0,-2
ignorehitpause = 1 





;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[statedef -2]


;=======================AI Detect Projectile System==========================
[state -2, AI Detect Projectile System]
type = helper
trigger1 = ailevel ;M.U.G.E.N 1.0+
trigger1 = !numhelper(33333333)
name = "AI Detect Projectile System"
ID = 33333333
stateno = 33333333
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 1.0
size.yscale = 1.0
supermovetime = 2147483647
pausemovetime = 2147483647
ignorehitpause = 1

;Ana 'Jiggly' Bunny is © Kazecat 2016
[state -2, copyright]
type = DisplayToClipboard 
trigger1 = 1
params = p2bodydist x, p2bodydist y, pos y, var(18)
text = "Distance X: %d, Y: %d  pos y is %f, combo inhib: %d"
;text = "Jiggly Bunny is (c) Kazecat 2016"

[state -2, win quotes]
type = victoryquote
trigger1 = 1
value = 1+(random%4)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Jumbo Elephant"
value = 6+(random%4)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Ryu"
value = 10+(random%2)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Ken"
value = 12+(random%2)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Kung Fu Man"
value = 14+(random%2)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Evil Ryu"
value = 16
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Evil Ken"
value = 17
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Chun-li"
value = 18+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Lucario"
trigger1 = enemy, Authorname = "Moko"
value = 21+(random%2)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Toriel"
value = 23+(random%2)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Ana 'Jiggly' Bunny"
value = 25+(random%2)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Bertha Hippo"
value = 27+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Katrina Crocodile"
value = 30+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Enorma Pig"
value = 33+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Aroma Skunk"
value = 36+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Lardo Rat"
value = 39+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Zafta Giraffe"
value = 42+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Makuyama"
value = 45+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Pastilla Skunk"
value = 48+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Jumba Elephant"
value = 51+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Twiggi Bunny"
value = 54+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Ra Lord"
value = 57+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Violet 'Tyla' Bunny"
value = 60+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Battu Tri-red"
value = 63+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Julian Hippo"
value = 66+(random%3)
ignorehitpause
persistent = 1


[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Rapid Bunny"
value = 69+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Noah Sharker"
value = 72+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Akai R. Panda"
value = 75+(random%3)
ignorehitpause
persistent = 1

[state -2, win quote]
type = victoryquote
triggerall = numenemy
trigger1 = enemy,name = "Andy Armadillo"
value = 78+(random%3)
ignorehitpause = 1
persistent = 1

[state -2, win quote]
type = victoryquote
triggerall = numenemy
trigger1 = enemy,name = "Montana Moth"
value = 81+(random%3)
ignorehitpause = 1
persistent = 1

[state -2, win quote]
type = victoryquote
triggerall = numenemy
trigger1 = enemy,name = "Texas Stanton"
value = 84+(random%3)
ignorehitpause = 1
persistent = 1




;====================================================
;combo Scaling
;====================================================

[State -2, attack scaling]
type = attackMulSet
trigger1 = 1
value = fvar(10)
ignorehitpause = 1

[state -2, gatling bunn check]
type = varset
trigger1 = stateno = 0
v = 22
value = 0

[state -2, combo points]
type = varset
trigger1 = numenemy
trigger1 = (enemynear, movetype != H)
trigger2 = !numenemy
ignorehitpause = 1
v = 18
value = 100

[state -2, gradual lowering]
type= varset
trigger1 =  var(18) >= 100
fvar(10) = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 100 && var(18) >= 90
fvar(10) = 0.9
ignorehitpause = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 90 && var(18) >= 80
fvar(10) = 0.8
ignorehitpause = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 80 && var(18) >= 70
fvar(10) = 0.7
ignorehitpause = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 70 && var(18) >= 60
fvar(10) = 0.6
ignorehitpause = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 60 && var(18) >= 50
fvar(10) = 0.5
ignorehitpause = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 50 && var(18) >= 40
fvar(10) = 0.4
ignorehitpause = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 40 && var(18) >= 30
fvar(10) = 0.3
ignorehitpause = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 30 && var(18) >= 20
fvar(10) = 0.2
ignorehitpause = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 20 && var(18) >= 10
fvar(10) = 0.1
ignorehitpause = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 10
fvar(10) = 0.05
ignorehitpause = 1

;--------------------------------------------

[state -2, Air Jump Counter]
type = varset
trigger1 = stateno = 0  || stateno = 52
var(4) = const(movement.airjump.num)
ignorehitpause = 1

[state -2, Flip Kick limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(6) = 2
ignorehitpause = 1

[state -2, Wall bounce limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(7) = 2
ignorehitpause = 1

[state -2, Ground Bounce limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(8) = 2
ignorehitpause = 1

[state -2, Launcher limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(11) = 2
ignorehitpause = 1

[state -2, Jump infinite check]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(29) = 1
ignorehitpause = 1

[state -2, butt drop for ai]
type = varset
trigger1 = statetype = S
var(35) = 0
ignorehitpause

[state -2, Long jump check]
type = varset
trigger1 = stateno = 0 || stateno = 52 || stateno = 20
var(36) = 0
ignorehitpause



;=====================================================================
;Cursed buffs
;=====================================================================
[state -2, cursed speed bonus]
type = velset
trigger1 = stateno = 1523
trigger1 = command = "holdfwd"
x = 6


[state -2, cursed speed overide]
type = velset
trigger1 = stateno = 1523
trigger1 = command = "holdback"
x = -6


;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

;big body falls
[State -3, quakes]
type = envshake
triggerall = time = 1
trigger1 = stateno = 5100
time = 15
ampl = -8
freq = 100
phase = 100

[State -3, quakes]
type = playsnd
triggerall = time = 1
trigger1 = stateno = 5100
value = S51,0

[state -3, gravity]
type = gravity
trigger1 = stateno = 5620
trigger1 = time > 0

[state -3, land]
type = changestate
triggerall = stateno = 5620
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

