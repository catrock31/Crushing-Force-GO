; KFM's constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
;Amount of life to start with
life = 1050
power = 5000
;attack power (more is stronger)
attack = 100
;defensive power (more is stronger)
defence = 100
;Percentage to increase defense everytime player is knocked down
fall.defence_up = 50
;Time which player lies down for, before getting up
liedown.time = 45
;Number of points for juggling
airjuggle = 30
;Default hit spark number for HitDefs
sparkno = 2
;Default guard spark number
guard.sparkno = 40
;1 to enable echo on KO
KO.echo = 0
;Volume offset (negative for softer)
volume = 0
;Variables with this index and above will not have their values
;reset to 0 between rounds or matches. There are 60 int variables,
;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
;If omitted, then it defaults to 60 and 40 for integer and float
;variables repectively, meaning that none are persistent, i.e. all
;are reset. If you want your variables to persist between matches,
;you need to override state 5900 from common1.cns.
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = 1.35     ;1.32    ;Horizontal scaling factor.
yscale = 1.35      ;1.32   ;Vertical scaling factor.
ground.back = 180     ;Player width (back, ground)
ground.front = 150    ;Player width (front, ground)
air.back = 180        ;Player width (back, air)
air.front = 175       ;Player width (front, air)
height = 240          ;Height of player (for opponent to jump over)
attack.dist = 200    ;Default attack distance
proj.attack.dist = 300 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = -12, -408   ;Approximate position of head
mid.pos = -6, -216    ;Approximate position of midsection
shadowoffset = 6     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y). Recommended 0,0

[Velocity]
walk.fwd  = 6.5    ;Walk forward
walk.back = -5.5     ;Walk backward
run.fwd  = 17.0, 0    ;Run forward (x, y)
run.back = -18,-12 ;Hop backward (x, y)
jump.neu = 0,-34    ;Neutral jumping velocity (x, y)
jump.back = -8,-34    ;Jump back Speed (x, y)
jump.fwd = 8,-34       ;Jump forward Speed (x, y)
runjump.back = -2.55,-8.1 ;Running jump speeds (opt)
runjump.fwd = 12,-25     ;.
airjump.neu = 0,-8.1      ;.
airjump.back = -2.55      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.
air.gethit.groundrecover = -.15,-3.5  ;Velocity for ground recovery state (x, y) **MUGEN 1.0**
air.gethit.airrecover.mul = .5,.2     ;Multiplier for air recovery velocity (x, y) **MUGEN 1.0**
air.gethit.airrecover.add = 0,-4.5    ;Velocity offset for air recovery (x, y) **MUGEN 1.0**
air.gethit.airrecover.back = -1       ;Extra x-velocity for holding back during air recovery **MUGEN 1.0**
air.gethit.airrecover.fwd = 0         ;Extra x-velocity for holding forward during air recovery **MUGEN 1.0**
air.gethit.airrecover.up = -2         ;Extra y-velocity for holding up during air recovery **MUGEN 1.0**
air.gethit.airrecover.down = 1.5      ;Extra y-velocity for holding down during air recovery **MUGEN 1.0**

[Movement]
airjump.num = 0       ;Number of air jumps allowed (opt)
airjump.height = 35   ;Minimum distance from ground before you can air jump (opt)
yaccel = 1.7         ;Vertical acceleration
stand.friction = .83  ;Friction coefficient when standing
crouch.friction = .80 ;Friction coefficient when crouching
stand.friction.threshold = 2          ;If player's speed drops below this threshold while standing, stop his movement **MUGEN 1.0**
crouch.friction.threshold = .05       ;If player's speed drops below this threshold while crouching, stop his movement **MUGEN 1.0**
air.gethit.groundlevel = 25           ;Y-position at which a falling player is considered to hit the ground **MUGEN 1.0**
air.gethit.groundrecover.ground.threshold = -20 ;Y-position below which falling player can use the recovery command **MUGEN 1.0**
air.gethit.groundrecover.groundlevel = 10   ;Y-position at which player in the ground recovery state touches the ground **MUGEN 1.0**
air.gethit.airrecover.threshold = -1  ;Y-velocity above which player may use the air recovery command **MUGEN 1.0**
air.gethit.airrecover.yaccel = 1.7   ;Vertical acceleration for player in the air recovery state **MUGEN 1.0**
air.gethit.trip.groundlevel = 15      ;Y-position at which player in the tripped state touches the ground **MUGEN 1.0**
down.bounce.offset = 0, 20            ;Offset for player bouncing off the ground (x, y) **MUGEN 1.0**
down.bounce.yaccel = 1.7               ;Vertical acceleration for player bouncing off the ground **MUGEN 1.0**
down.bounce.groundlevel = 12          ;Y-position at which player bouncing off the ground touches the ground again **MUGEN 1.0**
down.friction.threshold = .05         ;If the player's speed drops below this threshold while lying down, stop his movement **MUGEN 1.0**

;Default language victory quotes (optional).  **MUGEN 1.0**
;If this section is included, the default language victory quotes must be in English.
[Quotes]
; Up to 100 victory quotes can be specified per language (victory0 - victory99)
victory1 = "You were an easy target."
victory2 = "How's that for southern hospitality?"
victory3 = "All that flash didn't help against buckshot, now did it?"
victory4 = "Y'all come back now! More where that came from."
victory5 = "What a waste of ammunition you turned out to be."
victory6 = "I didn't think y'all would mind me bringing a gun to this thing."
victory7 = "I think you'll find that even when I'm unarmed, I've still got firepower!"

;vs Bertha
Victory8 = "That hide can only do so much against what I'm packin', hun."
victory9 = "Nothing wrong with using tools to help get the job done, hippo."
victory10 = "Don't take it personally, Bertha. I'll treat ya to a drink when we're done here."

;vs Aroma
Victory11 = "Are ya really gonna complain about guns when you're stinkin' up the place like that?"
victory12 = "Good thing I was taught to keep my distance from varmints like you!"
victory13 = "You've got some strong gas if it's able to stop a bullet, not bad."

;vs Katrina
victory14 = "You've got some serious firepower behind that chest girl, but you're going to need more than that."
victory15 = "I've packed more than enough heat to handle some tag team."
victory16 = "Maybe next time, you ought to use that partner of yours as a meatshield!"

;vs Jumbo
victory17 = "You're just not made for dodgin', are ya?"
victory18 = "And here I thought Bertha was hard to miss!"
victory19 = "Appreciate ya for being such a whoppin' big target."

;vs Herself
victory20 = "It's about dang time I got to have a decent shootout."
victory21 = "Now what's a good looking pig like yourself doing all the way out here?"
victory22 = "Seeing myself in action makes me really appreciate how I fit in these jeans."

;Vs Jiggly
victory23 = "Appreciate your help, I've been needing practice hitting a moving target."
victory24 = "You're pretty fast, but my bullets are faster!"
victory25 = "I think you ought to sit this one out, happy feet."

;Vs Lardo
Victory26 = "How'd eating lead handle your appetite?"
victory27 = "I guess you're going hungry today, rat."
victory28 = "You're making me really glad I can keep my distance."

;Vs Zafta
Victory29 = "Can y'all see how bad I'm kicking your tail from up there?"
victory30 = "I guess taking down a giraffe wasn't much of a stretch!"
victory31 = "I think y'all are taking 'Reach for the sky.' too literally..."

;Vs Makuyama
victory32 = "Y'all are too adorable for me to be shooting you like that..."
victory33 = "Sorry there teddy, I must've mistaken you for an actual threat."
victory34 = "If taking you down is this easy, I can see why pandas are so endangered."

;vs Pastilla
victory35 = "Do ya really think shrinking me down is gonna save you from my guns?"
victory36 = "All that magic and you use it just to smell bad?"
victory37 = "You'd best keep those totems to yourself, freak show."

;vs Jumba
victory38 = "If you think I need these guns to take you down, you've got another thing coming."
victory39 = "I may not take you down in one shot, but I'm not running out of ammo any time soon."
victory40 = "You make a much better bullet sponge than a ninja, hun."

;Vs Ryu
victory50 = "That blue fire is coming from a hidden flamethrower of some sort, right?"
victory51 = "Looks like your range was a whole lot more than one fist short."

;vs Twiggi
Victory52 = "Maybe next time you ought to learn up on magic that can absorb bullets, instead of fat."
victory53 = "Well damn if you aren't a hard target..."
victory54 = "You need to bulk up girl, I could even bake you pies if you need 'em."

;vs Ra Lord
Victory55 = "Slither your way out of that, you three-headed circus attraction!"
Victory56 = "Good luck shedding those bullets out of your hide, snake."
Victory57 = "Shoot son, you're about as threatening as a garden snake."

;vs Violet
victory58 = "You ninjas just don't know what to do when y'all are staring down the barrel, huh?"
victory59 = "Aren't you supposed to be an assassin? How can you be so opposed to my use of guns?"
victory60 = "You've got some great outfits for a ninja; shame I had to put a few holes in 'em."

;vs Battu
victory61 = "Y'all know growin' just makes it easier for me to hit ya, right?"
victory62 = "Think that tech of yours ought to be more useful in my own hands."
victory63 = "Can't say I've tagged a varmint with three eyes before."

;vs Julian
victory64 = "Those were some poses you struck, dodgin' my bullets and all."
victory65 = "How's that for a snapshot, big guy?"
victory66 = "Surely a handsome hippo like yourself has better things to do than be target practice."

;vs Rapid
victory67 = "You may be the fastest target that I was still sure I would hit."
victory68 = "Keeping you out is a no-go, but I still have hands if you try me."
Victory69 = "All that speed just makes me wish I brought a sentry."

;Vs Noah
victory70 = "It was arrows versus heavy munitions, come on son."
victory71 = "You're a pretty damn good shot yourself.  Is that magic or tech your using to summon your weapons?"
victory72 = "I don't understand magic, but I am confident in my tech for my weapons."

;Vs Akai
Victory73 = "If you didn't wanna be shot at then why would you attack me?"
Victory74 = "Damn Boy!  You are quick!  You get around faster than my ass hits the ground when I sit on cheap furniture."
Victory75 = "Your speed is so annoying.  I wish I had a sentry to handle you."

;vs Montana
Victory76 = "Magic must be so useful, but I still with science and tech to defend myself."
Victory77 = "You may think flying is quite a useful skill to have, but alas it is countered by the amazing technique...of aiming upward."
Victory78 = "You are the prettiest thick moth I had to shoot down.  What a shame."

;Vs Andy
Victory79 = "You and Panacea make a lovely couple.  I couldn't be more proud for you."
Victory80 = "I'm sure your brothers and sisters would be happy with how far you come Andy."
Victory81 = "There are times where I wish I was more blunt with how I felt.  Actually nevermind, You can Panacea or a sweet couple."

;vs Texas
Victory82 = "I love hearing a fellow country girls voice and accent.  Too bad I won't hear much of it sitting on your face."  
Victory83 = "If you ever wanna fight those gassy fat ass pigs with another gassy fat ass pig I would be willing to help ya Tex.  I mean that."
Victory84 = "You're clearly out-gunned, but if you wanna throw hands I can just sit on you too." 


;Alternate language victory quotes (optional).
;0 or more alternate language sections may be added, preceded by the
;ISO 639-1 code followed by a ".", e.g. "[ja.Quotes]".
;See language setting in mugen.cfg.
[ja.Quotes]
victory1 = "カンフー突き手を破らぬ限り、お前に勝ち目はない！"
victory2 = "十年早いんだぞ"
victory3 = "お前は見覚えがあるな。テレビにでも…？"
victory4 = "お前の動きは見破りやすすぎる。　なに、カンフー突き手が覚えたいんだと？　素人には無理だぞ"
victory5 = "ふー。　いい汗だった"
victory6 = "もっと強い相手に挑戦したい"
victory7 = "なんだと！彼女はここにもいないと？"

;---------------------------------------------------------------------------
; Variable usage:
; This is a record of the variables that KFM uses. Keeping a record of your
; variable usage helps you avoid careless mistakes later.
; var(1)  - Used in kfm.cmd for combo condition (updated every tick)
; var(2)  - Used in Kung Fu Throw (state 800) to remember if fwd was being
;           held (remembered from state 800 through state 810).
; Var(25) - Shotgun ammo 8
; var(26) - Revolver Ammo 6
; Var(27) - rocket Launcher Ammo 4
; Var(28) - Grenade count Bombing Butt Damage
; var(29) - Bombing Butt Damage
; var (32) - Grenade Range
; var(36) - Rocket Rump number of hits
;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
; Win pose 1 - Present butt
; CNS difficulty: basic
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[state 182, width]
type = width
trigger1 = 1
edge = 200,100

[state 181, spr priority]
type = sprpriority
trigger1 = 1
value = -2
persistent = 1

[state 181, announce]
type = playsnd
triggerall = teammode = single
trigger1 = time = 10
trigger1 = life != lifemax
value = S180,1

[state 181, announce]
type = playsnd
triggerall = teammode = single
trigger1 = time = 10
trigger1 = life = lifemax
value = S180,1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[state 191, version]
type = explod
trigger1 = time = 0
anim = ifelse(facing = -1,9101,9100)
scale = 1,1
postype = Back
pos = ifelse(facing =1, 20, 157),360 ; Nice!
ontop = 1

[state 191, screenpos]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

;[state 191, turn]
;type = turn
;trigger1 = time = 0

[state 191, posadd]
type = posadd
trigger1 = time = 0
x = -395 ;-460
y = -920

[State 191, 1] ;Freeze animation until PreIntro is over
type = Changestate
trigger1 = RoundState = 0
value = 19000

[State 191, 2]    ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;-------------------------------------------------------------------------
;Bombing Butt
[statedef 19000]
type = A
movetype = I
physics = N
anim = 1155
ctrl = 0

[state 191, screenpos]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[State 19000, Blink Yellow]
type = PalFX
triggerall = prevstateno = 1170
trigger1 = time%2
time = 1
add = 100,50,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[State 191, 2]    ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[state 1155, Light]
type = nothitby
trigger1 = prevstateno = 1150
value = ,AP
persistent = 1

; nothing for Heavy

[state 1155, EX]
type = nothitby
trigger1 = prevstateno = 1170
trigger1 = time < 12
value = SCA
persistent = 1

[state 1155, slow]
type = velmul
trigger1 = animelem = 1
x = 0.5
y = 0

[state 19000, rocket down]
type = veladd
trigger1 = animelem = 4
y = 20
x = 15
persistent = 0

[state 1155, accelerate]
type = veladd
trigger1 = animelem = 4
y = 1.4
persistent = 1

[state 1155, playsnd]
type = playsnd
trigger1 = animelem = 4
value = S1020,2

[state 1155, gravity]
type = gravity
trigger1 = time > 15

[state 1150, exhaust]
type = explod
trigger1 = time = 0
persistent = 0
anim = 1156
id = 1156
bindtime = -1
removetime = -1
ownpal = 1
trans = add
sprpriority = 2
scale = const(size.xscale),const(size.yscale)

[State 1155, 2]
type = HitDef
trigger1 = animelem = 4
persistent = 0
attr = A, SA
animtype  = heavy
damage    = ifelse(enemy,movetype = H,90,var(29)),36
getpower = 35
guardflag = HA
hitflag = MAF
pausetime = 16,16
priority = 5,hit
sparkno = 3
sparkxy = -40,-180
hitsound   = S410,0
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -4,20
air.velocity = -14,20
air.hittime = 60
guard.hittime = 35
guard.slidetime = 35
guard.velocity = -45
airguard.hittime = 24
airguard.velocity = -20,-6
fall = 1
fall.recover = 0
fall.recovertime = 60
envshake.freq = 60
envshake.ampl = 8
envshake.time = 12
guard.dist = 150

;Ride down mechanic
[state 1155, Ride down]
type = targetbind
trigger1 = movehit
trigger1 = enemy,statetype = A
pos = 0, 100

[state 1155, state of ride down]
type = targetstate
trigger1 = movehit
trigger1 = enemy,statetype = A
value = 655


[state 1155, targetstate]
type = targetstate
trigger1 = movehit
trigger1 = enemy,statetype !=A
value = 660

[state 1150, ride off rocket]
type = helper
trigger1 = pos y > -vel y
trigger1 = vel y > 0
stateno = 4035
helpertype = normal
name = "Rocket Crash"
id = 4035
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = -60,0
ignorehitpause = 1
ownpal = 1
persistent = 0

[state 1155, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 19001

;--------------------------------------------------------------------------
;Landing 1st
[statedef 19001]
type = A
movetype = A
physics = C
ctrl = 0
sprpriority = 2

[state 191, screenpos]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[State 191, 2]    ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[state 1105, playerpush]
type = playerpush
trigger1 = 1
value = 0

[State 651, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 180
guardflag = 
hitflag = FD
priority = 4
pausetime = 12,12
sparkno = 1
sparkxy = -10,-40
hitsound   = S5000, 2
guardsound = S120,0
animtype = Med
p2stateno = 660
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,0

[state 1105, anim]
type = changeanim
trigger1 = time = 0
value = 1157

[State 1105, quakes]
type = envshake
trigger1 = time = 0
time = 30
ampl = -18
freq = 60
phase = 60

[State 1105, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[state 641, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 5,2
ownpal = 1

[state 1105, ground impact front fx]
type = explod
trigger1 = time = 0
anim = 2000
sprpriority = 3
postype = p1
pos = 0,0
scale = const(size.xscale)*2,const(size.yscale)*3
ownpal = 1

[state 1105, ground impact back fx]
type = explod
trigger1 = time = 0
anim = 2001
sprpriority = -4
postype = p1
pos = 0,0
scale = const(size.xscale)*2,const(size.yscale)*3
ownpal = 1


[state 1105, pos]
type = posset
trigger1 = time = 0
y = 0

[state 1105, vel]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1105, vel]
type = velset
trigger1 = time = 9
y = -16

[state 1105, gravity]
type = gravity
trigger1 = time > 10
 
[state 1105, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 19002

;--------------------------------------------------------------------------
;Landing 2nd
[statedef 19002]
type = C
movetype = I
physics = C
ctrl = 0
sprpriority = 2

[State 191, 2]    ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[state 1105, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1106, anim]
type = changeanim
trigger1 = time = 0
value = 1158

[State 1105, quakes]
type = envshake
trigger1 = time = 0
time = 25
ampl = -14
freq = 200
phase = 100

[State 1105, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[state 1106, pos]
type = posset
trigger1 = time = 0
y = 0

[state 1106, vel]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1106, end]
type = changestate
trigger1 = animtime = 0
value = 19003
;---------------------------------------------------------
;get off
[statedef 19003]
type = C
movetype = I
physics = C
anim = 1130

[State 191, 2]    ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[state 1130, turn]
type = turn
trigger1 = prevstateno = 1157
trigger1 = time = 0

[state 1130, nothitby]
type =  nothitby
trigger1 = prevstateno = 815
value = SCA
time = 37

[state 1130, sprpriority]
type = sprpriority
trigger1 = animelem = 3
value = -2

[state 1130, pos]
type = posset
trigger1 = animelem = 11
y = 0

[state 1130, vel x]
type = posadd
trigger1 = animelemtime(11) >= 1 
x = 25
persistent = 2

[state 1130, end]
type = changestate
trigger1 = animtime = 0
value = 0


;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Stand Light Punch
; CNS difficulty: easy
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 200                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 20, 0                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = -10, -360               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S5000, 0                  ;Sound to play on hit
guardsound = 6, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 12         
ground.hittime  = 12          
ground.velocity = -10
guard.velocity = -14              
guard.hittime = 13
guard.slidetime = 13
guard.dist = 640  
fall.recovertime = 20
         
airguard.velocity = -12,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -14,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 15                 ;Time before opponent regains control in air

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 200, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Double Jab
[Statedef 201]
type    = S                     
movetype= A                     
physics = S                     
juggle  = 1                      
velset = 0,0                   
ctrl = 0                         
anim = 200                      
poweradd = 10                    
sprpriority = 2                  

[State 201, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     
damage = 18, 0                   
animtype = Light                 
guardflag = MA                   
hitflag = MAF                    
priority = 3, Hit               
pausetime = 8, 8                
sparkno = 0                     
sparkxy = -10, -360               
hitsound = S5000, 0                
guardsound = 6, 0                
ground.type = High               
ground.slidetime = 13           
ground.hittime  = 13            
ground.velocity = -10
guard.velocity = -14              
guard.hittime = 12
guard.slidetime = 12           
airguard.velocity = -12,-.8     
air.type = High                  
air.velocity = -14,-3          
air.hittime = 15
guard.dist = 480   
fall.recovertime = 20            

[State 201, 2]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 201, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 201, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Standing strong punch
; CNS difficulty: easy
; Note the width controller. It makes KFM's push box larger, so he doesn't
; stand so close to the opponent. Hit Ctrl-C and look at the red bar at his
; feet.
; The sprpriority for this state is at -1, instead of the usual 2 for
; attacks. This makes KFM appear behind the opponent initially.
; The SprPriority controller in [State 210, 4] brings KFM to the front when
; his arm has swung over.
; To stop KFM from pausing in his swing frame, there is a ChangeAnim in
; [State 210, 3] that detects if the hit has come in contact with the
; opponent during that frame, and switches to the next animation element
; (notice the elem=6 parameter). If you don't see what I mean, try commenting
; out that controller, then hit someone with this attack.
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 1

[State 210, Width]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = animelem = 4
value = S210, 0

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = heavy
damage    = 70
guardflag = MA
pausetime = 12,12
sparkno = 2
id = 210
sparkxy = -10,-360
hitsound   = S5000, 2
guardsound = S120,0
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -20
guard.velocity = -22              
guard.hittime = 16
guard.slidetime = 16
air.velocity = -14,-8
forcenofall = 1
guard.dist = 640  
fall.recovertime = 40 

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 210, Not Active]
type = statetypeset
trigger1 = animelemtime(6) = 0
movetype = I


[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Overhead
[Statedef 215]
type    = A
movetype= A
physics = N
poweradd= 35
ctrl = 0
anim = 215
velset = 0,0
sprpriority = 2

[state 230, velset]
type = velset
trigger1 = animelem = 3
y = -15
x = 10
persistent = 0

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
trigger1 = time < 8
time = 1
add = 128,128,128 ;32,16,0
ignorehitpause

[state 610, width]
type = width
trigger1 = animelemtime(3) > 0
value = -120,-120
ignorehitpause = 1

[state 230, velset]
type = veladd
trigger1 = animelem = 3
x = ifelse(prevstateno = 100, 4,12)
persistent = 0

[state 230, set type]
type = statetypeset
trigger1 = animelemtime(3) = 0
statetype = A


[State 215, 2]
type = HitDef
trigger1 = vel y > 0
persistent = 0
attr = A, NA
animtype  = Heavy
damage    = 60,6
guardflag = HA
pausetime = 12,12
guard.pausetime = 8,8
sparkno = 2
id = 215
sparkxy = -10,-70
hitsound   = S5000, 2
guardsound = S120,0
ground.type = Low
ground.slidetime = 26
ground.hittime  = ifelse(enemy,movetype=A,28,22)
ground.velocity = -12
air.velocity = -8,2
guard.velocity = -14             
guard.hittime = 8
guard.slidetime = 8
guard.dist = 240
guard.kill = 0
fall.recovertime = 30
guard.cornerpush.veloff = -40
airguard.cornerpush.veloff = -40


[state 215, gravity]
type = gravity
trigger1 = pos y < -1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[State 215, 3]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52



;---------------------------------------------------------------------------
; Standing light kick
; CNS difficulty: easy
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 11
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 25
guardflag = MA
pausetime = 8,8
sparkno = 0
sparkxy = -10,-120
hitsound   = S5000, 1
guardsound = S120,0
ground.type = Low
ground.slidetime = 17
guard.velocity = -14
ground.hittime  = 17
ground.velocity = -12
air.velocity = -14,-6
guard.velocity = -18              
guard.hittime = 15
guard.slidetime = 15
guard.dist = 480   
fall.recovertime = 20

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 230, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I


[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
; Standing Roundhouse
; CNS difficulty: easy
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 30
ctrl = 0
velset = 0,0
anim = 245
sprpriority = -2

[State 240, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Heavy
damage    = 80
guardflag = MA
pausetime = 12,12
priority = 3
sparkno = 2
id = 240
sparkxy = -50,-330
hitsound   = S5000, 2
guardsound = S120,0
p1sprpriority = -2
ground.type = High
ground.slidetime = 33
ground.hittime  = 33
ground.velocity = -24
air.velocity = -20,-4
guard.velocity = -32              
guard.hittime = 21
guard.slidetime = 21
fall.recover = 0
air.fall = 1
airguard.velocity = -22,-2
guard.dist = 720 
fall.recovertime = 40  

[state 240, spr priority]
type = sprpriority
trigger1 = animelem = 5
value = 2


[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 240, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[State 240, 3]
type = PosAdd
trigger1 = AnimElem = 7
x = 12

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Sparta Kick
; CNS difficulty: easy
[Statedef 245]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 30
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 245, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 245, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Heavy
damage    = 80
guardflag = MA
pausetime = 16,16
priority = 3
sparkno = 3
sparkxy = -10,-300
hitsound   = 5,4
guardsound = S120,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 35
ground.velocity = -30,-8
air.velocity = -30,-2
guard.velocity = -40 
airguard.velocity = -18,-6             
guard.hittime = 18
guard.slidetime = 18
fall = 1
fall.recover = 0
air.fall = 1
guard.dist = 720  
fall.recovertime = 40 


[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 245, Not Active]
type = statetypeset
trigger1 = animelemtime(8) = 0
movetype = I

[State 245, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Crouching light punch
; CNS difficulty: easy
; Description: Simple crouching attack. The HitDef's guardflag parameter
;     is set to "L", meaning that the move can only be guarded low
;     (crouching), and not by standing or jumping opponents.
;     Like for all light attacks, it's a good idea to keep the slidetime
;     and hittime parameters at a smaller number, so the opponent isn't
;     stunned for too long. For all crouching attacks you have to
;     remember to set the attr parameter to indicate that it is crouching
;     attack. In this case, "C, NA" stands for "crouching, normal attack".
;     The HitDef's priority is set at 3, instead of the default of 4,
;     so this attack has a lower priority than most others, meaning
;     KFM will get hit instead of trading hits with his opponent if
;     their attack collision boxes (Clsn1) intersect each other's Clsn2
;     boxes at the same time.
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 8
ctrl = 0
anim = 400
sprpriority = 2

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 20
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 8,8
sparkno = 0
sparkxy = -60,-240
hitsound   = S5000, 0
guardsound = S120,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = -8
air.velocity = -12,-5
guard.velocity = -9              
guard.hittime = 12
guard.slidetime = 12
guard.dist = 480
fall.recovertime = 20

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 400, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching strong punch
; CNS difficulty: easy
; Description: This is a 2-hit move. It is done by having two HitDefs
;     triggered, one for each frame of animation that hits.
;     Notice how the first hit cannot be guarded by an opponent in the
;     air, because of the "M" in the guardflag, meaning it can only
;     be guarded "middle". The second hit has an "MA" guardflag, so
;     it can be guarded both on the ground and in the air.
[Statedef 410]
type    = C
movetype= A
physics = N
juggle  = 6
poweradd= 25
ctrl = 0
sprpriority = 2

[state 410, anim]
type = changeanim
trigger1 = time = 0
trigger1 = !movecontact
value = 410

[State 410, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[state 410, hop forward]
type = velset
trigger1 = animelemtime(4) = 0
x = 16
y = -10
ignorehitpause = 1

[state 410, state type set]
type = statetypeset
trigger1 = animelemtime(4) = 0
statetype = A

[state 410, gravity]
type = gravity
trigger1 = pos y < -1
trigger2 = animelemtime(4) > 1
ignorehitpause = 1


;This is the first hit, triggered on the 3rd element of animation.
[State 410, 2]
type = HitDef
trigger1 = vel y < 0
attr = C, NA
damage    = 50
animtype  = heavy
hitflag = MAF
guardflag = MA
pausetime = 0,2
priority = 6,hit
sparkno = 2
sparkxy = 0,-360
hitsound   = S410,0
guardsound = S120,0
ground.type = High
ground.slidetime = 45
ground.hittime  = 45
air.hittime = 45
ground.velocity = -4
air.velocity = -2,-20
guard.velocity = -14             
guard.hittime = 16
guard.slidetime = 16
fall.recover = 0
envshake.freq = 60
envshake.ampl = 6
envshake.time = 12
guard.dist = 640
fall.recovertime = 32


[state 410, changeanim]
type = changeanim
trigger1 = movecontact
persistent = 0
value = 415
ignorehitpause = 1

[state 410, velmul]
type = velmul
trigger1 = movehit
x = 0.75
ignorehitpause = 1

[state 410, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 411
ignorehitpause = 1



[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1



;---------------------------------------------------------------------------
; part 2 Crouching Strong Punch
[statedef 411]
type = S
movetype = A
physics = N
anim = 411
velset = 0,0

[state 411, posset]
type = posset
trigger1 = time = 0
y = 0

[state 411, playsnd]
trigger1 = time = 0
type = playsnd
value = S52,0

[state 411, quake]
type = envshake
trigger1 = time = 0
time = 10
ampl = -10
freq = 100
phase = 100

[State 411, 3]
type = HitDef
trigger1 = 1
persistent = 0
attr = C, NA
damage    = 50
animtype  = up
hitflag = MAF
guardflag = MA
pausetime = 18,18
sparkno = 3
sparkxy = -10,-340
hitsound   = 5,4
guardsound = S120,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 50
air.hittime = 50
ground.velocity = -4,ifelse(var(11)>0,-48,-10)
air.velocity = -4,ifelse(var(11)>0,-46,-10)
guard.velocity = -18           
guard.hittime = 12
guard.slidetime = 12
guard.dist = 480
fall.recovertime = 32

[state 411, 5]
type = changestate
triggerall = movehit
trigger1 = command = "holdup"
trigger2 = ailevel > 0
value = 42
ctrl = 1

[state 411, 6]
type = varadd
trigger1 = movehit
v = 11
value = -1
persistent = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 411, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 411, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light kick
; CNS difficulty: easy
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 11
ctrl = 0
anim = 430
sprpriority = 2

[State 430, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 430, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 24
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 8,8
sparkno = 0
nochainid = 1400
sparkxy = -10,-190
hitsound   = S5000, 1
guardsound = S120,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -12
air.velocity = -12,-3
down.velocity = -5,0
down.hittime = 22
guard.velocity = -14              
guard.hittime = 13
guard.slidetime = 13
guard.dist = 480
fall.recovertime = 20
   
[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 430, Not Active]
type = statetypeset
trigger1 = animelemtime(3) = 0
movetype = I

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Strong Kick
; CNS difficulty: easy
; Description: This move uses "Trip" for the "ground.type" parameter in
;     its HitDef. It's a special type that puts the opponent in a tripped
;     animation as he falls. Also, the hitflag parameter in the HitDef
;     is set to "MAFD". The "D" indicates that a downed opponent can be
;     hit by the attack.
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 35
ctrl = 0
anim = 440
sprpriority = -2

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[state 440, move]
type = posadd
trigger1 = animelem = 3
x = 60

[state 440, move]
type = posadd
trigger1 = animelem = 8
x = -60

[State 440, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = ifelse(p2statetype = A, 40, 80)
hitflag = MAF
guardflag = L
pausetime = 12,12
sparkno = 1
sparkxy = -5,-190
hitsound   = S5000, 1
guardsound = S120,0
p1sprpriority = -2
ground.type = Trip
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -6,-16
air.velocity = -6,-14
guard.velocity = -32              
guard.hittime = 11 ; -10 standard sweep recovery
guard.slidetime = 11
fall = 1
fall.recover = 0
guard.dist = 640  
fall.recovertime = 45

[state 440, sprpriority]
type = sprpriority
trigger1 = animelem = 4
value = 2

[state 440, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 5
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 15
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 0
sparkxy = -10,-200
hitsound   = S5000, 0
guardsound = S120,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -6
air.velocity = -6,-6
air.hittime = 14
guard.velocity = -8            
guard.hittime = 13
guard.slidetime = 13
airguard.velocity = -6,-4
airguard.hittime = 14
guard.dist = 480
fall.recovertime = 20

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 600, Not Active]
type = statetypeset
trigger1 = animelemtime(3) = 0
movetype = I

[State 600, 3]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Jump Strong Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 30
ctrl = 0
anim = 610
sprpriority = 2

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[state 610, change]
type = changestate
trigger1 = animtime = 0
trigger1 = command != "holdy"
value = 611

[state 610, change]
type = changestate
trigger1 = animtime = 0
trigger1 = command = "holdy"
value = 612




;---------------------------------------------------------------------------
;Jump Strong Punch Tap
; CNS difficulty: easy
[Statedef 611]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 30
ctrl = 0
anim = 611
sprpriority = 2

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 80
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = 2
sparkxy = 0,-240
hitsound   = S5000, 2
guardsound = S120,0
animtype = heavy
ground.type = High
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -22
air.hittime = 60
air.velocity = -36,36
fall.recover = 1
air.fall = 1
down.bounce = 1
fall.yvelocity = -24
fall.recovertime = 60
envshake.freq = 80
envshake.ampl = 6
envshake.time = 12
guard.velocity = -18           
guard.hittime = 17
guard.slidetime = 17
airguard.velocity = -22,-5
airguard.hittime = 22
guard.dist = 480
fall.recovertime = 45

[state 610, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

[state 611, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;Jumping Fierce Hold
[Statedef 612]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 30
ctrl = 0
anim = 612
sprpriority = 2

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 100
guardflag = HA
priority = 4
pausetime = 18,18
sparkno = 3
sparkxy = 0,-240
hitsound   = 5,4
guardsound = S120,0
animtype = heavy
ground.type = High
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -26
air.hittime = 60
air.velocity = -70,ifelse(var(7) > 1, -18, 8)
fall.recover = 1
air.fall = 1
fall.recovertime = 60
envshake.freq = 80
envshake.ampl = 12
envshake.time = 24
guard.velocity = -24            
guard.hittime = 24
guard.slidetime = 24
airguard.velocity = -28,-5
airguard.hittime = 22
guard.dist = 480
fall.recovertime = 45

[state 610, var]
type = varadd
trigger1 = movehit
trigger1 = enemy,statetype = A
var(7) = -1
ignorehitpause = 1
persistent = 0

[state 610, wall bounce]
type = targetstate
trigger1 = movehit && hitpausetime = 11
trigger1 = enemy,statetype = A
trigger1 = var(7) > 0
value = 675
ignorehitpause = 1


[state 610, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

[state 410, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -18
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;Body Splash
; CNS difficulty: easy
[Statedef 615]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 30
ctrl = 0
anim = 615
sprpriority = 2

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[state 610, width]
type = width
trigger1 = 1
value = -120,-120


[state 610, control]
type = veladd
trigger1 = command = "holdfwd"
x = 0.25


[state 610, control]
type = veladd
trigger1 = command = "holdback"
x = -0.25


[State 615, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 80,8
guardflag = HA
priority = 5
pausetime = 8,14
sparkno = 2
id = 615
sparkxy = 0,-180
hitsound   = S5000, 2
guardsound = S120,0
animtype = heavy
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -16
air.velocity = -12,40
guard.velocity = -30           
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = -16,6
airguard.hittime = 22
fall.xvelocity = 0
fall.yvelocity = -20
down.bounce = 1
guard.dist = 480
guard.kill = 0
fall.recovertime = 45
air.fall = 1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 10
ctrl = 0
anim = 630
sprpriority = 2

[State 630, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 630, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 25
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 1
sparkxy = -5,-160
hitsound   = S5000, 0
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -8
air.velocity = -8,-8
air.hittime = 22
guard.velocity = -10           
guard.hittime = 13
guard.slidetime = 13
airguard.velocity = -8,-4
airguard.hittime = 16
guard.dist = 480
fall.recovertime = 20

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 630, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[state 630, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Jump Strong Kick
; CNS difficulty: easy
[Statedef 640]
type    = A
movetype= A
physics = N
juggle  = 5
poweradd= 30
ctrl = 0
anim = 640
sprpriority = 2

[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[state 640, gravity]
type = gravity
trigger1 = 1


[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = ifelse(enemynear,statetype = L, 120,80)
guardflag = HA
hitflag = MAFD
priority = 4
pausetime = 12,12
sparkno = ifelse(enemy,statetype = A,3,2)
sparkxy = 0,-140
hitsound   = 5,ifelse(enemy,statetype = A,4,3)
guardsound = S120,0
animtype = heavy
nochainid = 1400
ground.type = High
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -22
air.velocity = -60,40
air.fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 6
envshake.time = 12
guard.velocity = -24            
guard.hittime = 17
guard.slidetime = 17
airguard.velocity = -22,14
airguard.hittime = 20
down.velocity = 0,0
down.hittime = 18
down.bounce = 1
fall.yvelocity = -15
fall.xvelocity = -4
guard.dist = 480
fall.recovertime = 45

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 640, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[state 640, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

[state 640, end2]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > 80
value = 52




;=================
;  Rode Down
;=================

[statedef 655]
type = A
movetype = H
physics = N

[state 655, anim]
type = changeanim2
trigger1 = time = 0
value = 655

[State 655, 2]
type = changeState
trigger1 = !gethitvar(isbound)
value = 660



;===========================================================================
;---------------------------Crushed State-----------------------------------
;===========================================================================
; Moderate Crushed State
[statedef 660]
type    = L
movetype= H
physics = N
ctrl = 0
velset = 0,0

[state 660, 1]
type = changeanim
trigger1 = time = 0
value = 5110

[State 660, flatten]
type = AngleDraw
trigger1 = time > 0
value = 0
scale = 1.1,0.4

[state 660, on ground]
type = posset
trigger1 = 1
y = 0

[state 660, passthrough]
type = playerpush
trigger1 = 1
value = 0
time = 600

[State 660, Width]
type = Width
trigger1 = time > 0
value = 0,0

[state 660, invunerable]
type = nothitby
trigger1 = 1
value = SCA


[State 660, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 660, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 660, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)


[State 660, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 660, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 660, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 660, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 660, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 660, 11] ;If just died
type = selfState
triggerall = !alive && p2stateno = 0 && roundstate = 3
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

;[State 660, 12]
;type = VarSet
;trigger1 = SysVar(0)
;trigger1 = Time = 0
;sysvar(0) = 0

[State 660, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 660, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 660, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 660, get up]
type = selfstate
triggerall = life >= 1
trigger1 = time > 90 ;95
value = 5120

[state 660, flat death]
type = changestate
trigger1 = !alive
trigger1 = time > 20
value = 5150


;---------------------------------------------------------------------------
;Brief Crushed State
[statedef 661]
type    = L
movetype= H
physics = N
ctrl = 0
velset = 0,0

[state 661, 1]
type = changeanim
trigger1 = time = 0
value = 5110

[State 661, flatten]
type = AngleDraw
trigger1 = time > 0
value = 0
scale = 1.25,0.2

[state 661, on ground]
type = posset
trigger1 = 1
y = 0

[state 661, passthrough]
type = playerpush
trigger1 = 1
value = 0
time = 600

[State 661, Width]
type = Width
trigger1 = time > 0
value = 0,0


[State 661, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 661, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 661, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)


[State 661, 5]
type = PosSet
trigger1 = Time = 0
y = 0

;[State 661, Var] ;Get fall velocity
;type = VarSet
;trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) != 0
;sysvar(1) = floor(vel y)

;[State 661, 6]
;type = PlaySnd
;trigger1 = Time = 0
;trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;persistent = 0

[State 661, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 661, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 661, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 661, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 661, 11] ;If just died
type = ChangeState
triggerall = !alive && p2stateno = 0 && roundstate = 3
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

;[State 661, 12]
;type = VarSet
;trigger1 = SysVar(0)
;trigger1 = Time = 0
;sysvar(0) = 0

[State 661, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 661, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 661, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 661, get up]
type = selfstate
triggerall = life >= 1
trigger1 = time > 60
value = 5110

[state 660, flat death]
type = changestate
trigger1 = !alive
trigger1 = time > 20
value = 5150

;---------------------------------------------------------------------------
;Super Crushed State
[statedef 662]
type    = L
movetype= H
physics = N
ctrl = 0
velset = 0,0

[state 661, 1]
type = changeanim
trigger1 = time = 0
value = 5110

[State 661, flatten]
type = AngleDraw
trigger1 = 1
value = 0
scale = 1.4,0.2

[state 661, on ground]
type = posset
trigger1 = 1
y = 0

[state 661, palFX]
type = palFX
trigger1 = prevstateno = 3093
trigger1 = time = 0
time = 150
mul = 32, 32, 32

[state 661, passthrough]
type = playerpush
trigger1 = 1
value = 0
time = 600

[State 661, Width]
type = Width
trigger1 = time > 0
value = 0,0


[State 661, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 661, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 661, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)


[State 661, 5]
type = PosSet
trigger1 = Time = 0
y = 0

;[State 661, Var] ;Get fall velocity
;type = VarSet
;trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) != 0
;sysvar(1) = floor(vel y)

;[State 661, 6]
;type = PlaySnd
;trigger1 = Time = 0
;trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;persistent = 0

[State 661, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 661, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 661, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 661, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 661, 11] ;If just died
type = ChangeState
triggerall = !alive && p2stateno = 0 && roundstate = 3
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

;[State 661, 12]
;type = VarSet
;trigger1 = SysVar(0)
;trigger1 = Time = 0
;sysvar(0) = 0

[State 661, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 662, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 662, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[state 662, hitby]
type = hitby
trigger1 = time > 0
value = SCA, AA
ignorehitpause = 1

[State 662, get up]
type = selfstate
triggerall = life >= 1
trigger1 = time > 150
value = 5110

[state 660, flat death]
type = changestate
trigger1 = !alive
trigger1 = time > 20
value = 5150


;---------------------------------------------------------------------------
;Gassed Crushed State
[statedef 663]
type    = L
movetype= H
physics = N
ctrl = 0
velset = 0,0

[state 663, 1]
type = changeanim
trigger1 = time = 0
value = 5110

[State 663, flatten]
type = AngleDraw
trigger1 = 1
value = 0
scale = 1.2,0.3

[state 663, on ground]
type = posset
trigger1 = 1
y = 0

[state 663, passthrough]
type = playerpush
trigger1 = 1
value = 0
time = 600

[State 661, Width]
type = Width
trigger1 = time > 0
value = 0,0


[State 663, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 663, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 663, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)


[State 663, 5]
type = PosSet
trigger1 = Time = 0
y = 0

;[State 661, Var] ;Get fall velocity
;type = VarSet
;trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) != 0
;sysvar(1) = floor(vel y)

;[State 661, 6]
;type = PlaySnd
;trigger1 = Time = 0
;trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;persistent = 0

[State 663, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 661, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 663, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 663, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 661, 11] ;If just died
type = ChangeState
triggerall = !alive && p2stateno = 0 && roundstate = 3
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

;[State 661, 12]
;type = VarSet
;trigger1 = SysVar(0)
;trigger1 = Time = 0
;sysvar(0) = 0

[State 663, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 662, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 663, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[state 663, hitby]
type = hitby
trigger1 = time > 0
value = SCA, AA
ignorehitpause = 1

[State 663, get up]
type = selfstate
triggerall = life >= 1
trigger1 = time > 110
value = 5110

[state 663, flat death]
type = changestate
trigger1 = !alive
trigger1 = time > 105
value = 5150


;---------------------------------------------------------------------------
;Winning Crushed State
[statedef 665]
type    = L
movetype= H
physics = N
ctrl = 0
velset = 0,0

[state 665, 1]
type = changeanim
trigger1 = time = 0
value = 5110

[state 665, scream]
type = playsnd
trigger1 = 1
value = 11,0
persistent = 0


[State 665, flatten]
type = AngleDraw
trigger1 = time > 0  && time <25
value = 0
scale = 1.3,0.1

[state 665, on ground]
type = posset
trigger1 = 1
y = 0

[state 665, passthrough]
type = playerpush
trigger1 = 1
value = 0
time = 600

[State 665, Width]
type = Width
trigger1 = time > 0
value = 0,0

[State 665, 5]
type = PosSet
trigger1 = Time = 0
y = 0

;[State 661, Var] ;Get fall velocity
;type = VarSet
;trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) != 0
;sysvar(1) = floor(vel y)

;[State 665, 6]
;type = PlaySnd
;trigger1 = Time = 0
;trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;persistent = 0

[State 665, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 665, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 665, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 665, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 665, 11] ;If just died
type = ChangeState
triggerall = !alive && p2stateno = 0 && roundstate = 3
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

;[State 661, 12]
;type = VarSet
;trigger1 = SysVar(0)
;trigger1 = Time = 0
;sysvar(0) = 0

[State 665, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 665, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 665, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[state 665, hitby]
type = hitby
trigger1 = time > 0
value = SCA, AA
ignorehitpause = 1

[State 665, get up]
type = selfstate
triggerall = life >= 1
trigger1 = time > 600
value = 5120
ctrl = 1

[state 660, flat death]
type = changestate
trigger1 = !alive
trigger1 = time > 20
value = 5150


;===========================================================================
;------------------------------Wall Bounce State - Return to player
;===========================================================================
; Rocket Launcher Wall Bounce
[statedef 670]
type = A
movetype = H
physics = N

[State 672, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 670]
type = changeanim
trigger1 = 1
value = 5030
ignorehitpause = 1

[state 670, changestate]
type = changestate
trigger1 = hitshakeover
value = 671
;------------------------------------------------------------------------

[statedef 671]
type    = A
movetype= H
physics = N

[state 671, anim]
type = changeanim
trigger1 = anim != 5030
value = 5030

[State 670, Velocity]
type = velset
trigger1 = Time = 0
x = facing * gethitvar(xvel)
y = gethitvar(yvel)

[State 670, Gravity]
type = veladd
trigger1 = 1
y = 1.05

[state 610, screenbound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,1

;[State 670, No scroll]
;type = ScreenBound
;triggerall = Pos y < -15
;trigger1 = BackEdgeBodyDist < 65
;trigger2 = FrontEdgeBodyDist < 65
;value = 1
;movecamera = 0,1

[State 670, Hit wall]
type = ChangeState
triggerall = Pos y < 0
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 672

[State 670, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Hit wall - part 2 bounce off wall
[statedef 672]
type    = A
movetype= H
physics = N

[State 672, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 672, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 672, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 672, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 672, Spark]
type = Explod
trigger1 = Time = 1
anim = F72
pos = 0,const(size.mid.pos.y)
postype = back
sprpriority = 3
ownpal =1 

[state 672, anim]
type = changeanim
trigger1 = anim != 5030
value = 5030

[State 672, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,0

[State 672, State]
type = ChangeState
trigger1 = time = 10
value = 673
;--------------------------------------------------------------------------
;wall bounce - part 3 fall toward ground
[Statedef 673]
type    = A
movetype= H
physics = N

[State 673, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -35

[State 673, Vel X]
type = VelSet
trigger1 = Time = 0
x = ceil(p2dist x * 0.01)+2

[State 673, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 672, Gravity]
type = VelAdd
trigger1 = 1
y = 1.25

;[state 673, gravity]
;type = gravity
;trigger1 = 1

[State 673, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 673, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 673, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 673, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 673, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;---------------------------------------------------------------------------
;===========================================================================
; Neutral Wall Bounce State
;===========================================================================
; Rocket Launcher Wall Bounce
[statedef 675]
type = A
movetype = H
physics = N

[State 672, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 670]
type = changeanim
trigger1 = 1
value = 5030
ignorehitpause = 1

[state 670, changestate]
type = changestate
trigger1 = hitshakeover
value = 676
;------------------------------------------------------------------------

[statedef 676]
type    = A
movetype= H
physics = N

[state 671, anim]
type = changeanim
trigger1 = anim != 5030
value = 5030

[State 670, Velocity]
type = velset
trigger1 = Time = 0
x = facing * gethitvar(xvel)
y = gethitvar(yvel)

[State 670, Gravity]
type = veladd
trigger1 = 1
y = 1.25

[state 610, screenbound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,1

;[State 670, No scroll]
;type = ScreenBound
;triggerall = Pos y < -15
;trigger1 = BackEdgeBodyDist < 65
;trigger2 = FrontEdgeBodyDist < 65
;value = 1
;movecamera = 0,1

[State 670, Hit wall]
type = ChangeState
triggerall = Pos y < 0
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 677

[State 670, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Hit wall - part 2 bounce off wall
[statedef 677]
type    = A
movetype= H
physics = N

[State 672, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 672, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 672, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 672, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 672, Spark]
type = Explod
trigger1 = Time = 1
anim = F72
pos = 0,const(size.mid.pos.y)
postype = back
sprpriority = 3
ownpal =1 

[state 672, anim]
type = changeanim
trigger1 = anim != 5030
value = 5030

[State 672, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,0

[State 672, State]
type = ChangeState
trigger1 = time = 10
value = 678
;--------------------------------------------------------------------------
;wall bounce - part 3 fall toward ground
[Statedef 678]
type    = A
movetype= H
physics = N

[State 673, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -15

[State 673, Vel X]
type = VelSet
trigger1 = Time = 0
x = 4

[State 673, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 672, Gravity]
type = VelAdd
trigger1 = 1
y = 1.25

;[state 673, gravity]
;type = gravity
;trigger1 = 1

[State 673, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 673, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 673, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 673, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 673, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;=============================================================================
;Ground Bounce - Bring to player
;=============================================================================
;Hit Freeze small
[statedef 680]
type = A
movetype = H
physics = N

[State 680, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 680]
type = changeanim
trigger1 = time = 0
value = 5030
ignorehitpause = 1

[state 680, changestate]
type = changestate
trigger1 = hitshakeover
value = 681

;-----------------------------------------------------------------------------
;Soft Ground bounce - Going down
[statedef 681]
;Custom Hit state, ground bounce
type = A
movetype = H
physics = N


[state 681, velocity]
type = hitvelset
trigger1 = time = 0
y = 40

[state 681, anim]
type = changeanim
trigger1 = time = 0
value = 5160


[state 681, stop x]
type = velmul
trigger1 = time = 0
x = 0.25


[state 681]
type = gravity
trigger1 = 1

[state 681, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 682

;-----------------------------------------------------------------------------
;Ground Bounce - Impact / bouncing
[statedef 682]
type = A
movetype = H
physics = N
anim = 5160

[state 682, impact]
type = velset
trigger1 = time = 0
y = 0

[State 682, 8]
type = Explod
trigger1 = Time = 0
anim = F62 
pos = 0, 0
ontop = 1
scale = 1.7, 0.5
persistent = 0
ownpal = 1

[State 682, 10]
type = PlaySnd
trigger1 = Time = 0
value = F7,2
persistent = 0

[state 682, shake]
type = envshake
trigger1 = time = 0
ampl = 5
freq = 50
phase = 50
time = 10

[state 682, impact 2]
type = posset
trigger1 = time = 0
y = 0

[state 682, bounce]
type = velset
trigger1 = time = 1
y = -55

[state 682, movefwd]
type = velset
trigger1 = time = 1
x = ceil(p2dist x*0.01)

[state 682, gravity]
type = gravity
trigger1 = time > 1

[state 682, veladd]
type = veladd
trigger1 = time > 1
y = 1.25

[state 682, down]
type = selfstate
trigger1 = time >= 2 
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 5110

;==========================================================
;Ground Bounce - Vertical Bounce Only
;==========================================================
;Hit Freeze small
[statedef 683]
type = A
movetype = H
physics = N

[State 683, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 683]
type = changeanim
trigger1 = time = 0
value = 5030
ignorehitpause = 1

[state 680, changestate]
type = changestate
trigger1 = hitshakeover
value = 684

;-----------------------------------------------------------------------------
;Soft Ground bounce - Going down
[statedef 684]
;Custom Hit state, ground bounce
type = A
movetype = H
physics = N


[state 684, velocity]
type = hitvelset
trigger1 = time = 0
y = 40

[state 684, anim]
type = changeanim
trigger1 = time = 0
value = 5160


[state 684, stop x]
type = velmul
trigger1 = time = 0
x = 0.25


[state 684]
type = veladd
trigger1 = 1
y = 1.25

[state 684, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 685

;-----------------------------------------------------------------------------
;Ground Bounce - Impact / bouncing
[statedef 685]
type = A
movetype = H
physics = N
anim = 5160

[state 685, impact]
type = velset
trigger1 = time = 0
y = 0

[State 685, 8]
type = Explod
trigger1 = Time = 0
anim = F62 
pos = 0, 0
ontop = 1
scale = 1.7, 0.5
persistent = 0
ownpal = 1

[State 685, 10]
type = PlaySnd
trigger1 = Time = 0
value = F7,2
persistent = 0

[state 685, shake]
type = envshake
trigger1 = time = 0
ampl = 5
freq = 50
phase = 50
time = 10

[state 685, impact 2]
type = posset
trigger1 = time = 0
y = 0

[state 685, bounce]
type = velset
trigger1 = time = 1
y = -38

[state 685, movefwd]
type = velset
trigger1 = time = 1
x = 0

[state 685, gravity]
type = veladd
trigger1 = time > 1
y = 1.25





[state 685, down]
type = selfstate
trigger1 = time >= 2 
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 5110
;--------------------------------------------------------------------------


;--------------------------------------------------------------------------




;---------------------------------------------------------------------------
;Kung Fu Throw - Attempt
; CNS difficulty: medium-advanced
; Description: Throws are not difficult to make, although then can be
;     tedious at times. Throw attempt states have a HitDef of a
;     special format. The key parameters in a throw are p1stateno
;     and p2stateno. If the HitDef successfully connects, then
;     the attacker will change to the state number specified by
;     p1stateno, and the opponent will be change to the state
;     number assigned to p2stateno. The special thing about p2stateno
;     is that the opponent will be temporarily brought into the
;     attacker's state file. In this case, no matter who the
;     opponent is, he will be taken to state 820 of this file (kfm.cns)
;     and remain here until the end of the throw (look at his debug
;     information when he is being thrown; the text changes to yellow
;     to mean that he is in another player's state file).
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, 1]
type = HitDef
triggerall = p2movetype != A
Trigger1 = Time = 0
attr = S, NT         
hitflag = M-        
priority = 4, Miss   
sparkno = -1         
p1sprpriority = 1  
p1stateno = 810
p2stateno = 820  
id = 800 
p1facing = 1
p2facing = 1               
guard.dist = 0      
fall = 1      

[State 800, 1]
type = HitDef
triggerall = p2movetype = A
Trigger1 = Time = 0
attr = S, NT         
hitflag = M-        
priority = 4, Miss   
sparkno = -1         
p1sprpriority = 1  
p1stateno = 810
p2stateno = 822  
id = 800 
p1facing = 1
p2facing = 1               
guard.dist = 0      
fall = 1      

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Grab Escape - p2
[statedef 805]
type = A
movetype = H
physics = S
ctrl = 0
facep2 = 1
sprpriority = 4

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = SelfAnimExist(805)
value = 805

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = !selfanimexist(805)
value = 120

;[state 1400, dim]
;type = bgpalfx
;trigger1 = time = 0
;time = 8
;mul = 200,200,200

;[state 805, freeze]
;type = pause
;trigger1 = time = 0
;time = 8
;endcmdbuftime = 8

;[state 805, sound]
;type = playsnd
;trigger1 = time = 0
;value = S805,0

[state 805, pos y]
type = posset
trigger1 = time = 0
y = 0

[state 805, velset]
type = velset
trigger1 = time = 10
x= -32

[state 805, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 805, end]
type = selfstate
trigger1 = time = 35
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Grab Escape - p1
[statedef 806]
type = A
movetype = H
physics = S
ctrl = 0

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = SelfAnimExist(130)
value = 130

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = !selfanimexist(805)
value = 130

[state 805, removeexplod]
type = removeexplod
trigger1 = numexplod(811)
id = 811

[state 1400, dim]
type = bgpalfx
trigger1 = time = 0
time = 8
mul = 200,200,200

[state 805, freeze]
type = pause
trigger1 = time = 0
time = 12
endcmdbuftime = 8

[state 805, sound]
type = playsnd
trigger1 = time = 0
value = S805,0

[state 805, pos y]
type = posset
trigger1 = time = 0
y = 0

[state 805, turn]
type = turn
trigger1 = prevstateno = 820
trigger1 = time = 0
persistent = 0
ignorehitpause

[state 805, velset]
type = velset
trigger1 = time = 10
x= -32

[state 805, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 805, end]
type = selfstate
trigger1 = time = 35
value = 0
ctrl = 1


;---------------------------------------------------------------------------

;Back Suplex 
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 100
sprpriority = -1

[state 810, tech]
type = changestate
triggerall = numtarget
trigger1 = target(800),stateno = 805
value = 806
persistent = 1

[state 810, screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,0
value = 1

[State 810, Holding Direction?]
type = VarSet
trigger1 = Time = 0
var(2) = command = "holdfwd"

[state 810, width]
type = width
trigger1 = 1
edge = 240,240

[state 810, arm]
type = explod
trigger1 = time = 0
anim = 811
id = 811
postype = p1
bindtime = -1
removetime = -2
scale = const(size.xscale),const(size.yscale)
pos = 0,0
facing = ifelse(var(2),-1,1)
sprpriority = 4

[state 810, velset]
type = velset
trigger1 = time = 12
y = -24
x = -12

[state 810, gravity]
type = gravity
trigger1 = time > 14

[state 810, spike]
type = veladd
trigger1 = vel y > 0
y = 0.4


[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 260, 0

[State 810, Bind 2]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 300, 0

[State 810, holdfwd - Turn 6] ;If was holding fwd before, turn now
type = Turn
trigger1 = var(2)
trigger1 = AnimElem = 2

[State 810, holdfwd - Pos 6] ;If was holding fwd before, move a little
type = PosAdd
trigger1 = var(2)
trigger1 = AnimElemtime(2) = 3
x = -37

[State 810, holdfwd - Turn Target 6] ;If was holding fwd before, turn target too
type = TargetFacing
trigger1 = var(2)
trigger1 = AnimElem = 2
value = -1

[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
pos = 180, -300

[State 810, Bind 4]
type = TargetBind
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
pos = 110, -420

[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 
pos = -110, -390



[State 810, Throw 11]
type = TargetState
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 816

[State 810, State End]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 815


;---------------------------------------------------------------------------
[Statedef 815]
type    = S
movetype= A
physics = S
anim = 815
poweradd = 0
sprpriority = -1

[state 815, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 810, screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,0
value = 0

[State 815, Bind 1]
type = TargetBind
trigger1 = animelemtime(1) < 30
pos = -260, -80

[state 815, posset]
type = posset
trigger1 = time = 0
y = 0

[state 815, removeare]
type = removeexplod
trigger1 = time = 0
id = 811


[state 810, arm]
type = explod
trigger1 = time = 0
anim = 816
postype = p1
bindtime = -1
removetime = -2
scale = const(size.xscale),const(size.yscale)
pos = 0,0
sprpriority = 4

[state 815, sound]
type = playsnd
trigger1 = time = 0
value = F7,2

[State 815, 7 quake]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 30
ampl = -20
freq = 100
phase = 20


[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = time = 0
value = -120

[state x, combo dampener]
type = varadd
trigger1 = animtime = 0
v = 18
value = -18
persistent = 0
ignorehitpause =1 

[state 815, end]
type = changestate
trigger1 = animtime = 0
value = 1130



;--------------------------------------------------------------------------
[Statedef 816]
type = C
movetype = H
physics = N
sprpriority = 2


[state 816, anim]
type = changeanim2
trigger1 = time = 0
value = 817

[state 816, end]
type = changestate
trigger1 = animtime = 0
value = 821





;---------------------------------------------------------------------------
;Techable Thrown
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 2

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[state 810, screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,0
value = 0

[state 820, tech throw]
type = changestate
triggerall = time < 12
trigger1 = ailevel = 0
trigger1 = command = "holdfwd" || command = "holdback"
trigger1 = command = "y" || command = "b" || command = "z" || command = "c"
trigger2 = command = "x" && command = "a"
trigger3 = ailevel > 4 
trigger3 = random < (ailevel * ifelse(ailevel>7,1,3))
value = 805

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
;Untechable Thrown
[Statedef 822]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 2

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[state 810, screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,0
value = 0

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
;Thrown by Kung Fu Throw - thrown into the air
; (a custom gethit state)
; Description: This state has the opponent flying through the air and
;     falling down onto the ground. The SelfState controller sets the
;     opponent back using to his own state file when he his the ground.
;     Controllers 821,2 and 821,3 allow the opponent to recover by
;     hitting his recovery command when he is falling.
[Statedef 821]
type    = A
movetype= H
physics = N
velset = 12,-15
poweradd = 40

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = 1.22

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground


;---------------------------------------------------------------------------
;Shotgun Blast
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
velset = 0,0
ctrl = 0
sprpriority = 2

[state 1000, Thicker]
type = width
trigger1 = animelemtime(7) < 0
player = 100, 0

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(25) > 0
value = 1000

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(25) <= 0
value = 1003

[state 1000, explod]
type = explod
trigger1 = animelem = 7
trigger1 = anim = 1000
trigger1 = var(25) > 1
anim = 1001
ownpal = 1
pos = 0,0
sprpriority = 5
removetime = -2
scale = Const(size.xscale),Const(size.yscale)
persistent = 0

[state 1000, Shot]
type = playsnd
trigger1 = animelem = 7
trigger1 = var(25) > 1
value = S1000,ifelse(random%2=1,3,0)
persistent = 0

[state 1000, Click]
type = playsnd
trigger1 = animelem = 12
value = S1000,ifelse(random%2=1,4,1)
persistent = 0



[state 1000, ammo down]
type = varadd
trigger1 = animelem = 7
var(25) = -1

[State 1000, Gun Butt]
type = HitDef
trigger1 = animelem = 6
persistent = 0
attr = S, SA
animtype  = Medium
damage    = 20
guardflag = MA
getpower = 100
givepower = 125
hitflag = HA
pausetime = 12,12
sparkno = 2
priority = 1,miss
sparkxy = -10,-360
hitsound   = S5000, 1
guardsound = S120,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -18
air.velocity = -8,-2
guard.velocity = -24              
guard.hittime = 10
guard.slidetime = 18
airguard.velocity = -16,-2
airguard.hittime = 10
guard.dist = 360   

;Shot gun spread

[State 1000, spread1, straight] 
type = projectile
trigger1 = animelem = 7
trigger1 = var(25) > 0
attr = S, SP
hitflag = MAF
getpower = 15
givepower = 25
projid = 1002
projanim = 1002
hitonce = 1
projhits = 1
projremovetime = 20 ;16
projscale = Const(size.xscale),Const(size.yscale)
offset = 310,-385
velocity = 35,-1*(random%10)
animtype  = Hard
damage    = 25,3
projpriority  = 1
guardflag = MA
pausetime = 1,15
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 20
guard.slidetime = 16
ground.hittime  = ifelse(p2bodydist x < 400,26,22)
guard.hittime = 16
guard.velocity = ifelse(p2bodydist x < 400,-30, -15)
airguard.velocity = -10, -4
ground.velocity = ifelse(p2bodydist x < 550,-24,-16)
air.velocity =  -12,-4
fall = ifelse(p2bodydist x < 300,1,0)
air.fall = 1
fall.recover = 0
guard.dist = 640   

[State 1000, spread2, upward] 
type = projectile
trigger1 = animelem = 7
trigger1 = var(25) > 0
attr = S, SP
hitflag = MAF
projid = 1003
projanim = 1002
projhits = 1
projremovetime = 20
projscale = Const(size.xscale),Const(size.yscale)
hitonce = 1
offset = 310,-385
velocity = 35,-1*(random%20)-5
animtype  = Hard
damage    = 30,3
getpower = 15
givepower = 25
projpriority  = 1
guardflag = MA
pausetime = 1,15
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 20
guard.slidetime = 16
ground.hittime  = ifelse(p2bodydist x < 400,26,22)
guard.hittime = 16
guard.velocity = ifelse(p2bodydist x < 400,-30, -15)
airguard.velocity = -10, -4
ground.velocity = ifelse(p2bodydist x < 550,-35,-25)
air.velocity =  -20,-6
fall = ifelse(p2bodydist x < 300,1,0)
air.fall = 1
fall.recover = 0
guard.dist = 640

[State 1000, downward] 
type = projectile
trigger1 = animelem = 7
trigger1 = var(25) > 0
attr = S, SP
hitflag = MAF
projid = 1004
projanim = 1002
projhits = 1
projremovetime = 20
projscale = Const(size.xscale),Const(size.yscale)
hitonce = 1
offset = 310,-385
velocity = 35, (random%20)+5
animtype  = Hard
damage    = 30,3
getpower = 15
givepower = 25
projpriority  = 1
guardflag = MA
pausetime = 1,15
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 20
guard.slidetime = 16
ground.hittime  = ifelse(p2bodydist x < 400,26,22)
guard.hittime = 16
guard.velocity = ifelse(p2bodydist x < 400,-30, -15)
airguard.velocity = -10, -4
ground.velocity = ifelse(p2bodydist x < 550,-35,-25)
air.velocity =  -20,-6
fall = ifelse(p2bodydist x < 300,1,0)
air.fall = 1
fall.recover = 0
guard.dist = 640

[State 1000, spread4 angled] 
type = projectile
trigger1 = animelem = 7
trigger1 = var(25) > 0
attr = S, SP
hitflag = MAF
projid = 1005
projanim = 1002
projhits = 1
projremovetime = 20
projscale = Const(size.xscale),Const(size.yscale)
hitonce = 1
offset = 310,-385
velocity = 35, (random%10)
animtype  = Hard
damage    = 30,3
getpower = 15
givepower = 25
projpriority  = 1
guardflag = MA
pausetime = 1,15
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 20
guard.slidetime = 16
ground.hittime  = ifelse(p2bodydist x < 400,26,22)
guard.hittime = 16
guard.velocity = ifelse(p2bodydist x < 400,-30, -15)
airguard.velocity = -10, -4
ground.velocity = ifelse(p2bodydist x < 550,-35,-25)
air.velocity =  -20,-6
fall = ifelse(p2bodydist x < 300,1,0)
air.fall = 1
fall.recover = 0
guard.dist = 640

[state 1000, more shots]
type = changestate
triggerall = time > 32
triggerall = var(30) != 59
triggerall = var(25) > 0
trigger1 = command = "x"  || command = "y" || command = "holdx" || command = "holdy"
value = 1005

[state 1000, combo damage]
type = varadd
trigger1 = movehit || projhit =1
v = 18
value = -3
persistent = 0
ignorehitpause

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Additional Shots
[Statedef 1005]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
velset = 0,0
ctrl = 0
sprpriority = 2

[state 1000, Thicker]
type = width
trigger1 = animelemtime(7) < 0
player = 100, 0

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(25) > 0
value = 1005

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(25) <= 0
value = 1006

[state 1005, explod]
type = explod
trigger1 = animelem = 2
trigger1 = var(25) > 0
anim = 1001
ownpal = 1
pos = 0,0
sprpriority = 5
removetime = -2
scale = Const(size.xscale),Const(size.yscale)

[state 1005, Shot]
type = playsnd
trigger1 = animelem = 2
trigger1 = var(25) > 1
value = S1000,ifelse(random%2=1,3,0)
persistent = 0

[state 1005, Click]
type = playsnd
trigger1 = animelem = 4
value = S1000,ifelse(random%2=1,4,1)
persistent = 0

[state 1000, ammo down]
type = varadd
trigger1 = animelem = 3
var(25) = -1


;Shot gun spread

[State 1005, spread1, straight] 
type = projectile
trigger1 = animelem = 2
trigger1 = var(25) > 0
attr = S, SP
hitflag = MAF
projid = 1002
projanim = 1002
projhits = 1
projremovetime = 20
projscale = Const(size.xscale),Const(size.yscale)
hitonce = 1
offset = 310,-385
velocity = 35,-5
animtype  = Hard
damage    = 15,2
getpower = 15
givepower = 25
projpriority  = 1
guardflag = MA
pausetime = 1,15
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 20
guard.slidetime = 16
ground.hittime  = ifelse(p2bodydist x < 400,26,22)
guard.hittime = 16
guard.velocity = ifelse(p2bodydist x < 400,-30, -15)
airguard.velocity = -10, -4
ground.velocity = ifelse(p2bodydist x < 550,-40,-25)
air.velocity =  -20,-6
fall = ifelse(p2bodydist x < 300,1,0)
guard.dist = 640


[State 1005, spread2, upward] 
type = projectile
trigger1 = animelem = 2
trigger1 = var(25) > 0
attr = S, SP
hitflag = MAF
projid = 1003
projanim = 1002
projhits = 1
projremovetime = 20
projscale = Const(size.xscale),Const(size.yscale)
hitonce = 1
offset = 310,-385
velocity = 35,-15
animtype  = Hard
damage    = 15,2
getpower = 15
givepower = 25
projpriority  = 1
guardflag = MA
pausetime = 1,15
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 20
guard.slidetime = 16
ground.hittime  = ifelse(p2bodydist x < 400,26,22)
guard.hittime = 16
guard.velocity = ifelse(p2bodydist x < 400,-30, -15)
airguard.velocity = -10, -4
ground.velocity = ifelse(p2bodydist x < 550,-40,-25)
air.velocity =  -20,-6
fall = ifelse(p2bodydist x < 300,1,0)
guard.dist = 640


[State 1005, downward] 
type = projectile
trigger1 = animelem = 2
trigger1 = var(25) > 0
attr = S, SP
hitflag = MAF
projid = 1004
projanim = 1002
projhits = 1
projremovetime = 20
projscale = Const(size.xscale),Const(size.yscale)
hitonce = 1
offset = 310,-385
velocity = 35, 15
animtype  = Hard
damage    = 15,2
getpower = 15
givepower = 25
projpriority  = 1
guardflag = MA
pausetime = 1,15
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 20
guard.slidetime = 16
ground.hittime  = ifelse(p2bodydist x < 400,26,22)
guard.hittime = 16
guard.velocity = ifelse(p2bodydist x < 400,-30, -15)
airguard.velocity = -10, -4
ground.velocity = ifelse(p2bodydist x < 550,-40,-25)
air.velocity =  -20,-6
fall = ifelse(p2bodydist x < 300,1,0)
guard.dist = 640 


[State 1005, spread4 angled] 
type = projectile
trigger1 = animelem = 2
trigger1 = var(25) > 0
attr = S, SP
hitflag = MAF
projid = 1005
projanim = 1002
projhits = 1
projremovetime = 20
projscale = Const(size.xscale),Const(size.yscale)
hitonce = 1
offset = 310,-385
velocity = 35, 5
animtype  = Hard
damage    = 15,2
getpower = 15
givepower = 25
projpriority  = 1
guardflag = MA
pausetime = 1,15
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 20
guard.slidetime = 16
ground.hittime  = ifelse(p2bodydist x < 400,26,22)
guard.hittime = 16
guard.velocity = ifelse(p2bodydist x < 400,-30, -15)
airguard.velocity = -10, -4
ground.velocity = ifelse(p2bodydist x < 550,-40,-25)
air.velocity =  -20,-6
fall = ifelse(p2bodydist x < 300,1,0)
guard.dist = 640 


[state 1000, combo damage]
type = varadd
trigger1 = movehit || projhit = 1
v = 18
value = -3
persistent = 0
ignorehitpause

;[state 1005, more shots]
;type = changestate
;triggerall = var(25) > 0
;trigger1 = command = "x"  || command = "y" || command = "holdx" || command = "holdy"
;trigger1 = time >= 32
;value = 1005 

[State 1005, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Revolver
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 80
velset = 0,0
ctrl = 0
sprpriority = 2

[state 1000, Thicker]
type = width
trigger1 = animelemtime(7) < 0
player = 100, 0

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(26) > 0
value = 1010

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(26) <= 0
value = 1013

[state 1000, playsndfx]
type = playsnd
trigger1 = animelem = 8
trigger1 = anim = 1010
trigger1 = var(26) > 1
value = S1010,0

[state 1000, playsndfx]
type = playsnd
trigger1 = animelem = 7
value = S1010,1
persistent = 0

[state 1010, explod]
type = explod
trigger1 = animelem = 8
trigger1 = var(26) > 1
anim = 1011
ownpal = 1
pos = 0,0
sprpriority = 5
removetime = -2
scale = Const(size.xscale),Const(size.yscale)

[state 1000, ammo down]
type = varadd
trigger1 = animelem = 8
var(26) = -1

[State 1010, Gun Butt]
type = HitDef
trigger1 = animelem = 6
persistent = 0
attr = S, SA
animtype  = Medium
damage    = 25
getpower = 10
guardflag = MA
hitflag = HA
pausetime = 12,12
sparkno = 2
priority = 1,miss
sparkxy = -10,-360
hitsound   = S5000, 1
guardsound = S120,0
ground.type = high
ground.slidetime = 16
ground.hittime  = 14
ground.velocity = -24
air.velocity = -8,-2
guard.velocity = -24              
guard.hittime = 10
guard.slidetime = 18
airguard.velocity = -16,-2
airguard.hittime = 10
guard.dist = 360

;[State 1000, Fake Projectile for AI] 
;type = projectile
;;trigger1 = animelem = 6
;attr = S, SP
;hitflag = MA
;getpower = 0
;givepower = 0
;projid = 4999
;projanim = 4999
;hitonce = 1
;projhits = 0
;projremovetime = 8
;projscale = Const(size.xscale),Const(size.yscale)
;offset = 100,-150
;velocity = 15,0
;damage    = 0,0
;projpriority  = 1
;guardflag = MA
;pausetime = 1,15
;sparkno = -1
;sparkxy = 0,0
;hitsound   = 5,4
;guardsound = S120,0
;ground.type = high
;ground.slidetime = 0
;ground.velocity = 0,0
;guard.slidetime = 0
;ground.hittime  = 0
;guard.hittime = 0
;guard.velocity = 0
;ground.velocity = 0

[State 1010, 2]
type = Helper
triggerall = numhelper(4010) < 3
trigger1 = var(26) > 0
trigger1 = animelemtime(8) = 0
helpertype = normal
name = "Revolver Bullet"
ID = 4010
stateno = 4010
scale = Const(size.xscale),Const(size.yscale)
pos = 290,-415
postype = p1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1000, combo damage]
type = varadd
triggerall = numhelper(4010)
trigger1 = helper(4010),movehit
v = 18
value = -6
persistent = 0
ignorehitpause

[state 1010, more shots]
type = changestate
triggerall = numhelper(4010) < 3
triggerall = var(26) > 0
triggerall = var(30) != 59
trigger1 = command = "x" || command = "y" || command = "holdx" || command = "holdy"
trigger1 = animelemtime(11) > 0
value = 1015

[State 1010, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Addition Revolver Shots
[Statedef 1015]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 40
velset = 0,0
ctrl = 0
sprpriority = 2

[state 1000, Thicker]
type = width
trigger1 = animelemtime(7) < 0
player = 100, 0

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(26) > 0
value = 1015

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(26) <= 0
value = 1016

[state 1015, playsndfx]
type = playsnd
trigger1 = animelem = 2
trigger1 = var(26) > 0
value = S1010,0

[state 1015, playsndfx]
type = playsnd
trigger1 = animelem = 1
value = S1010,1
persistent = 0

[state 1015, explod]
type = explod
trigger1 = animelem = 2
trigger1 = var(26) > 0
anim = 1011
ownpal = 1
pos = 0,0
sprpriority = 5
removetime = -2
scale = Const(size.xscale),Const(size.yscale)

[state 1000, ammo down]
type = varadd
trigger1 = animelem = 2
trigger1 = var(26) > 0
var(26) = -1

[State 1000, Fake Projectile for AI] 
type = projectile
trigger1 = animelem = 2
attr = S, SP
hitflag = MA
getpower = 0
givepower = 0
projid = 4999
projanim = 4999
hitonce = 1
projhits = 0
projremovetime = 8
projscale = Const(size.xscale),Const(size.yscale)
offset = 100,-150
velocity = 15,0
damage    = 0,0
projpriority  = 1
guardflag = MA
pausetime = 1,15
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 0
ground.velocity = 0,0
guard.slidetime = 0
ground.hittime  = 0
guard.hittime = 0
guard.velocity = 0
ground.velocity = 0

[State 1050, 2]
type = Helper
triggerall = numhelper(4015) < 3
trigger1 = var(26) > 0
trigger1 = animelemtime(2) = 0
helpertype = normal
name = "Revolver Bullet"
ID = 4015
scale = Const(size.xscale),Const(size.yscale)
stateno = 4015
pos = 290,-415
postype = p1
ownpal = 1
ignorehitpause = 1

[state 1000, combo damage]
type = varadd
triggerall = numhelper(4015)
trigger1 = helper(4015),movehit
v = 18
value = -6
persistent = 0
ignorehitpause


;[state 1015, more shots]
;type = changestate
;triggerall = var(26) > 0
;trigger1 = command = "x" || command = "y" || command = "holdx" || command = "holdy"
;trigger1 = time > 24
;value = 1015

[State 1015, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Rocket Launcher
[Statedef 1020]
type    = C
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
ctrl = 0
sprpriority = 2

[state 1020, anim]
type = changeanim
trigger1 = time = 0
;trigger1 = var(27) > 0
value = 1020


[state 1020, playsndfx]
type = playsnd
triggerall = random%10 < 2
trigger1 = var(27) > 1
trigger1 = time = 3
value = S1020,4


[state 1020, playsndfx]
type = playsnd
trigger1 = animelem = 9
trigger1 = var(27) > 1
value = S1020,5

[state 1020, power minus]
type = poweradd
trigger1 = animelemtime(9) = 0
trigger1 = var(27) > 0
value = -250
persistent = 0

[state 1000, ammo down]
type = varadd
trigger1 = animelem = 9
trigger1 = var(27) > 0
var(27) = -1

[State 1020, Gun Butt]
type = HitDef
trigger1 = animelem = 7
persistent = 0
attr = S, SA
animtype  = Medium
damage    = 35
guardflag = MA
hitflag = HA
pausetime = 12,12
sparkno = 2
priority = 1,miss
sparkxy = -10,-360
hitsound   = S5000, 1
guardsound = S120,0
ground.type = high
ground.slidetime = 24
ground.hittime  = 30
ground.velocity = -24
air.velocity = -14,-8
guard.velocity = -24              
guard.hittime = 10
guard.slidetime = 10
airguard.velocity = -20,-4
airguard.hittime = 10
guard.dist = 360

;[State 1020, Fake Projectile for AI] 
;type = projectile
;trigger1 = animelem = 8
;attr = S, SP
;hitflag = MA
;getpower = 0
;givepower = 0
;projid = 4999
;projanim = 4999
;hitonce = 1
;projhits = 0
;projremovetime = 18
;projscale = Const(size.xscale),Const(size.yscale)
;offset = 200,-325
;velocity = 1,0
;damage    = 0,0
;projpriority  = 1
;guardflag = MA
;pausetime = 1,15
;sparkno = -1
;sparkxy = 0,0
;hitsound   = 5,4
;guardsound = S120,0
;ground.type = high
;ground.slidetime = 0
;ground.velocity = 0,0
;guard.slidetime = 0
;ground.hittime  = 0
;guard.hittime = 0
;guard.velocity = 0
;ground.velocity = 0

[State 1150, 2]
type = Helper
triggerall = numhelper(4020) < 2
trigger1 = animelem = 9
trigger1 = var(27) > 0 
helpertype = normal
name = "Rocket Launcher"
ID = 4020
stateno = 4020
pos = 180,-330
postype = p1
ownpal = 1
ignorehitpause = 1

[State 1010, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;;--------------------------------------------------------------------------
;Reloading
[Statedef 1030]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 25
velset = 0,0
anim = 1030
ctrl = 0
sprpriority = 2

[state 1030, Reloading]
type = explod
trigger1 = time = 0
trigger1 = !numexplod(1030)
anim = 1031
id  = 1030
postype = p1
pos = -50,-560
ontop = 1
scale = ifelse(facing = 1, const(size.xscale)*1.5, const(size.xscale)*-1.5), const(size.yscale)*1.5
removeongethit = 1


[state 1030, varset]
type = varadd
trigger1 = time = 15 ;15
trigger2 = time = 30
trigger3 = time = 45
var(25) = 2

[state 1030, poweradd]
type = poweradd
trigger1 = time = 15
trigger2 = time = 30
trigger3 = time = 45
value = 50


[state 1030, varset]
type = varadd
trigger1 = time = 15
trigger2 = time = 30
trigger3 = time = 45
var(26) = 2

[state 1030, varset]
type = varadd
trigger1 = time = 15
trigger2 = time = 30
trigger3 = time = 45
var(27) = 1

[state 1030, varset]
type = varadd
trigger1 = time = 15
trigger2 = time = 30
trigger3 = time = 45
var(28) = 1




[state 1030, power]
type = poweradd
trigger1 = time = 30
value = 125


[state 1030, varset]
type = varset
trigger1 = time = 60
trigger2 = var(25) > 8
var(25) = 9


[state 1030, varset]
type = varset
trigger1 = time = 60
trigger2 = var(26) > 6
var(26) = 7

[state 1030, varset]
type = varset
trigger1 = time = 60
trigger2 = var(27) > 4
var(27) = 5

[state 1030, reload ding]
type = playsnd
trigger1 = time = 60
value = 1030,0

[state 1030, varset]
type = varset
trigger1 = time = 60
trigger2 = var(28) > 3
var(28) = 5

[state 1030, backdash out]
type = changestate
trigger1 = command = "BB"
trigger1 = time > 12
value = 105

[state 1030, Run Out]
type = changestate
trigger1 = command = "FF"
trigger1 = time > 12
value = 100

[State 1030, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Scissor Bomb Light
[statedef 1100]
type = U
movetype = A
physics = N
Poweradd = 80
ctrl = 0

[state 1100, width]
type = width
trigger1 = 1
edge = 200,0

[state 1100, explod]
type = explod
trigger1 = time = 0
anim = 1101
scale = Const(size.xscale),Const(size.yscale)
sprpriority = 3
bindtime = -1
id = 1101
ignorehitpause = 0
removetime = -2

[state 1100, playerpush]
type = playerpush
triggerall = !movecontact
trigger1 = animelem = 4
value = 0
ignorehitpause = 1

[state 1100, nothitby]
type = nothitby
trigger1 = animelemtime(4) >= 0
value = ,AP


[State 1100, 1]
type = HitDef
Trigger1 = time = 0
persistent = 0
attr = S, ST         
hitflag = MAF
guardflag = MA
damage = 0
id = 1100    
priority = 1, miss 
sparkno = -1         
p1sprpriority = -2     
p1facing = 1
p2facing = 1 
hitonce = 1
p2stateno = 1107
guard.hittime = 26
guard.slidetime = 26
guard.velocity = -32
p2sprpriority = 1
guard.dist = 480
guard.kill = 1

[state 1100, hit]
type = changestate
trigger1 = movehit
;trigger1 = enemy,statetype != L  
value = 1101        
     

[state 1100, hit]
type = targetstate
trigger1 = movehit
;trigger1 = enemy,statetype != L
value = 1107

 
[state 1100, anim]
type = changeanim
trigger1 = time = 0
value = 1100

[state 1100, velset]
type = velmul
trigger1 = time = 0 
trigger1 = statetype = A
x = 0.5
y = 0.1

[state 1100, velset]
type = velmul
trigger1 = time = 0 
trigger1 = statetype = S || statetype = C
x = 0
y = 0

[state 1100, set type]
type = statetypeset
trigger1 = time = 3
statetype = A

[state 1100, launch]
type = velset
trigger1 = animelem = 4
x = ifelse(pos y < -150, 12,16)
y = ifelse(pos y < -150, -10.5,-14)



[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1100, block]
type = velset
trigger1 = moveguarded
x = -8
persistent = 0
ignorehitpause

[state 1100, blocked]
type = velset
trigger1 = moveguarded
y = -10
persistent = 0
ignorehitpause

[state 1100, gravity]
type = gravity
trigger1 = time > 17

[state 1100, land]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1105

;---------------------------------------------------------------------------
;Hit Contact
[statedef 1101]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = -2

[state 1100, width]
type = width
trigger1 = 1
edge = 200,0

[state 1101,anim]
type = changeanim
trigger1 = time = 0
value = 1102

[state 1101, nothitby]
type = nothitby
trigger1 = 1
value = SCA


[state 1101, velset]
type = veladd
trigger1 = time = 0
trigger1 = vel y > 0
y = -20

[state 1101, velmul]
type = velmul
trigger1 = time = 0
x = 0.5

[state 1101, explod]
type = explod
trigger1 = time = 0
anim = 1103
scale = Const(size.xscale),Const(size.yscale)
sprpriority = 3
bindtime = -1
id = 1103
ignorehitpause = 0
removetime = -2

[State 1121, Bind 1]
type = TargetBind
trigger1 = 1
pos = 100, -150

[state 1101, gravity]
type = gravity
trigger1 = time > 2

[state 1101, gravity]
type = gravity
trigger1 = time > 2

[state 1101, targetstate]
type = targetstate
trigger1 = pos y = -2
value = 662



[state 1100, land]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1102

;--------------------------------------------------------------------------
;Scissor Bomb landing with grab
[statedef 1102]
type = A
movetype = A
physics = C
ctrl = 0
poweradd = 125
sprpriority = 2

[state 1100, width]
type = width
trigger1 = 1
edge = 200,100

[state 1102, targetbind]
type = targetstate
trigger1 = time = 0
value = 1108
id = 1100

[state 1102, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1102, placement]
type = targetbind
trigger1 = time = 0
pos = -90,0


[state 1102, remove explod]
type = removeexplod
trigger1 = numexplod(1101)
id = 1101

[state 1102, remove explod]
type = removeexplod
trigger1 = numexplod(1103)
id = 1103

[state 1105, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1105, move]
type = posadd
trigger1 = time = 0
x = 120

[state 1102, landing damage]
type = targetlifeadd
trigger1 = time = 0
value = floor(fvar(10)*-150)

[state 1102, target poweradd]
type = targetpoweradd
trigger1 = time = 0
value = 240

[state 1102, poweradd]
type = poweradd
trigger1 = time = 0
value = 150


[state 1105, anim]
type = changeanim
trigger1 = time = 0
value = 1105

[state 1102, ground impact front fx]
type = explod
trigger1 = time = 0
anim = 2000
sprpriority = 3
postype = p1
pos = 0,25
scale = const(size.xscale)*2,Const(size.yscale)*2
ownpal = 1

[state 1102, ground impact back fx]
type = explod
trigger1 = time = 0
anim = 2001
sprpriority = -4
postype = p1
pos = 0,25
scale = const(size.xscale)*2,Const(size.yscale)*2
ownpal = 1

[State 1105, quakes]
type = envshake
trigger1 = time = 0
time = 30
ampl = -20
freq = 100
phase = 100

[State 1105, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[state 1102, playsnd]
type = playsnd
trigger1 = time = 2
value = S1100,1

[state 1105, pos]
type = posset
trigger1 = time = 0
y = -50

[state 1105, vel]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1105, vel]
type = velset
trigger1 = time = 9
y = -15

[state 1105, gravity]
type = gravity
trigger1 = time > 10
 
[state 1105, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1106



;---------------------------------------------------------------------------
;Scissor Bomb Landing (without grab)
[statedef 1105]
type = A
movetype = A
physics = C
ctrl = 0
sprpriority = 2

[state 1105, turn]
type = turn
trigger1 = prevstateno = 1155
trigger1 = time = 0


[state 1105, remove explod]
type = removeexplod
trigger1 = time = 0
id = 1101

[state 1105, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1105, move]
type = posadd
trigger1 = time = 0
x = 120

[State 651, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 180
guardflag = 
hitflag = FD
nochainid = 1400
priority = 4
pausetime = 12,12
sparkno = 1
sparkxy = -10,-40
hitsound   = S5000, 2
guardsound = S120,0
animtype = Med
p2stateno = 660
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,0

[state 1105, anim]
type = changeanim
trigger1 = time = 0
value = 1105

[State 1105, quakes]
type = envshake
trigger1 = time = 0
time = 30
ampl = -15
freq = 200
phase = 100

[State 1105, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[state 1105, ground impact front fx]
type = explod
trigger1 = time = 0
anim = 2000
sprpriority = 3
postype = p1
pos = 0,0
scale = 3,2
ownpal = 1

[state 1105, ground impact back fx]
type = explod
trigger1 = time = 0
anim = 2001
sprpriority = -4
postype = p1
pos = 0,0
scale = 3,2
ownpal = 1


[state 1105, pos]
type = posset
trigger1 = time = 0
y = 0

[state 1105, vel]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1105, vel]
type = velset
trigger1 = time = 9
y = -15

[state 1105, gravity]
type = gravity
trigger1 = time > 10
 
[state 1105, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1106

;--------------------------------------------------------------------------
;Scissor Bomb Landing (without grab)
[statedef 1106]
type = C
movetype = I
physics = C
ctrl = 0
sprpriority = 2

[state 1105, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1106, anim]
type = changeanim
trigger1 = time = 0
value = 1106

[State 1105, quakes]
type = envshake
trigger1 = time = 0
time = 25
ampl = -15
freq = 200
phase = 100

[State 1105, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[state 1106, pos]
type = posset
trigger1 = time = 0
y = 0

[state 1106, vel]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1106, fart option]
type = changestate
triggerall = animtime = 0
triggerall = p2movetype = H
triggerall = power > 250
trigger1 = command = "holdstart"
trigger2 = palno = 8
trigger2 = ailevel
value = 1191

[state 1106, end]
type = changestate
triggerall = animtime = 0
trigger1 = command != "holdstart" 
trigger2 = p2movetype != H
value = 1130
;--------------------------------------------------------------------------
;Victim rode
[statedef 1107]
type = A
movetype = H
physics = N

[state 655, anim]
type = changeanim2
trigger1 = time = 0
value = 1107

[State 655, 2]
type = selfState
trigger1 = !gethitvar(isbound)
value = 5050

;-----------------------------------------------------------------------------
;Victim crushed
[statedef 1108]
type = L
movetype = H
Physics = N

[state 855, poset]
type = posset
trigger1 = time = 0
y = 0

[state 1108,angledraw]
type = angledraw
trigger1 = 1
value = 0
scale = 1.1,0.6

[state 1108, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1108, nothitby]
type = nothitby
trigger1 = time = 180
value = SCA
time = 4

[State x, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State x, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State x, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[state 855, change anim]
type = changeanim
trigger1 = time = 0
value = 5110

[state 855, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 848, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1108, get up]
type = selfstate
trigger1 = time = 85
value = 5120

;---------------------------------------------------------------------------;---------------------------------------------------------------------------
;Scissor Bomb Hard
[statedef 1110]
type = U
movetype = A
physics = N
Poweradd = 120
ctrl = 0

[state 1100, width]
type = width
trigger1 = 1
edge = 200,0

[state 1110, explod]
type = explod
Trigger1 = time = 0
persistent = 0
anim = 1111
scale = Const(size.xscale),Const(size.yscale)
sprpriority = 3
bindtime = -1
id = 1111
ignorehitpause = 0
removetime = -2

[state 1110, nothitby]
type = nothitby
trigger1 = animelemtime(4) >= 0
value = ,AP

[State 1110, 1]
type = HitDef
Trigger1 = time = 0
persistent = 0
attr = S, ST          
hitflag = MAF
damage = 0
id = 1110
hitonce = 1
guardflag = MA          
priority = 4, hit   
sparkno = -1         
p1sprpriority = -2     
p1facing = 1
p2facing = 1 
p2stateno = 1107
guard.hittime = 24
guard.slidetime = 24
guard.velocity = -32
p2sprpriority = 1 
guard.dist = 480

[state 1110, hit]
type = changestate
trigger1 = movehit
;trigger1 = enemy,statetype != L
value = 1111
ignorehitpause        
     

[state 1110, hit]
type = targetstate
trigger1 = movehit
;trigger1 = enemy,statetype != L
value = 1107
ignorehitpause           
     
[state 1110, anim]
type = changeanim
trigger1 = time = 0
value = 1110

[state 1110, velset]
type = velmul
trigger1 = time = 0 
trigger1 = statetype = A
x = 0.5
y = 0.1

[state 1110, velset]
type = velmul
trigger1 = time = 0 
trigger1 = statetype = S || statetype = C
x = 0
y = 0

[state 1110, set type]
type = statetypeset
trigger1 = time = 3
statetype = A


[state 1100, launch]
type = velset
trigger1 = animelem = 4
x = ifelse(pos y < -150,22,26)
y = ifelse(pos y < -150, -10.5,-14)

[state 1110, block]
type = velset
trigger1 = moveguarded
x = -4
persistent = 0
ignorehitpause

[state 1110, blocked]
type = velset
trigger1 = moveguarded
y = -16
persistent = 0
ignorehitpause

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1100, gravity]
type = gravity
trigger1 = time > 22

[state 1100, land]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1105
;------------------------------------------------------------------------------
;Hit Contact
[statedef 1111]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = -2

[state 1100, width]
type = width
trigger1 = 1
edge = 200,0

[state 1111,anim]
type = changeanim
trigger1 = time = 0
value = 1102

[state 1101, nothitby]
type = nothitby
trigger1 = 1
value = SCA


[state 1111, velset]
type = veladd
trigger1 = time = 0
trigger1 = vel y > 0
y = -30

[state 1111, velmul]
type = velmul
trigger1 = time = 0
x = 0.5

[state 1111, explod]
type = explod
trigger1 = time = 0
anim = 1103
scale = Const(size.xscale),Const(size.yscale)
sprpriority = 3
bindtime = -1
id = 1103
ignorehitpause = 0
removetime = -2

[State 1111, Bind 1]
type = TargetBind
trigger1 = 1
pos = 100, -150

[state 1111, gravity]
type = gravity
trigger1 = time > 2

[state 1101, gravity]
type = gravity
trigger1 = time > 2

[state 1100, land]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1112



;-------------------------------------------------------------------------------
;Scissor Bomb landing with grab
[statedef 1112]
type = A
movetype = A
physics = C
ctrl = 0
sprpriority = 2

[state 1112, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1112, targetbind]
type = targetstate
trigger1 = time = 0
value = 1108
id = 1110

[state 1102, placement]
type = targetbind
trigger1 = time = 0
pos = -90,0


[state 1112, remove explod]
type = removeexplod
trigger1 = numexplod(1111)
id = 1111

[state 1112, remove explod]
type = removeexplod
trigger1 = numexplod(1103)
id = 1103

[state 1112, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1105, move]
type = posadd
trigger1 = time = 0
x = 120

[state 1102, landing damage]
type = targetlifeadd
trigger1 = time = 0
value = floor(fvar(10)*-180)

[state 1102, target poweradd]
type = targetpoweradd
trigger1 = time = 0
value = 260

[state 1102, poweradd]
type = poweradd
trigger1 = time = 0
value = 180


[state 1112, anim]
type = changeanim
trigger1 = time = 0
value = 1105

[state 1105, ground impact front fx]
type = explod
trigger1 = time = 0
anim = 2000
sprpriority = 3
postype = p1
pos = 0,20
scale = const(size.xscale)*2,Const(size.yscale)*2
ownpal = 1

[state 1105, ground impact back fx]
type = explod
trigger1 = time = 0
anim = 2001
sprpriority = -4
postype = p1
pos = 0,20
scale = const(size.xscale)*2,Const(size.yscale)*2
ownpal = 1

[State 1112, quakes]
type = envshake
trigger1 = time = 0
time = 30
ampl = -20
freq = 100
phase = 100

[State 1112, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[state 1102, playsnd]
type = playsnd
trigger1 = time = 2
value = S1100,1

[state 1112, pos]
type = posset
trigger1 = time = 0
y = -40

[state 1112, vel]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1112, vel]
type = velset
trigger1 = time = 9
y = -15

[state 1112, gravity]
type = gravity
trigger1 = time > 10
 
[state 1112, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1106

;---------------------------------------------------------------------------
;EX Scissor Bomb
[statedef 1120]
type = U
movetype = A
physics = N
Poweradd = 0
ctrl = 0

[state 1100, width]
type = width
trigger1 = 1
edge = 200,0

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 100,50,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1120, poweradd]
type = poweradd
trigger1 = time = 13
value = -500

[state 1120, explod]
type = explod
Trigger1 = time = 0
persistent = 0
anim = 1121
scale = Const(size.xscale),Const(size.yscale)
sprpriority = 3
bindtime = -1
id = 1121
ignorehitpause = 0
removetime = -2

[state 1110, nothitby]
type = nothitby
trigger1 = 1
value = ,NP,SP,HP

[State 1110, 1]
type = HitDef
Trigger1 = time = 0
persistent = 0
attr = S, ST          
hitflag = MAF
getpower = 0
damage = 0
id = 1120
hitonce = 1
guardflag = MA          
priority = 4, hit   
sparkno = -1         
p1sprpriority = -2     
p1facing = 1
p2facing = 1 
p2stateno = 1107
guard.hittime = 30
guard.slidetime = 30
guard.velocity = -60
p2sprpriority = 1
guard.dist = 480

[state 1100, hit]
type = changestate
trigger1 = movehit
;trigger1 = enemy,statetype != L
value = 1121
ignorehitpause        
     

[state 1120, hit]
type = targetstate
trigger1 = movehit
;trigger1 = enemy,statetype != L
value = 1107
ignorehitpause           
     
[state 1120, anim]
type = changeanim
trigger1 = time = 0
value = 1120

[state 1120, velset]
type = velmul
trigger1 = time = 0 
trigger1 = statetype = A
x = 0.5
y = 0.1

[state 1120, velset]
type = velmul
trigger1 = time = 0 
trigger1 = statetype = S || statetype = C
x = 0
y = 0

[state 1120, set type]
type = statetypeset
trigger1 = time = 3
statetype = A


[state 1120, launch]
type = velset
trigger1 = animelem = 4
x = ifelse(pos y < -150, 24, 28)
y = ifelse(pos y < -150, -13.5,-18)

[state 1120, block]
type = velmul
trigger1 = moveguarded
x = -0.2
persistent = 0
ignorehitpause

[state 1110, blocked]
type = velset
trigger1 = moveguarded
y = -16
persistent = 0
ignorehitpause

[state 1100, gravity]
type = gravity
trigger1 = time > 11

[state 1100, land]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1105
;------------------------------------------------------------------------------
;Hit Contact
[statedef 1121]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = -2

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 100,50,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1100, width]
type = width
trigger1 = 1
edge = 200,0

[state 1121,anim]
type = changeanim
trigger1 = time = 0
value = 1102

[state 1101, nothitby]
type = nothitby
trigger1 = 1
value = SCA


[state 1121, velset]
type = veladd
trigger1 = time = 0
y = ifelse(vel y < 0,-25,-50)

[state 1121, velmul]
type = velmul
trigger1 = time = 0
x = 0.25

[state 1121, explod]
type = explod
trigger1 = time = 0
anim = 1103
scale = Const(size.xscale),Const(size.yscale)
sprpriority = 3
bindtime = -1
id = 1103
ignorehitpause = 0
removetime = -2

[State 1121, Bind 1]
type = TargetBind
trigger1 = 1
pos = 100, -150

[state 1121, gravity]
type = gravity
trigger1 = time > 2

[state 1121, gravity]
type = gravity
trigger1 = time > 2

[state 1121, ground bounce counter]
type = varadd
trigger1 = time = 0
var(8) = -1

[state 1120, land]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1122



;-------------------------------------------------------------------------------
;Scissor Bomb landing with grab
[statedef 1122]
type = A
movetype = A
physics = C
ctrl = 0
sprpriority = 2

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 100,50,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1112, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1112, targetbind]
type = targetstate
trigger1 = time = 0
value = ifelse(var(8)>0,1128,1108)
id = 1120


[state 1122, placement]
type = targetbind
trigger1 = time = 0
pos = -90,0


[state 1122, remove explod]
type = removeexplod
trigger1 = numexplod(1121)
id = 1121

[state 1122, remove explod]
type = removeexplod
trigger1 = numexplod(1103)
id = 1103

[state 1122, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1125, move]
type = posadd
trigger1 = time = 0
x = 120

[state 1102, landing damage]
type = targetlifeadd
trigger1 = time = 0
value = floor(fvar(10)*-150)

[state 201, combo damage]
type = varadd
trigger1 = time = 0
v = 18
value = -18
persistent = 0
ignorehitpause = 1

[state 1112, anim]
type = changeanim
trigger1 = time = 0
value = 1105

[state 1105, ground impact front fx]
type = explod
trigger1 = time = 0
anim = 2000
sprpriority = 3
postype = p1
pos = 0,30
scale = const(size.xscale)*2,Const(size.yscale)*2
ownpal = 1

[state 1105, ground impact back fx]
type = explod
trigger1 = time = 0
anim = 2001
sprpriority = -4
postype = p1
pos = 0,30
scale = const(size.xscale)*2,Const(size.yscale)*2
ownpal = 1

[State 1112, quakes]
type = envshake
trigger1 = time = 0
time = 30
ampl = -20
freq = 100
phase = 100

[State 1112, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[state 1102, playsnd]
type = playsnd
trigger1 = time = 2
value = S1100,1

[state 1112, pos]
type = posset
trigger1 = time = 0
y = -40

[state 1112, vel]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1112, vel]
type = velset
trigger1 = time = 9
y = -16
x = 4

[state 1112, gravity]
type = gravity
trigger1 = time > 10

[state 1112, end]
type = changestate
trigger1 = time = 15
value = 50
ctrl = 1
 
[state 1112, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1106

;--------------------------------------------------------------------------
;Victim crushed
[statedef 1128]
type = L
movetype = H
Physics = N

[state 855, poset]
type = posset
trigger1 = time = 0
y = 0

[state 1108,angledraw]
type = angledraw
trigger1 = 1
value = 0
scale = 1.1,0.6

[state 1108, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1108, nothitby]
type = nothitby
trigger1 = time = 180
value = SCA
time = 4

[State x, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State x, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State x, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[state 855, change anim]
type = changeanim
trigger1 = time = 0
value = 5110

[state 855, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 848, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1108, Bounce]
type = changestate
trigger1 = time = 14
value = 685

[state 1108, get up]
type = selfstate
trigger1 = time = 180
value = 5120


;---------------------------------------------------------------------------
;get off
[statedef 1130]
type = C
movetype = I
physics = C
anim = 1130



[state 1130, turn]
type = turn
trigger1 = prevstateno = 1157
trigger1 = time = 0

[state 1130, nothitby]
type =  nothitby
trigger1 = prevstateno = 815
trigger2 = prevstateno = 3089
value = SCA
time = 37

[state 1130, move]
type = posadd
triggerall = roundstate = 2
trigger1 = animelem = 2
trigger2 = animelem = 3
y = -15

[state 1130, sprpriority]
type = sprpriority
trigger1 = animelem = 3
value = -2

[state 1130, pos]
type = posadd
triggerall = roundstate = 2
trigger1 = animelem = 11
y = 30

[state 1130, vel x]
type = velset
trigger1 = animelemtime(11) >= 0
x = 36

[state 1130, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Light Rocket rump
[statedef 1150]
type = S
movetype = A
Physics = N
Ctrl = 0
velset = 0,0
anim = 1150
poweradd = 125
sprpriority = 0

[state 1150, Width]
type = Width
trigger1 = 1
value =  -100,-100
ignorehitpause = 1

[state 1150, jump]
type = velset
trigger1 = animelemtime(6) = 0
x = -12
y = -16

[state 1150, BB damage]
type = varset
trigger1 = time = 0
v = 29
value = 180

[state 1150, exhaust]
type = explod
trigger1 = animelemtime(7) = 0
persistent = 0
anim = 1151
id = 1151
bindtime = -1
removetime = 24
ownpal = 1
trans = add
sprpriority = 2
scale = const(size.xscale),const(size.yscale)

[state 1150, dust]
type = explod
trigger1 = animelem = 7
anim = 2000
sprpriority = 1
bindtime = 0
removetime = 30
postype = p1
scale = const(size.xscale)*2,const(size.yscale)*1.2
pos = -180,40
ownpal = 1

[state 1150, dust]
type = explod
trigger1 = animelem = 7
anim = 2001
sprpriority = -1
bindtime = 0
removetime = 30
postype = p1
scale = const(size.xscale)*2,const(size.yscale)*1.2
pos = -180,40
ownpal = 1

[state 1050, invunerability]
type = nothitBy
trigger1 = animelemtime(8) <= 2
trigger1 = !movehit
value = SCA

[state 1050, invunerability]
type = nothitBy
trigger1 = MOVEHIT
value = SCA
ignorehitpause = 1

[state 1150, statetype set]
type = statetypeset
trigger1 = animelemtime(6) = 0
statetype = A
ignorehitpause = 1

[state 1150, rocket first pulse]
type = velset
trigger1 = animelem = 7
x = 1
y = -8

[state 1150, rocket second pulse]
type = veladd
trigger1 = animelemtime(8) = 0
y = -34
x = 8
persistent = 2

[State 1150, 2]
type = HitDef
trigger1 = vel y < 0
persistent = 0
attr = A, SA
animtype  = heavy
damage    = 120,ifelse(enemy,statetype = A,36,12)
getpower = 75
guardflag = MA
hitflag = MAF
numhits = 2
id = 1150
pausetime = 16,16
priority = 5,hit
sparkno = 3
sparkxy = -20,-260
hitsound   = S410,0
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -14,-40
air.velocity = -14,-30
air.hittime = 60
guard.hittime = 20
guard.slidetime = 20
guard.velocity = -20
airguard.hittime = 28
airguard.velocity = -24,-8
fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 12
envshake.time = 20
guard.dist = 170

[state 1150, playsnd]
type = playsnd
trigger1 = animelem = 8
value = S1020,2

[state 1150, gravity]
type = gravity
trigger1 = time > 14

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1150, Bombing Butt]
type = changestate
trigger1 = time > 22
trigger1 = command = "holddown"
trigger1 = command = "b"
value = 1155

[state 1150, ride off rocket]
type = helper
trigger1 = time > 40
trigger1 = vel y > 0
trigger1 = numhelper(4030) < 1
stateno = 4030
helpertype = normal
name = "Rocket Only"
ownpal = 1
id = 4030
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = 0,0
ignorehitpause = 1

[state 1150, end]
type = changestate
trigger1 = time > 40
trigger1 = vel y > 0
value = 1151

;---------------------------------------------------------------------------
;recovery
[statedef 1151]
type    = A
physics = N
ctrl = 0

[state 1151, velset]
type = velmul
trigger1 = time = 0
x = 0.75

[state 1151, velset]
type = velmul
trigger1 = time = 6
x = 0.25

[state 1151, velset]
type = velmul
trigger1 = time = 12
x = 0

[State 1151, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 44

[state 1151, grav]
type = gravity
trigger1 = 1

[state 1151, landing]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;--------------------------------------------------------------------------
;Bombing Butt
[statedef 1155]
type = A
movetype = A
physics = N
anim = 1155
poweradd = 110
ctrl = 0

[state 1155, playerpush]
type = playerpush
trigger1 = 1
value =  0
ignorehitpause = 1


[State 1020, Blink Yellow]
type = PalFX
triggerall = prevstateno = 1170
trigger1 = time%2
time = 1
add = 100,50,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

; nothing for Heavy

[state 1155, EX]
type = nothitby
trigger1 = prevstateno = 1170
trigger1 = time < 24
value = SCA
persistent = 1

[state 1155, EX]
type = nothitby
trigger1 = prevstateno != 1170
trigger1 = time < 8
value = SCA
persistent = 1

[state 1155, slow]
type = velmul
trigger1 = animelem = 1
x = 0.5
y = 0

[state 1155, rocket down]
type = veladd
trigger1 = animelem = 4
y = 40
x = ifelse(p2dist x < 800, p2dist x*0.055, 44)
persistent = 0

[state 1155, accelerate]
type = veladd
trigger1 = animelem = 4
y = 1.4
persistent = 1

[state 1155, playsnd]
type = playsnd
trigger1 = animelem = 4
value = S1020,2

[state 1155, gravity]
type = gravity
trigger1 = time > 15

[state 1150, exhaust]
type = explod
trigger1 = time = 0
persistent = 0
anim = 1156
id = 1156
bindtime = -1
removetime = -1
ownpal = 1
trans = add
sprpriority = 2
scale = const(size.xscale),const(size.yscale)

[State 1155, 2]
type = HitDef
trigger1 = animelem = 4
persistent = 0
attr = A, SA
animtype  = heavy
damage    = ifelse(numtarget(1150),30,var(29)),floor(var(29)*0.3)
getpower = 140
guardflag = HA
hitflag = MAFD
pausetime = 16,16
priority = 5,hit
sparkno = 3
id = 1155
nochainid = 1400
sparkxy = -40,-180
hitsound   = S410,0
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -4,20
air.velocity = -14,20
air.hittime = 60
guard.hittime = 40
guard.slidetime = 40
guard.velocity = -60
airguard.hittime = 45
airguard.velocity = -20,-6
fall = 1
fall.recover = 0
fall.recovertime = 60
envshake.freq = 60
envshake.ampl = 8
envshake.time = 12
guard.dist = 360

;Ride down mechanic
[state 1155, Ride down]
type = targetbind
trigger1 = movehit
trigger1 = enemy,statetype = A
pos = 48, -98

[state 1155, state of ride down]
type = targetstate
trigger1 = movehit
trigger1 = enemy,statetype = A
value = 655


[state 1155, targetstate]
type = targetstate
trigger1 = movehit
trigger1 = enemy,statetype !=A
value = 660

[state 1150, ride off rocket]
type = helper
trigger1 = pos y > -vel y
trigger1 = vel y > 0
stateno = 4035
helpertype = normal
name = "Rocket Crash"
id = 4035
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = -60,0
ignorehitpause = 1
ownpal = 1
persistent = 0

[state 1155, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1156

;--------------------------------------------------------------------------
;Landing 1st
[statedef 1156]
type = A
movetype = A
physics = C
ctrl = 0
sprpriority = 2
movehitpersist = 1


[state 1105, playerpush]
type = playerpush
trigger1 = 1
value = 0

[State 651, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 180
guardflag = 
hitflag = FD
priority = 4
id = 1155
nochainid = 1400
pausetime = 12,12
sparkno = 1
sparkxy = -10,-40
hitsound   = S5000, 2
guardsound = S120,0
animtype = Med
p2stateno = 660
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,0

[state 1105, anim]
type = changeanim
trigger1 = time = 0
value = 1157

[State 1105, quakes]
type = envshake
trigger1 = time = 0
time = 30
ampl = -18
freq = 60
phase = 60

[State 1105, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[state 641, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 5,2
ownpal = 1

[state 1105, ground impact front fx]
type = explod
trigger1 = time = 0
anim = 2000
sprpriority = 3
postype = p1
pos = 0,0
scale = const(size.xscale)*2,const(size.yscale)*3
ownpal = 1

[state 1105, ground impact back fx]
type = explod
trigger1 = time = 0
anim = 2001
sprpriority = -4
postype = p1
pos = 0,0
scale = const(size.xscale)*2,const(size.yscale)*3
ownpal = 1


[state 1105, pos]
type = posset
trigger1 = time = 0
y = 0

[state 1105, vel]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1105, vel]
type = velset
trigger1 = time = 9
y = -16

[state 1105, gravity]
type = gravity
trigger1 = time > 10
 
[state 1105, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1157

;--------------------------------------------------------------------------
;Landing 2nd
[statedef 1157]
type = C
movetype = I
physics = C
ctrl = 0
sprpriority = 2
movehitpersist = 1

[state 1105, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1106, anim]
type = changeanim
trigger1 = time = 0
value = 1158

[State 1105, quakes]
type = envshake
trigger1 = time = 0
time = 25
ampl = -14
freq = 200
phase = 100

[State 1105, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[state 1106, pos]
type = posset
trigger1 = time = 0
y = 0

[state 1106, vel]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1106, fart Option]
type = changestate
triggerall = animtime = 0
triggerall = numtarget(1155)
triggerall = target(1155),stateno = [660,669]
triggerall = power > 250
triggerall = movehit
trigger1 = command = "holdstart"
trigger2 = palno = 8
trigger2 = ailevel
value = 1190

[state 1106, end]
type = changestate
triggerall = animtime = 0
trigger1 = command != "holdstart"
trigger2 = p2movetype != H
value = 1130



 

;--------------------------------------------------------------------------
;Hard Rocket rump
[statedef 1160]
type = S
movetype = A
Physics = N
Ctrl = 0
velset = 0,0
poweradd = 125
anim = 1160

[state 1150, Width]
type = Width
trigger1 = 1
value =  -100,-100
ignorehitpause = 1

[state 1160, invunerability]
type = nothitBy
trigger1 = animelemtime(8) <= 2
trigger1 = !movehit
value = A

[state 1050, invunerability]
type = nothitBy
trigger1 = MOVEHIT
value = SCA
ignorehitpause = 1

[state 1160, jump]
type = velset
trigger1 = animelemtime(6) = 0
x = -13
y = -16

[state 1160, exhaust]
type = explod
trigger1 = animelemtime(7) = 0
persistent = 0
anim = 1151
bindtime = -1
ownpal = 1
trans = add
removetime = 30
sprpriority = 4
scale = const(size.xscale),const(size.yscale)

[state 1150, dust]
type = explod
trigger1 = animelem = 7
anim = 2000
sprpriority = 1
bindtime = 0
removetime = 30
postype = p1
scale = const(size.xscale)*2.25,const(size.yscale)*1.4
pos = -180,40
ownpal = 1

[state 1150, BB damage]
type = varset
trigger1 = time = 0
v = 29
value = 180

[state 1150, dust]
type = explod
trigger1 = animelem = 7
anim = 2001
sprpriority = -1
bindtime = 0
removetime = 30
postype = p1
scale = const(size.xscale)*2.25,const(size.yscale)*1.4
pos = -180,40
ownpal = 1

[state 1160, statetype set]
type = statetypeset
trigger1 = animelemtime(6) = 0
statetype = A
ignorehitpause = 1



[state 1160, rocket first pulse]
type = velset
trigger1 = animelemtime(7) = 0
x = 2
y = -10

[state 1160, rocket second pulse]
type = veladd
trigger1 = animelemtime(8) = 0
y = -46
x = 12
persistent = 2

[State 1160, 2]
type = HitDef
trigger1 = vel y < 0
persistent = 0
attr = A, SA
animtype  = up
damage    = 150,ifelse(enemy,statetype = A,45,15)
getpower = 35
guardflag = MA
hitflag = MAF
id = 1150
pausetime = 16,16
priority = 5,hit
sparkno = 3
sparkxy = -20,-260
hitsound   = S410,0
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -20,-50
air.velocity = -20,-42
air.hittime = 60
guard.hittime = 24
guard.slidetime = 24
guard.velocity = -20
airguard.hittime = 28
airguard.velocity = -24,-8
fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 12
envshake.time = 20
guard.dist = 170

[state 1160, playsnd]
type = playsnd
trigger1 = animelem = 8
value = S1020,2

[state 1160, gravity]
type = gravity
trigger1 = time > 14

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1150, Bombing Butt]
type = changestate
trigger1 = time > 22
trigger1 = command = "holddown"
trigger1 = command = "b"
value = 1155

[state 1160, ride off rocket]
type = helper
trigger1 = time > 40
trigger1 = vel y > 0
trigger1 = numhelper(4030) < 1
stateno = 4030
helpertype = normal
name = "Rocket Only"
id = 4030
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = 0,0
ownpal = 1
ignorehitpause = 1

[state 1160, end]
type = changestate
trigger1 = time > 40
trigger1 = vel y > 0
value = 1151

;--------------------------------------------------------------------------
;EX Rocket rump
[statedef 1170]
type = S
movetype = A
Physics = N
Ctrl = 0
poweradd = -500
velset = 0,0
anim = 1170
sprpriority = 0

[state 1150, Width]
type = Width
trigger1 = 1
value =  -100,-100
ignorehitpause = 1

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 100,50,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1170, jump]
type = velset
trigger1 = time = 6
x = 9
y = -15

[state 1150, BB damage]
type = varset
trigger1 = time = 0
v = 29
value = 180

[state 1170, exhaust]
type = explod
trigger1 = animelem = 7
persistent = 0
anim = 1151
bindtime = -1
ownpal = 1
trans = add
sprpriority = 2
scale = const(size.xscale),const(size.yscale)

[state 1170, dust]
type = explod
trigger1 = animelem = 7
anim = 2000
sprpriority = 1
bindtime = 0
removetime = 30
postype = p1
scale = const(size.xscale)*2,const(size.yscale)*1.2
pos = -180,40
ownpal = 1

[state 1170, dust]
type = explod
trigger1 = animelem = 7
anim = 2001
sprpriority = -1
bindtime = 0
removetime = 30
postype = p1
scale = const(size.xscale)*2,const(size.yscale)*1.2
pos = -180,40
ownpal = 1


[state 1170, invunerability]
type = nothitBy
trigger1 = 1
value = SCA

[state 1170, statetype set]
type = statetypeset
trigger1 = animelemtime(6) = 0
statetype = A
ignorehitpause = 1

[state 1170, rocket first pulse]
type = velset
trigger1 = animelem = 7
x = 3
y = -8

[state 1170, rocket second pulse]
type = veladd
trigger1 = animelem = 8
y = -48
x = 18
persistent = 2

[State 1070, 2]
type = HitDef
trigger1 = vel y < 0
persistent = 0
attr = A, SA
animtype  = heavy
damage    = 140,ifelse(enemy,statetype = A,42,14)
getpower = 0
guardflag = MA
hitflag = MAFD
id = 1150
pausetime = 16,16
priority = 5,hit
sparkno = 3
sparkxy = -20,-260
hitsound   = S410,0
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -14,-40;-70
air.velocity = -14,-30;-65
air.hittime = 60
guard.hittime = 20
guard.slidetime = 20
guard.velocity = -20
airguard.hittime = 24
airguard.velocity = -24,-8
fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 12
envshake.time = 20
guard.dist = 170

[state 1170, playsnd]
type = playsnd
trigger1 = animelem = 8
value = S1020,5

[state 1170, gravity]
type = gravity
trigger1 = time > 14

[state 1170, combo damage]
type = varadd
trigger1 = time = 0
v = 18
value = 12

[state 1150, Bombing Butt]
type = changestate
trigger1 = time > 12
trigger1 = command = "holddown"
trigger1 = command = "b"
value = 1155

[state 1170, ride off rocket]
type = helper
trigger1 = time > 40
trigger1 = vel y > 0
stateno = 4030
helpertype = normal
name = "Rocket Only"
id = 4030
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = 0,0
ownpal = 1
ignorehitpause = 1

[state 1150, end]
type = changestate
trigger1 = time > 40
trigger1 = vel y > 0
value = 1151


;===========================================================================
;Gassing Option Taunt, energy steal and mild damage all in one
;===========================================================================
;Fart Option Rocket Rump
[statedef 1190]
type = C
movetype = A
physics = C
velset = 0,0
anim = 1190
sprpriority = 3

[state 1190, targetstate]
type = targetstate
trigger1 = time = 0
value = 663

[state 1190, damage]
type = targetlifeadd
trigger1 = animelemtime(2) >= 0 && animelemtime(27) < 0
value = -2
persistent = 2

[state 1190, Poweradd]
type = targetpoweradd
trigger1 = animelemtime(2) >= 0 && animelemtime(27) < 0
value = 2
persistent = 1

[state 1190, powerloss]
type = poweradd
trigger1 = animelemtime(2) = 0
value = -250

;state 1190, Poweradd] ;nope
;type = poweradd
;triggerall = !numtarget(1170)
;trigger1 = animelemtime(2) >= 0 && animelemtime(27) < 0
;value = 1
;persistent = 1

[state 1190, fart cloud]
type = explod
trigger1 = animelem = 2
anim = 1195
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = 166, -82
sprpriority = 1

[state 1190, fart cloud]
type = explod
trigger1 = animelemtime(2) >= 0 && animelemtime(24) < 0
anim = 1196
scale = const(size.xscale)*1.5,const(size.yscale)*1.5
postype = p1
pos = 166, -82
accel = 0,-0.2
vel = random%20,-(random%16)-4
sprpriority = 1
persistent = 4

[state 1190, fart sound]
type = playsnd
trigger1 = animelemtime(2) = 0
value = S1130,random%5

[state 1190, turn]
type = turn
trigger1 = animtime = 0

[state 1190, end]
type = changestate
trigger1 = animtime = 0
value = 1130

;-------------------------------------------------------------------------
;Fart Option Scissor Bomb
[statedef 1191]
type = C
movetype = A
physics = C
velset = 0,0
anim = 1191

[state 1190, targetstate]
type = targetstate
trigger1 = time = 0
value = 663

[state 1190, damage]
type = targetlifeadd
trigger1 = animelemtime(2) >= 0 && animelemtime(22) < 0
value = -2
persistent = 2

[state 1190, Poweradd]
type = targetpoweradd
trigger1 = animelemtime(2) >= 0 && animelemtime(22) < 0
value = 1
persistent = 1

[state 1190, Poweradd]
type = poweradd
trigger1 = animelemtime(2) = 0 
value = -250
persistent = 1

[state 1190, fart cloud]
type = explod
trigger1 = animelem = 2
anim = 1195
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = -162, -22
sprpriority = 1

[state 1190, fart cloud]
type = explod
trigger1 = animelemtime(2) >= 0 && animelemtime(18) < 0
anim = 1196
scale = const(size.xscale)*1.5,const(size.yscale)*1.5
postype = p1
pos = -162, -22
accel = 0,-0.2
vel = -random%20,-(random%16)-2
sprpriority = 1
persistent = 4

[state 1190, fart sound]
type = playsnd
trigger1 = animelemtime(2) = 0
value = S1130,random%5


[state 1190, end]
type = changestate
trigger1 = animtime = 0
value = 1130

;---------------------------------------------------------------------------
;Grenade Launcher Light
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
velset = 0,0
ctrl = 0
sprpriority = 2



[state 1200, var set]
type = varset
trigger1 = animelem = 7
v = 32
value = ceil((p2dist x -230) / 58)
persistent = 0 



[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(28) > 0
value = 1200

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(28) <= 0
value = 1203

[state 1000, Shot]
type = playsnd
trigger1 = animelem = 8
trigger1 = var(28) > 1
value = S1200,0
persistent = 0

[state 1200, ammo down]
type = varadd
trigger1 = animelem = 8
var(28) = -1

[State 1200, Gun Butt]
type = HitDef
trigger1 = animelem = 6
persistent = 0
attr = S, SA
animtype  = Medium
damage    = 20
guardflag = MA
getpower = 100
givepower = 125
hitflag = HA
pausetime = 12,12
sparkno = 2
sparkxy = -10,-360
hitsound   = S5000, 1
guardsound = S120,0
ground.type = high
ground.slidetime = 16
ground.hittime  = 14
ground.velocity = -24
air.velocity = -14,-6
guard.velocity = -24              
guard.hittime = 10
guard.slidetime = 10
airguard.velocity = -20,-4
airguard.hittime = 10
guard.dist = 245   

;[State 1020, Fake Projectile for AI] 
;type = projectile
;trigger1 = animelem = 6
;attr = S, SP
;hitflag = MA
;;getpower = 0
;givepower = 0
;projid = 4999
;projanim = 4999
;hitonce = 1
;projhits = 0
;p;rojremovetime = 48
;projscale = Const(size.xscale),Const(size.yscale)
;offset = 200,-325
;velocity = 10,0
;damage    = 0,0
;projpriority  = 1
;guardflag = MA
;pausetime = 1,15
;sparkno = -1
;sparkxy = 0,0
;hitsound   = 5,4
;guardsound = S120,0
;ground.type = high
;ground.slidetime = 0
;ground.velocity = 0,0
;guard.slidetime = 0
;ground.hittime  = 0
;guard.hittime = 0
;guard.velocity = 0
;ground.velocity = 0

[State 1200, 2]
type = Helper
trigger1 = var(28) > 0
trigger1 = animelem = 8
helpertype = normal
name = "Grenade Light"
ID = 4040
stateno = 4040
scale = Const(size.xscale),Const(size.yscale)
pos = 190,-490
postype = p1
ownpal = 1
ignorehitpause = 1

[state 1200, Pump]
type = playsnd
trigger1 = animelem = 10
value = S1200,1
persistent = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Grenade Launcher Heavy
[Statedef 1210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
velset = 0,0
ctrl = 0
sprpriority = 2


[state 1200, var set]
type = varset
trigger1 = animelem = 7
v = 32
value = ceil((p2dist x - 230) / 74)
persistent = 0 

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(28) > 0
value = 1200

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(28) <= 0
value = 1203

[state 1000, Shot]
type = playsnd
trigger1 = animelem = 8
trigger1 = var(28) > 1
value = S1200,0
persistent = 0

[state 1200, ammo down]
type = varadd
trigger1 = animelem = 8
var(28) = -1

[State 1200, Gun Butt]
type = HitDef
trigger1 = animelem = 6
persistent = 0
attr = S, SA
animtype  = Medium
damage    = 20
guardflag = MA
getpower = 100
givepower = 125
hitflag = HA
pausetime = 12,12
sparkno = 2
sparkxy = -10,-360
hitsound   = S5000, 1
guardsound = S120,0
ground.type = high
ground.slidetime = 16
ground.hittime  = 14
ground.velocity = -24
air.velocity = -14,-6
guard.velocity = -24              
guard.hittime = 10
guard.slidetime = 10
airguard.velocity = -20,-4
airguard.hittime = 10
guard.dist = 245   

;[State 1020, Fake Projectile for AI] 
;type = projectile
;trigger1 = animelem = 6
;attr = S, SP
;hitflag = MA
;getpower = 0
;givepower = 0
;projid = 4999
;projanim = 4999
;hitonce = 1
;projhits = 0
;projremovetime = 24
;projscale = Const(size.xscale),Const(size.yscale)
;offset = 200,-325
;velocity = 10,0
;damage    = 0,0
;projpriority  = 1
;guardflag = MA
;pausetime = 1,15
;sparkno = -1
;sparkxy = 0,0
;hitsound   = 5,4
;guardsound = S120,0
;ground.type = high
;ground.slidetime = 0
;ground.velocity = 0,0
;guard.slidetime = 0
;ground.hittime  = 0
;guard.hittime = 0
;guard.velocity = 0
;ground.velocity = 0

[State 1200, 2]
type = Helper
trigger1 = var(28) > 0
trigger1 = animelem = 8
helpertype = normal
name = "Grenade Hard"
ID = 4040
stateno = 4050
scale = Const(size.xscale),Const(size.yscale)
pos = 190,-490
postype = p1
ownpal = 1
ignorehitpause = 1

[state 1200, Pump]
type = playsnd
trigger1 = animelem = 10
value = S1200,1
persistent = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Grenade Launcher EX
[Statedef 1220]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
sprpriority = 2

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 100,50,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1000, grenade range set]
type = varset
trigger1 = p2bodydist x > 1700
var(32) = 26

[state 1000, grenade range set]
type = varset
trigger1 = p2bodydist x <= 1700 && p2bodydist x > 1400
var(32) = 22


[state 1000, grenade range set]
type = varset
trigger1 = p2bodydist x <= 1400 && p2bodydist x > 1200
var(32) = 19


[state 1000, grenade range set]
type = varset
trigger1 = p2bodydist x <= 1200 && p2bodydist x > 1000
var(32) = 16

[state 1000, grenade range set]
type = varset
trigger1 = p2bodydist x <= 1000 && p2bodydist x > 800
var(32) = 13


[state 1000, grenade range set]
type = varset
trigger1 = p2bodydist x <= 800 && p2bodydist x > 600
var(32) = 9

[state 1000, grenade range set]
type = varset
trigger1 = p2bodydist x <= 600 && p2bodydist x > 400
var(32) = 6

[state 1000, grenade range set]
type = varset
trigger1 = p2bodydist x <= 400 && p2bodydist x > 200
var(32) = 3

[state 1000, grenade range set]
type = varset
trigger1 = p2bodydist x <= 200 && p2bodydist x > 0
var(32) = 1


[state 1000, grenade range set]
type = varset
trigger1 = p2bodydist x <= 0 && p2bodydist x > -200
var(32) = -3

[state 1000, grenade range set]
type = varset
trigger1 = p2bodydist x <= -200 
var(32) = -6

[state 1220, meter]
type = poweradd
trigger1 = animelemtime(8) = 0
trigger1 = var(28) > 1
value = -125

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(28) > 0
value = 1220

[state 1000, anim]
type = changeanim
trigger1 = time = 0
trigger1 = var(28) <= 0
value = 1203

[state 1000, Shot]
type = playsnd
trigger1 = animelemtime(8) = 0
trigger2 = animelemtime(10) = 0
triggerall = var(28) > 1
value = S1200,0
persistent = 1


[state 1200, ammo down]
type = varadd
trigger1 = animelemtime(10) = 0
var(28) = -1

[State 1200, Gun Butt]
type = HitDef
trigger1 = animelem = 6
persistent = 0
attr = S, SA
animtype  = Medium
damage    = 20
guardflag = MA
getpower = 100
givepower = 125
hitflag = HA
pausetime = 12,12
sparkno = 2
sparkxy = -10,-360
hitsound   = S5000, 1
guardsound = S120,0
ground.type = high
ground.slidetime = 16
ground.hittime  = 14
ground.velocity = -24
air.velocity = -14,-6
guard.velocity = -24              
guard.hittime = 10
guard.slidetime = 10
airguard.velocity = -20,-4
airguard.hittime = 10
guard.dist = 245   

[State 1200, 2]
type = Helper
trigger1 = var(28) > 0
trigger1 = animelem = 8
helpertype = normal
name = "Grenade EX1"
ID = 4041
stateno = 4041
scale = Const(size.xscale),Const(size.yscale)
pos = 190,-490
postype = p1
ownpal = 1
ignorehitpause = 1

[State 1200, 2]
type = Helper
trigger1 = var(28) > 0
trigger1 = animelem = 10
helpertype = normal
name = "Grenade EX2"
ID = 4041
stateno = 4041
scale = Const(size.xscale),Const(size.yscale)
pos = 190,-490
postype = p1
ownpal = 1
ignorehitpause = 1

[state 1200, Pump]
type = playsnd
trigger1 = animelem = 12
value = S1200,1
persistent = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;===========================================================================
;  Hip Check (Push Block)
;===========================================================================

[Statedef 1400]
type = S
movetype = A
physics = S
velset = 0,0
anim = 1400
facep2 = 1

[state 1400, awareness pause]
type = pause
trigger1 = time = 0
time = 8
endcmdbuftime = 8

[state 1400, dim]
type = bgpalfx
trigger1 = time = 0
time = 8
mul = 200,200,200

[state 1400, poweradd]
type = poweradd
trigger1 = time = 0
value = -500

[State 330, Spark]
type = Explod
trigger1 = AnimElem = 4
id = 1410
anim = 1410
postype = p1
pos = 300,-260
sprpriority = 3
bindtime = 1
scale = 4,4
ownpal = 1

[State 211, 2]
type = HitDef
trigger1 = 1
persistent = 0
attr = S, NA
animtype  = Heavy
damage    = 25
Hitflag = MA
guardflag = 
pausetime = 0,0
sparkno = -1
ground.Velocity = -5
air.Velocity = -5,0
fall = 1
fall.recover = 0
kill = 0
guard.kill = 0

[state 1400, moveforward]
type = velset
trigger1 = animelem = 2
x = 10

[state 1400, snd]
type = playsnd
trigger1 = time = 4
value = s1400,0

[State 1400, Push]
type = Helper
trigger1 = Time = 12
trigger2 = time = 14
ignorehitpause = 1
ID = 1401
name = "Shove"
pos = 0,0
postype = p1
stateno = 1401
keyctrl = 0
ownpal = 1
helpertype = normal

[state 340, HB]
Type = hitby
trigger1 = 1
value = SCA,AT


[state 1400, previous state]
type = varset
trigger1 = time = 0
v = 5
value = prevstateno


[State 1400, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------
; Pushing part
[Statedef 1401]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 1401

[State 1440, Push]
type = posset
trigger1 = time = 0
y = 0

[State 1440, Push]
type = PlayerPush
trigger1 = 1
value = 1

[State 1440, NHB]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State 1440, Vel]
type = VelSet
trigger1 = Time >= 0
x = 50

[State 345, End]
type = DestroySelf
trigger1 = Time = 15



;===============================================================================
; 	SUPER	
;===============================================================================
;Base Damage 510 -> 536 -> 482 -> 540 without bump
;8/8/20 Nerfed into a level 1, new level 3 will be given later on.  damage 260 without bump 280 with bump
[statedef 3000]
type = S
movetype = A
physics = S
anim = 3000
ctrl = 0
velset = 0,0

[state 3000, anim]
type = changeanim
trigger1 = time = 0
value = 3000

[state 3000, no bg]
type = assertspecial
trigger1 = animelemtime(3)=[0,60]
flag = nobg
ignorehitpause = 1


[state 3000, nothitby]
type = nothitby
trigger1 = 1
value = ,AP

[state 3000, velset]
type = velset
trigger1 = animelem = 4
trigger1 = command != "holdfwd" && command != "holdback"
x = 60 ;40

[state 3000, velset]
type = velset
trigger1 = animelem = 4
trigger1 = command = "holdback"
x = 30 ;20

[state 3000, velset]
type = velset
trigger1 = animelem = 4
trigger1 = command = "holdfwd"
x = 90 ; 60

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelemtime(3)= 0
sound = S3000, 0
poweradd = -1000
pos = -10,-200
time = 60
movetime = 60


[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(3)=[0,14]
anim = 3100
postype = back
sprpriority = -3
supermovetime = 60
removetime = 1
pausemovetime = 60
scale = (3-(time*0.15))*(1),(3-(time*0.15))*(1)
pos = 0,60-time*5
ownpal = 1

[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(3)=15
anim = 3100
postype = back
vel = -0.1,0
sprpriority = -3
supermovetime = 60
removetime = 45
pausemovetime = 60
pos = 0,0
scale = 1,1
ownpal = 1

[state 3000, sndfx]
type = playsnd
trigger1 = animelem = 9
value = S3000,1

[state 3000, width]
type = width
trigger1 = animelem = 9
player = 310,50

[State 3000, 2]
type = HitDef
trigger1 = 1
persistent = 0
attr = S, HA
animtype  = Heavy
damage    = 20,6
Hitflag = MAF
guardflag = MA
getpower = 0
givepower = 50
ground.type = Low
pausetime = 14,14
sparkno = 3
sparkxy = 40,-200
hitsound = S410,0
ground.slidetime = 45
ground.Velocity = -30
air.Velocity = -20,-24
ground.hittime = 45
air.hittime = 45
fall = 0
forcestand = 1
forcenofall = 1
fall.recover = 0
guard.velocity = -32            
guard.hittime = 30
guard.slidetime = 0
airguard.velocity = -22,-10
airguard.hittime = 30
guard.dist = 720

[state x, combo damage score]
type = varset
trigger1 = time = 0
trigger1 = var(18) < 80
v = 18
value = 80
persistent = 0
ignorehitpause = 1



[state 3000, end]
type = changestate 
trigger1 = animtime = 0
value = 3001

;-------------------------------------------------------------------------------
;Super Shooting Portion
[statedef 3001]
type = S
movetype = A
physics = S
anim = 3001
ctrl = 0
velset = 0,0


[state 3001, nothitby]
type = nothitby
trigger1 = time <= 60
value = ,AP

[state 3000, width]
type = width
trigger1 = 1
player = 220,80

[state 3000, sndfx]
type = playsnd
trigger1 = time = 0
trigger2 = time = 120
value = S3000,2
channel = 1


[state 3001, muzzle flare]
type = explod
trigger1 = time = 0
anim = 3003
id = 3003
ownpal = 1
postype = p1
pos = 0,0
sprpriority = 5
scale = Const(size.xscale),Const(size.yscale)
bindtime = -1
removetime = -1
trans = add
sprpriority = 4

[state 3000, movement]
type = velset
trigger1 = command = "holdfwd"
x = 0.5

[state 3000, movement]
type = velset
trigger1 = command = "holdback"
x = -0.75

[State 3000, spread1, straight] 
type = projectile
trigger1 = animelem = 2
trigger1 = time < 117
persistent = 1
attr = S, HP
hitflag = MAF
projid = 3000
projanim = 1002
projhits = 1
projremovetime = 60
projscale = Const(size.xscale),Const(size.yscale)
offset = 300,-245
pausetime = 0,0
velocity = 75,(random%5)
getpower = 0
givepower = 15
animtype  = Hard
damage    = ifelse(enemy,name = "SOR2",16,8),3
projpriority  = 1
guardflag = MA
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = low
ground.slidetime = 16
guard.slidetime = 16
ground.hittime  = 16
ground.velocity = -2,0
air.velocity =  -2,-4
fall = 0
forcestand = 1
air.fall = 0
fall.recover = 0
guard.velocity = -3           
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -3,-2
guard.dist = 1280

[State 3000, spread1, straight] 
type = projectile
trigger1 = animelem = 4
trigger1 = time < 117
persistent = 1
attr = S, HP
hitflag = MAF
projid = 3001
projanim = 1002
projhits = 1
projremovetime = 60
projscale = Const(size.xscale),Const(size.yscale)
offset = 300,-200
velocity = 75,(random%5)*-1
animtype  = Hard
damage    = ifelse(enemy,name = "SOR2",16,8),3
projpriority  = 1
guardflag = MA
pausetime = 0,0
getpower = 0
givepower = 15
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = low
ground.slidetime = 16
guard.slidetime = 16
ground.hittime  = 16
ground.velocity = -6,0
air.velocity =  -2,-4
fall = 0
air.fall = 0
fall.recover = 0
guard.velocity = -3           
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -3,-2
guard.dist = 1280

[State 3000, Last Shot] 
type = projectile
trigger1 = time = 118
persistent = 0
pausetime = 12,12
attr = S, HP
hitflag = MAF
projid = 1002
projanim = 1002
projhits = 1
projremovetime = 60
projscale = Const(size.xscale),Const(size.yscale)
offset = 300,-245
velocity = 75,0
animtype  = back
damage    = 28,3
getpower = 0
givepower = 15
projpriority  = 1
guardflag = MA
pausetime = 8,8
guard.pausetime = 5,8
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = low
ground.slidetime = 20
ground.hittime  = 30
ground.velocity = -30,-20
air.velocity =  -30,-20
fall = 1
air.fall = 1
fall.recover = 0
guard.velocity = -20           
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -10,-2
guard.dist = 1280

[state 3001, end]
type = changestate
trigger1 = time = 118
value = 3002


;-------------------------------------------------------------------------------
;Super Shooting Portion End
[statedef 3002]
type = S
movetype = I
physics = S
anim = 3002
ctrl = 0
velset = 0,0

[state 3001, snd]
type = playsnd
trigger1 = time = 0
value = S3000,3
channel = 2


[state 3001, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1




;===============================================================================
;2nd Super - Anti Air Missiles
;Damage: 260 pure missles, 240 with hit up. - Intended increased chip damage to airborne opponents safe on air block, not safe on ground block
;===============================================================================
;Missile Turret
[statedef 3040]
type = C
movetype = A
physics = S
anim = 3040
ctrl = 0
sprpriority = 1

[state 3040, air immunity]
type = nothitby
trigger1 = animelemtime(6) < 24
value = A

[state 3040, combo damage scaling]
type = varset
trigger1 = var(18) < 80
var(18) = 80
ignorehitpause

[State 3040, Super Pause]
type = SuperPause
trigger1 = animelemtime(1)= 0
sound = S3000, 0
poweradd = -1000
pos = -10,-200
time = 60
movetime = 60

[state 3000, no bg]
type = assertspecial
trigger1 = animelemtime(1)=[0,60]
flag = nobg
ignorehitpause = 1

[state 3040, the missile launcher]
type = explod
trigger1 = time = 0
anim = 3041
postype = p1
pos = 0,0
scale = const(size.xscale),const(size.yscale)
removeongethit = 1
sprpriority = -1


[state 3040, Super Portrait]
type = explod
trigger1 = animelemtime(1)=[0,14]
anim = 3100
postype = back
sprpriority = -3
supermovetime = 60
removetime = 1
pausemovetime = 60
scale = (3-(time*0.15))*(1),(3-(time*0.15))*(1)
pos = 0,60-time*5
ownpal = 1

[state 3040, Super Portrait]
type = explod
trigger1 = animelemtime(1)=15
anim = 3100
postype = back
vel = -0.1,0
sprpriority = -3
supermovetime = 60
removetime = 45
pausemovetime = 60
pos = 0,0
scale = 1,1
ownpal = 1

[State 3040, Gun Butt]
type = HitDef
trigger1 = animelemtime(2) >= 0 && animelemtime(4) < 0
persistent = 0
attr = S, HA
animtype  = Up
damage    = 16,5
guardflag = MA
hitflag = MAF
pausetime = 8,12
sparkno = 3
priority = 1,miss
sparkxy = -10,-360
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 24
ground.hittime  = 30
air.hittime = 80
ground.velocity = -12,-32
air.velocity = -16,-32
guard.velocity = -12              
guard.hittime = 10
guard.slidetime = 10
airguard.velocity = -16,-32
airguard.hittime = 24
guard.dist = 480
fall.recover = 0



[State 3040, Missiles top]
type = Helper
triggerall = numhelper(4070)<16
trigger1 = animelemtime(6) = 8
trigger2 = animelemtime(6) = 24
trigger3 = animelemtime(6) = 40
trigger4 = animelemtime(6) = 64
helpertype = normal
name = "Missile"
ID = 4070
stateno = 4070
pos = 135,-520
postype = p1
ownpal = 1
ignorehitpause = 1

[State 3040, Missiles Bottom]
type = Helper
triggerall = numhelper(4070)<16
trigger1 = animelemtime(6) = 16
trigger2 = animelemtime(6) = 32
trigger3 = animelemtime(6) = 48
trigger4 = animelemtime(6) = 72
helpertype = normal
name = "Missile"
ID = 4070
stateno = 4070
pos = 135,-520
postype = p1
ownpal = 1
ignorehitpause = 1

[state 3040, gas effect top]
type = explod
trigger1 = animelemtime(6) = 8
trigger2 = animelemtime(6) = 24
trigger3 = animelemtime(6) = 40
trigger4 = animelemtime(6) = 64
anim = 3043
id = 3043
postype = p1
pos = 240,-540
ownpal = 1
sprpriority = 3
ignorehitpause = 1
removeongethit = 1
bindtime = -1
removetime = -2


[state 3040, gas effect bottom]
type = explod
trigger1 = animelemtime(6) = 16
trigger2 = animelemtime(6) = 32
trigger3 = animelemtime(6) = 48
trigger4 = animelemtime(6) = 72
anim = 3043
id = 3043
postype = p1
pos = 240,-490
ownpal = 1
sprpriority = 3
ignorehitpause = 1
removeongethit = 1
bindtime = -1
removetime = -2

[state 3040, snd]
type = playsnd
trigger1 = animelemtime(6) = 8
trigger2 = animelemtime(6) = 16
trigger3 = animelemtime(6) = 24
trigger4 = animelemtime(6) = 32
trigger5 = animelemtime(6) = 40
trigger6 = animelemtime(6) = 48
trigger7 = animelemtime(6) = 64
trigger8 = animelemtime(6) = 72
value = S1020,0

[state 3040, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;I frame timer
[statedef 3079]
type = A
movetype = I
physics = N
anim = 9999
ctrl = 0

[state 3079, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3079, destroyself]
type = destroyself
trigger1 = time >= 92


;-------------------------------------------------------------------------------
;Super Rocket Rump
[statedef 3080]
type = S
movetype = A
physics = N
anim = 3080
velset = 0,0
ctrl = 0

[state 3040, nothitby]
type = helper
trigger1 = time = 0
trigger1 = !numhelper(3079)
stateno = 3079
postype = p1
pos = 0,0
id = 3079

[State 3040, Super Pause]
type = SuperPause
trigger1 = animelemtime(5)= 0
sound = S3000, 0
poweradd = -3000
pos = -10,-200
time = 60
movetime = 60

[state 3000, statetypeset]
type = statetypeset
trigger1 = animelemtime(6) = 0
statetype = A



[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(5)=[0,14]
anim = 3100
postype = back
sprpriority = -3
supermovetime = 60
removetime = 1
pausemovetime = 60
scale = (3-(time*0.15))*(1),(3-(time*0.15))*(1)
pos = 0,60-time*5
ownpal = 1





[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(5)=15
anim = 3100
postype = back
vel = -0.1,0
sprpriority = -3
supermovetime = 60
removetime = 45
pausemovetime = 60
pos = 0,0
scale = 1,1
ownpal = 1

[state 3000, sndfx]
type = playsnd
trigger1 = animelem = 7
value = S1150,0
persistent = 0

[state 3080, Rocket Fire]
type = explod
trigger1 = animelemtime(7) = 0
trigger1 = !numexplod(3080)
anim = 4380
id = 3080
postype = p1
pos = 0,0
scale = const(size.xscale),const(size.yscale)
trans = add
sprpriority = 3
bindtime = -1



[state 3000, no bg]
type = assertspecial
trigger1 = animelemtime(5)=[0,60]
flag = nobg
ignorehitpause = 1

[state 3080, nothitby]
type = nothitby
trigger1 = 1
VALUE = SCA

[state 3080, comboscaling]
type = varset
trigger1 = var(18) < 90
var(18) = 90
ignorehitpause = 1

[state 3080, end early]
type = changestate
trigger1 = animtime = 0
value = 3081

;---------------------------------------------------------
;Glide along ground
[statedef 3081]
type = A
movetype = A
physics = N

[state 3081, explod]
type = explod
trigger1 = !numexplod(3081)
anim = 4381
id = 3081
postype = p1
pos = 0,0
removeongethit = 1
removetime = -1
scale = const(size.xscale),const(size.yscale)
trans = add
sprpriority = 3
bindtime = -1

[state 3081, nothitby]
type = nothitby
trigger1 = numhelper(3079)
value = SCA

[state 3081, nothitby]
type = nothitby
trigger1 = !numhelper(3079)
value = ,AP

[state 3080, velset]
type = velset
trigger1 = animelemtime(8) = 0
x = 60

[state 3080, changeanim]
type = changeanim
trigger1 = anim != 3081
value = 3081

[State 3080, 2]
type = HitDef
persistent = 8
trigger1 = 1
attr = A, HA
animtype  = heavy
damage    = 35,6
getpower = 0
givepower = 40
guardflag = MA
hitflag = MAF
numhits = 1
id = 3080
pausetime = 6,6
guard.pausetime = 4,4
priority = 5,hit
sparkno = 3
sparkxy = 20,-390
hitsound   = S410,0
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -4,0
air.velocity = -4,0
air.hittime = 60
p2facing = 1
guard.hittime = 20
guard.slidetime = 20
guard.velocity = -20
airguard.hittime = 28
airguard.velocity = -24,-8
guard.dist = 480
kill = 0
guard.kill = 1

[state 3080, Movehit counter]
type = varadd
trigger1 = movecontact
var(36) = -1
ignorehitpause = 1
persistent = 0

[state 3082, Hit count]
type = changestate
trigger1 = movecontact
trigger1 = var(36) > 0
value = 3081

[state 3082, Hit count]
type = changestate
trigger1 = movecontact
trigger1 = var(36) <= 0
value = ifelse(movehit, 3085, 3082)

[state 3082, changestate]
type = changestate
trigger1 = time > 90
value = 3082

[state 3082, changestate]
type = changestate
trigger1 = !movecontact
trigger1 = frontedgebodydist = [0,80]
value = 3078

;--------------------------------------------------------------------------
;Crashed into wall Miss
[statedef 3078]
type = A
movetype = I
physics = N
anim = 3079
ctrl = 0

[state 3082, removeexplod]
type = removeexplod
trigger1 = time = 0
id = 3081


[state 3079, screenbound]
type = screenbound
trigger1 = time < 9
value = 0
movecamera = 0,0

[state 3079, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 3079, envshake]
type = envshake
trigger1 = time = 0
ampl = -18
time = 24

[state 3079, playsnd]
type = playsnd
trigger1 = time = 0
value = 1150,0

[state 3079, playsnd]
type = playsnd
trigger1 = time = 0
value = 1100,0

[state 3079, playsnd]
type = playsnd
trigger1 = time = 0
value = 1100,0

[state 3079, posset]
type = posset
trigger1 = time = 0
x = (facing*(gamewidth/2))

[state 3079, velset]
type = velset
trigger1 = animelemtime(4) = 0
x = -24
y = -12

[state 3079, gravity]
type = gravity
trigger1 = animelemtime(4) > 0

[state 3079, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 3083

;--------------------------------------------------------
;Slow Descent
[statedef 3082]
type = A
movetype = A
physics = N
anim = 3082

[state 3082, slow descent]
type = veladd
trigger1 = 1
y = 1.22

[state 3082, x velocity]
type = velmul
trigger1 = time = 0
x = -0.1

[state 3082, removeexplod]
type = removeexplod
trigger1 = time = 0
id = 3081

[state 3082, ride off rocket]
type = helper
trigger1 = pos y > -vel y
trigger1 = vel y > 20
stateno = 4035
helpertype = normal
name = "Rocket Crash"
id = 4035
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = -60,0
ignorehitpause = 1
ownpal = 1
persistent = 0


[state 3082, end]
type = changestate
trigger1 = vel y > 20
trigger1 = pos y > -vel y
value = 3083


;--------------------------------------------------------------------------
;Landing 1st
[statedef 3083]
type = C
movetype = A
physics = C
ctrl = 0
sprpriority = 2

[state 3083, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1150, ride off rocket]
type = helper
trigger1 = time = 0
stateno = 4035
helpertype = normal
name = "Rocket Crash"
id = 4035
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = -60,0
ignorehitpause = 1
ownpal = 1
persistent = 0

[State 3083, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 180
guardflag = 
hitflag = FD
priority = 4
id = 1155
nochainid = 1400
pausetime = 12,12
sparkno = 1
sparkxy = -10,-40
hitsound   = S5000, 2
guardsound = S120,0
animtype = Med
p2stateno = 660
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,0

[state 3083, anim]
type = changeanim
trigger1 = time = 0
value = 1157

[State 3083, quakes]
type = envshake
trigger1 = time = 0
time = 30
ampl = -18
freq = 60
phase = 60

[State 3083, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[state 3082, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 5,2
ownpal = 1

[state 3083, ground impact front fx]
type = explod
trigger1 = time = 0
anim = 2000
sprpriority = 3
postype = p1
pos = 0,0
scale = const(size.xscale)*2,const(size.yscale)*3
ownpal = 1

[state 3083, ground impact back fx]
type = explod
trigger1 = time = 0
anim = 2001
sprpriority = -4
postype = p1
pos = 0,0
scale = const(size.xscale)*2,const(size.yscale)*3
ownpal = 1


[state 3083, pos]
type = posset
trigger1 = time = 0
y = 0

[state 3083, vel]
type = velset
trigger1 = time = 0
y = 0

[state 3083, skid]
type = velmul
trigger1 = time = 0
x = 0.8



[state 3083, vel]
type = velset
trigger1 = time = 9
y = -12

[state 3082, statetypeset]
type = statetypeset
trigger1 = time = 9
physics = N
statetype = A

[state 3082, gravity]
type = gravity
trigger1 = time > 10
 
[state 1105, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 3084

;--------------------------------------------------------------------------
;Landing 2nd
[statedef 3084]
type = C
movetype = I
physics = C
ctrl = 0
sprpriority = 2

[state 3084, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 3084, anim]
type = changeanim
trigger1 = time = 0
value = 3084

[State 3084, quakes]
type = envshake
trigger1 = time = 0
time = 25
ampl = -14
freq = 200
phase = 100

[State 3084, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[state 3084, pos]
type = posset
trigger1 = time = 0
y = 0

[state 3084, vel]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 3084, end]
type = changestate
trigger1 = animtime = 0
value = 1130

;------------------------------------------------------------------------------
;Carry to wall
[statedef 3085]
type = A
movetype = A
physics = N

[state 3085, targetbind]
type = targetbind
trigger1 = 1
pos = 300,-330
id = 3080

[state 3085, playerpush]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[state 3085, targetstate]
type = targetstate
trigger1 = time = 0
value = 3090
id = 3080

[state 3085, screenbound]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[state 3085, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3085, end]
type = changestate
trigger1 = frontedgebodydist < 40
trigger2 = time > 360
value = 3086


;-------------------------------------------------------------------------------
;Crashed 
[statedef 3086]
type = S
movetype = A
physics = N
anim = 3085

[state 3082, removeexplod]
type = removeexplod
trigger1 = time = 0
id = 3081

[state 3082, hitadd]
type = hitadd
trigger1 = time = 0
value = 1

[state 3086, screenbound]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[state 3086, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 3085, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3086, envshake]
type = envshake
trigger1 = time = 0
ampl = -18
time = 24

[state 3086, playsnd]
type = playsnd
trigger1 = time = 0
value = 1150,0

[state 3086, playsnd]
type = playsnd
trigger1 = time = 0
value = 1100,0

[state 3086, playsnd]
type = playsnd
trigger1 = time = 0
value = 1100,0

[state 3042, posset]
type = posset
trigger1 = time = 0
x = (facing*(gamewidth/2))

[state 3042, Flatten enemy]
type = targetstate
trigger1 = time = 0
value = 3091

[state 3086, targetdamage]
type = targetlifeadd
trigger1 = time = 0
value = ceil(fvar(10) * -140)
kill = 0

[state 3086, targetpoweradd]
type = targetpoweradd
trigger1 = time = 0
value = 200


[state 3086, end so far?]
type = changestate
trigger1 = animtime = 0
value = 3087
;-------------------------------------------------------------------------------
;Explosion Launched
[statedef 3087]
type = A
movetype = A
physics = N

[state 3087, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3087, targetstate]
type = targetstate
trigger1 = time = 4
value = 3092
id = 3080

[state 3087, fire snd]
type = playsnd
trigger1 = time = 4
value = 3088,0
channel = 2

[state 3087, explod]
type = explod
trigger1 = time = 4
anim = 4400
id = 4400
postype = p2
pos = 0,0
scale = const(size.xscale),const(size.yscale)
removetime = 107
bindtime = -1
sprpriority = 4

[state 3085, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3087, explod]
type = explod
trigger1 = time = 8
anim = 4400
id = 4400
postype = p2
pos = -100,-50
scale = const(size.xscale),const(size.yscale)
removetime = 103
bindtime = -1
sprpriority = 4

[state 3087, explod]
type = explod
trigger1 = time = 4
anim = 4400
id = 4400
postype = p2
pos = 100,-50
scale = const(size.xscale),const(size.yscale)
removetime = 107
bindtime = -1
sprpriority = 4

[state 3087, explod]
type = explod
trigger1 = time = 8
anim = 4400
id = 4400
postype = p2
pos = 0,-100
scale = const(size.xscale),const(size.yscale)
removetime = 103
bindtime = -1
sprpriority = 4

[state 3087, targetlifeadd]
type = targetlifeadd
trigger1 = time = 4
value = floor(fvar(10) * -135)
kill = 0

[state 3087, targetpoweradd]
type = targetpoweradd
trigger1 = time = 4
value = 200


[state 3087, Explosion]
type = helper
trigger1 = time = 0
trigger1 = !numhelper(3087)
stateno = 3100
id = 3087
postype = p1
pos = -150,-100

[state 3087, Launch]
type = changeanim
trigger1 = time = 4
value = 5030

[state 3087, no clip]
type = playerpush
trigger1 = 1
value = 0

[state 3087, screenbound]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[state 3087, launch]
type = velset
trigger1 = time = 16
y = -60
x = floor (-facing*(pos x / 102))

[state 3087, Animation]
type = changeanim
trigger1 = vel y > 0
trigger1 = anim != 3086
value = 3086

[state 3087, sprpriority]
type = sprpriority
trigger1 = vel y > 0
value = -2

[state 3087, Ass]
type = explod
trigger1 = anim = 3086
trigger1 = !numexplod(3086)
anim = 3286
id = 3086
postype = p1
pos = 0,0
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
removetime = -1
removeongethit = 1

[state 3087, explod Fire ass]
type = explod
trigger1 = anim = 3086
trigger1 = !numexplod(4390)
anim = 4390
id = 4390
postype = p1
pos = 0,0
sprpriority = 4
scale = const(size.xscale),const(size.yscale)
removetime = -1
bindtime = -1
removeongethit = 1

[State 3087, on fire]
type = palfx
trigger1 = time = 0
time = -1
add = 220,110,0


[state 3087, gravity]
type = veladd
trigger1 = pos y < 0
y = 1.22

[state 3087, spike down]
type = veladd
trigger1 = vel y > 0
y = 0.44

[state 3087, land]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 3088


;-------------------------------------------------------------------------------
;Bounce
[statedef 3088]
type = C
movetype = A
physics = N
anim = 3087
sprpriority = -2

[state 3087, fire snd]
type = stopsnd
trigger1 = time = 0
channel = 2

[state 3088, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 3085, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State 3087, on fire]
type = palfx
trigger1 = time = 0
time = 0


[state 3007, slow-mo]
type = pause
trigger1 = time > 1  
time = 3
persistent = 1

[state 3087, Ass]
type = explod
trigger1 = time = 0
trigger1 = !numexplod(3087)
anim = 3287
id = 3087
postype = p1
pos = 0,0
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
removetime = -1
removeongethit = 1

[state 3088, removeexplod]
type = removeexplod
trigger1 = numexplod(3086)
id = 3086

[state 3087, explod Fire ass]
type = explod
trigger1 = time = 0
trigger1 = !numexplod(4391)
anim = 4391
id = 4391
postype = p1
pos = 0,30
sprpriority = 4
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[state 3088, removeexplod]
type = removeexplod
trigger1 = time = 0
trigger1 = numexplod(4390)
id = 4390
ignorehitpause = 1

[state 3088, screenbound]
type = screenbound
trigger1 = 1
value = 0
movecamera = 1,0

[state 3088, Envshake]
type = envshake
trigger1 = time = 0
ampl = -24
time = 30

[state 3088, snd]
type = playsnd
trigger1 = time = 0
value = 1100,0

[state 3088, snd]
type = playsnd
trigger1 = time = 0
value = 1100,0

[state 3088, snd]
type = playsnd
trigger1 = time = 1
value = 1100,1


[state 3088, posset]
type = posset
trigger1 = time = 0
y = 0

[state 3007, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 4,2
sprpriority = -3

[state 3088, targetstate]
type = targetstate
trigger1 = time = 0
id = 3080
value = 662

[state 3088, targetlifeadd]
type = targetlifeadd
trigger1 = time = 0
value = ceil(fvar(10)* -105)

[state 3088, targetpoweradd]
type = targetpoweradd
trigger1 = time = 0
value = 400


[state 3088, targetstate]
type = velset
trigger1 = animelemtime(3) = 0
y = -16

[state 3088, gravity]
type = gravity
trigger1 = pos y < 0

[state 3088, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 3089

;-------------------------------------------------------------------------------
;Bounce 2
[statedef 3089]
type = C
movetype = A
physics = N
anim = 3088

[state 3085, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3088, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 3087, Ass]
type = explod
trigger1 = time = 0
trigger1 = !numexplod(3088)
anim = 3288
id = 3088
postype = p1
pos = 0,0
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
removeongethit = 1

[state 3089, removeexplod]
type = removeexplod
trigger1 = numexplod(3087)
id = 3087

[state 3088, envshake]
type = envshake
trigger1 = time = 0
ampl = -12
time = 15

[state 3088, playsnd]
type = playsnd
trigger1 = time = 0
value = 1100,0
volumescale = 70

[state 3088, posset]
type = posset
trigger1 = time = 0
y = 0


[state 3088, changestate]
type = changestate
trigger1 = animtime = 0
value = 1130
;-------------------------------------------------------------------------------
;Butt carried
[statedef 3090]
type = A
movetype = H
physics = N
ctrl = 0

[state 3090, changeanim2]
type = changeanim2
trigger1 = time = 0
value = 3090

[state 3090, screenbound]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

;------------------------------------------------------------------------------------------
;Crushed on wall 
[statedef 3091]
type = A
movetype = H
physics = N
velset = 0,0

[state 3091, posset]
type = posset
trigger1 = time = 0
x = (-facing*(gamewidth/2))


[state 3091, changeanim2]
type = changeanim2
trigger1 = time = 0
value = 3091

[state 3091, screenbound]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[state 3091, angledraw]
type = angledraw
trigger1 = 1
value = -90
scale = 1.6,0.2

[state 3091, fall off]
type = velset
trigger1 = time = 45 ;Time
y = -4
x = -2

[state 3091, nothitby]
type = nothitby
trigger1 = vel y > 0
trigger1 = pos y > -vel y 
value = SCA
time = 12

[state 3091, gravity]
type = gravity
trigger1 = time > 45

[state 3091, selfstate]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 5100

;-----------------------------------------------------------------------------------
;Launch to center
[statedef 3092]
type = A
movetype = H
physics = N
sprpriority = -1

[state 3092, changeanim]
type = changeanim
trigger1 = time = 0
value = 5061

[state 3092, palFX]
type = palFX
trigger1 = time = 0
time = -1
add = 220, 100, 0

[state 3092, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3092, Launch]
type = velset
trigger1 = time = 12
x = floor(-facing*(pos x /61))
y = -32

[state 3092, gravity]
type = veladd
trigger1 = time > 12
y = 1.22

[state 3092, screenbound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,1

[state 3092, land]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 3093

;-------------------------------------------------------------------------------
[statedef 3093]
type = L
movetype = H
physics = C
sprpriority = -1

[state 3093, velset]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 3092, palFX]
type = palFX
trigger1 = time = 0
time = 30
mul = 32, 32, 32

[state 3093, on ground]
type = posset
trigger1 = time = 0
y = 0

[state 3093, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3093, chagne]
type = changeanim
trigger1 = time = 0
value = 5101

[state 3093, changeanim again]
type = changeanim
trigger1 = anim = 5101
trigger1 = animtime = 0
value = 5110

[state 3093, getup]
type = selfstate
trigger1 = time = 90
value = 5120


;-------------------------------------------------------------------------------
;Rocket Explodes
;---------------------------------------------------------------------------
;Rocket Ride Explosion
[statedef 3100]
type = A
movetype = I
physics = N
velset = 0,0
anim = 1022
sprpriority = 3

[state 3100, no shadow]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1


[state 3100, explod]
type = explod
trigger1 = time = 3
anim = 1222
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = 300, -200

[state 3100, explod]
type = explod
trigger1 = time = 8
anim = 1222
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = 60, -40

[state 3100, explod]
type = explod
trigger1 = time = 10
anim = 1222
sprpriority = 3
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = -240, -120


[state 3100, flash]
type = bgpalfx
trigger1 = time = 0
time = 8
add = 120,120,120

[State 3100, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 3100, snd]
type = playsnd
trigger1 = time = 0
trigger2 = time = 3
trigger3 = time = 8
trigger4 = time = 10
value = S3087,random%3

[state 3100, attackdist]
type = attackdist
trigger1 = 1
value = 500;const(size.proj.attack.dist)


[state 3100, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3100, hitoveride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP, AA
stateno = 3100
time = -1
ignorehitpause = 1

[state 3100, no push]
type = playerpush
trigger1 = 1
value = 0


[state 3100, screenshake]
type = envshake
trigger1 = time = 0
time = 25
ampl = -18
freq = 100

[State 630, 2]
type = HitDef
trigger1 = animelem = 1
attr = S, SP
damage = 120,36
guardflag = MA
hitflag = MAF
priority = 3
getpower = 0
givepower = 140
pausetime = 2,2
nochainid = 3080
sparkno = -1
sparkxy = -5,-35
hitsound   = -1
guardsound = S120,0
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.type = High
ground.slidetime = 60
ground.hittime  = 60
ground.velocity = -60,ifelse(parent,var(7) > 1,-40,-10)
air.velocity = -60,ifelse(parent,var(7) > 1,-40,-10)
air.hittime = 16
fall = 1
fall.recover = 0
guard.velocity = -60            
guard.hittime = 20
guard.slidetime = 30
airguard.velocity = -12,-20
airguard.hittime = 30
guard.dist = 720

[State 630, 2]
type = HitDef
trigger1 = animelem = 2
trigger1 = !movecontact 
attr = S, SP
damage = 90,27
guardflag = MA
priority = 3
getpower = 0
givepower = 100
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = S5000, 0
nochainid = 3080
guardsound = S120,0
ground.type = High
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -40,ifelse(parent,var(7) > 1,-30,-6)
air.velocity = -40,ifelse(parent,var(7) > 1,-30,-6)
air.hittime = 16
fall = 1
guard.velocity = -38            
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -9,-16
airguard.hittime = 30
guard.dist = 720 

[State 630, 3]
type = HitDef
trigger1 = animelem = 3
trigger1 = !movecontact 
attr = S, SP
damage = 60,18
guardflag = MA
priority = 3
getpower = 0
givepower = 95
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
nochainid = 3080
hitsound   = S5000, 0
guardsound = S120,0
ground.type = High
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -20,ifelse(parent,var(7) > 1,-20,-2)
air.velocity = -20,ifelse(parent,var(7) > 1,-20,-2)
air.hittime = 16
fall = 1
guard.velocity = -22            
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -6,-12
airguard.hittime = 30
guard.dist = 720




[state 3100]
type = destroyself
trigger1 = animtime = 0
trigger2 = movereversed


;-------------------------------------------------------------------------------
;Revolver Bullet
[statedef 4010]
type = A
movetype = A
physics = N
anim = 1012
ctrl = 0

[State 4010, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1


[state 4010, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4010, velset]
type = velset
trigger1 = time = 0
x = 60 ;55

[state 4010, hitoverride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP,AA
stateno = 4011
time = -1
ignorehitpause = 1

[State 4010, 5] 
type = hitdef
trigger1 = enemynear,name != "Sarjiri Sara Dragon"
trigger1 = time = 0
attr = S, SP
animtype  = back
damage    = 80, 16
id = 1010
priority = 4,hit
Hitflag = HAF
guardflag = MA
pausetime = 2,8
givepower = 110
sparkno = -1
sparkxy = 0,0
getpower = 90
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 20
guard.velocity = -26
airguard.velocity = -14,-4
guard.hittime  = 16
guard.slidetime = 16
ground.velocity = -30,-1
air.velocity = -30,-2
envshake.ampl = 8
envshake.freq = 40
envshake.time = 8
fall = 1
fall.recover = 0
fall.recovertime = 30
guard.dist = 1280

[State 4010, 5] 
type = hitdef
trigger1 = enemynear,name = "Sarjiri Sara Dragon"
trigger1 = time = 0
attr = S, SP
animtype  = back
damage    = 80, 16
id = 1010
priority = 4,hit
Hitflag = MAF
guardflag = MA
pausetime = 2,8
givepower = 110
sparkno = -1
sparkxy = 0,0
getpower = 90
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 20
guard.velocity = -26
airguard.velocity = -14,-4
guard.hittime  = 16
guard.slidetime = 16
ground.velocity = -30,-1
air.velocity = -30,-2
envshake.ampl = 8
envshake.freq = 40
envshake.time = 8
fall = 1
fall.recover = 0
fall.recovertime = 30
guard.dist = 1280

[state 4010, guarddist]
type = attackdist
trigger1 = 1
value = 300

[state 4010, end]
type = destroyself
trigger1 = BackEdgeDist < -150
trigger2 = time > 300
trigger3 = movecontact
trigger4 = movereversed

;---------------------------------------------------------------------------

;Additional Revolver Bullet
[statedef 4015]
type = A
movetype = A
physics = N
anim = 1012
ctrl = 0

[State 4015, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1


[state 4015, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4015, velset]
type = velset
trigger1 = time = 0
x = 60;55

[state 4015, hitoverride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP,AA
stateno = 4011
time = -1
ignorehitpause = 1

[State 4015, 5] 
type = hitdef
trigger1 = time = 0
attr = S, SP
animtype  = back
damage    = 40, 4
id = 1010
priority = 4,hit
Hitflag = HAF
guardflag = MAF
pausetime = 2,8
getpower = 90
givepower = 110
sparkno = -1
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 24
guard.velocity = -24
airguard.velocity = -12,-4
guard.hittime  = 16
ground.velocity = -24,-1
air.velocity = -24,-2
envshake.ampl = 8
envshake.freq = 40
envshake.time = 8
fall = 1
fall.recover = 0
fall.recovertime = 30
guard.dist = 1280

[state x, guarddist]
type = attackdist
trigger1 = 1
value = 300

[state 4015, combo inhibitor]
type = parentvaradd
trigger1 = movehit
ignorehitpause = 1
var(18) = -3
persistent = 0


[state 4015, end]
type = destroyself
trigger1 = BackEdgeDist < -150
trigger2 = time > 300
trigger3 = movereversed = 1
trigger4 = moveguarded = 1
trigger5 = movecontact



;---------------------------------------------------------------------------
[statedef 4011]
type = U
movetype = H
physics = U
anim = 9999

[state 4011, end]
type = destroyself
trigger1 = time = 0
trigger2 = time > 0
ignorehitpause

;---------------------------------------------------------------------------
;Rocket 
[statedef 4020]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0, 0
anim = 1021

[State 4020, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4020, attackdist]
type = attackdist
trigger1 = 1
value = 300;const(size.proj.attack.dist)

[state 4020, nothitby]
type = nothitby
trigger1 = 1
value = ,NA, SA, HA, NT, ST,HT

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SP
damage    = 0,0
priority  = 3
animtype  = Heavy
hitflag = MAF
guardflag = MA
getpower = 0
givepower = 5
pausetime = 2,2
sparkno = 0
sparkxy = 0,0
hitsound   = -1
guardsound = S120,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 12
guard.hittime = 16
guard.slidetime = 16
ground.velocity = -12
air.velocity = -12,-3
airguard.velocity = -4,-8
guard.dist = 720

[state 4020, hitoverride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP, AA
stateno = 4025
time = -1
ignorehitpause = 1

[state 4020, accelerate]
type = velset
trigger1 = time = 0
x = 2.5

[state 4020, accelerate]
type = veladd
trigger1 = time%20
x = 1.25

[state 4020, contact]
type = changestate
trigger1 = movecontact 
value = 4025

[state 4020, end]
type = destroyself
trigger1 = BackEdgeDist < -10
trigger2 = time > 180
trigger3 = movereversed


;---------------------------------------------------------------------------
;Rocket Explosion
[statedef 4025]
type = A
movetype = A
physics = N
velset = 0,0
anim = 1022
sprpriority = 3

[state 4025, no shadow]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[state 4025, wall bounce counter]
type = parentvaradd
trigger1 = movehit
var(7) = -1
ignorehitpause = 1
persistent = 0

[state 4025, flash]
type = bgpalfx
trigger1 = time = 0
time = 8
add = 120,120,120

[State 4025, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4020, snd]
type = playsnd
trigger1 = time = 0
value = S1020,1

[state 4020, attackdist]
type = attackdist
trigger1 = 1
value = 500;const(size.proj.attack.dist)


[state 4020, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 4020, hitoveride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP, AA
stateno = 4025
time = -1
ignorehitpause = 1

[state 4025, no push]
type = playerpush
trigger1 = 1
value = 0


[state 4025, screenshake]
type = envshake
trigger1 = time = 0
time = 25
ampl = 15
freq = 100

[state 4025, wall bounce]
type = targetstate
triggerall = parent,var(7) > 0
trigger1 = movehit && hitpausetime = 1
trigger1 = animelemtime(3) < 0
value = 670
ignorehitpause = 1



[state 4047, combo inhibitor]
type = parentvaradd
trigger1 = movehit
ignorehitpause = 1
var(18) = -12
persistent = 0

[State 630, 2]
type = HitDef
trigger1 = animelem = 1
attr = S, SP
damage = 120,36
guardflag = MA
hitflag = MAF
priority = 3
getpower = 0
givepower = 140
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = -1
guardsound = S120,0
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.type = High
ground.slidetime = 60
ground.hittime  = 60
ground.velocity = -60,ifelse(parent,var(7) > 1,-40,-10)
air.velocity = -60,ifelse(parent,var(7) > 1,-40,-10)
air.hittime = 16
fall = 1
fall.recover = 0
guard.velocity = -60            
guard.hittime = 20
guard.slidetime = 30
airguard.velocity = -12,-20
airguard.hittime = 30
guard.dist = 720

[State 630, 2]
type = HitDef
trigger1 = animelem = 2
trigger1 = !movecontact 
attr = S, SP
damage = 90,27
guardflag = MA
priority = 3
getpower = 0
givepower = 100
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = S5000, 0
guardsound = S120,0
ground.type = High
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -40,ifelse(parent,var(7) > 1,-30,-6)
air.velocity = -40,ifelse(parent,var(7) > 1,-30,-6)
air.hittime = 16
fall = 1
guard.velocity = -38            
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -9,-16
airguard.hittime = 30
guard.dist = 720 

[State 630, 3]
type = HitDef
trigger1 = animelem = 3
trigger1 = !movecontact 
attr = S, SP
damage = 60,18
guardflag = MA
priority = 3
getpower = 0
givepower = 95
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = S5000, 0
guardsound = S120,0
ground.type = High
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -20,ifelse(parent,var(7) > 1,-20,-2)
air.velocity = -20,ifelse(parent,var(7) > 1,-20,-2)
air.hittime = 16
fall = 1
guard.velocity = -22            
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -6,-12
airguard.hittime = 30
guard.dist = 720




[state 4025]
type = destroyself
trigger1 = animtime = 0
trigger2 = movereversed

;--------------------------------------------------------------------------
;Empty Rocket going up
[statedef 4030]
type = A
movetype = I
physics = N
anim = 1180

[state 4030, velset]
type = velset
trigger1 = time = 0
x = 14
y = -24

[state 4030, explod]
type = explod
trigger1 = time = 0
bindtime = -1
removetime = 15
pos = 0,0
anim = 1182
trans = add

[state 4030, playsnd]
type = playsnd
trigger1 = time = 0
value = S1150,0
volumescale = 50

[state 4030, destroyself]
type = destroyself
trigger1 = time > 30


;---------------------------------------------------------------------------
;Empty Rocket Crash
[statedef 4035]
type = C
movetype = I
physics = N
anim = 1181
velset = 0,0
sprpriority = 4

[state 4035, posset]
type = posset
trigger1 = time = 0
y = 0

[state 4035, bounce]
type = velset
trigger1 = time = 8
y = -12
x = -6

[state 4035, gravity]
type = gravity
trigger1 = time > 13

[state 4035, snd]
type = playsnd
trigger1 = time = 0
value = S1155,0

[state 4035, end]
type = changestate
trigger1 = vel Y > 0
trigger1 = pos y > -vel y
value = 4036

;---------------------------------------------
[statedef 4036]
type = C
movetype = I
physics = C
anim = 1181

[state 4036, land]
type = posset
trigger1 = time = 0
y = 0

[state 4036, land]
type = velset
trigger1 = time = 0
y = 0

[state 4036, skid]
type = velmul
trigger1 = time = 0
x = 0.25

[state 4036, anim]
type = changeanim
trigger1 = time = 60
value = 1183



[state 4036, end]
type = destroyself
trigger1 = time > 90

;---------------------------------------------------------------------------
; Grenade Launcher light
[statedef 4040]
type = A
movetype = A
physics = N
anim = 1201

[state 4040, momentum]
type = velset
trigger1 = time = 0
x = parent,var(32)
y = -20

[state 4040, angledraw]
type = angleset
trigger1 = animelem = 1
value = -60
persistent = 1

[state 4040, gravity]
type = veladd
trigger1 = 1
y = 0.95

[State 4040, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4040, attackdist]
type = attackdist
trigger1 = 1
value = 300;const(size.proj.attack.dist)

[state 4040, nothitby]
type = nothitby
trigger1 = 1
value = ,NA, SA, HA, NT, ST,HT


[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SP
damage    = 0
priority  = 3
animtype  = Heavy
hitflag = MAF
guardflag = MA
getpower = 100
pausetime = 2,2
sparkno = 0
sparkxy = 0,0
hitsound   = -1
guardsound = S120,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 4
ground.velocity = -12
air.velocity = -12,-3
airguard.velocity = -6,-12
guard.dist = 640

[state 4020, contact]
type = changestate
trigger1 = movecontact 
value = 4045

[state 4020, end]
type = destroyself
trigger1 = BackEdgeDist < -10
trigger2 = time > 180
trigger3 = movereversed


[state 4020, bounce]
type = changestate
trigger1 = pos y > 0
value = 4046


[state 4020, hitoverride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP, AA
stateno = 4045
time = -1
ignorehitpause = 1
;--------------------------------------------------------------------------
;EX Grenade
[statedef 4041]
type = A
movetype = A
physics = N
anim = 1201

[state 4041, momentum]
type = velset
trigger1 = time = 0
x = p2dist x * 0.009 ;parent,var(32)
y = -40

[state 4041, aiming]
type = veladd
triggerall = time > 45
trigger1 = p2dist x > 75
x = 0.33
persistent = 1

[state 4041, aiming]
type = veladd
triggerall = time > 45
trigger1 = p2dist x < -75
x = -0.99
persistent = 1

[state 4041, aiming]
type = velmul
triggerall = time > 45
trigger1 = p2dist x >= -75 && p2dist x <= 75
x = 0.25
persistent = 30

[state 4041, angledraw]
type = angleset
trigger1 = animelem = 1
value = -60
persistent = 1

[state 4041, gravity]
type = veladd
trigger1 = 1
y = 0.95

[State 4041, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4041, attackdist]
type = attackdist
trigger1 = 1
value = 300;const(size.proj.attack.dist)

[state 4041, nothitby]
type = nothitby
trigger1 = 1
value = ,NA, SA, HA, NT, ST,HT


[State 4041, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SP
damage    = 0,0
priority  = 3
animtype  = Heavy
hitflag = MAF
guardflag = MA
getpower = 0
pausetime = 2,2
sparkno = 0
sparkxy = 0,0
hitsound   = -1
guardsound = S120,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 4
ground.velocity = -12
air.velocity = -12,-3
airguard.velocity = -6,-12
guard.dist = 45

[state 4041, contact]
type = changestate
trigger1 = movecontact 
value = 4047

[state 4041, end]
type = destroyself
trigger1 = BackEdgeDist < -10
trigger2 = time > 180
trigger3 = movereversed


[state 4041, bounce]
type = changestate
trigger1 = pos y > 0
value = 4047


[state 4041, hitoverride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP, AA
stateno = 4047
time = -1
ignorehitpause = 1

;--------------------------------------------------------------------------
;Grenade Explosion On impact
[statedef 4045]
type = A
movetype = A
physics = N
velset = 0,0
anim = 1222
sprpriority = 3

[state 4040, angledraw]
type = angledraw
trigger1 = 1
scale = const(size.xscale)/2,const(size.yscale)/2
persistent = 1
ignorehitpause

[state 4025, no shadow]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 4040, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4040, attackdist]
type = attackdist
trigger1 = 1
value = const(size.proj.attack.dist)

[state 4040, nothitby]
type = nothitby
trigger1 = 1
value = ,NA, SA, HA, NT, ST,HT

[state 4025, flash]
type = bgpalfx
trigger1 = time = 0
time = 8
add = 120,120,120

[State 4025, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4020, snd]
type = playsnd
trigger1 = time = 0
value = S1020,1

[state 4020, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 4020, hitoveride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP, AA
stateno = 4025
time = -1
ignorehitpause = 1

[state 4025, no push]
type = playerpush
trigger1 = 1
value = 0


[state 4025, screenshake]
type = envshake
trigger1 = time = 0
time = 25
ampl = 15
freq = 100

[State 630, 2]
type = HitDef
trigger1 = animelem = 1
attr = S, SP
damage = 100,ifelse(enemy,statetype = A,30,10)
guardflag = MA
hitflag = MAFD
priority = 3
getpower = 0
givepower = 150
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = -1
guardsound = S120,0
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.type = High
ground.slidetime = 60
ground.hittime  = 60
ground.velocity = -12,-32
air.velocity = -24,60
air.hittime = 16
fall = 1
air.fall = 1
fall.recover = 0
fall.recovertime = 24
down.bounce = 1
down.velocity = -4,-30
guard.velocity = -24            
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -16, 1
airguard.hittime = 30
guard.dist = 640 

[State 630, 2]
type = HitDef
trigger1 = animelem = 2
trigger1 = !movecontact 
attr = S, SP
damage = 60,ifelse(enemy,statetype = A,18,6)
guardflag = MA
priority = 3
getpower = 0
givepower = 75
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = S5000, 0
guardsound = S120,0
ground.type = High
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -18,-18
air.velocity = -20,40
air.hittime = 16
down.bounce = 1
down.velocity = 0,-16
fall = 1
air.fall = 1
fall.recover = 0
fall.recovertime = 16
guard.velocity = -18           
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = -12,1
airguard.hittime = 30
guard.dist = 640

[State 630, 3]
type = HitDef
trigger1 = animelem = 3
trigger1 = !movecontact 
attr = S, SP
damage = 40,ifelse(enemy,statetype = A,12,4)
guardflag = MA
priority = 3
getpower = 0
givepower = 50
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = S5000, 0
guardsound = S120,0
ground.type = High
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -12,0
air.velocity = -16,30
air.hittime = 16
down.bounce = 1
down.velocity = 0,-8
fall = 1
air.fall = 1
fall.recover = 0
fall.recovertime = 12
guard.velocity = -12           
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -9,1
airguard.hittime = 30
guard.dist = 640 

[state 4045, combo inhibitor]
type = parentvaradd
trigger1 = movehit
ignorehitpause = 1
var(18) = -9
persistent = 0


[state 4025]
type = destroyself
trigger1 = animtime = 0
trigger2 = movereversed

;---------------------------------------------------------------------------
;Grenade Explosion Ground Hit
[statedef 4046]
type = A
movetype = A
physics = N
velset = 0,0
anim = 1222
sprpriority = 3

[state 4040, angledraw]
type = angledraw
trigger1 = 1
scale = const(size.xscale)/2,const(size.yscale)/2
persistent = 1
ignorehitpause

[state 4025, flash]
type = bgpalfx
trigger1 = time = 0
time = 8
add = 120,120,120

[State 4025, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4020, snd]
type = playsnd
trigger1 = time = 0
value = S1020,1

[state 4020, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 4020, hitoveride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP, AA
stateno = 4025
time = -1
ignorehitpause = 1

[state 4025, no push]
type = playerpush
trigger1 = 1
value = 0


[state 4025, screenshake]
type = envshake
trigger1 = time = 0
time = 25
ampl = 15
freq = 100

[State 630, 2]
type = HitDef
trigger1 = animelem = 1
attr = S, SP
damage = 110,22
guardflag = MA
hitflag = MAFD
priority = 3
getpower = 0
givepower = 250
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = -1
guardsound = S120,0
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.type = High
ground.slidetime = 60
ground.hittime  = 60
ground.velocity = -12,-30
air.velocity = -12,-30
air.hittime = 16
fall = 1
fall.recover = 1
fall.recovertime = 40
guard.velocity = -24            
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -16,-4
airguard.hittime = 30
guard.dist = 640

[State 630, 2]
type = HitDef
trigger1 = animelem = 2
trigger1 = !movecontact 
attr = S, SP
damage = 70,14
guardflag = MA
hitflag = MAF
priority = 3
getpower = 0
givepower = 125
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = S5000, 0
guardsound = S120,0
ground.type = High
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -8,-24
air.velocity = -8,-24
air.hittime = 16
fall = 1
fall.recover = 1
fall.recovertime = 16
guard.velocity = -18           
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = -8,-4
airguard.hittime = 30
guard.dist = 640 

[State 630, 3]
type = HitDef
trigger1 = animelem = 3
trigger1 = !movecontact 
attr = S, SP
damage = 40,8
guardflag = MA
hitflag = MAF
priority = 3
getpower = 0
givepower = 100
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = S5000, 0
guardsound = S120,0
ground.type = High
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,0
air.velocity = -6,-16
air.hittime = 16
fall = 1
fall.recover = 1
fall.recovertime = 12
guard.velocity = -12           
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -4,-4
airguard.hittime = 30
guard.dist = 640 

[state 4045, combo inhibitor]
type = parentvaradd
trigger1 = movehit
ignorehitpause = 1
var(18) = -3
persistent = 0



[state 4025]
type = destroyself
trigger1 = animtime = 0
trigger2 = movereversed


;=============================================================================
;Grenade Explosion On impact
[statedef 4047]
type = A
movetype = A
physics = N
velset = 0,0
anim = 1222
sprpriority = 3

[state 4047, angledraw]
type = angledraw
trigger1 = 1
scale = const(size.xscale)/2,const(size.yscale)/2
persistent = 1
ignorehitpause

[state 4025, no shadow]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 4047, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4047, attackdist]
type = attackdist
trigger1 = 1
value = const(size.proj.attack.dist)

[state 4047, nothitby]
type = nothitby
trigger1 = 1
value = ,NA, SA, HA, NT, ST,HT

[state 4047, flash]
type = bgpalfx
trigger1 = time = 0
time = 8
add = 120,120,120

[State 4047, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4020, snd]
type = playsnd
trigger1 = time = 0
value = S1020,1

[state 4020, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 4020, hitoveride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP, AA
stateno = 4025
time = -1
ignorehitpause = 1

[state 4025, no push]
type = playerpush
trigger1 = 1
value = 0


[state 4025, screenshake]
type = envshake
trigger1 = time = 0
time = 25
ampl = 15
freq = 100

[State 630, 2]
type = HitDef
trigger1 = animelem = 1
attr = S, SP
damage = 75,ifelse(enemy,statetype = A,23,15)
guardflag = MA
hitflag = MAFD
priority = 3
getpower = 0
givepower = 150
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = -1
guardsound = S120,0
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.type = High
ground.slidetime = 60
ground.hittime  = 60
ground.velocity = -12,-10
air.velocity = -2,60
air.hittime = 16
fall = 1
fall.recover = 0
fall.recovertime = 24
down.bounce = 1
down.velocity = -4,-30
guard.velocity = -24            
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -16, 1
airguard.hittime = 30
guard.dist = 640 

[State 630, 2]
type = HitDef
trigger1 = animelem = 2
trigger1 = !movecontact 
attr = S, SP
damage = 50,ifelse(enemy,statetype = A,15,10)
guardflag = MA
priority = 3
getpower = 0
givepower = 75
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = S5000, 0
guardsound = S120,0
ground.type = High
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -18,-10
air.velocity = -4,40
air.hittime = 16
down.bounce = 1
down.velocity = 0,-16
fall = 1
fall.recover = 0
fall.recovertime = 16
guard.velocity = -18           
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = -12,1
airguard.hittime = 30
guard.dist = 640 

[State 630, 3]
type = HitDef
trigger1 = animelem = 3
trigger1 = !movecontact 
attr = S, SP
damage = 25,ifelse(enemy,statetype = A,8,3)
guardflag = MA
priority = 3
getpower = 0
givepower = 50
pausetime = 2,2
sparkno = -1
sparkxy = -5,-35
hitsound   = S5000, 0
guardsound = S120,0
ground.type = High
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -12,-10
air.velocity = -4,30
air.hittime = 16
down.bounce = 1
down.velocity = 0,-8
fall = 1
fall.recover = 0
fall.recovertime = 12
guard.velocity = -12           
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -9,1
airguard.hittime = 30
guard.dist = 640 

;[state 4047, ground bounce]
;type = targetstate
;trigger1 = movehit
;trigger1 = enemy,statetype = A
;trigger1 = parent,var(8) > 0
;trigger1 = hitpausetime = 1
;ignorehitpause =1 
;value = 680

[state 4047, Ground bounce counter]
type = parentvaradd
trigger1 = movehit
ignorehitpause = 1
var(8) = -1
persistent = 0

[state 4047, combo inhibitor]
type = parentvaradd
trigger1 = movehit
ignorehitpause = 1
var(18) = -9
persistent = 0

[state 4025]
type = destroyself
trigger1 = animtime = 0
trigger2 = movereversed

;-----------------------------------------------------------------------------
; Grenade Launcher Hard
[statedef 4050]
type = A
movetype = A
physics = N
anim = 1201

[state 4040, momentum]
type = velset
trigger1 = time = 0
x = parent,var(32)
y = -30

[state 4040, angledraw]
type = angleset
trigger1 = animelem = 1
value = -60
persistent = 1

[state 4050, gravity]
type = veladd
trigger1 = 1
y = 0.95


[State 4050, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4050, attackdist]
type = attackdist
trigger1 = 1
value = 300;const(size.proj.attack.dist)

[state 4040, nothitby]
type = nothitby
trigger1 = 1
value = ,NA, SA, HA, NT, ST,HT


[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SP
damage    = 10,5
priority  = 3
animtype  = Heavy
hitflag = MAFD
guardflag = MA
getpower = 0
pausetime = 2,2
sparkno = 0
sparkxy = 0,0
hitsound   = -1
guardsound = S120,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 4
ground.velocity = -12
air.velocity = -12,-3
guard.dist = 640

[state 4020, contact]
type = changestate
trigger1 = movecontact 
value = 4045

[state 4020, end]
type = destroyself
trigger1 = BackEdgeDist < -10
trigger2 = time > 180
trigger3 = movereversed


[state 4020, bounce]
type = changestate
trigger1 = pos y > 0
value = 4046


[state 4020, hitoverride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP, AA
stateno = 4045
time = -1
ignorehitpause = 1

;====================================================================================
; Anti Air Missile
[statedef 4070]
type = A
physics = N
movetype = A
anim = 3042
ctrl = 0
sprpriority = -2

[state 4070, velset]
type = velset
trigger1 = time = 0
x = 30
y = -15

[state 4070, sprpriority]
type = sprpriority
trigger1 = time = 4
value = 1

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = S, HP
damage    = 3,1
priority  = 3
animtype  = Heavy
hitflag = MAFD
guardflag = MA
getpower = 0
pausetime = 2,2
sparkno = 0
sparkxy = 0,0
hitsound   = -1
guardsound = S120,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 24
air.hittime = 24
ground.velocity = -6,0
air.velocity = -6,-9
airguard.velocity = -4,-8
fall.recover = 0
guard.dist = 1280

[state 4020, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 4020, contact]
type = changestate
trigger1 = movecontact 
value = 4071

[state 4020, hitoveride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP, AA
stateno = 4071
time = -1
ignorehitpause = 1


[state 4070, end]
type = DestroySelf
trigger1 = backedgedist < -10
trigger2 = movereversed
trigger3 = time > 180


;====================================================================================
;Missle Explosion
[statedef 4071]
type = A
movetype = A
physics = N
velset = 0,0
anim = 1222
sprpriority = 3

[state 4040, angledraw]
type = angledraw
trigger1 = 1
scale = const(size.xscale)/2,const(size.yscale)/2
persistent = 1
ignorehitpause

[State 4040, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4040, attackdist]
type = attackdist
trigger1 = 1
value = const(size.proj.attack.dist)

[state 4040, nothitby]
type = nothitby
trigger1 = 1
value = ,NA, SA, HA, NT, ST,HT

[state 4025, flash]
type = bgpalfx
trigger1 = time = 0
time = 8
add = 120,120,120

[State 4025, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4020, snd]
type = playsnd
trigger1 = time = 0
value = S1020,1

[state 4020, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 4020, hitoveride]
type = hitoverride
trigger1 = 1
attr =  SCA, AP, AA
stateno = 4025
time = -1
ignorehitpause = 1

[state 4025, no push]
type = playerpush
trigger1 = 1
value = 0

[state 4025, screenshake]
type = envshake
trigger1 = time = 0
time = 25
ampl = 15
freq = 100

[State 630, 2]
type = HitDef
trigger1 = !movecontact
attr = S, HP
persistent = 0
damage = 30,ifelse(enemy,statetype = A,9,3)
guardflag = MA
hitflag = MAF
priority = 3
getpower = 0
givepower = 25
pausetime = 0,12
sparkno = -1
sparkxy = -5,-35
hitsound   = -1
guardsound = S120,0
ground.cornerpush.veloff  = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
ground.type = High
ground.slidetime = 60
ground.hittime  = 60
ground.velocity = -12
air.velocity = -27,-10.5
air.hittime = 16
fall = 1
fall.recover = 0
fall.recovertime = 24
guard.velocity = -24            
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -18, -11
airguard.hittime = 30
guard.dist = 640 

[state 4025]
type = destroyself
trigger1 = animtime = 0
trigger2 = movereversed




;====================================================================================
;Ammo Hud
[statedef 4900]
type = A
physics = N
movetype = I
ctrl = 0
anim = 9999

[state 4900, varset]
type = varset
trigger1 = time = 0
v = 0
value = 0

[state 4900, varset]
type = varadd
triggerall = numpartner
trigger1 = partner,name = "Katrina Crocodile"
trigger2 = partner,name = "Twiggi Bunny"
v = 0
value = 50
persistent = 0

[state 4900, varset]
type = varadd
triggerall = numpartner
trigger1 = partner,name = "Andy Armadillo"
v = 0
value = 110
persistent = 0


[state 4900, Shotgun]
type = explod
trigger1 = 1
anim = 4900
id = 4900
postype = left
facing = ifelse(teamside = 1,1,-1)
pos = ifelse(teamside = 1,14, 1266),180 + var(0);ifelse(teamside =1, (gamewidth*0.01),(gamewidth*0.99)),floor((gameheight*0.25))
ontop = 1
ownpal = 1
bindtime = -1


[state 4900, Magnum]
type = explod
trigger1 = 1
anim = 4901
id = 4901
postype = left
facing = ifelse(teamside = 1,1,-1)
pos = ifelse(teamside = 1,14, 1266),216 + var(0);ifelse(teamside =1, (gamewidth*0.01),(gamewidth*0.99)),floor((gameheight*0.3))
ontop = 1
ownpal = 1
bindtime = -1

[state 4900, Grenade]
type = explod
trigger1 = 1
anim = 4902
id = 4902
postype = left
facing = ifelse(teamside = 1,1,-1)
pos = ifelse(teamside = 1,14, 1266),252 + var(0);ifelse(teamside =1, (gamewidth*0.01),(gamewidth*0.99)),floor((gameheight*0.35))
ontop = 1
ownpal = 1
bindtime = -1

[state 4900, Rocket]
type = explod
trigger1 = 1
anim = 4903
id = 4903
postype = left
facing = ifelse(teamside = 1,1,-1)
pos = ifelse(teamside = 1,0, 1280),288 + var(0);ifelse(teamside =1, (gamewidth*0.01),(gamewidth*0.99)),floor((gameheight*0.4))
ontop = 1
ownpal = 1
bindtime = -1

;Xs

[state 4900, x1]
type = explod
trigger1 = 1
anim = 4905
id = 4905
postype = left
facing = ifelse(teamside = 1,1,-1)
pos = ifelse(teamside = 1,38, 1242),180 + var(0);ifelse(teamside =1, (gamewidth*0.03),(gamewidth*0.97)),floor((gameheight*0.255))
ontop = 1
ownpal = 1
bindtime = -1

[state 4900, x2]
type = explod
trigger1 = 1
anim = 4905
id = 4905
postype = left
facing = ifelse(teamside = 1,1,-1)
pos = ifelse(teamside = 1,38, 1242),216 + var(0);ifelse(teamside =1, (gamewidth*0.03),(gamewidth*0.97)),floor((gameheight*0.305))
ontop = 1
ownpal = 1
bindtime = -1

[state 4900, x3]
type = explod
trigger1 = 1
anim = 4905
id = 4905
postype = left
facing = ifelse(teamside = 1,1,-1)
pos = ifelse(teamside = 1,38, 1242),252 + var(0);ifelse(teamside =1, (gamewidth*0.03),(gamewidth*0.97)),floor((gameheight*0.355))
ontop = 1
ownpal = 1
bindtime = -1

[state 4900, x4]
type = explod
trigger1 = 1
anim = 4905
id = 4905
postype = left
facing = ifelse(teamside = 1,1,-1)
pos = ifelse(teamside = 1,38, 1242),288 + var(0);ifelse(teamside =1, (gamewidth*0.05),(gamewidth*0.95)),floor((gameheight*0.400))
ontop = 1
ownpal = 1
bindtime = -1

;Ammo Values

[state 4900, Shotgun Ammo]
type = explod
trigger1 = 1
anim = ifelse(root,var(25) < 1, 4910,4910+(root,var(25)-1))
id = 4910
postype = left
facing = ifelse(teamside = 1,1,1)
pos = ifelse(teamside = 1,64, 1208),180 + var(0);ifelse(teamside =1, (gamewidth*0.05),(gamewidth*0.94)),floor((gameheight*0.25))
ontop = 1
ownpal = 1
bindtime = -1

[state 4900, Magnum Ammo]
type = explod
trigger1 = 1
anim = ifelse(root,var(26) < 1, 4910,4910+(root,var(26)-1))
id = 4910
postype = left
facing = ifelse(teamside = 1,1,1)
pos = ifelse(teamside = 1,64, 1208),216 + var(0);ifelse(teamside =1, (gamewidth*0.05),(gamewidth*0.94)),floor((gameheight*0.303))
ontop = 1
ownpal = 1
bindtime = -1

[state 4900, Grenade Ammo]
type = explod
trigger1 = 1
anim = ifelse(root,var(28) < 1, 4910,4910+(root,var(28)-1))
id = 4910
postype = left
facing = ifelse(teamside = 1,1,1)
pos = ifelse(teamside = 1,64, 1208),252 + var(0);ifelse(teamside =1, (gamewidth*0.05),(gamewidth*0.94)),floor((gameheight*0.353))
ontop = 1
ownpal = 1
bindtime = -1

[state 4900, Rocket Ammo]
type = explod
trigger1 = 1
anim = ifelse(root,var(27) < 1, 4910,4910+(root,var(27)-1))
id = 4910
postype = left
facing = ifelse(teamside = 1,1,1)
pos = ifelse(teamside = 1,64, 1208),288 + var(0);ifelse(teamside =1, (gamewidth*0.075),(gamewidth*0.915)),floor((gameheight*0.397))
ontop = 1
ownpal = 1
bindtime = -1

;==========================================================================
;[Info]
;author = "Inktrebuchet" 
;versiondate = 12/13/2018                  
;goal = Detect enemy's projectile (helper). For use with AI.
;       敵の発射物（helper）を検出する。 AIで使用する場合。
;==========================================================================
;                Notes
;==========================================================================
;notes:
;-Enemy's projectile now has a PlayerID use PlayerID(helper(33333333),var(3)) as a redirect.
;
;base examples of trigger use: 
;
;;Enemy's projectile helper's distance from character.
;trigger1 = PlayerIDExist(helper(33333333),var(3))
;trigger1 = PlayerID(helper(33333333),var(3)), p2bodydist x 
;
;;Enemy's projectile helper's velocity.
;trigger1 = PlayerIDExist(helper(33333333),var(3))
;trigger1 = PlayerID(helper(33333333),var(3)), Vel X
;
;==========================================================================
;                Helper var usage.
;==========================================================================
; numhelper(33333333) Variable usage:
; This is a record of the variables that are used
;
; var(0) - highest playerid + 1
; var(3) - projectile player id while it exists
; 
;==========================================================================
[Statedef 33333333]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0, 0
 
;==========================================================================
;                Config Section
;==========================================================================
anim = 9741                   ; blank animation
 
;==========================================================================
 
[state 33333333, Clipboard] 
type = DisplayToClipboard
trigger1 = 1
text = "Highest Playerid = %d , Projectile helper's PlayerId = %d\nBy Inktrebuchet"
params = var(0)-1, var(3)
;==========================================================================
;                Detect Enemy's Projectile Helper
;==========================================================================
[State 33333333, 0]
type = Null
trigger1 = var(0) = 0
trigger1 = (var(0) := id)
ignorehitpause = 1
 
[state 33333333, 1] 
type = varadd
trigger1 = PlayerIdExist(var(0)) 
trigger2 = PlayerIdExist(var(0)+1) 
trigger3 = PlayerIdExist(var(0)+2) 
trigger4 = PlayerIdExist(var(0)+3) 
trigger5 = PlayerIdExist(var(0)+4) 
trigger6 = PlayerIdExist(var(0)+5) 
trigger7 = PlayerIdExist(var(0)+6) 
trigger8 = PlayerIdExist(var(0)+7) 
trigger9 = PlayerIdExist(var(0)+8) 
trigger10 = PlayerIdExist(var(0)+9) 
trigger11 = PlayerIdExist(var(0)+10) 
trigger12 = PlayerIdExist(var(0)+11) 
trigger13 = PlayerIdExist(var(0)+12) 
trigger14 = PlayerIdExist(var(0)+13) 
trigger15 = PlayerIdExist(var(0)+14) 
trigger16 = PlayerIdExist(var(0)+15) 
trigger17 = PlayerIdExist(var(0)+16) 
trigger18 = PlayerIdExist(var(0)+17) 
trigger19 = PlayerIdExist(var(0)+18) 
trigger20 = PlayerIdExist(var(0)+19) 
trigger21 = PlayerIdExist(var(0)+20) 
trigger22 = PlayerIdExist(var(0)+21) 
trigger23 = PlayerIdExist(var(0)+22) 
trigger24 = PlayerIdExist(var(0)+23) 
trigger25 = PlayerIdExist(var(0)+24) 
trigger26 = PlayerIdExist(var(0)+25) 
v = 0
value = 1
ignorehitpause = 1
 
[State 33333333, 2]
type = Null
triggerall = PlayerIdExist(Root,ID)
trigger1 = PlayerIdExist(var(0)-1)
trigger1 = cond(root,teamside = 1, PlayerID(var(0)-1),teamside = 2, PlayerID(var(0)-1),teamside = 1)
trigger1 = PlayerID(var(0)-1),hitdefattr = ASC, NP, SP, HP
trigger1 = var(3) := (var(0)-1)
trigger2 = PlayerIdExist(var(0)-2)
trigger2 = cond(root,teamside = 1, PlayerID(var(0)-2),teamside = 2, PlayerID(var(0)-2),teamside = 1)
trigger2 = PlayerID(var(0)-2),hitdefattr = ASC, NP, SP, HP
trigger2 = var(3) := (var(0)-2)
trigger3 = PlayerIdExist(var(0)-3)
trigger3 = cond(root,teamside = 1, PlayerID(var(0)-3),teamside = 2, PlayerID(var(0)-3),teamside = 1)
trigger3 = PlayerID(var(0)-3),hitdefattr = ASC, NP, SP, HP
trigger3 = var(3) := (var(0)-3)
trigger4 = PlayerIdExist(var(0)-4)
trigger4 = cond(root,teamside = 1, PlayerID(var(0)-4),teamside = 2, PlayerID(var(0)-4),teamside = 1)
trigger4 = PlayerID(var(0)-4),hitdefattr = ASC, NP, SP, HP
trigger4 = var(3) := (var(0)-4)
trigger5 = PlayerIdExist(var(0)-5)
trigger5 = cond(root,teamside = 1, PlayerID(var(0)-5),teamside = 2, PlayerID(var(0)-5),teamside = 1)
trigger5 = PlayerID(var(0)-5),hitdefattr = ASC, NP, SP, HP
trigger5 = var(3) := (var(0)-5)
trigger6 = PlayerIdExist(var(0)-6)
trigger6 = cond(root,teamside = 1, PlayerID(var(0)-6),teamside = 2, PlayerID(var(0)-6),teamside = 1)
trigger6 = PlayerID(var(0)-6),hitdefattr = ASC, NP, SP, HP
trigger6 = var(3) := (var(0)-6)
trigger7 = PlayerIdExist(var(0)-7)
trigger7 = cond(root,teamside = 1, PlayerID(var(0)-7),teamside = 2, PlayerID(var(0)-7),teamside = 1)
trigger7 = PlayerID(var(0)-7),hitdefattr = ASC, NP, SP, HP
trigger7 = var(3) := (var(0)-7)
trigger8 = PlayerIdExist(var(0)-8)
trigger8 = cond(root,teamside = 1, PlayerID(var(0)-8),teamside = 2, PlayerID(var(0)-8),teamside = 1)
trigger8 = PlayerID(var(0)-8),hitdefattr = ASC, NP, SP, HP
trigger8 = var(3) := (var(0)-8)
trigger9 = PlayerIdExist(var(0)-9)
trigger9 = cond(root,teamside = 1, PlayerID(var(0)-9),teamside = 2, PlayerID(var(0)-9),teamside = 1)
trigger9 = PlayerID(var(0)-9),hitdefattr = ASC, NP, SP, HP
trigger9 = var(3) := (var(0)-9)
trigger10 = PlayerIdExist(var(0)-10)
trigger10 = cond(root,teamside = 1, PlayerID(var(0)-10),teamside = 2, PlayerID(var(0)-10),teamside = 1)
trigger10 = PlayerID(var(0)-10),hitdefattr = ASC, NP, SP, HP
trigger10 = var(3) := (var(0)-10)
ignorehitpause = 1
 
[State 33333333, BindToRoot]
type = BindToRoot
trigger1 = PlayerIdExist(Root,ID)
time = 1
facing = 1
pos =0,-2
ignorehitpause = 1 







 


;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[statedef -2]

;=======================AI Detect Projectile System==========================
[state -2, AI Detect Projectile System]
type = helper
trigger1 = ailevel ;M.U.G.E.N 1.0+
trigger1 = !numhelper(33333333)
name = "AI Detect Projectile System"
ID = 33333333
stateno = 33333333
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 1.0
size.yscale = 1.0
supermovetime = 2147483647
pausemovetime = 2147483647
ignorehitpause = 1


;Ammo Hud
[state -2, helper]
type = helper
triggerall = !numhelper(4900)
trigger1 = roundstate = 2
name = "Ammo Hud"
helpertype = normal
stateno = 4900
postype = p1
pos = 0,0
id = 4900
persistent = 300
ignorehitpause = 1


[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 810 
ignorehitpause = 1
id = 811


[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 1120 
ignorehitpause = 1
id = 1121

[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 1100 
ignorehitpause = 1
id = 1101

[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 1110 
ignorehitpause = 1
id = 1111

[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 3001
id = 3003
ignorehitpause = 1

[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 810
id = 811
ignorehitpause = 1

[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 1101 && stateno != 1111 && stateno != 1121
ignorehitpause = 1
id = 1103

[state -2, remove exhaust BB]
type = removeexplod
trigger1 = stateno != 1155
ignorehitpause = 1
id = 1156

[state -2, stop minigun soundeffect]
type = stopsnd
trigger1 = prevstateno = 3001
channel = 1
ignorehitpause = 1


;============================================
;  Victory Quotes
;============================================

[state -2, win quotes]
type = victoryquote
trigger1 = 1
value = 1+(random%7)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Bertha Hippo"
value = 8+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Aroma Skunk"
value = 11+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Katrina Crocodile"
value = 14+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Jumbo Elephant"
value = 17+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Enorma Pig"
value = 20+(random%3)
ignorehitpause
persistent = 1

[state -2, win quote]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Ana 'Jiggly' Bunny"
value = 23+(random%3)
ignorehitpause
persistent = 1

[state -2, win quote]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Lardo Rat"
value = 26+(random%3)
ignorehitpause
persistent = 1

[state -2, win quote]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Zafta Giraffe"
value = 29+(random%3)
ignorehitpause
persistent = 1

[state -2, win quote]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Makuyama"
value = 32+(random%3)
ignorehitpause
persistent = 1

[state -2, win quote]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Pastilla Skunk"
value = 35+(random%3)
ignorehitpause
persistent = 1

[state -2, win quote]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Jumba Elephant"
value = 38+(random%3)
ignorehitpause
persistent = 1


[state -2, win quote]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Ryu"
value = 50+(random%2)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Twiggi Bunny"
value = 52+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Ra Lord"
value = 55+(random%3)
ignorehitpause
persistent = 1


[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Violet 'Tyla' Bunny"
value = 58+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Battu Tri-red"
value = 61+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Julian Hippo"
value = 64+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Rapid Bunny"
value = 67+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Noah Sharker"
value = 70+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Akai R. Panda"
value = 73+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Montana Moth"
value = 76+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Andy Armadillo"
value = 79+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Texas Stanton"
value = 82+(random%3)
ignorehitpause
persistent = 1


[state -2, Rocket Rump number of hits]
type = varset
trigger1 = numenemy
trigger1 = stateno = 0 ||stateno = 52  || stateno = 5120
trigger1 = var(36) != 3
var(36) = 4
ignorehitpause = 1


;Wall Bounce Limiter
[state -2, Wall Bounce Limiter]
type = varset
triggerall = numenemy
trigger1 = enemy,movetype != H
var(7) = 2

[state -2, Ground Bounce limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(8) = 2
ignorehitpause = 1

[state -2, Launcher limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(11) = 1
ignorehitpause = 1

[state -2, display]
type = displaytoclipboard
trigger1 = 1
text = "Dist X: %d Dist y: %d Wall Bounce inhib: %d"
params = p2bodydist x, p2bodydist y, var(7)

;Ammo Limiter

[state -2, varset]
type = varset
trigger1 = var(25) > 8
var(25) = 9
ignorehitpause = 1


[state 1030, varset]
type = varset
trigger1 = var(26) > 6
var(26) = 7
ignorehitpause = 1

[state 1030, varset]
type = varset
trigger1 = var(27) > 4
var(27) = 5
ignorehitpause = 1

[state 1030, varset]
type = varset
trigger1 = var(28) > 3
var(28) = 5
ignorehitpause = 1

;===========================================
;  Combo damage reduction
;===========================================

[State -2, attack scaling]
type = attackMulSet
trigger1 = 1
value = fvar(10)
ignorehitpause = 1

[state -2, combo points]
type = varset
trigger1 = numenemy
trigger1 = (enemynear, movetype != H)
trigger2 = !numenemy
ignorehitpause = 1
v = 18
value = 100

[state -2, gradual lowering]
type= varset
trigger1 =  var(18) >= 100
fvar(10) = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 100 && var(18) >= 90
fvar(10) = 0.9

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 90 && var(18) >= 80
fvar(10) = 0.8

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 80 && var(18) >= 70
fvar(10) = 0.7

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 70 && var(18) >= 60
fvar(10) = 0.6

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 60 && var(18) >= 50
fvar(10) = 0.5

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 50 && var(18) >= 40
fvar(10) = 0.4

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 40 && var(18) >= 30
fvar(10) = 0.3

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 30 && var(18) >= 20
fvar(10) = 0.2

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 20 && var(18) >= 10
fvar(10) = 0.1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 10
fvar(10) = 0.05

;---------------------------------------------------------------------------
; Cursed Stats
;---------------------------------------------------------------------------

;Earthquakes
[State -2, quakes]
type = envshake
triggerall = time = 1
trigger1 = stateno = 1521
trigger1 = prevstateno != 1523  
trigger2 = stateno = 1527 && time = 1
time = 10
ampl = -8

;Thuds
[State -2, sfx]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 1521
trigger1 = prevstateno != 1523   
trigger2 = stateno = 1527 && time = 1 
value = S52,0 

;Huge target, Defense buff
[state -2, Defense Up]
type = defencemulset
trigger1 = stateno = [1521,1549]
value = 0.95


;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]


[State -3, quakes]
type = envshake
triggerall = time = 1
trigger1 = stateno = 5100
time = 20
ampl = -12
freq = 200
phase = 100

[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 5100
value = S52, 0

[state -3, gravity]
type = gravity
trigger1 = stateno = 5620
trigger1 = time > 0

[state -3, pushblock is BS like that] ;So...your push block is gonna be like that.  Okay, fine.  I'm gonna do this though till its fixed.
type = poweradd
trigger1 = enemynear,authorname = "Dcat Power"
trigger1 = enemynear,stateno = [720,729]
value = 10
persistent = 30
ignorehitpause = 0


[state -3, land]
type = changestate
triggerall = stateno = 5620
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;This controller plays a sound everytime KFM lands from a jump, or
;from his back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = S52, 0
