
; KFM's constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
;Amount of life to start with
life = 950
power = 5000
;attack power (more is stronger)
attack = 100
;defensive power (more is stronger)
defence = 100
;Percentage to increase defense everytime player is knocked down
fall.defence_up = 50
;Time which player lies down for, before getting up
liedown.time = 45
;Number of points for juggling
airjuggle = 30
;Default hit spark number for HitDefs
sparkno = 2
;Default guard spark number
guard.sparkno = 40
;1 to enable echo on KO
KO.echo = 0
;Volume offset (negative for softer)
volume = 0
;Variables with this index and above will not have their values
;reset to 0 between rounds orfg matches. There are 60 int variables,
;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
;If omitted, then it defaults to 60 and 40 for integer and float
;variables repectively, meaning that none are persistent, i.e. all
;are reset. If you want your variables to persist between matches,
;you need to override state 5900 from common1.cns.
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = 1.35  ;Stripe 1.75 ;Original 1.35       ;Horizontal scaling factor.
yscale = 1.35  ;Original 1.1       ;Vertical scaling factor.
ground.back = 150    ;Player width (back, ground)
ground.front = 150    ;Player width (front, ground)
air.back = 160       ;Player width (back, air)
air.front = 160       ;Player width (front, air)
height = 240         ;Height of player (for opponent to jump over)
attack.dist = 640    ;Default attack distance
proj.attack.dist = 360 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = 4, -338   ;Approximate position of head
mid.pos = -2, -160    ;Approximate position of midsection
shadowoffset = -3     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y). Recommended 0,0

[Velocity]
walk.fwd  = 12 ;9    ;Walk forward
walk.back = -12        ;Walk backward
run.fwd  = 24, 0    ;Run forward (x, y)
run.back = -18,-8.5 ;Hop backward (x, y)
jump.neu = 0,-32;-32.5    ;Neutral jumping velocity (x, y)
jump.back = -13,-30    ;Jump back Speed (x, y)
jump.fwd = 13,-30       ;Jump forward Speed (x, y)
runjump.back = -2.55,-8.1 ;Running jump speeds (opt)
runjump.fwd = 24,-16    ;.
airjump.neu = 0,-32     ;.
airjump.back = -9     ;Air jump speeds (opt)
airjump.fwd = 9        ;.
air.gethit.groundrecover = -.15,-3.5  ;Velocity for ground recovery state (x, y) **MUGEN 1.0**
air.gethit.airrecover.mul = .5,.2     ;Multiplier for air recovery velocity (x, y) **MUGEN 1.0**
air.gethit.airrecover.add = 0,-4.5    ;Velocity offset for air recovery (x, y) **MUGEN 1.0**
air.gethit.airrecover.back = -1       ;Extra x-velocity for holding back during air recovery **MUGEN 1.0**
air.gethit.airrecover.fwd = 0         ;Extra x-velocity for holding forward during air recovery **MUGEN 1.0**
air.gethit.airrecover.up = -2         ;Extra y-velocity for holding up during air recovery **MUGEN 1.0**
air.gethit.airrecover.down = 1.5      ;Extra y-velocity for holding down during air recovery **MUGEN 1.0**

[Movement]
airjump.num = 1       ;Number of air jumps allowed (opt)
airjump.height = 35   ;Minimum distance from ground before you can air jump (opt)
yaccel = 1.5 ;1.45         ;1.3    0.85          ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching
stand.friction.threshold = 2          ;If player's speed drops below this threshold while standing, stop his movement **MUGEN 1.0**
crouch.friction.threshold = .05       ;If player's speed drops below this threshold while crouching, stop his movement **MUGEN 1.0**
air.gethit.groundlevel = 25           ;Y-position at which a falling player is considered to hit the ground **MUGEN 1.0**
air.gethit.groundrecover.ground.threshold = -20 ;Y-position below which falling player can use the recovery command **MUGEN 1.0**
air.gethit.groundrecover.groundlevel = 10   ;Y-position at which player in the ground recovery state touches the ground **MUGEN 1.0**
air.gethit.airrecover.threshold = -1  ;Y-velocity above which player may use the air recovery command **MUGEN 1.0**
air.gethit.airrecover.yaccel = 1.45    ;Vertical acceleration for player in the air recovery state **MUGEN 1.0**
air.gethit.trip.groundlevel = 15      ;Y-position at which player in the tripped state touches the ground **MUGEN 1.0**
down.bounce.offset = 0, 20            ;Offset for player bouncing off the ground (x, y) **MUGEN 1.0**
down.bounce.yaccel = 1.45               ;Vertical acceleration for player bouncing off the ground **MUGEN 1.0**
down.bounce.groundlevel = 12          ;Y-position at which player bouncing off the ground touches the ground again **MUGEN 1.0**
down.friction.threshold = .05         ;If the player's speed drops below this threshold while lying down, stop his movement **MUGEN 1.0**

;Default language victory quotes (optional).  **MUGEN 1.0**
;If this section is included, the default language victory quotes must be in English.
[Quotes]
; Up to 100 victory quotes can be specified per language (victory0 - victory99)
victory1 = "It doesn't matter how big you are, my poison will take you down."
victory2 = "Can't fight when you can't breathe, can you?"
victory3 = "You didn't think it would be easy to approach a skunk, did you?"
victory4 = "Your technique stinks as bad as I can!"
victory5 = "My poisons don't care about combo scaling. Breathe in too much, and it'll melt your HP away."
victory6 = "You probably shouldn't have let such a cute and chunky skunk like me sit on you like that... But here we are."
victory7 = "My poison can melt anyone's health away, you'd best respect it."

;vs Jumbo

victory8 = "Your size doesn't matter to my poison."
victory9 = "I don't give a damn how strong you are, you still have a sense of smell."
victory10 = "I think red is a better look for you."

;vs Jiggly

victory11 = "Yeah, I'm not against gassing my friends. Come on Jiggly, you can handle it."
victory12 = "Your speed isn't a factor, bunny. I don't need to chase you to bring you down."
victory13 = "I didn't stink you that badly. Get some baking soda, and you should be fine."

;vs Bertha

victory14 = "Your ass is like a runaway train, that thing is dangerous and unstoppable!"
victory15 = "It doesn't matter how big you are, Bertha; my stink will make you drop just the same."
victory16 = "How embarassing, the big bad hippo can't stop a small skunk like me..."

;vs Enorma
victory17 = "What the hell!? Since when could you use guns in this?!"
victory18 = "Guess my form of zoning is better than yours."
victory19 = "Dodging just isn't your strong point, is it?"

;vs Katrina
victory20 = "You can try to bite me, you won't like what you taste."
victory21 = "You don't get to use those teeth on me, I'll gas you right in the mouth if you try!"
victory22 = "If I crouched right in front of you, I doubt you'd even see me!"

;Vs Luna
victory23 = "Wow, you're such a knockoff..."
victory24 = "And here I thought Jiggly was big, you're just massive!"
victory25 = "You might be bigger than Jiggly, but you're not nearly as fast."

;vs Sonic
victory26 = "Ha! The more you exert yourself, the more of a toll my poison takes."
victory27 = "Running just makes my poison do more damage. Shame that's your go-to technique, huh?"
Victory28 = "You can't outrun my fumes, hedgehog!"

;vs Herself
victory29 = "Skunks don't usually gas each other you know."
victory30 = "It's freaky running into yourself in a fight!"
victory31 = "Holy shit! I didn't know I smelled that bad. I must have desensitized myself!" 

;vs Batman
victory32 = "Hey Batman! You stink so bad, I can smell you from here!"
victory33 = "Don't try and fake it! You can't breathe in space, and you certainly couldn't breathe here."
victory34 = "Hide all you want, I don't need to find you to choke you out."

;vs Ryu
Victory35 = "Did you just parry gas?! How the hell does that work?!"
victory36 = "Whoa! You really did mean it when you said you'd fight anyone."
victory37 = "I might not be as skilled as you are, but my poison can do most of the work for me."

;vs Ken
Victory38 = "Whoa! Keep those flames away from me, that's hazardous for both of us!"
Victory39 = "Stop it! Seriously, I'm packing a lot of methane here!"
victory40 = "Hope that gas really burns your lungs!"

;vs Lardo Rat
victory41 = "To be fair, you stank long before you met me."
victory42 = "When I fart on a face it makes sense.  I'm a skunk but when you do it it's just gross."
victory43 = "Taste is very closely associated with smell, but you didn't think that through did ya?"


;vs Zafta
victory44 = "I may need a ladder, but I can still gas you!"
victory45 = "Did you think your nose was safe all the way up there?"
victory46 = "I don't need to match your range if I can just choke you out."

;vs Makuyama
victory47 = "How's that keen sense of smell handling my scent, Maku?"
Victory48 = "You can smell me miles away, huh? Seems like I have a huge range advantage on you, and your whole species."
Victory49 = "Your size can't intimidate me now that I know you're so vulnerable to my scent, panda."

;vs Pastilla
victory50 = "My poisons only knock people out, while yours kill. Don't think I'm gonna be cool with that."
victory51 = "You may have magic and stuff, but I can fart plasma! Can't do that now, can you?."
victory52 = "My poisons are more efficient without being lethal. What's your excuse, witch?!"

;vs Jumba
victory53 = "I'll still sell you my poison gasses, but at an increased rate since you tried me!"
victory54 = "You're someone best seen in motion, Jumba. But like everyone else, you can't outrun poison."
victory55 = "Poisons don't care about size, Jumba. And for that, all smoke bombs are going up in price."

;vs Twiggi
victory56 = "Well... Guess poison isn't gonna be effective against you, huh?"
victory57 = "Your annoying pokes stop my poison's effect way too early. But in the end, you'll fall to my gas just like everyone else."
victory58 = "Your chest is so small and thin... Gonna enjoy filling your lungs with my fumes."
;-----------------
;Skip a lot

; vs Undyne
victory60 = "Silly fish girl... If your spears aren't a projectile, then you have no protection from me!"
victory61 = "Those spears don't block my gas at all, do they?"
victory62 = "You can't fight gas with a pointy stick."

;vs Ra Lord
Victory63 = "Your venomous bite is no match for my poisonous ass!"
victory64 = "You don't handle being suffocated by sexy well, do you?"
victory65 = "I feel like I should be more intimidated by you, but I'm just not."

;vs Violet
victory66 = "Hey girl, maybe next time you shouldn't try using smoke bomb tricks on the girl that made them!"
victory67 = "Poisons make your thick-thighed offense way more manageable for me."
victory68 = "Your kicks are really oppressive! So I'll just gas you and stay back."

;vs Battu
victory69 = "I assumed you had a sense of smell, seems I was right."
victory70 = "I don't care what you are, you'll drop from my poison like everyone else."
victory71 = "I have no idea what you're capable of, but my gasses will get the job done."

;vs Julian
victory72 = "Another hippo tries to fight a skunk and has a bad time. I'm noticing a trend here..."
victory73 = "My poison doesn't care how big you are, Julian!"
victory74 = "You actually smelled quite nice before you met me... Shame I had to ruin that."

;vs Rapid
Victory75 = "I don't know what you did with Jiggly, but i enjoyed stinking you up even more for her."
victory76 = "Cardio just makes my poison more effective.  Go on and enjoy jogging to your KO."
victory77 = "Gas is active as long as its out there.  Feels like a great counter for someone as fast as you."

;vs Noah 
victory78 = "Gassing such a cute boi like you was enjoyable. Come back anytime."
victory79 = "I feel like you have experience handling what I can do.  I'll make sure to amp it up just for you."
victory80 = "You brought demon dogs for back up, well they'll be a perfect audience to watch me sit on your face."

;Vs Akai
victory81 = "Runners need oxygen and being bigger just means you need more of it.  Didn't really think the match up through did you."
victory82 = "You're more agressive about trying to sit on a face than me and Jiggly.  I gotta say thats pretty impressive."
victory83 = "How do you're thighs not catch on fire!  Super speed at that size is a mystery.  Actually super speed at any size is BS."

;Vs Montana
victory84 = "I like your facesitting techniques Montana.  I'm gonna have to steal some of those."
victory85 = "Flying enemies are always hard to handle but I still came out on top."
victory86 = "I don't just fart on faces Montana I can literally fart plasma.  That puts me in a whole new league."

;vs Andy
Victory87 = "Unless you're suit is air tight, its not gonna protect you from me."
Victory88 = "Damage over time doesn't care about defense Andy."
victory89 = "Did you ever think about protecting from smells and not just hard hits."

;vs Texas
Victory90 = "Oh ho ho no,  the skunks you fought aren't in the same leauge as I am.  I'm hitting you with legit poison on top of my stank."
Victory91 = "Pretty sure you got nothing on me sheriff but I can have a whole lot of my ass on you."
victory92 = "Quit Harassing the skunk girls in your town, they are just trying to run a bussiness.  One I may be interested in visiting."

;Alternate language victory quotes (optional).
;0 or more alternate language sections may be added, preceded by the
;ISO 639-1 code followed by a ".", e.g. "[ja.Quotes]".
;See language setting in mugen.cfg.
[ja.Quotes]
victory1 = "カンフー突き手を破らぬ限り、お前に勝ち目はない！"
victory2 = "十年早いんだぞ"
victory3 = "お前は見覚えがあるな。テレビにでも…？"
victory4 = "お前の動きは見破りやすすぎる。　なに、カンフー突き手が覚えたいんだと？　素人には無理だぞ"
victory5 = "ふー。　いい汗だった"
victory6 = "もっと強い相手に挑戦したい"
victory7 = "なんだと！彼女はここにもいないと？"

;---------------------------------------------------------------------------
; Variable usage:
; This is a record of the variables that KFM uses. Keeping a record of your
; variable usage helps you avoid careless mistakes later.
; var(1)  - Used in kfm.cmd for combo condition (updated every tick)
; var(2)  - Used in Kung Fu Throw (state 800) to remember if fwd was being
;           held (remembered from state 800 through state 810).
;var(3) - air jump counter
;var(4) - offense defense logic for AI
;7- 11 combo inhibitors
;12 = jump permission

;var(20) - random for sfx
;var(19) - castrophe hit check
;var(23) - Light cloud distance
;var(24) - Hard cloud distance
;var(27) - teleport direction
;var(28) - Projectile hit counter
;var(29) - Jump infinite fix
;var(14) - Pushblock stateno
;var(32) - Teleport Limiter
;var(33) - teleport combo limiter
;var(34) - catastrophe timer
;var(41) - X axis Charge timer
;var(42) - X axis confirm
;var(43) - Y axis Charge timer
;var(44) - Y axix confirm
;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
; Win pose 1 - Bow
; CNS difficulty: basic
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[state 181, announce]
type = playsnd
triggerall = teammode = single
trigger1 = time = 10
trigger1 = life != lifemax
value = S180,1

[state 181, announce]
type = playsnd
triggerall = teammode = single
trigger1 = time = 10
trigger1 = life = lifemax
value = S180,1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[state 191, version]
type = explod
trigger1 = time = 0
anim = ifelse(facing = -1,9101,9100)
scale = 1,1
postype = Back
pos = ifelse(facing =1, 20, 157),360 ; Nice!
ontop = 1

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[state 191, up]
type = posadd
trigger1 = time = 0
y = -140

[state 191, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 19000

;---------------------------------------------------------------------------
;Smoke Bomb Intro
[statedef 19000]
type = A
movetype = A
physics = N
ctrl = 0
anim = 44

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[state 191, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0

[state 1200, visible]
type = assertspecial
trigger1 = time < 5
flag = invisible

[State 1000, 2]
type = Helper
trigger1 = time = 5
helpertype = normal
name = "Reappear Hitbox"
ID = 1205
stateno = 1205
pos = 0,-100
postype = p1
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 1200, smoke bomb]
type = explod
trigger1 = time = 5
anim = 2020
scale = const(size.xscale)*2.5,const(size.yscale)*2.5
postype = p1
pos = 0,-100
bindtime = 8
removetime = -2
sprpriority = 4
ownpal = 1

[state 1200, snd]
type = playsnd
trigger1 = time = 5
value = S1200,0

[state 1201, playerpush]
type = playerpush
trigger1 = time < 5
value = 0

[state 1201, gravity]
type = gravity
trigger1 = time > 12

[state 1201, small jump]
type = velset
trigger1 = time = 12
y = -12

[state 1201, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 19001

;---------------------------------------------------------------------------

; Jump Land
[Statedef 19001]
type    = S
physics = S
ctrl = 0
anim = 47

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 52, 4]
type = EnvShake
trigger1 = time = 0
time = 15
ampl = 4
freq = 100
phase = 100

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State 52, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0


;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Stand Light Punch
; CNS difficulty: easy
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 200                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 10, 0                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 6, 6                 ;Time attacker pauses, time opponent shakes
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = -10, -270               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S200, 0                  ;Sound to play on hit
guardsound = S120, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 12            ;Time that the opponent slides back
ground.hittime  = 12             ;Time opponent is in hit state
ground.velocity = -6             ;Velocity at which opponent is pushed
airguard.velocity = -4,-1   
air.type = High                 
air.velocity = -2,-8           
air.hittime = 15      
guard.velocity = -12              
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -4,-1 
airguard.hittime = 12
guard.dist = 360
fall.recovertime = 20



          
[State 200, 2]
type = PlaySnd
trigger1 = Time = 4
value = S200, 1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -4
persistent = 0
ignorehitpause = 1

[state 200, changestate]
type = changestate
trigger1 = command = "x"
trigger1 = movecontact
value = 201

[state 200, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Punch
; CNS difficulty: easy
[Statedef 201]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 201                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 201, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 10, 0                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 6, 6                 ;Time attacker pauses, time opponent shakes
sparkno = 0                      ;Spark anim no (Def: set above)
sparkxy = -10, -270              ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S200, 0                  ;Sound to play on hit
guardsound = S120, 0                ;Sound to play on guard
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 15             ;Time that the opponent slides back
ground.hittime  = 15             ;Time opponent is in hit state
ground.velocity = -8             ;Velocity at which opponent is pushed
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -4,-8           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 15                 ;Time before opponent regains control in air
guard.velocity = -18             
guard.hittime = 10
guard.slidetime = 10
airguard.velocity = -8,-1 
airguard.hittime = 13
guard.dist = 360
fall.recovertime = 20

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -4
persistent = 0
ignorehitpause = 1

[State 201, 2]
type = PlaySnd
trigger1 = Time = 4
value = S200, 1

[state 201, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 201, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 210
sprpriority = -2

[State 210, Width]
type = posadd
trigger1 = animelem = 2
x = 80

[State 210, Width]
type = posadd
trigger1 = animelem = 3
x = 60

[State 210, Width]
type = posadd
trigger1 = animelem = 4
x = 45


[State 210, Width]
type = posadd
trigger1 = animelem = 7
x = -65

[State 210, Width]
type = posadd
trigger1 = animelem = 8
x = -120


[State 210, 1]
type = PlaySnd
trigger1 = Time = 8
value = S210, 1

[State 210, 2]
type = HitDef
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = Medium
damage    = 55
guardflag = MA
pausetime = 12,12
sparkno = 2
sparkxy = -60,-344
p1sprpriority = -2
hitsound   = S200,0
guardsound = S120, 0
ground.type = High
ground.slidetime = 26
ground.hittime  = 26
air.hittime = 20
ground.velocity = -24
air.velocity = -18,-10
guard.velocity = -18              
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = -18,-4 
airguard.hittime = 18
forcenofall = 1
guard.dist = 480
fall.recovertime = 40

[state 210, sprpriority]
type = sprpriority
trigger1 = animelem = 6
value = -2

[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 210, Not Active]
type = statetypeset
trigger1 = animelemtime(6) = 0
movetype = I

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong punch
;This move has broken Priority, it is intended
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 215
sprpriority = -1

[State 215, 1]
type = PlaySnd
trigger1 = Time = 4
value = S210, 1

[State 215, 2]
type = HitDef
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = up
damage    = 50
guardflag = MA
pausetime = ifelse(enemy,movetype = A,18,12),ifelse(enemy,movetype=A,18,12)
sparkno = 2
sparkxy = -60,-330
hitsound   = S200,0
guardsound = S120, 0
ground.type = High
ground.slidetime = 35
ground.hittime  = 35
air.hittime = 24
ground.velocity = -2,-24
air.velocity = -2,-18
guard.velocity = -32            
guard.hittime = 16
guard.slidetime = 16
fall = ifelse(enemy,movetype = A,1,0)
fall.recover = 1
airguard.velocity = -20,-6 
airguard.hittime = 20
forcenofall = 1
guard.dist = 360
fall.recovertime = 45

[state 215, slide forward]
type = velset
trigger1 = animelem = 3
x = 12

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 215, cancel]
type = changestate
trigger1 = movehit
trigger1 = command = "y"
value = 410

[state 215, jump]
type = changestate
trigger1 = movehit
trigger1 = command = "holdup"
value = 40
ctrl = 1

[state 215, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[State 215, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick
; CNS difficulty: easy
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 11
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 20
guardflag = MA
pausetime = 8,8
sparkno = 0
sparkxy = -10,-110
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 13
ground.hittime  = 13
ground.velocity = -14
air.velocity = -12,-3.5
guard.velocity = -12              
guard.hittime = 13
guard.slidetime = 13
guard.dist = 360
fall.recovertime = 20

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 230, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong kick
; CNS difficulty: easy
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 30
ctrl = 0
velset = 0,0
anim = 240
sprpriority = -2

[State 240, 1]
type = PlaySnd
trigger1 = Time = 10
value = S240, 1

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = heavy
damage    = 60
guardflag = MA
pausetime = 10,10
sparkno = 2
sparkxy = -60,-250
hitsound   = S5000, 2
guardsound = S120, 0
p1sprpriority = -2
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -32
air.velocity = -24,-6
guard.velocity = -24              
guard.hittime = 13
guard.slidetime = 13
airguard.velocity = -12,-2
air.fall = 1
guard.dist = 480
fall.recovertime = 40

[state 240, sprpriority]
type = sprpriority
trigger1 = animelem = 9
value = 2

[State 240, 3]
type = PosAdd
trigger1 = AnimElem = 5
x = 75

[State 240, 3]
type = PosAdd
trigger1 = AnimElem = 10
x = -75

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 240, Not Active]
type = statetypeset
trigger1 = animelemtime(9) = 0
movetype = I

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching 1st Slap
[Statedef 400]
type    = C
movetype= A
physics = C
poweradd= 10
ctrl = 0
velset = 0,0
anim = 400
sprpriority = 2

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 200, 1

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 8
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = MA
pausetime = 6,6
sparkno = 0
sparkxy = -40,-50
hitsound   = S5000, 0
guardsound = S120, 0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
air.velocity = -12,-3
guard.velocity = -12              
guard.hittime = 12
guard.slidetime = 12
guard.dist = 360
fall.recovertime = 20

[State 400, 3]
type = changestate
trigger1 = command = "x"
trigger1 = movecontact
value = 401

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 400, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; Crouching 2nd Slap
[Statedef 401]
type    = C
movetype= A
physics = C
poweradd= 10
ctrl = 0
anim = 401
velset = 0,0
sprpriority = 2

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 8
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = MA
pausetime = 6,6
sparkno = 0
sparkxy = -40,-50
hitsound   = S5000, 0
guardsound = S120, 0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -8
air.velocity = -12,-3
guard.velocity = -18             
guard.hittime = 12
guard.slidetime = 12
guard.dist = 360 
fall.recovertime = 20

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 401, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
;Crouching strong punch
[Statedef 410]
type    = C
movetype= A
physics = C
poweradd= 25
ctrl = 0
anim = 410
sprpriority = -1

[state 410, jump permission]
type = varset
trigger1 = time = 0
var(12) = 0
ignorehitpause
persistent = 0


[State 410, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[state 410, pos]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 17
x = 120

[state 410, snd]
type = playsnd
trigger1 = animelemtime(3) = 2
value = S410,0;S1000,0

[state 410, snd]
type = playsnd
trigger1 = animelemtime(3) = 2
value = S1050,0;S410,0;S1000,0

[state 410, gas cloud]
type = helper
trigger1 = numhelper(411) < 1
trigger1 = animelem = 4
helpertype = normal
name = "Launcher Gas"
id = 411
stateno = 411
pos = 60,-200
postype = p1
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 1151, gas fx]
type = explod
trigger1 = animelemtime(4) > 0 && animelemtime(14) < 0
anim = 4011
postype = p1
pos = 34,-260
bindtime = 0
scale = const(size.xscale),const(size.yscale)
persistent = 4
sprpriority = 1
vel = (random%10)-5,-2
accel = 0,-0.8
ownpal = 1

[state 410, shockwave]
type = explod
trigger1 = animelemtime(4) = 0
anim = F61
postype = p1
pos = 32,-248
sprpriority = 1
scale = const(size.xscale) * 1.2,const(size.yscale) * 1.2

;[State 1000, 2]
;type = Helper
;trigger1 = numhelper(4000) < 3
;trigger1 = animelem = 8
;helpertype = normal
;name = "Gas Light"
;ID = 4000
;stateno = 4000
;pos = 100,-150
;postype = p1
;ownpal = 1
;persistent = 0
;ignorehitpause = 1

[state 410, 5]
type = changestate
triggerall = numhelper(411)
triggerall = var(12) > 0
triggerall = helper(411),hitpausetime = 0
trigger1 = command = "holdup"
trigger2 = ailevel > 0
value = 42
ctrl = 1
ignorehitpause = 1
persistent = 1

[state 410, launcher infi check]
type = varadd
trigger1 = animelem = 4
var(11) = -1
ignorehitpause 

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Gas Cloud - Crouching Fierce
[Statedef 411]
type    = A
movetype= A
physics = N
poweradd= 11
anim = 411
sprpriority = 4

[state 411, scale]
type = angledraw
trigger1 = 1
scale = 3,3
ignorehitpause

[state 411, anim]
type = changeanim
trigger1 = anim != 411
value = 411

[state 411, spripriority]
type = sprpriority
trigger1 = 1
value = 4
ignorehitpause

[state 411, velset]
type = velset
trigger1 = time = 0
y = -3

[state 411, jump permission]
type = parentvarset
trigger1 = movehit;helper,movehit = 1
trigger1 = hitshakeover=1;helper(411),hitshakeover = 1 
var(12) = 1
ignorehitpause = 1
persistent = 1



;Launcher
[State 411, 2]
type = HitDef
trigger1 = animelemtime(2) < 0
attr = C, NA
persistent = 0
damage    = 65,ifelse(enemy,statetype = A,21,7)
animtype  = up
hitflag = MAF
guardflag = MA
pausetime = 18,18
guard.pausetime = 6,6
sparkno = -1
sparkxy = -10,-55
hitsound   = 5,4
guardsound = S120, 0
id = 411
nochainid = 411
ground.type = high
ground.slidetime = 35
ground.hittime  = 35
air.hittime = 35
p2sprpriority = 2
ground.velocity = -4,ifelse(parent,var(11) > 0,-37, -2)
air.velocity = -4,ifelse(parent,var(11) > 0,-33,-2)
guard.hittime = 22
guard.slidetime = 22
guard.velocity = -27
airguard.velocity = -20,-28
airguard.hittime = 20
guard.dist = 480
fall.recovertime = 45

[State 411, 2]
type = HitDef
trigger1 = animelemtime(2) >= 0
trigger1 = !movecontact
attr = C, NP
persistent = 0
damage    = 45,ifelse(enemy,statetype = A,15,5)
animtype  = up
hitflag = MAF
guardflag = MA
pausetime = 18,18
guard.pausetime = 6,6
sparkno = -1
sparkxy = -10,-55
hitsound   = 5,4
guardsound = S120, 0
id = 412
nochainid = 411,412
ground.type = high
ground.slidetime = 35
ground.hittime  = 35
air.hittime = 35
p2sprpriority = 2
ground.velocity = -4,ifelse(parent,var(11) > 0,-35, -2)
air.velocity = -4,ifelse(parent,var(11) > 0,-32,-2)
guard.hittime = 12
guard.slidetime = 12
guard.velocity = -18
airguard.velocity = -16,-24
airguard.hittime = 16
guard.dist = 480
fall.recovertime = 45


[state 411, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

;[state 411, gas fx]
;type = helper
;triggerall = numhelper(412)
;trigger1 = Numtarget(411)
;trigger1 = movehit
;stateno = 1415
;id = 412
;name = "Gas FX"
;postype = p2
;pos = 0,0
;persistent = 0

[state 411, parentvaradd]
type = parentvaradd
trigger1 = movehit
v = 18
value = -9
ignorehitpause
persistent = 0


[state 411, hitoverride]
type = hitoverride
trigger1 = 1
attr = SCA, AP
time = 1
stateno = 411
ignorehitpause = 1

[state 410, end]
type = destroyself
trigger1 = animtime = 0

ignorehitpause = 1



;---------------------------------------------------------------------------
;Crouching light kick
; CNS difficulty: easy
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 15
poweradd= 11
ctrl = 0
anim = 430
sprpriority = 2

[State 430, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[state 210, width]
type = width
trigger1 = animelemtime(3) >= 0 && animelemtime(6) < 0
value = 100,0
ignorehitpause = 1

[State 430, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 22
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 6,6
sparkno = 0
nochainid = 1400
sparkxy = -30,-60
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = Low
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -15
air.velocity = -8,-10
down.velocity = -4,-16
down.hittime = 22
guard.velocity = -12            
guard.hittime = 13
guard.slidetime = 13
guard.dist = 640
fall.recovertime = 20


[state 430, slide]
type = velset
trigger1 = animelem = 3
x = 35

[state 430, nothitby]
type = nothitby
trigger1 = animelemtime(1) > 4 && animelemtime(6) < 0
value = ,AP

[state 430, changestate]
type = changestate
triggerall = ailevel
triggerall = animelemtime(5) > 0 && animelemtime(6) < 0
trigger1 = enemynear,numproj > 0 || PlayerIdExist(helper(33333333),var(3))
value = 440



[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = ifelse(p2statetype = L,-18,-9)
persistent = 0
ignorehitpause = 1

[state 232, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Strong Kick
; CNS difficulty: easy
; Description: This move uses "Trip" for the "ground.type" parameter in
;     its HitDef. It's a special type that puts the opponent in a tripped
;     animation as he falls. Also, the hitflag parameter in the HitDef
;     is set to "MAFD". The "D" indicates that a downed opponent can be
;     hit by the attack.
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 35
ctrl = 0
anim = 440
sprpriority = 2

[STATE 440, invun]
type = nothitby
trigger1 = animelemtime(1) > 6 && animelemtime(8) < 0
trigger1 = prevstateno != 430
value = , AP
ignorehitpause = 1

[STATE 440, invun]
type = nothitby
trigger1 = animelemtime(8) < 0
trigger1 = prevstateno = 430
value = , AP
ignorehitpause = 1

[state 210, width]
type = width
trigger1 = animelemtime(3) >= 0 && animelemtime(5) < 0
value = 100,0
ignorehitpause = 1

[state 210, width]
type = width
trigger1 = animelemtime(5) >= 0 && animelemtime(7) < 0
value = 120,0
ignorehitpause = 1

[state 440, vel]
type = velset
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
x = 35

[State 440, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = ifelse(p2statetype = A, 35, 70)
hitflag = MAFD
guardflag = L
pausetime = 10,10
sparkno = 2
sparkxy = -5,-110
hitsound   = S5000, 2
guardsound = S120, 0
ground.type = Trip
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -16,-10
air.velocity = -16,-10
guard.velocity = -32
guard.hittime = 11 ;-10 Better recovery :Moving forward is high risk for her.
guard.slidetime = 11
fall = 1
fall.recover = 0
guard.dist = 640 
fall.recovertime = 45

[state 440, sprpriority]
type = sprpriority
trigger1 = animelem = 6
value = -2

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 440, Not Active]
type = statetypeset
trigger1 = animelemtime(6) = 0
movetype = I

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = N
poweradd= 5
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[state 600, velset]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 110
x = 13

[state 600, gravity]
type = gravity
trigger1 = 1

[state 630, lunge]
type = veladd
trigger1 = animelem = 2
x = 0.5

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 20
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 0
sparkxy = -10,-240
hitsound   = S5000, 0
guardsound = S120, 0
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -4
air.velocity = -4,-8
air.hittime = 16
guard.hittime = 8
guard.velocity = -5
guard.slidetime = 8
guard.dist = 480
fall.recovertime = 20

[state 600, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 600, Not Active]
type = statetypeset
trigger1 = animelemtime(3) = 0
movetype = I

[state 600, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;---------------------------------------------------------------------------
;Jump Med Punch
[Statedef 605]
type    = A
movetype= A
physics = N
poweradd= 10
ctrl = 0
anim = 605
sprpriority = 2

[state 600, velset]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 110
x = 13

[State 605, 1]
type = PlaySnd
trigger1 = Time = 7
value = 200, 1

[state 605, gravity]
type = gravity
trigger1 = 1

[state 605, bounce]
type = velset
trigger1 = movecontact
trigger1 = enemynear,statetype = A
y = -4
persistent = 0
ignorehitpause = 1

[State 605, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 35
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 1
sparkxy = -10,-280
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -8
air.velocity = -4,-8
air.hittime = 28
guard.hittime = 8
guard.velocity = -9
guard.slidetime = 8
guard.dist = 480
fall.recovertime = 30

[state 605, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 605, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[state 605, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;---------------------------------------------------------------------------
;Jump Strong Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 30
ctrl = 0
anim = 610
sprpriority = 2

[state 600, velset]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 110
x = 13

[state 611, jump combo infinite check]
type = varadd
trigger1 = movehit
trigger1 = enemy,statetype != A
v = 29
value = 1
ignorehitpause = 1
persistent = 0

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[state 610, bounce]
type = velset
trigger1 = movehit
trigger1 = enemy,statetype = A
y = -8
persistent = 0
ignorehitpause = 1

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 50
guardflag = HA
priority = 4
pausetime = 14,14
sparkno = 2
sparkxy = -10,-240
hitsound   = 5,4
guardsound = S120, 0
animtype = heavy
ground.type = low
ground.slidetime = 20
ground.hittime  = floor(20/var(29))
ground.velocity = -12
down.bounce = 0
air.velocity = -4,40
guard.hittime = 12
guard.slidetime = 12
guard.velocity = -13
airguard.hittime = 14
airguard.velocity = -2,15
air.fall = 1
fall.recover = 0
guard.dist = 480
fall.recovertime = 40


;[state 610, targetstate]
;type = targetstate
;trigger1 = movehit
;trigger1 = enemy,statetype = A
;value = 614
;ignorehitpause = 1
;persistent = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 610, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[state 610, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;----------------------------------------------------------------------
;Small Ground Bounce - Freeze
[statedef 614]
type = A
movetype = H
physics = N

[State 614, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 614]
type = changeanim
trigger1 = time = 0
value = 5160
ignorehitpause = 1

[state 614, changestate]
type = changestate
trigger1 = hitshakeover
value = 615
;---------------------------------------------------------------------------
;Ground bounce - Going down
[statedef 615]
;Custom Hit state, ground bounce
type = A
movetype = H
physics = N


[state 615, velocity]
type = hitvelset
trigger1 = time = 0
y = 40

[state 615, anim]
type = changeanim
trigger1 = time = 0
value = 5160


[state 615, stop x]
type = velmul
trigger1 = time = 0
x = 0.25


[state 615]
type = gravity
trigger1 = 1

[state 615, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 616

;-----------------------------------------------------------------------------
;Ground Bounce - Impact / bouncing
[statedef 616]
type = A
movetype = H
physics = N
anim = 5160

[state 616, impact]
type = velset
trigger1 = time = 0
y = 0

[State 616, 8]
type = Explod
trigger1 = Time = 0
anim = F62 
pos = 0, 0
ontop = 1
scale = 1.7, 0.5
persistent = 0
ownpal = 1

[State 616, 10]
type = PlaySnd
trigger1 = Time = 0
value = F7,2
persistent = 0

[state 616, shake]
type = envshake
trigger1 = time = 0
ampl = 5
freq = 50
phase = 50
time = 10

[state 616, impact 2]
type = posset
trigger1 = time = 0
y = 0

[state 616, bounce]
type = velset
trigger1 = time = 1
y = -10

[state 616, gravity]
type = gravity
trigger1 = time > 1

[state 616, down]
type = selfstate
trigger1 = time >= 2 
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 5110
;---------------------------------------------------------------------------
;Hard Ground Bounce - Freeze
[statedef 617]
type = A
movetype = H
physics = N

[State 617, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 617]
type = changeanim
trigger1 = time = 0
value = 5160
ignorehitpause = 1

[state 617, changestate]
type = changestate
trigger1 = hitshakeover
value = 618


;---------------------------------------------------------------------------
;Hard Ground bounce - going down
[statedef 618]
;Custom Hit state, ground bounce
type = A
movetype = H
physics = N


[state 618, anim]
type = changeanim
trigger1 = time = 0
value = 5160

[state 618, velocity]
type = hitvelset
trigger1 = time = 0
y = 60


[state 618, stop x]
type = velmul
trigger1 = time = 0
x = 0


[state 618]
type = gravity
trigger1 = 1

[state 618, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 619

;-----------------------------------------------------------------------------
;Hard Ground Bounce - Impact/bounce
[statedef 619]
type = A
movetype = H
physics = N
anim = 5160

[state 619, impact]
type = velset
trigger1 = time = 0
y = 0

[State 619, 8]
type = Explod
trigger1 = Time = 0
anim = F62 
pos = 0, 0
ontop = 1
scale = 2, 1
persistent = 0
ownpal = 1

[State 619, 10]
type = PlaySnd
trigger1 = Time = 0
value = F7,2
persistent = 0

[state 619, shake]
type = envshake
trigger1 = time = 0
ampl = 5
freq = 50
phase = 50
time = 10

[state 619, impact 2]
type = posset
trigger1 = time = 0
y = 0

[state 619, bounce]
type = velset
trigger1 = time = 1
y = -35

[state 619, gravity]
type = gravity
trigger1 = time > 1

[state 619, down]
type = selfstate
trigger1 = time >= 2 
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 5100


;---------------------------------------------------------------------------
;Jump Strong Punch
; CNS difficulty: easy
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 30
ctrl = 0
anim = 615
sprpriority = 2

[State 620, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[state 600, velset]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 110
x = 13

[State 620, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 40
guardflag = HA
priority = 4
pausetime = 18,18
sparkno = 3
sparkxy = -10,-240
hitsound   = 5,4
guardsound = S120, 0
animtype = Med
ground.type = High
ground.slidetime = 20
ground.hittime  = 24
ground.velocity = -4,-24
down.bounce = 0
air.velocity = -4,-28
guard.hittime = 12
guard.slidetime = 12
guard.velocity = -13
airguard.hittime = 14
airguard.velocity = -2,15
air.fall = 0
fall.recover = 0
guard.dist = 480
fall.recovertime = 45

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 620, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[state 620, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------





;---------------------------------------------------------------------------
;Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type    = A
movetype= A
physics = N
juggle  = 3
poweradd= 10
ctrl = 0
anim = 630
sprpriority = 2
facep2 = 1

[State 630, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[state 600, velset]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 110
x = 13

[state 630, gravity]
type = gravity
trigger1 = 1

[State 630, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 20
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 0
sparkxy = -5,-80
hitsound   = S5000, 0
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -6
air.velocity = -4,-12
air.hittime = 18
guard.hittime = 8
guard.velocity = -7
guard.slidetime = 8
guard.dist = 480
fall.recovertime = 20

[state 630, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 600, Not Active]
type = statetypeset
trigger1 = animelemtime(3) = 0
movetype = I

[state 600, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;---------------------------------------------------------------------------
;Jump Medium Kick
; CNS difficulty: easy
[Statedef 635]
type    = A
movetype= A
physics = N
juggle  = 3
poweradd= 20
ctrl = 0
anim = 635
sprpriority = 2

[state 600, velset]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 110
x = 13

[State 635, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[state 600, velset]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 110
x = 13

[state 635, bounce]
type = velset
trigger1 = movecontact
trigger1 = enemynear,statetype = A
y = -10
persistent = 0
ignorehitpause = 1

[state 635, gravity]
type = gravity
trigger1 = 1

[State 635, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 40
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 1
sparkxy = -5,-120
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.velocity = -8,-8
air.hittime = 28
guard.hittime = 12
guard.velocity = -9
guard.slidetime = 12
airguard.hittime = 16
guard.dist = 480
fall.recovertime = 30

[state 635, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 635, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[state 635, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52


;---------------------------------------------------------------------------
; Jumping Roundhouse
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 30
ctrl = 0
anim = 640
sprpriority = 2
facep2 = 1

[state 600, velset]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 110
x = 13

[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[state 611, jump combo infinite check]
type = varadd
trigger1 = movehit = 1
trigger1 = enemy,statetype != A
v = 29
value = 1
ignorehitpause = 1
persistent = 0


[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 60
guardflag = HA
hitflag = MAF
priority = 4
pausetime = 12,12
sparkno = 2
sparkxy = 40,-220
hitsound   = 5,4
guardsound = S120, 0
animtype = heavy
ground.type = low
ground.slidetime = 24
ground.hittime  = floor(24/var(29))
ground.velocity = -16
air.velocity = -2,60
guard.hittime = 14
guard.velocity = -17
guard.slidetime = 14
air.fall = 1
fall.recover = 0
down.bounce = 1
fall.yvelocity = -30
fall.xvelocity = -2
guard.dist = 480
fall.recovertime = 40

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 640, Not Active]
type = statetypeset
trigger1 = animelemtime(7) = 0
movetype = I


[state 640, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1


;---------------------------------------------------------------------------
;Dive Kick
; CNS difficulty: easy
[Statedef 645]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 30
velset = 0,0
ctrl = 0
anim = 645
sprpriority = 2
facep2 = 1



;super jump peak
[state -2, drop damage]
type = varset
trigger1 = pos y <= -900
trigger1 = time = 0
var(9) = 160


;double Jump Height
[state -2, butt drop damage]
type = varSet
trigger1 = pos y <= -700 && pos y > -900
trigger1 = time = 0
var(9) = 150


;super jump any
[state -2, drop damage]
type = varset
trigger1 = pos y >= -950 && pos y < -430
trigger1 = time = 0
var(9) = 140


;normal jump peak
[state -2, drop damage]
type = varset
trigger1 = pos y >= -430 && pos y < -390
trigger1 = time = 0
var(9) = 130


;normal jump any
[state -2, drop damage]
type = varset
trigger1 = pos y >= -390 && pos y < -200
trigger1 = time = 0
var(9) = 120


;small hop
[state -2, drop damage]
type = varset
trigger1 = pos y >= -200 &&pos y < 0
trigger1 = time = 0
var(9) = 100




[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[state 640, gravity]
type = gravity
trigger1 = animelemtime(3) >= 0

[state 640, veladd]
type = velset
trigger1 = animelemtime(3) = 0
x = 12
persistent = 0

[state 641, aim]
type = veladd
triggerall = animelemtime(3) >= 0
trigger1 = command = "holdfwd"
trigger1 = ailevel = 0
trigger2 = p2bodydist x > 0
trigger2 = ailevel > 0
x = 0.65
persistent = 1

[state 641, aim]
type = veladd
triggerall = animelemtime(3) >= 0
trigger1 = command = "holdback"
trigger1 = ailevel = 0
trigger2 = p2bodydist x < -50
trigger2 = ailevel > 0
x = -0.65
persistent = 1


[state 640, veladd]
type = gravity
trigger1 = animelemtime(3) >= 0

[state 640, veladd]
type = gravity
trigger1 = animelemtime(3) >= 0


[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage    = floor(var(9)*0.75),ceil(var(9)*0.1)
guardflag = HA
hitflag = MAFD
priority = 4
pausetime = 10,10
sparkno = 3
sparkxy = -10,-100
hitsound   = 5,4
guardsound = S120, 0
animtype = heavy
id = 645
nochainid = 1400
ground.type = high
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -16
air.velocity = -12,-4
guard.hittime = 35
guard.velocity = -50
guard.slidetime = 35
fall = 1
fall.recover = 0
guard.dist = 480
fall.recovertime = 45

;Ride down mechanic
[state 645, Ride down]
type = targetbind
trigger1 = movehit
pos = 0, -60

[state 645, targetfacing]
type = targetfacing
trigger1 = movehit
value = -1

[state 645, state of ride down]
type = targetstate
trigger1 = movehit
value = 655
id = 645

[state 645, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 645, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
trigger1 = !movehit
value = 646

[state 645, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
trigger1 = movehit
value = 650


;---------------------------------------------------------------------------
;1st Landing
[statedef 646]
type = C
movetype = A
physics = N
anim = 646
movehitpersist = 1

[state 646, stop]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 641, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 5,2
ownpal = 1

[state 646, on ground]
type = posset
trigger1 = time = 0
y = Ifelse(movehit =1,-20,0)

[state 646, playsnd]
type = playsnd
trigger1 = time = 0
value = S645,0

[State 642, quakes]
type = envshake
trigger1 = time = 0
time = 20
ampl = -12

[State 646, 3]
type = HitDef
trigger1 = Time = 0
attr = C, SA
damage    = floor(var(9))
guardflag = HA
hitflag = FD
priority = 4
pausetime = 7,7
sparkno = -1
sparkxy = -90,0
hitsound   = 5,4
guardsound = S120, 0
animtype = heavy
id = 645
nochainid = 1400
ground.type = high
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -16
air.velocity = -12,-4
guard.hittime = 14
guard.velocity = -17
guard.slidetime = 14

[state 646, targetstate]
type = targetstate
trigger1 = movehit
value = 656

[state 646, bounce]
type = velset
trigger1 = time = 14
y = -10

[state 646, statetypeset]
type = statetypeset
trigger1 = time = 13
statetype = A
movetype = I

[state 646, gravity]
type = gravity
trigger1 = time > 14

[state 646, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
trigger1 = !movehit
value = 647

[state 646, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
trigger1 = movehit
value = 651



;--------------------------------------------------------------------------
; 2nd landing
[statedef 647]
type = C
movetype = I
physics = C
anim = 647

[state 646, stop]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 646, on ground]
type = posset
trigger1 = time = 0
y = 0

[state 647, end]
type = changestate
trigger1 = animtime = 0
value = 648



;--------------------------------------------------------------------------
;Get off
[statedef 648]
type = S
movetype = I
physics = C
anim = 648

[state 648, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 648, velset]
type = velset
trigger1 = animelemtime(1) >= 0
x = -18

[state 648, posset]
type = posset
trigger1 = time = 10
y = 0

[state 648, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------
;first bounce
[statedef 650]
type = C
movetype = A
physics = N
anim = 646
movehitpersist = 1

[state 651, stop]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 651, on ground]
type = posset
trigger1 = time = 0
y = -20

[state 651, playsnd]
type = playsnd
trigger1 = time = 0
value = S645,0

[State 651, quakes]
type = envshake
trigger1 = time = 0
time = 20
ampl = -12

[State 651, 3]
type = HitDef
trigger1 = Time = 0
attr = C, SA
damage    = Floor(var(9)*0.75)
guardflag = HA
hitflag = FD
priority = 4
pausetime = 7,7
sparkno = 2
sparkxy = -10,-40
hitsound   = S5000, 2
guardsound = S120, 0
animtype = heavy
id = 645
nochainid = 1400
ground.type = high
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -16
air.velocity = -12,-4
guard.hittime = 14
guard.velocity = -17
guard.slidetime = 14
p2stateno = 656

[state 651, bounce]
type = velset
trigger1 = time = 14
y = -10

[state 645, targetfacing]
type = targetfacing
trigger1 = movehit
value = -1

[state 651, gravity]
type = gravity
trigger1 = time > 14

[state 651, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 651


;--------------------------------------------------------------------------
; 2nd landing
[statedef 651]
type = C
movetype = A
physics = C
anim = 647

[state 652, stop]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 652, on ground]
type = posset
trigger1 = time = 0
y = -30

[state 652, end]
type = changestate
trigger1 = animtime = 0
trigger1 = numtarget(645)
trigger1 = target,alive
value = 652

[state 652, end if already dead]
type = changestate
triggerall = animtime = 0
trigger1 = !target,alive
trigger2 = !numtarget(645)
value = 648
;--------------------------------------------------------------------------
;Facesitting skunk
[statedef 652]
type = C
movetype = A
physics = C
anim = 649
sprpriority = 2

[state 652, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 652, width]
type = width
trigger1 = 1
edge = 250,0

[state 652, velset]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 652, posset]
type = posset
trigger1 = time = 0
y = -20

[state 652, posset]
type = posset
trigger1 = movehit
trigger1 = time = 0
y = 0

[state 652, envshake]
type = envshake
trigger1 = time = 0
ampl = -12
time = 30
freq = 60
phase = 60

[state 652, snd]
type = playsnd
trigger1 = time = 0
value = S52,0

[state 652, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
pos = 160+(target,const(size.head.pos.y)/2), 0
id = 645

[state 652, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(2) >= 0 && animelemtime(30) < 0
pos = 180,0
pos = 160+(target,const(size.head.pos.y)/2), 0

[state 652, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(30) >= 0 
pos = 160+(target,const(size.head.pos.y)/2), 0
id = 645

[state 652, target]
type = targetstate
trigger1 = time = 0
value = 657

[state 1151, damage]
type = targetlifeadd
triggerall = enemy,name != "SOR2"
trigger1 = time > 6 && time < 34
value = floor(-5*fvar(10))
persistent = 2

[state 652, damage]
type = targetlifeadd
triggerall = enemy,name = "SOR2"
trigger1 = time > 6 && time < 34
value = -10
persistent = 2

[state 652, Fart snd]
type = playsnd
trigger1 = animelemtime(2) = 0
value = S650,2;S1000,1

[state 652, Fart snd]
type = playsnd
trigger1 = animelemtime(2) = 0
value = S650,2;S1000,1

[state 652, hitadd]
type = hitadd
trigger1 = time = 6 
value = 1


[state 810, Fart FX]
type = explod
trigger1 = time = 6
anim = 2020
postype = p1
scale = const(size.xscale)*1.5,const(size.yscale)*1.5
sprpriority = 1
bindtime = 0
ownpal = 1
pos = 140,-120

[state 1151, envshake]
type = envshake
trigger1 = time = 6
ampl = -2
time = 28

[state 652, gas fx]
type = explod
trigger1 = time > 6 && time < 34
anim = 4011
postype = p1
pos = 180,-15
bindtime = 0
scale = const(size.xscale)*2.25,const(size.yscale)*2.25
persistent = 4
sprpriority = 1
vel = (random%10)-5,(random%4)-10
accel = 0,-0.2
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = numtarget(645)
trigger1 = time = 46 
var(0) = target(645),id
ignorehitpause = 1

[State 652, 2]
type = Helper
trigger1 = time = 46
helpertype = normal
name = "Gas Throw"
ID = 4000
stateno = 4050
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 652, end]
type = changestate
trigger1 = animtime = 0
value = 648

;--------------------------------------------------------------------------
;=================
;  Rode Down
;=================

[statedef 655]
type = A
movetype = H
physics = N

[state 655, anim]
type = changeanim2
trigger1 = time = 0
value = 655

[State 655, 2]
type = changeState
trigger1 = !gethitvar(isbound)
value = 656

;==========================================================================
; down prone
[statedef 656]
type = L
movetype = H
physics = N

[state 655, anim]
type = changeanim2
trigger1 = time = 0
value = 650

[state 655, pos y]
type = posset
trigger1 = time = 0
y = 0


[state 655, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 655, changestate]
type = changestate
trigger1 = enemy,stateno = 652
value = 657

[state 655, end]
type = selfstate
trigger1 = time = 46
value = 5100
;-------------------------------------------------------------------------
; Facesat Victim
[statedef 657]
type = L
movetype = H
physics = N

[state 655, anim]
type = changeanim2
trigger1 = time = 0
value = 651


[state 655, end]
type = selfstate
trigger1 = animtime = 0
value = 5110

;===========================================================================
;                      Crushed State
;===========================================================================
; Moderate Crushed State
[statedef 660]
type    = L
movetype= H
physics = N
ctrl = 0
velset = 0,0

[state 660, 1]
type = changeanim
trigger1 = time = 0
value = 5110

[State 660, flatten]
type = AngleDraw
trigger1 = time > 0
value = 0
scale = 1.05,0.8

[state 660, on ground]
type = posset
trigger1 = 1
y = 0

[state 660, passthrough]
type = playerpush
trigger1 = 1
value = 0


[State 660, Width]
type = Width
trigger1 = time > 0
value = 0,0

[State 660, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[state 660, invunerable]
type = nothitby
trigger1 = 1
value = SCA,AA

[State 660, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 660, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 660, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 660, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 660, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 660, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 660, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 660, 11] ;If just died
type = selfState
triggerall = !alive && p2stateno = 0 && roundstate = 3
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

;[State 660, 12]
;type = VarSet
;trigger1 = SysVar(0)
;trigger1 = Time = 0
;sysvar(0) = 0

[State 660, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 660, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 660, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 660, get up]
type = selfstate
triggerall = life >= 1
trigger1 = time > 120 ;95
value = 5110

;===========================================================================
;      Wall Bounce State - Bring to Player
;===========================================================================
[statedef 670]
type = A
movetype = H
physics = N

[State 672, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 670]
type = changeanim
trigger1 = time = 0
value = 5030
ignorehitpause = 1

[state 670, changestate]
type = changestate
trigger1 = hitshakeover
value = 671
;------------------------------------------------------------------------

[statedef 671]
type    = A
movetype= H
physics = N

[state 671, anim]
type = changeanim
trigger1 = anim != 5030
value = 5030

[State 670, Velocity]
type = velset
trigger1 = Time = 0
x = facing * gethitvar(xvel)
y = gethitvar(yvel)

[State 670, Gravity]
type = veladd
trigger1 = 1
y = 0.44


[State 670, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 180
trigger2 = FrontEdgeBodyDist < 180
value = 1
movecamera = 0,1

[State 670, Hit wall]
type = ChangeState
triggerall = Pos y < 0
trigger1 = BackEdgeBodyDist <= 180
trigger2 = FrontEdgeBodyDist <= 180
value = 672

[State 670, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Hit wall - part 2 bounce off wall
[statedef 672]
type    = A
movetype= H
physics = N

[State 672, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 672, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 672, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 672, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 672, Spark]
type = Explod
trigger1 = Time = 1
anim = F72
pos = 0,const(size.mid.pos.y)
postype = back
sprpriority = 3
ownpal = 1

[state 672, anim]
type = changeanim
trigger1 = anim != 5030
value = 5030

[State 672, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,0

[State 672, State]
type = ChangeState
trigger1 = time = 10
value = 673
;--------------------------------------------------------------------------
;wall bounce - part 3 fall toward ground
[Statedef 673]
type    = A
movetype= H
physics = N

[State 673, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -35

[State 673, Vel X]
type = VelSet
trigger1 = Time = 0
x = abs(p2bodydist x*0.02)

[State 673, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[state 673, gravity]
type = gravity
trigger1 = 1

[State 673, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 673, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 673, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 673, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 673, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;===========================================================================
; Neutral Wall Bounce State
;===========================================================================

[statedef 675]
type = A
movetype = H
physics = N

[State 675, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 675, anim]
type = changeanim
trigger1 = time = 0
value = 5030
ignorehitpause = 1

[state 675, changestate]
type = changestate
trigger1 = hitshakeover
value = 676
;------------------------------------------------------------------------

[statedef 676]
type    = A
movetype= H
physics = N

[State 676, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[state 676, anim]
type = changeanim
trigger1 = time = 0
value = 5030

[State 676, Gravity]
type = gravity
trigger1 = 1

[State 676, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 180
trigger2 = FrontEdgeBodyDist < 180
value = 1
movecamera = 0,1

[State 676, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 180
trigger2 = FrontEdgeBodyDist <= 180
value = 677

[State 676, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Hit wall - part 2 bounce off wall
[statedef 677]
type    = A
movetype= H
physics = N

[State 677, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 677, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[STATE 677, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State 677, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 677, envshake]
type = envshake
trigger1 = time =0
ampl = -12
time = 12


[State 677, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 677, Spark]
type = Explod
trigger1 = Time = 1
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3
ownpal = 1

[State 677, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 5030

[State 677, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,0

[State 677, State]
type = ChangeState
trigger1 = time = 10
value = 678
;--------------------------------------------------------------------------
;wall bounce - part 3 fall toward ground
[Statedef 678]
type    = A
movetype= H
physics = N

[State 678, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 678, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -28

[State 678, Vel X]
type = VelSet
trigger1 = Time = 0
x = 6

[State 678, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[state 678, gravity]
type = gravity
trigger1 = 1

;[State 678, Gravity]
;type = VelAdd
;trigger1 = 1
;y = .35

[State 678, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 678, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 678, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 678, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 678, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------







;---------------------------------------------------------------------------
;Stinkface - Poison
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2


[State 800, 1]
type = HitDef
triggerall = p2movetype != A
Trigger1 = Time = 0
attr = S, NT         
hitflag = M-          
priority = 1, Miss    
sparkno = -1          
p1sprpriority = 2    
id = 800                    
p1facing = 1
p2facing = 1        
p1stateno = 810       
p2stateno = 820       
guard.dist = 0        
fall = 1   
fall.recover = 0

[State 800, 1]
type = HitDef
triggerall = p2movetype = A
Trigger1 = Time = 0
attr = S, NT         
hitflag = M-          
priority = 1, Miss    
sparkno = -1          
p1sprpriority = 2    
id = 800                    
p1facing = 1
p2facing = 1        
p1stateno = 810       
p2stateno = 822       
guard.dist = 0        
fall = 1    
fall.recover = 0    

[state 800, Not Active]
type = statetypeset
trigger1 = animelemtime(3) = 0
movetype = I  

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------
;Grab Escape - p2
[statedef 805]
type = A
movetype = H
physics = S
ctrl = 0
facep2 = 1
sprpriority = 4

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = SelfAnimExist(805)
value = 805

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = !selfanimexist(805)
value = 120

;[state 1400, dim]
;type = bgpalfx
;trigger1 = time = 0
;time = 8
;mul = 200,200,200

;[state 805, freeze]
;type = pause
;trigger1 = time = 0
;time = 8
;endcmdbuftime = 8

;[state 805, sound]
;type = playsnd
;trigger1 = time = 0
;value = S805,0

[state 805, pos y]
type = posset
trigger1 = time = 0
y = 0

[state 805, velset]
type = velset
trigger1 = time = 10
x= -32

[state 805, nothitby]
type = nothitby
trigger1 = 1
value = SCA



[state 805, end]
type = selfstate
trigger1 = time = 35
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Grab Escape - p1
[statedef 806]
type = A
movetype = H
physics = S
ctrl = 0


[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = SelfAnimExist(130)
value = 130

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = !selfanimexist(805)
value = 130

[state 1400, dim]
type = bgpalfx
trigger1 = time = 0
time = 8
mul = 200,200,200

[state 805, freeze]
type = pause
trigger1 = time = 0
time = 12
endcmdbuftime = 8

[state 805, sound]
type = playsnd
trigger1 = time = 0
value = S805,0

[state 805, pos y]
type = posset
trigger1 = time = 0
y = 0

[state 806, velset]
type = velset
trigger1 = time = 0
y = 0

[state 805, turn]
type = turn
trigger1 = prevstateno = 820
trigger1 = time = 0
persistent = 0
ignorehitpause

[state 805, velset]
type = velset
trigger1 = time = 10
x= -32

[state 805, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 805, end]
type = selfstate
trigger1 = time = 35
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 810]
type    = A
movetype= A
physics = N
anim = 810
sprpriority = 2
poweradd = 100

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 180,180

[state 810, tech]
type = changestate
triggerall = numtarget(800)
trigger1 = target(800),stateno = 805
value = 806
persistent = 1

[state 810, screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,0
value = 1

[State 810, Holding Direction?]
type = VarSet
trigger1 = Time = 0
var(2) = command = "holdback"

[State 810, Throw Sound]
type = PlaySnd
trigger1 = time = 0
value = 1, 1

[state 810, jump]
type = velset
trigger1 = animelem = 2
y = -3
x = 1

[state 810, stop]
type = velset
trigger1 = animelem = 3
y = 0
x = 0



[State 810, Bind 1]
type = bindtotarget
trigger1 = animelem = 3  
pos = -40, 0,head

[State 810, holdfwd - Turn 6] ;If was holding fwd before, turn now
type = Turn
trigger1 = var(2)
trigger1 = AnimElem = 5

[State 810, holdfwd - Pos 6] ;If was holding fwd before, move a little
type = PosAdd
trigger1 = var(2)
trigger1 = AnimElemtime(5) = 7
x = 80

[State 810, holdfwd - Turn Target 6] ;If was holding fwd before, turn target too
type = TargetFacing
trigger1 = var(2)
trigger1 = AnimElem = 5
value = -1

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 120,120

[state 810, 1 side of enemy face]
type = explod
trigger1 = time > 38 && time < 64
anim = 4011
postype = p1
pos = 30,0
bindtime = 0
scale = const(size.xscale)*1.25,const(size.yscale)*1.25
persistent = 4
sprpriority = -1
vel = 2+random%4,-1-random%4; (random%8),-(random%4)-2
ownpal = 1
accel = 0,-0.6

[state 810, other side of enemy face]
type = explod
trigger1 = time > 38 && time < 64
anim = 4011
postype = p1
pos = -60,0
bindtime = 0
scale = const(size.xscale)*1.25,const(size.yscale)*1.25
persistent = 4
sprpriority = -2
vel = 2-random%4,-2-random%4;(Random%2),-(random%8)-4
ownpal = 1
accel = 0,-0.6

[state 810, Fart FX]
type = explod
trigger1 = time = 38
anim = 2020
postype = p1
scale = const(size.xscale)*1.5,const(size.yscale)*1.5
sprpriority = -1
bindtime = 0
ownpal = 1
pos = 0,-50

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = time >= 38  && time < 68
value = -6
persistent = 3

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = time = 68
value = -20
persistent = 0

[state 1151, envshake]
type = envshake
trigger1 = time = 39
ampl = -2
time = 29

[state 810, playsnd]
type = playsnd
trigger1 = animelemtime(6) = 0
value = S810,1;S810,0

[state 810, playsnd]
type = playsnd
trigger1 = animelemtime(6) = 0
value = S810,1;S810,0

[State 810, Throw 11]
type = TargetState
trigger1 = time = 71
value = 821

[State 1000, 2]
type = Helper
trigger1 = time = 71
helpertype = normal
name = "Gas Throw"
ID = 4000
stateno = 4050
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 811
;---------------------------------------------------------------------------
;Jump off
[Statedef 811]
type    = A
movetype = I
physics = N

[state 811, screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,0
value = 1

[state 811, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 811, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 811, gravity]
type = gravity
trigger1 = time > 2


[state 50, posadd]
type = posadd
trigger1 = time = 0
y = 80

[state 810, velset]
type = velset
trigger1 = time = 0
y = -8
x = -10

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[state 50, steering]
type = veladd
trigger1 = prevstateno = 41
trigger1 = command = "holdfwd"
trigger1 = vel x < 12
x = 0.35

[state 50, steering]
type = veladd
trigger1 = prevstateno = 41
trigger1 = command = "holdback"
trigger1 = vel x > -12
x = -0.35

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > Const720p(-8)
trigger1 = SelfAnimExist(anim + 3)
trigger1 = anim >= 41 && anim <= 43
persistent = 0
value = Anim + 3

[state 810, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52
ctrl = 1



;---------------------------------------------------------------------------
;Techable Thrown
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -2

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[state 810, screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,0
value = 0

[state 820, tech throw]
type = changestate
triggerall = time < 12
trigger1 = ailevel = 0
trigger1 = command = "holdfwd" || command = "holdback"
trigger1 = command = "y" || command = "b" || command = "z" || command = "c"
trigger2 = command = "x" && command = "a"
trigger3 = ailevel > 4 
trigger3 = random < (ailevel * ifelse(ailevel>7,1,3))
value = 805

[state 4020, color]
type = palFX
trigger1 = time > 28
time = 1
mul = 120,0,120

;---------------------------------------------------------------------------
;Untechable Thrown
[Statedef 822]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -2

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[state 810, screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,0
value = 0

[state 4020, color]
type = palFX
trigger1 = time > 28
time = 1
mul = 120,0,120


[State 821, 4] ;Hit ground
type = selfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

[state 821, selfstate]
type = selfstate
trigger1 = time = 300
trigger2 = !gethitvar(isbound)
trigger2 = time > 90
value = 5050
;---------------------------------------------------------------------------

;Thrown by Kung Fu Throw - thrown into the air
; (a custom gethit state)
; Description: This state has the opponent flying through the air and
;     falling down onto the ground. The SelfState controller sets the
;     opponent back using to his own state file when he his the ground.
;     Controllers 821,2 and 821,3 allow the opponent to recover by
;     hitting his recovery command when he is falling.
[Statedef 821]
type    = A
movetype= H
physics = N
velset = -45,-16
poweradd = 80

[State 821, 1] ;Gravity
type = gravity
Trigger1 = 1

[state 810, screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,0
value = 0

[state 821, anim]
type = changeanim
trigger1 = time = 0
value = 5000

[state 4020, color]
type = palFX
trigger1 = 1
time = 60
mul = 120,0,120

;[State 821, 2] ; Recover near ground (use ChangeState)
;type = ChangeState
;triggerall = Vel Y > 0
;triggerall = Pos Y >= -20
;triggerall = alive
;triggerall = CanRecover
;trigger1 = Command = "recovery"
;value = 5200 ;HITFALL_RECOVER

;[State 821, 3] ; Recover in mid air (use SelfState)
;type = SelfState
;triggerall = Vel Y > 0
;triggerall = alive
;triggerall = CanRecover
;trigger1 = Command = "recovery"
;value = 5210 ;HITFALL_AIRRECOVER

[State 821, 4] ;Hit ground
type = selfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground


;---------------------------------------------------------------------------
; Skunk Blast L
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 75
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[state 1000-1020, Bending over is ducking]
type = statetypeset
trigger1 = animelem = 6
statetype = C

[state X, AI charge limiter]
type = varset
trigger1 = time = 0
var(41) = 0

[state 1000, Speed]
type = varset
trigger1 = time = 0
var(23) = 15


[state 1000, Time]
type = varset
trigger1 = time = 0
var(24) = 65


[state 1000, explod]
type = explod
trigger1 = animelemtime(8) = 0
anim = 1002
sprpriority = 4
bindtime = -1
id = 1002
removetime = -2
ignorehitpause = 0
scale = const(size.xscale),const(size.yscale)
ownpal = 1

[State 1000, 2]
type = null;HitDef
trigger1 = animelem = 7
attr = S, SA
animtype  = heavy
damage    = 30,3
guardflag = MA
pausetime = 10,0
sparkno = 3
sparkxy = 40,-200
hitsound   = S1000,3
guardsound = S120, 0
ground.type = low
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -12
air.velocity = -8,-2
guard.velocity = -22              
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -18,-2 
airguard.hittime = 22
;fall = 1
p2facing = 1
fall.recover = 0
guard.dist = 640

;[State 1000, Fake Projectile for AI] 
;type = projectile
;trigger1 = animelem = 7
;attr = S, SP
;hitflag = MA
;getpower = 0
;givepower = 0
;projid = 4999
;projanim = 4999
;hitonce = 1
;projhits = 0
;projremovetime = 12
;projscale = Const(size.xscale),Const(size.yscale)
;offset = 100,-150
;velocity = 6,0
;damage    = 0,0
;projpriority  = 1
;guardflag = MA
;pausetime = 1,15
;sparkno = -1
;sparkxy = 0,0
;hitsound   = 5,4
;guardsound = S120, 0
;ground.type = high
;ground.slidetime = 0
;ground.velocity = 0,0
;guard.slidetime = 0
;ground.hittime  = 0
;guard.hittime = 0
;guard.velocity = 0
;airguard.velocity = 0
;ground.velocity = 0
;air.velocity =  0


[state 1000, velset]
type = velset
trigger1 = animelem = 5
x = 5

[state 1000, snd]
type = playsnd
trigger1 = animelem = 8
value = S1000, 0;S1000,0 ;S1000, 6


[state 1000, corner pushback]
type = veladd
trigger1 = numhelper(4000)
trigger1 = helper(4000),movehit
trigger1 = enemynear,backedgebodydist < 30
x = -18
persistent = 0
ignorehitpause =1 


;[state 1000, nothitby]
;type = nothitby
;trigger1 = animelem = 8
;value = ,AP
;time = 6
;ignorehitpause = 1

[State 1000, 2]
type = Helper
trigger1 = numhelper(4000) < 2
trigger1 = animelem = 8
helpertype = normal
name = "Gas Light"
ID = 4000
stateno = 4000
pos = 170,-220
postype = p1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Skunk Blast H
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1010
ctrl = 0
sprpriority = 2

[state 1000-1020, Bending over is ducking]
type = statetypeset
trigger1 = animelem = 6
statetype = C

[state X, AI charge limiter]
type = varset
trigger1 = time = 0
var(41) = 0

[state 1010, Speed]
type = varset
trigger1 = time = 0
var(23) = 24


[state 1010, Time]
type = varset
trigger1 = time = 0
var(24) = 40

[State 1010, 2]
type = null; HitDef
trigger1 = animelem = 7
attr = S, SA
animtype  = back
damage    = 30,3
guardflag = MA
pausetime = 10,0
sparkno = 3
sparkxy = 40,-200
hitsound   = S1000,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -12,0
air.velocity = -8,-6
guard.velocity = -18              
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -14,-3 
airguard.hittime = 22
fall = 0
p2facing = 1
fall.recover = 0
guard.dist = 640

;[State 1000, 2nd Projectile, no poison effect] 
;type = projectile
;trigger1 = animelemtime(9) = 4
;projid = 1010
;projanim = 4000
;projhitanim = 4011
;projremovetime = var(24)
;attr = S, SP
;animtype  = Hard
;damage    = 30,6
;guardflag = MA
;hitflag = MA
;velocity = var(23),0
;getpower = 10
;givepower = 10
;postype = p1
;projscale = const(size.xscale),const(size.yscale)
;offset = 100,-150
;pausetime = 2,6
;sparkno = -1
;sparkxy = -10,-60
;hitsound   = S1000,4
;hitonce = 1
;guardsound = S120, 0
;ground.type = high
;ground.slidetime = 20
;ground.hittime  = 20
;ground.velocity = -30,0
;air.velocity = -18,-4
;id = 4000
;p2facing = 1
;guard.velocity = -30            
;guard.hittime = 16
;guard.slidetime = 16
;airguard.velocity = -20,-2 
;guard.kill = 1
;guard.dist = 85


[state 1000, velset]
trigger1 = animelem = 5
type = velset
x = 10

[state 1000, explod]
type = explod
trigger1 = animelemtime(8) = 0
;trigger2 = animelemtime(9) = 4
anim = 1002
sprpriority = 4
bindtime = -1
id = 1002
removetime = -2
ignorehitpause = 0
scale = const(size.xscale),const(size.yscale)
ownpal = 1

[state 1010, snd]
type = playsnd
trigger1 = animelemtime(8) = 0
;trigger2 = animelemtime(9) = 4
value = S1000,0;S1000,0

[State 1010, 2]
type = Helper
trigger1 = numhelper(4000) < 2
trigger1 = animelemtime(8) = 0
persistent = 0
helpertype = normal
name = "Gas Heavy"
ID = 4000
stateno = 4010
pos = 170,-220
scale = const(size.xscale),const(size.yscale)
postype = p1
ownpal = 1
ignorehitpause = 1

[state 1000, corner pushback]
type = veladd
trigger1 = numhelper(4000)
trigger1 = helper(4000),movehit
trigger1 = enemynear,backedgebodydist < 30
x = -21
persistent = 0
ignorehitpause =1 

;[state 1000, nothitby]
;type = nothitby
;trigger1 = animelem = 8
;value = ,AP
;time = 6
;ignorehitpause = 1

[State 1010, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Skunk Blast EX
[Statedef 1020]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1020
ctrl = 0
sprpriority = 2

[state 1000-1020, Bending over is ducking]
type = statetypeset
trigger1 = animelem = 6
statetype = C

[state X, AI charge limiter]
type = varset
trigger1 = time = 0
var(41) = 0

[state 1020, cloud distance set]
type = varset
trigger1 = time = 0
var(23) = 24

[state 1000, cloud distance set]
type = varset
trigger1 = time = 0
var(24) = 60

[state 1020, poweradd]
type = poweradd
trigger1 = time = 3
value = -500

;[state 1020, AP]
;type = Nothitby
;trigger1 = numhelper(4030) > 0
;trigger2 = numproj > 0
;value = ,AP
;ignorehitpause = 1

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
trigger1 = time < 45
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1020, snd]
type = playsnd
trigger1 = animelemtime(8) = 0
trigger2 = animelemtime(12) = 2
;trigger3 = animelemtime(9) = 8
value = S1000,0;S1000,0
persistent = 1

[State 1020, 2]
type = null
trigger1 = animelem = 5
attr = S, SA
animtype  = back
damage    = 20,2
guardflag = MA
pausetime = 12,12
sparkno = 3
getpower = 0
sparkxy = 40,-200
hitsound   = S1000,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -12,0
air.velocity = -8,-8
guard.velocity = -18              
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -14,-3 
airguard.hittime = 22
fall = 0
p2facing = 1
fall.recover = 0
guard.dist = 640

[state 1020, velset]
trigger1 = animelem = 5
type = velset
x = 15

[state 1020, explod]
type = explod
triggerall = numexplod(1002) < 2
trigger1 = animelemtime(8) = 0
trigger2 = animelemtime(12) = 0
;trigger3 = animelemtime(9) = 8
anim = 1002
sprpriority = 4
bindtime = -1
id = 1002
removetime = -2
ignorehitpause = 0
scale = const(size.xscale),const(size.yscale)
ownpal = 1

[State 1020, Projectile 2] 
type = null
trigger1 = animelemtime(9) = 8
projid = 1010
projanim = 4000
projhitanim = 4011
projremovetime = var(24)
attr = S, SP
animtype  = Hard
damage    = 35,4
guardflag = MA
hitflag = MA
velocity = var(23),0
getpower = 10
givepower = 10
postype = p1
projscale = const(size.xscale),const(size.yscale)
offset = 170,-220
pausetime = 2,6
sparkno = -1
sparkxy = -10,-60
hitsound   = S1000,4
hitonce = 1
guardsound = S120, 0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -40,0
air.velocity = -18,-4
id = 4000
p2facing = 1
guard.velocity = -24           
guard.hittime = 10
guard.slidetime = 10
airguard.velocity = -20,-2 
guard.kill = 1
guard.dist = 85
ownpal = 1

;[State 1020, Projectile 3] 
;type = projectile
;trigger1 = animelemtime(9) = 2
;projid = 1010
;projanim = 4000
;projhitanim = 4011
;projremovetime = var(24)
;attr = S, SP
;animtype  = Hard
;damage    = 30,6
;guardflag = MA
;hitflag = MA
;velocity = var(23),0
;getpower = 10
;givepower = 10
;postype = p1
;projscale = const(size.xscale),const(size.yscale)
;offset = 100,-150
;pausetime = 2,6
;sparkno = -1
;sparkxy = -10,-60
;hitsound   = S1000,4
;hitonce = 1
;guardsound = S120, 0
;ground.type = high
;ground.slidetime = 18
;ground.hittime  = 18
;ground.velocity = -10,0
;air.velocity = -4,-4
;id = 4000
;p2facing = 1
;guard.velocity = -16           
;guard.hittime = 12
;guard.slidetime = 12
;airguard.velocity = -4,-2 
;guard.kill = 1
;guard.dist = 85
;ownpal = 1

[State 1020, 2]
type = Helper
trigger1 = animelemtime(8) = 0
persistent = 0
helpertype = normal
name = "EX Gas First"
ID = 4030
stateno = 4030
pos = 170,-220
postype = p1
ownpal = 1
ignorehitpause = 1

[State 1020, 2]
type = Helper
trigger1 = animelemtime(12) = 0
persistent = 0
helpertype = normal
name = "EX Gas Second"
ID = 4031
stateno = 4030
pos = 170,-220
postype = p1
ownpal = 1
ignorehitpause = 1

[state 1020, corner pushback]
type = veladd
trigger1 = numhelper(4030)
trigger1 = helper(4030),movehit
trigger1 = enemynear,backedgebodydist < 30
x = -18
persistent = 0
ignorehitpause =1 

;[State 1020, 2]  ;Just two
;type = Helper
;trigger1 = animelemtime(9) = 8
;persistent = 0
;helpertype = normal
;name = "EX Gas Third"
;ID = 4031
;stateno = 4030
;pos = 170,-220
;postype = p1
;ownpal = 1
;ignorehitpause = 1

[state 1000, nothitby]
type = nothitby
trigger1 = animelem = 8
value = ,AP
time = 8
ignorehitpause = 1

;[State 1020, 2]
;type = Helper
;trigger1 = animelem = 8
;persistent = 0
;helpertype = normal
;name = "Gas EX"
;ID = 4001
;stateno = 4030
;pos = 100,-150
;postype = p1
;ownpal = 1
;ignorehitpause = 1

[State 1020, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------
;Sommersault Spray
[statedef 1050]
type = A
movetype = A
physics = N
anim = 1050
velset = 0,0
ctrl = 0
sprpriority = -2

[state 1051, velset]
type = velset
trigger1 = animelemtime(3) = 0
x = 2
y = -27

[state 1051, playsnd]
type = playsnd
trigger1 = animelemtime(2) = 0
value = S1050,1

[state 1051, nothitby]
type = nothitby
trigger1 = animelemtime(4) < 0
value = A

[state 1051, movehit]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause = 1

[State 1051, 3]
type = HitDef
trigger1 = animelemtime(3) > 0 && animelemtime(5) < 0
attr = A, SA
damage = 40,ifelse(p2statetype = A,12,4)
persistent = 0
hitflag = MAF
guardflag = MA
priority = 6
pausetime = 14,14
sparkno = 3
sparkxy = -10,-240
hitsound   = 5,4
guardsound = S120, 0
animtype = up
ground.type = HIGH
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -2,-36
air.velocity = -2,-32
guard.hittime = 12
p1sprpriority = -2
p2sprpriority = 2
guard.slidetime = 12
guard.velocity = -24
airguard.hittime = 14
airguard.velocity = -6,-24
fall = 1
fall.recover = 0
guard.dist = 480
fall.recovertime = 40

[state 1051, frt sound]
type = playsnd
trigger1 = animelemtime(7)= 0
value = S1050,0

[state 1051, Helperblast]
type = Helper
trigger1 = animelemtime(8) = 0
trigger1 = !numhelper(1050) 
stateno = 1055
id = 1050
postype = p1
pos = 288,-474
ownpal = 1

[state 1151, gas fx]
type = explod
trigger1 = animelemtime(7) > 0 && animelemtime(9) < 0
anim = 4011
postype = p1
pos = 296,-478
bindtime = 0
scale = const(size.xscale)*1,const(size.yscale)*1
persistent = 4
sprpriority = 4
vel = (random%4)+6,-8
accel = 0,-0.2
ownpal = 1

[state 1051, velmul]
type = velmul
trigger1 = animelemtime(7) = 0
x = 0.5
y = 0.5

[state 1051, gravity]
type = gravity
trigger1 = animelemtime(7) < 0 || animelemtime(9) > 0
trigger1 = pos y < -1

[state 1051, veladd]
type = veladd
trigger1 = animelemtime(9) = 0
x = -4
y = 6

[state 1050, Not Active]
type = statetypeset
trigger1 = animelemtime(9) = 0
movetype = I

[state 1051, Landing]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1051

;---------------------------------------------------------------------------
;Landing Sommersault Light
[statedef 1051]
type = C
movetype = I
physics = C
anim = 1051
velset = 0,0
ctrl = 0

[state 1052, landing]
type = posset
trigger1 = time = 0
y = 0

[state 1052, end]
type = changestate
trigger1 = animtime = 0
ctrl = 1
value = 0
;--------------------------------------------------------------------------
;Sommersault Gas
[statedef 1055]
type = A
movetype = A
physics = N
anim = 1055
sprpriority = 4
velset = 4,-4

[state 1055, nothitby]
type = nothitby
trigger1 = 1
value = SCA,AA,AT
ignorehitpause = 1

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[State 1050, 5] 
type = hitdef
trigger1 = animelemtime(6) < 0
persistent = 0
attr = A, SP
animtype  = Back
damage    = 60,ifelse(p2statetype = A,18,6)
guardflag = MA
hitflag = MAF
pausetime = 8,8
sparkno = -1
sparkxy = -10,-60
hitsound   = S1000,4
hitonce = 1
p2facing = 1
guardsound = S120, 0
ground.type = high
ground.slidetime = 24
ground.hittime  = 18
ground.velocity = -21,-21
air.velocity = -18,-18
fall = 1
id = 1050
p2sprpriority = 2
guard.velocity = -32            
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = -8,-16
airguard.hittime = 16
guard.kill = 1
guard.dist = 640

[State 0, VarSet]
type = VarSet
trigger1 = movehit
trigger1 = numtarget(1050) 
var(0) = target(1050),id
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = NumTarget(1050)
trigger1 = movehit
name = "Melee Poison effect"
ID = 4056
stateno = 4056 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state x, combo damage score]
type = parentvaradd
trigger1 = movehit
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 1055, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = gethitvar(damage)!= 0
ignorehitpause = 1

;--------------------------------------------------------------------------

;Sommersault Spray
[statedef 1060]
type = A
movetype = A
physics = N
anim = 1060
velset = 0,0
ctrl = 0
sprpriority = -2



[state 1061, velset]
type = velset
trigger1 = animelemtime(3) = 0
x = 4
y = -36

[state 1051, playsnd]
type = playsnd
trigger1 = animelemtime(2) = 0
value = S1050,1

[state 1060, nothitby]
type = nothitby
trigger1 = animelemtime(4) < 0
value = A

[state 1060, movehit]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause = 1

[State 1061, 3]
type = HitDef
trigger1 = animelemtime(3) > 0 && animelemtime(5) < 0
attr = A, SA
damage = 50,ifelse(p2statetype = A,15,5)
persistent = 0
hitflag = MAF
guardflag = MA
priority = 6
pausetime = 14,14
sparkno = 3
sparkxy = -10,-240
hitsound   = 5,4
guardsound = S120, 0
animtype = up
ground.type = HIGH
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -4,-42
air.velocity = -4,-36
guard.hittime = 12
p1sprpriority = -2
p2sprpriority = 2
guard.slidetime = 12
guard.velocity = -24
airguard.hittime = 14
airguard.velocity = -12,-38
fall = 1
fall.recover = 0
guard.dist = 480
fall.recovertime = 40

[state 1061, frt sound]
type = playsnd
trigger1 = animelemtime(7)= 0
value = S1050,0

[state 1061, Helperblast]
type = Helper
trigger1 = animelemtime(8) = 0
trigger1 = !numhelper(1060) 
stateno = 1065
id = 1060
postype = p1
pos = 288,-474
ownpal = 1

[state 1151, gas fx]
type = explod
trigger1 = animelemtime(7) > 0 && animelemtime(9) < 0
anim = 4011
postype = p1
pos = 296,-478
bindtime = 0
scale = const(size.xscale)*1,const(size.yscale)*1
persistent = 4
sprpriority = 4
vel = (random%4)+6,-8
accel = 0,-0.2
ownpal = 1

[state 1061, velmul]
type = velmul
trigger1 = animelemtime(7) = 0
x = 0.5
y = 0.5

[state 1061, gravity]
type = gravity
trigger1 = animelemtime(7) < 0 || animelemtime(9) > 0
trigger1 = pos y < -1

[state 1061, veladd]
type = veladd
trigger1 = animelemtime(9) = 0
x = -4
y = 6

[state 1060, Not Active]
type = statetypeset
trigger1 = animelemtime(9) = 0
movetype = I

[state 1061, Landing]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1061

;---------------------------------------------------------------------------
;Landing Sommersault Light
[statedef 1061]
type = C
movetype = I
physics = C
anim = 1061
velset = 0,0
ctrl = 0

[state 1062, landing]
type = posset
trigger1 = time = 0
y = 0

[state 1062, end]
type = changestate
trigger1 = animtime = 0
ctrl = 1
value = 0
;--------------------------------------------------------------------------
;Sommersault Gas
[statedef 1065]
type = A
movetype = A
physics = N
anim = 1055
sprpriority = 4
velset = 4,-4

[state 1055, nothitby]
type = nothitby
trigger1 = 1
value = SCA,AA,AT
ignorehitpause = 1

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[State 1050, 5] 
type = hitdef
trigger1 = animelemtime(6) < 0
persistent = 0
attr = A, SP
animtype  = Back
damage    = 70,ifelse(p2statetype = A,21,7)
guardflag = MA
hitflag = MAF
pausetime = 8,8
sparkno = -1
sparkxy = -10,-60
hitsound   = S1000,4
hitonce = 1
p2facing = 1
guardsound = S120, 0
ground.type = high
ground.slidetime = 24
ground.hittime  = 18
ground.velocity = -21,-21
air.velocity = -18,-18
fall = 1
id = 1060
p2sprpriority = 2
guard.velocity = -32            
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = -8,-16
airguard.hittime = 16
guard.kill = 1
guard.dist = 640

[State 0, VarSet]
type = VarSet
trigger1 = movehit
trigger1 = numtarget(1060) 
var(0) = target(1060),id
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = NumTarget(1060)
trigger1 = movehit
name = "Melee Poison effect"
ID = 4056
stateno = 4056 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state x, combo damage score]
type = parentvaradd
trigger1 = movehit
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 1055, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = gethitvar(damage)!= 0
ignorehitpause = 1

;--------------------------------------------------------------------------

;EX Sommersault Spray
[statedef 1070]
type = A
movetype = A
physics = N
anim = 1070
velset = 0,0
ctrl = 0
poweradd = -500
sprpriority = -2

[state 1071, velset]
type = velset
trigger1 = animelemtime(3) = 0
x = 6
y = -44

[state 1051, playsnd]
type = playsnd
trigger1 = animelemtime(2) = 0
value = S1050,1

[state 1060, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
trigger1 = time < 45
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[State 1071, 3]
type = HitDef
trigger1 = animelemtime(3) > 0 && animelemtime(5) < 0
attr = A, SA
damage = 40, ifelse(p2statetype = A,12,4)
persistent = 0
hitflag = MAF
guardflag = MA
priority = 6
pausetime = 14,14
sparkno = 3
sparkxy = -10,-240
hitsound   = 5,4
guardsound = S120, 0
animtype = up
ground.type = HIGH
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -6,-50
air.velocity = -6,-46
guard.hittime = 12
p1sprpriority = -2
p2sprpriority = 2
guard.slidetime = 12
guard.velocity = -24
airguard.hittime = 14
airguard.velocity = -2,-54
fall = 1
fall.recover = 0
guard.dist = 480
fall.recovertime = 40

[state 1071, frt sound]
type = playsnd
trigger1 = animelemtime(7)= 0
value = S1050,0

[state 1071, Helperblast]
type = Helper
trigger1 = animelemtime(8) = 0
trigger1 = !numhelper(1070) 
stateno = 1075
id = 1070
postype = p1
pos = 288,-474
ownpal = 1

[state 1071, velmul]
type = velmul
trigger1 = animelemtime(7) = 0
x = 0.5
y = 0.5

[state 1071, gravity]
type = gravity
trigger1 = animelemtime(7) < 0 || animelemtime(9) > 0
trigger1 = pos y < -1

[state 1071, veladd]
type = veladd
trigger1 = animelemtime(9) = 0
x = -4
y = 6

[state 1070, Not Active]
type = statetypeset
trigger1 = animelemtime(9) = 0
movetype = I


[state 1071, Landing]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1071

;---------------------------------------------------------------------------
;Landing Sommersault Light
[statedef 1071]
type = C
movetype = I
physics = C
anim = 1071
velset = 0,0
ctrl = 0

[state 1072, landing]
type = posset
trigger1 = time = 0
y = 0

[state 1072, end]
type = changestate
trigger1 = animtime = 0
ctrl = 1
value = 0
;--------------------------------------------------------------------------
;Sommersault Gas
[statedef 1075]
type = A
movetype = A
physics = N
anim = 1055
sprpriority = 4
velset = 4,4

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 1075, nothitby]
type = nothitby
trigger1 = 1
value = SCA,AA,AT
ignorehitpause = 1

[State 1075, 5] 
type = hitdef
trigger1 = animelemtime(6) < 0
persistent = 0
attr = A, SP
animtype  = Back
damage    = 40,ifelse(p2statetype = A,12,4)
guardflag = MA
hitflag = MAF
pausetime = 8,8
sparkno = -1
sparkxy = -10,-60
hitsound   = S1000,4
hitonce = 1
p2facing = 1
guardsound = S120, 0
ground.type = high
ground.slidetime = 24
ground.hittime  = 18
ground.velocity = -24,-24
air.velocity = -24,-24
fall = 1
id = 1070
p2sprpriority = 2
guard.velocity = -32            
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = -12,-16
airguard.hittime = 16
guard.kill = 1
guard.dist = 640


[State 1075, TargetState]
type = TargetState
triggerall = NumTarget(1070)
trigger1 = movehit
trigger1 = hitpausetime = 7
value = 4021
ID = 1070
ignorehitpause = 1

[State 1075, Helper]
type = Helper
trigger1 = NumTarget(1070)
trigger1 = movehit
trigger1 = hitpausetime = 7
name = "Melee Poison effect"
ID = 4056
stateno = 4056 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1

[state x, combo damage score]
type = parentvaradd
trigger1 = movehit
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 1075, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = gethitvar(damage) != 0
ignorehitpause = 1


;--------------------------------------------------------------------------


;Flung Across the room state
[statedef 1080]
type = A
movetype = H
physics = N
ctrl = 0

[state 1080, changeanim]
type = changeanim
trigger1 = time = 0
value = 5061

[state 1080, velset]
type = velset
trigger1 = time = 0
x = -24
y = -18


[state 1080, gravity]
type = gravity
trigger1 = 1

[state 1080, selfstate]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 5100

;---------------------------------------------------------------------------
;Fan Attack Light
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 60
ctrl = 0
velset = 0,0
anim = 1100
sprpriority = 2

[state X, AI charge limiter]
type = varset
trigger1 = time = 0
var(41) = 0

[state 1100, snd]
type = playsnd
trigger1 = time = 7
value = S1100,1

[state 1100, snd]
type = playsnd
trigger1 = time = 17
value = S1100,2

[State 1100, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = medium
damage    = 20,2
guardflag = MA
hitflag = MA
pausetime = 6,6
sparkno = 1
sparkxy = -10,-300
hitsound   = S1100,0
guardsound = S120, 0
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -6             
guard.hittime = 11
guard.slidetime = 11
guard.kill = 0
guard.dist = 245

[State 1100, 2]
type = HitDef
trigger1 = animelem = 7
attr = S, SA
animtype  = medium
damage    = 20,2
guardflag = MA
hitflag = MA
pausetime = 6,6
sparkno = 1
sparkxy = -10,-300
hitsound   = S1100,0
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -6             
guard.hittime = 14
guard.slidetime = 14
guard.kill = 0
guard.dist = 245

[state 1100, movement]
type = velset
trigger1 = animelem = 2
x = 30

[state 1100, movement]
type = velset
trigger1 = animelem = 5
x = 15

[state 1100, REKA]
type = changestate
triggerall = command = "x" || command = "y"  || command = "holdx" || command = "holdy" 
triggerall = !ailevel
trigger1 = time > 20
value = 1105

[state 1100, REKA]
type = changestate
triggerall = command = "a" || command = "b"  || command = "holda" || command = "holdb" 
triggerall = !ailevel
trigger1 = time > 20
value = 1107

[state 1100, Not Active]
type = statetypeset
trigger1 = animelemtime(8) = 0
movetype = I

[State 1100, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Fan Attack part 2
[Statedef 1101]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 40
ctrl = 0
velset = 0,0
anim = 1101
sprpriority = 2


[State 1101, 2]
type = HitDef
trigger1 = animelem = 2
attr = S, SA
animtype  = medium
damage    = 45,5
guardflag = MA
hitflag = MA
pausetime = 4,4
sparkno = 3
sparkxy = -40,-180
hitsound   = S1000,3
guardsound = S120, 0
ground.type = low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -12             
guard.hittime = 24
guard.slidetime = 24
guard.kill = 0
guard.dist = 220 

[state 1101, velset]
type = velset
trigger1 = animelem = 2
x = 30

[state 1101, Reka]
type = changestate
triggerall = command = "x" || command = "y" || command = "holdx" || command = "holdy"
triggerall = !ailevel
trigger1 =  time > 7
value = 1102

[State 1101, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Fan Attack part 3
[Statedef 1102]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 40
ctrl = 0
velset = 0,0
anim = 1102
sprpriority = 2

[state 1102, snd]
type = playsnd
trigger1 = time = 6
value = S1100,1

[State 1102, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = up
damage    = 55,6
guardflag = MA
hitflag = MA
pausetime = 12,12
guard.pausetime = 8,8
sparkno = 2
id = 1102
sparkxy = -60,-300
hitsound   = S1100,0
guardsound = S120, 0
ground.type = High
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -6,-32
air.velocity = -10,-32
guard.velocity = -24             
guard.hittime = 23
guard.slidetime = 23
fall = 1
fall.recover = 0
guard.dist = 295


[STATE 1102, velset]
type = velset
trigger1 = animelem = 2
x = 30

[state 1102, done]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[state x, combo damage score]
type = varadd
trigger1 = movehit
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[State 1100, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;2nd Fan Attack Overhead
[statedef 1105]
type = A
movetype = A
physics = N
juggle = 0
poweradd = 5
anim = 1105

[state 1105, jump]
type = velset
trigger1 = time = 0
x = 18
y = -12

[state 1105, gravity]
trigger1 = pos y < -1
type = gravity

[State 1105, 2]
type = HitDef
trigger1 = !movecontact
attr = A, SA
animtype  = heavy
damage    = 45,5
guardflag = HA
hitflag = MA
pausetime = 8,8
sparkno = 3
sparkxy = -40,-180
hitsound   = S1000,3
guardsound = S120, 0
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -12             
guard.hittime = 11
guard.slidetime = 11
guard.kill = 0
guard.dist = 220 

[state 1105, end]
type = changestate
trigger1 = Vel y > 0
trigger1 = pos y > -vel y 
value = 1106

;---------------------------------------------------------------------------
;Landing
[statedef 1106]
type = S
movetype = I
physics = S
anim = 1106
movehitpersist = 1

[state 1106, on ground]
type = posset
trigger1 = time = 0
y = 0

[state 1106, velset]
type = velset
trigger1 = time = 0
y = 0


[state 1100, REKA]
type = changestate
trigger1  = time > 2
triggerall = command = "x" || command = "y"  || command = "holdx" || command = "holdy" 
triggerall = !ailevel
value = 1102

[state 1106, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;2nd Fan Attack Low
[statedef 1107]
type = C
movetype = A
physics = C
juggle = 7
poweradd = 5
anim = 1107

[state 1107, jump]
type = velset
trigger1 = time = 0
x = 18

[State 1107, 2]
type = HitDef
trigger1 = !movecontact
attr = C, SA
animtype  = heavy
damage    = 50,5
guardflag = L
hitflag = MAFD
pausetime = 8,8
sparkno = 3
sparkxy = -40,-180
hitsound   = S5000,1
guardsound = S120, 0
ground.type = low
ground.slidetime = 26
ground.hittime  = 26
air.hittime = 30
ground.velocity = -12
air.velocity = -4,-12
guard.velocity = -12            
guard.hittime = 12
guard.slidetime = 12
guard.kill = 0
guard.dist = 220
down.velocity = -4,-21 


[state 1100, REKA]
type = changestate
trigger1  = animelemtime(4) > 2
triggerall = command = "a" || command = "b"  || command = "holda" || command = "holdb" 
triggerall = !ailevel
value = 1108

[state 1107, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[state 1107, end]
type = changestate
trigger1 = animtime = 0
ctrl = 1
value = 0

;--------------------------------------------------------------------------
;3rd Fan Attack Ass
[statedef 1108]
type = C
movetype = A
physics = C
juggle = 0
poweradd = 30
anim = 1108
sprpriority = -1

[state 1107, jump]
type = velset
trigger1 = time = 0
x = 36

[state 1108, fart]
type = playsnd
trigger1 = animelemtime(6) = 0
value = S1000,8
ignorehitpause = 1

[state 1108, done]
type = statetypeset
trigger1 = animelemtime(14) = 0
movetype = I


[state 1108, helper]
type = helper
trigger1 = animelemtime(6) = 0
trigger1 = !numhelper(1130)
stateno = 1130
postype = p1
pos = 190,-256
id = 1130
name = "Stinkoken"

[state 1108, explod]
type = explod
trigger1 = animelemtime(6) = 0
trigger1 = !numexplod(2101)
anim = 2101
id = 2101
scale = const(size.xscale),const(size.yscale)
bindtime = -1
postype = p1
pos =0,0
removeongethit = 1
trans = add
alpha = 256,192


[state 1107, end]
type = changestate
trigger1 = animtime = 0
ctrl = 1
value = 0



;---------------------------------------------------------------------------
;Fan Attack Heavy - Sends back
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 60
ctrl = 0
velset = 0,0
anim = 1110
sprpriority = 2

[state X, AI charge limiter]
type = varset
trigger1 = time = 0
var(41) = 0

[state 1110, snd]
type = playsnd
trigger1 = time = 13
value = S1100,1

[state 1110, snd]
type = playsnd
trigger1 = time = 25
value = S1100,2

[State 1110, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = medium
damage    = 25,3
guardflag = MA
hitflag = MA
pausetime = 6,6
sparkno = 1
sparkxy = -10,-300
hitsound   = S1100,0
guardsound = S120, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -6            
guard.hittime = 13
guard.slidetime = 13
guard.kill = 0
guard.dist = 245 

[State 1110, 2]
type = HitDef
trigger1 = animelem = 7
attr = S, SA
animtype  = medium
damage    = 25,3
guardflag = MA
hitflag = MA
pausetime = 6,6
sparkno = 1
sparkxy = -10,-300
hitsound   = S1100,0
guardsound = S120, 0
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -6             
guard.hittime = 14
guard.slidetime = 14
guard.kill = 0
guard.dist = 245

[state 1110, movement]
type = velset
trigger1 = animelem = 2
x = 40

[state 1110, movement]
type = velset
trigger1 = animelem = 5
x = 20

[state 1110, REKA]
type = changestate 
triggerall = command = "x" || command = "y"  || command = "holdx" || command = "holdy" 
triggerall = !ailevel
trigger1 = time > 23
value = 1115

[state 1110, REKA]
type = changestate 
triggerall = command = "a" || command = "b"  || command = "holda" || command = "holdb" 
triggerall = !ailevel
trigger1 = time > 23
value = 1117

[state 1110, Not Active]
type = statetypeset
trigger1 = animelemtime(8) = 0
movetype = I

[State 1110, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Fan Attack part 2
[Statedef 1111]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 40
ctrl = 0
velset = 0,0
anim = 1111
sprpriority = 2


[State 1111, 2]
type = HitDef
trigger1 = animelem = 2
attr = S, SA
animtype  = medium
damage    = 50,5
guardflag = MA
hitflag = MA
pausetime = 4,4
sparkno = 3
sparkxy = -40,-180
hitsound   = S1000,3
guardsound = S120, 0
ground.type = low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -45             
guard.hittime = 24
guard.slidetime = 24
guard.kill = 0
guard.dist = 220

[state 1111, velset]
type = velset
trigger1 = animelem = 2
trigger2 = animelem = 5
x = 30

[state 1111, Reka]
type = changestate
triggerall = command = "x" || command = "y" || command = "holdx" || command = "holdy"
triggerall = !ailevel
trigger1 =  time > 8
value = 1112

[State 1111, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Fan Attack part 3
[Statedef 1112]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 40
ctrl = 0
velset = 0,0
anim = 1112
sprpriority = 2

[state 1102, snd]
type = playsnd
trigger1 = time = 6
value = S1100,1

[State 1112, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = back
damage    = 60,6
guardflag = MA
hitflag = MA
pausetime = 12,12
guard.pausetime = 8,8
sparkno = 2
id = 1102
sparkxy = -60,-300
hitsound   = S1100,0
guardsound = S120, 0
ground.type = High
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -8,-34
air.velocity = -12,-34
guard.velocity = -24 
airguard.velocity = -12,-6            
guard.hittime = 23
guard.slidetime = 23
fall =1
fall.recover = 0
fall.recovertime = 30
guard.dist = 295 


[STATE 1112, velset]
type = velset
trigger1 = animelem = 2
x = 40

[state 1112, done]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I


[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[State 1112, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;2nd Fan Attack Overhead
[statedef 1115]
type = A
movetype = A
physics = N
juggle = 0
poweradd = 5
anim = 1115

[state 1115, jump]
type = velset
trigger1 = time = 0
x = 12
y = -12

[state 1115, gravity]
trigger1 = pos y < -1
type = gravity

[State 1115, 2]
type = HitDef
trigger1 = !movecontact
attr = A, SA
animtype  = heavy
damage    = 50,5
guardflag = HA
hitflag = MA
pausetime = 8,8
sparkno = 3
sparkxy = -40,-180
hitsound   = S1000,3
guardsound = S120, 0
ground.type = low
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -12
airguard.velocity = -8,-4             
guard.hittime = 17
guard.slidetime = 17
guard.kill = 0
guard.dist = 220 

[state 1115, end]
type = changestate
trigger1 = Vel y > 0
trigger1 = pos y > -vel y 
value = 1116

;---------------------------------------------------------------------------
;Landing
[statedef 1116]
type = S
movetype = I
physics = S
anim = 1116
movehitpersist = 1

[state 1116, on ground]
type = posset
trigger1 = time = 0
y = 0

[state 1116, velset]
type = velset
trigger1 = time = 0
y = 0


[state 1116, REKA]
type = changestate
trigger1  = time > 2
triggerall = command = "x" || command = "y"  || command = "holdx" || command = "holdy" 
triggerall = !ailevel
value = 1112

[state 1116, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------------

;2nd Fan Attack Low
[statedef 1117]
type = C
movetype = A
physics = C
juggle = 7
poweradd = 5
anim = 1117

[state 1117, jump]
type = velset
trigger1 = time = 0
x = 24

[State 1117, 2]
type = HitDef
trigger1 = !movecontact
attr = C, SA
animtype  = heavy
damage    = 50,5
guardflag = L
hitflag = MAFD
pausetime = 8,8
sparkno = 3
sparkxy = -40,-180
hitsound   = S5000,2
guardsound = S120, 0
ground.type = low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -12
airguard.velocity = -8,-4             
guard.hittime = 12
guard.slidetime = 12
guard.kill = 0
guard.dist = 220 
down.velocity = -4,-21 

[state 1117, REKA]
type = changestate
trigger1  = animelemtime(4) > 2
triggerall = command = "a" || command = "b"  || command = "holda" || command = "holdb" 
triggerall = !ailevel
value = 1118

[state 1117, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[state 1117, end]
type = changestate
trigger1 = animtime = 0
ctrl = 1
value = 0

;--------------------------------------------------------------------------
;3rd Fan Attack Ass
[statedef 1118]
type = C
movetype = A
physics = C
juggle = 0
poweradd = 30
anim = 1118
sprpriority = -1

[state 1118, jump]
type = velset
trigger1 = time = 0
x = 35

[state 1118, fart]
type = playsnd
trigger1 = animelemtime(6) = 0
value = S1000,8
ignorehitpause = 1

[state 1118, helper]
type = helper
trigger1 = animelemtime(6) = 0
trigger1 = !numhelper(1130)
stateno = 1131
postype = p1
pos = 190,-256
id = 1130
name = "Stinkoken"

[state 1108, explod]
type = explod
trigger1 = animelemtime(6) = 0
trigger1 = !numexplod(2101)
anim = 2101
id = 2101
scale = const(size.xscale),const(size.yscale)
bindtime = -1
postype = p1
pos =0,0
removeongethit = 1
trans = add
alpha = 256,192

[state 1108, done]
type = statetypeset
trigger1 = animelemtime(14) = 0
movetype = I

[state 1118, end]
type = changestate
trigger1 = animtime = 0
ctrl = 1
value = 0
;-----------------------------------------------------------------------------------------------

;EX Fan Attack
[Statedef 1120]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= -500
ctrl = 0
velset = 0,0
anim = 1120
sprpriority = 2

[state X, AI charge limiter]
type = varset
trigger1 = time = 0
var(41) = 0

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1120, snd]
type = playsnd
trigger1 = time = 13
value = S1100,1

[state 1120, snd]
type = playsnd
trigger1 = time = 25
value = S1100,2

[State 1120, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = medium
damage    = 20,2
guardflag = MA
hitflag = MA
pausetime = 6,6
getpower = 0
sparkno = 1
sparkxy = -10,-300
hitsound   = S1100,0
guardsound = S120, 0
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -7             
guard.hittime = 10
guard.slidetime = 10
guard.kill = 0
guard.dist = 245 

[State 1120, 2]
type = HitDef
trigger1 = animelem = 7
attr = S, SA
animtype  = medium
damage    = 20,2
guardflag = MA
hitflag = MA
pausetime = 6,6
getpower = 0
sparkno = 1
sparkxy = -10,-300
hitsound   = S1100,0
guardsound = S120, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -7             
guard.hittime = 21
guard.slidetime = 21
guard.kill = 0
guard.dist = 245

[state 1120, movement]
type = velset
trigger1 = animelem = 2
x = 70

[state 1120, movement]
type = velset
trigger1 = animelem = 5
x = 35

[state 1120, REKA]
type = changestate 
triggerall = time > 23
trigger1 = command = "z" || command = "y" || command = "x" || command = "holdz" || command = "holdy"  || command = "holdx"  
triggerall = !ailevel
value = 1125

[state 1120, REKA]
type = changestate 
triggerall = time > 23
trigger1 = command = "a" || command = "b" || command = "c" || command = "holda" || command = "holdb"  || command = "holdc" 
triggerall = !ailevel
value = 1127

[state 1120, Not Active]
type = statetypeset
trigger1 = animelemtime(8) = 0
movetype = I

[State 1120, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Fan Attack part 2
[Statedef 1121]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1121
sprpriority = 2

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

;[state 1120, nothitby]
;type = nothitby
;trigger1 = 1
;value = ,AP


[State 1121, 2]
type = HitDef
trigger1 = animelem = 2
attr = S, SA
animtype  = medium
damage    = 40,4
guardflag = MA
hitflag = MA
pausetime = 4,4
getpower = 0
sparkno = 3
sparkxy = -40,-180
hitsound   = S1000,3
guardsound = S120, 0
ground.type = low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -45             
guard.hittime = 12
guard.slidetime = 12
guard.kill = 0
guard.dist = 220

[state 1121, velset]
type = velset
trigger1 = animelem = 2
trigger2 = animelem = 5
x = 45

[state 1121, Reka]
type = changestate
triggerall =  time > 8
triggerall = !ailevel
trigger1 = command = "z" || command = "y" || command = "x" || command = "holdz" || command = "holdy"  || command = "holdx"  
value = 1122

[State 1121, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Fan Attack part 3
[Statedef 1122]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1122
sprpriority = 2

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

;[state 1120, nothitby]
;type = nothitby
;trigger1 = time < 12
;value = ,AP

[state 1122, snd]
type = playsnd
trigger1 = time = 6
value = S1100,1

[State 1122, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = up
damage    = 50,5
guardflag = MA
hitflag = MA
pausetime = 18,18
getpower = 0
sparkno = 3
sparkxy = -60,-300
hitsound   = 5,4
guardsound = S120, 0
ground.type = High
ground.slidetime = 45
ground.hittime  = 45
air.hittime = 35
ground.velocity = -2,-42
air.velocity = -2,-38
guard.velocity = -80  
airguard.velocity = -20,-4           
guard.hittime = 23
guard.slidetime = 23
fall =0
fall.recover = 1
fall.recover = 50
guard.dist = 295 


[STATE 1122, velset]
type = velset
trigger1 = animelem = 2
x = 45

[state 1102, done]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I


[state 1122, 5]
type = changestate
trigger1 = movehit
trigger1 = command = "holdup"
trigger1 = hitshakeover = 1
trigger2 = ailevel > 0
trigger2 = movehit
trigger2 = hitshakeover = 1
value = 42
ctrl = 1

[state 1120, combo damage]
type = varadd
trigger1 = movehit
v = 18
value = -9
ignorehitpause = 1
persistent = 0

[State 1122, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------
;2nd Fan Attack Overhead
[statedef 1125]
type = A
movetype = A
physics = N
juggle = 0
anim = 1125

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1125, jump]
type = velset
trigger1 = time = 0
x = 18
y = -12

[state 1125, gravity]
trigger1 = pos y < -1
type = gravity

[State 1125, 2]
type = HitDef
trigger1 = !movecontact
attr = A, SA
animtype  = heavy
damage    = 50,0
getpower = 0
guardflag = HA
hitflag = MA
pausetime = 8,8
sparkno = 3
sparkxy = -40,-180
hitsound   = S1000,3
guardsound = S120, 0
ground.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -12             
guard.hittime = 24
guard.slidetime = 24
guard.kill = 0
guard.dist = 220 

[state 1125, end]
type = changestate
trigger1 = Vel y > 0
trigger1 = pos y > -vel y 
value = 1126

;---------------------------------------------------------------------------
;Landing
[statedef 1126]
type = S
movetype = I
physics = S
anim = 1126
movehitpersist = 1

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1126, on ground]
type = posset
trigger1 = time = 0
y = 0

[state 1126, velset]
type = velset
trigger1 = time = 0
y = 0

[state 1126, REKA]
type = changestate
trigger1  = time > 2
triggerall = command = "z" || command = "y" || command = "x" || command = "holdz" || command = "holdy"  || command = "holdx"
triggerall = !ailevel  
value = 1122

[state 1126, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------------------------------------------------------------------------------

;2nd Fan Attack Low
[statedef 1127]
type = C
movetype = A
physics = C
juggle = 7
poweradd = 5
anim = 1127

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1107, jump]
type = velset
trigger1 = time = 0
x = 28

[State 1127, 2]
type = HitDef
trigger1 = !movecontact
attr = C, SA
animtype  = heavy
damage    = 50,5
guardflag = L
hitflag = MAFD
pausetime = 8,8
sparkno = 3
sparkxy = -40,-180
hitsound   = S5000,2
guardsound = S120, 0
ground.type = low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -12
air.velocity = -12,-2
guard.velocity = -12             
guard.hittime = 12
guard.slidetime = 12
guard.kill = 0
guard.dist = 220
down.velocity = -4,-21 


[state 1127, REKA]
type = changestate
triggerall  = animelemtime(4) > 2
trigger1 = command = "a" || command = "b"  || command = "c"|| command = "holda" || command = "holdb" || command = "holdc"
triggerall = !ailevel
value = 1128

[state 1107, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[state 1127, end]
type = changestate
trigger1 = animtime = 0
ctrl = 1
value = 0

;--------------------------------------------------------------------------
;3rd Fan Attack Ass
[statedef 1128]
type = C
movetype = A
physics = C
juggle = 0
poweradd = 0
anim = 1128
sprpriority = -1

[state 1128, jump]
type = velset
trigger1 = time = 0
x = 36

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause


[state 1128, fart]
type = playsnd
trigger1 = animelemtime(6) = 0
value = S1000,8
ignorehitpause = 1

[state 1128, helper]
type = helper
trigger1 = animelemtime(6) = 0
trigger1 = !numhelper(1132)
stateno = 1132
postype = p1
pos = 190,-256
id = 1132
name = "Stinkoken"

[state 1128, explod]
type = explod
trigger1 = animelemtime(6) = 0
trigger1 = !numexplod(2101)
anim = 2101
id = 2101
scale = const(size.xscale),const(size.yscale)
bindtime = -1
postype = p1
pos =0,0
removeongethit = 1
trans = add
alpha = 256,192

[state 1128, done]
type = statetypeset
trigger1 = animelemtime(14) = 0
movetype = I


[state 1128, end]
type = changestate
trigger1 = animtime = 0
ctrl = 1
value = 0



;-----------------------------------------------------------------------------------------
;Stinkoken Light
[statedef 1130]
type = S
movetype = A
physics = N
sprpriority = 4

[state 1130, noshadow]
type = assertspecial
trigger1 = animelemtime(4) >= 0 && animelemtime(6) < 0
flag = noshadow
ignorehitpause = 1

[state 1130, anim]
type = changeanim
trigger1 = anim != 2100
value = 2100

[state 1130, hitoverride]
type = hitoverride
trigger1 = 1
attr = SCA, AP
stateno = 1130
time = 1
ignorehitpause =1
persistent = 1

[state 1130, nothitby]
type = nothitby
trigger1 = 1
value = ,AA, AT

[state 1130, envshake]
type = envshake
trigger1 = animelemtime(4) = 0
ampl = 8
time = 12
phase = 60

[state 1130, playsnd]
type = playsnd
trigger1 = animelemtime(4) = 0
value = S1130,0

[State 4000, 5] 
type = hitdef
trigger1 = animelemtime(4) >= 0
persistent = 0
attr = S, SP
animtype  = Hard
damage  = 110,11
guardflag = MA
getpower = 30
givepower = 50
hitflag = MAF
pausetime = 12,12
sparkno = -1
sparkxy = -10,-60
hitsound   = S1000,4
hitonce = 1
p2facing = 1
guardsound = S120, 0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -60,-20
air.velocity = -60,-20
id = 1130
guard.velocity = -12            
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -35,-4
airguard.hittime = 19
p2sprpriority = -1
envshake.ampl = 12
envshake.time = 12
fall = 1
fall.recover = 0
fall.recovertime = 40
guard.kill = 1
guard.dist = 640

[state 1130, targetstate]
type = targetstate
trigger1 = movehit
trigger1 = hitpausetime = 11
ignorehitpause = 1
value = 675
id = 1130

[state 1130, end]
type = destroyself
trigger1 = animtime = 0

[state 1120, combo damage]
type = parentvaradd
trigger1 = movehit
trigger1 = numtarget(1130)
v = 18
value = -9
ignorehitpause = 1
persistent = 0
;-----------------------------------------------------------------------------------------
;Stinkoken Hard
[statedef 1131]
type = S
movetype = A
physics = N
sprpriority = 4

[state 1131, noshadow]
type = assertspecial
trigger1 = animelemtime(4) >= 0 && animelemtime(6) < 0
flag = noshadow
ignorehitpause = 1

[state 1131, anim]
type = changeanim
trigger1 = anim != 2100
value = 2100

[state 1131, hitoverride]
type = hitoverride
trigger1 = 1
attr = SCA, AP
stateno = 1130
time = 1
ignorehitpause =1
persistent = 1

[state 1131, nothitby]
type = nothitby
trigger1 = 1
value = ,AA, AT

[state 1131, envshake]
type = envshake
trigger1 = animelemtime(4) = 0
ampl = 12
time = 16
phase = 60

[state 1130, playsnd]
type = playsnd
trigger1 = animelemtime(4) = 0
value = S1130,0


[State 4000, 5] 
type = hitdef
trigger1 = animelemtime(4) >= 0
persistent = 0
attr = S, SP
animtype  = Hard
damage    = 130,13
guardflag = MA
getpower = 30
givepower = 50
hitflag = MAF
pausetime = 12,12
sparkno = -1
sparkxy = -10,-60
hitsound   = S1000,4
hitonce = 1
p2facing = 1
guardsound = S120, 0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -80,-30
air.velocity = -80,-30
id = 1130
guard.velocity = -18            
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -20,-4 
airguard.hittime = 19
p2sprpriority = -1
envshake.ampl = 14
envshake.time = 12
fall = 1
fall.recover = 0
fall.recovertime = 40
guard.kill = 1
guard.dist = 640

[state 1131, end]
type = destroyself
trigger1 = animtime = 0

[state 1130, targetstate]
type = targetstate
trigger1 = movehit
trigger1 = hitpausetime = 1
ignorehitpause = 1
value = 675
id = 1130

[state 1131, combo damage]
type = parentvaradd
trigger1 = movehit
trigger1 = numtarget(1130)
v = 18
value = -9
ignorehitpause = 1
persistent = 0
;-----------------------------------------------------------------------------------------
;EX Stinkoken
[statedef 1132]
type = S
movetype = A
physics = N
sprpriority = 4

[state 1132, noshadow]
type = assertspecial
trigger1 = animelemtime(4) >= 0 && animelemtime(6) < 0
flag = noshadow
ignorehitpause = 1

[state 1132, anim]
type = changeanim
trigger1 = anim != 2100
value = 2100

[state 1132, hitoverride]
type = hitoverride
trigger1 = 1
attr = SCA, AP
stateno = 1130
time = 1
ignorehitpause =1
persistent = 1

[state 1132, nothitby]
type = nothitby
trigger1 = 1
value = ,AA, AT

[state 1132, envshake]
type = envshake
trigger1 = animelemtime(4) = 0
ampl = 8
time = 12
phase = 60

[state 1132, playsnd]
type = playsnd
trigger1 = animelemtime(4) = 0
value = S1130,0


[State 4000, 5] 
type = hitdef
trigger1 = animelemtime(4) >= 0
persistent = 0
attr = S, SP
animtype  = Hard
damage    = 90,9
guardflag = MA
getpower = 30
givepower = 50
hitflag = MAF
pausetime = 18,18
sparkno = -1
sparkxy = -10,-60
hitsound   = S1000,4
hitonce = 1
p2facing = 1
guardsound = S120, 0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -100,-40
air.velocity = -100,-40
id = 1132
guard.velocity = -60            
guard.hittime = 17
guard.slidetime = 17
airguard.velocity = -20,-4
airguard.hittime = 22
envshake.ampl = 16
envshake.time = 18
p2sprpriority = -1
fall = 1
fall.recover = 0
fall.recovertime = 40
guard.kill = 1
guard.dist = 640


[state 1132, Wall bounce]
type = targetstate
trigger1 = movehit
triggerall = numtarget(1132)
trigger1 = hitpausetime = 1
triggerall = parent,var(7) > 0
id = 1132
value = 670
ignorehitpause = 1

[state 1132, wall bounce limiter]
type = parentvaradd
trigger1 = movehit
trigger1 = numtarget(1132)
var(7) = -1
ignorehitpause = 1
persistent = 0

[state 1120, combo damage]
type = parentvaradd
trigger1 = movehit
trigger1 = numtarget(1132)
v = 18
value = -18
ignorehitpause = 1
persistent = 0

[state 1130, end]
type = destroyself
trigger1 = animtime = 0




;--------------------------------------------------------------------------
;Sommersault Seat Light
[Statedef 1150]
type    = A
movetype= A
physics = N
poweradd= 80
ctrl = 0
velset = 0,0
anim = 1150
sprpriority = -2

[state 1150, anti pushblock]
type = playerpush
trigger1 = animelemtime(4) >= 0
value = 0
ignorehitpause = 1

[state X, AI charge limiter]
type = varset
trigger1 = time = 0
var(41) = 0

[state 1150, width]
type = width
trigger1 = 1
edge = 200,0

[state 1150, nothitby]
type = nothitby
trigger1 = animelemtime(3) >= 0
value = ,AP

[state 1150, nothitby]
type = nothitby
trigger1 = movehit
value = SCA
time = 60

[state 1150, velset]
type = velset
trigger1 = animelem = 4
x = 27
y = -18
persistent = 0

[state 1150, snd]
type = playsnd
trigger1 = animelemtime(4)=0
value = S1103,2

[State 1150, 2]
type = HitDef
trigger1 = animelem = 6
persistent = 0
attr = A, ST
animtype  = Medium
damage    = 0
guardflag = HA
pausetime = 4,4
sparkno = 1
id = 1150
sparkxy = -60,-270
hitsound   = F5,1
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
air.hittime = 20
ground.velocity = -12
air.velocity = -12,-10
guard.velocity = -18              
guard.hittime = 10
guard.slidetime = 10
airguard.velocity = -12,-4 
airguard.hittime = 18
forcenofall = 1
guard.dist = 270
kill = 0

[State 1150, 2]
type = HitDef
trigger1 = animelemtime(8) >= 0
trigger1 = !moveguarded
persistent = 0
attr = A, ST
animtype  = heavy
damage    = 0
guardflag = HA
hitflag = MA
id = 1151
pausetime = 8,8
sparkno = -1
getpower = 120
priority = 1,miss
sparkxy = -10,-60
hitsound   = S1,1
guardsound = S120, 0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
p2stateno = 1180
p2facing = 1
hitonce = 1
ground.velocity = -10,-12
air.velocity = -8,-12
guard.velocity = -28             
guard.hittime = 20
guard.slidetime = 20
guard.dist = 270 
fall = 1
fall.recovertime = 30
down.hittime = 30
fall.recover = 0

[state 1150, bind]
type = targetbind
trigger1 = movehit
trigger1 = numtarget(1151)
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = 210, -120
ignorehitpause = 1

[state 1150, bind]
type = targetbind
trigger1 = movehit
trigger1 = numtarget(1151)
trigger1 = AnimElemTime(6) >= 0 
pos = 210, -120
ignorehitpause = 1

[state 1150, guard bounce]
type = velmul
trigger1 = moveguarded
x = -0.3
persistent = 0
ignorehitpause = 0

[state 1150, guard bounce]
type = velset
trigger1 = moveguarded
y = -8
persistent = 0
ignorehitpause = 0

[state 1150, invuner]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause
persistent = 1


[state 1150, gravity]
type = gravity
trigger1 = pos y < -1
ignorehitpause = 0
persistent = 1

[state 1150, end]
type = changestate
triggerall = movehit
trigger1 = numtarget(1151)
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1151

[state 1103, end]
type = changestate
trigger1 = !numtarget(1151)
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1155

;---------------------------------------------------------------------------
;Sommersault Seated hit
[statedef 1151]
type = C
movetype = A
physics = N
poweradd = 200
anim = 1151
sprpriority = 2
movehitpersist = 1

[state 641, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 3,2
ownpal = 1
sprpriority = -4

[state 1151, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1151, width]
type = width
trigger1 = 1
edge = 250,0

[state 1151, velset]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1151, posset]
type = posset
trigger1 = !movehit
trigger1 = time = 0
y = 0

[state 1151, posset]
type = posset
trigger1 = movehit
trigger1 = time = 0
y = 0

[state 1151, envshake]
type = envshake
trigger1 = time = 0
ampl = -6
time = 12
freq = 60
phase = 60

[state 1151, snd]
type = playsnd
trigger1 = time = 0
value = S52,0

[state 1151, explod]
type = explod
trigger1 = time = 0
anim = 1155
id = 1150
scale = const(size.xscale),const(size.yscale)
postype = p1
bindtime = -1
sprpriority = -2

[state 1151, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
pos = 202,-32;160+(target,const(size.head.pos.y)/2), 0

[state 1151, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(6) >= 0 && animelemtime(16) < 0
pos = 214,-18;140,-10

[state 1151, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(16) >= 0 && Animelemtime(17) < 0
pos = 202,-32;160+(target,const(size.head.pos.y)/2), 0

[state 1151, target]
type = targetstate
trigger1 = time = 0
value = 1181

[state 1151, damage]
type = targetlifeadd
trigger1 = time = 0
value = floor(-40*fvar(10))

[state 1151, hitadd]
type = hitadd
trigger1 = time =0
value = 1


[state 1151, damage]
type = targetlifeadd
triggerall = enemy,name != "SOR2"
trigger1 = time > 34 && time < 74
value = floor(-4*fvar(10))
persistent = 2

[state 1151, damage]
type = targetlifeadd
triggerall = enemy,name = "SOR2"
trigger1 = time > 34 && time < 74
value = -7
persistent = 2

[state 1151, Fart Sound]
type = playsnd
trigger1 = animelemtime(6) = 0
value = S1150,0;S1000,2

[state 1151, envshake]
type = envshake
trigger1 = animelemtime(6) = 0
ampl = -2
time = 30

[state 1151, hitadd]
type = hitadd
trigger1 = time > 34 && time < 74
value = 1
persistent = 2

[state 1151, gas fx]
type = explod
trigger1 = time > 34 && time < 74
anim = 4011
postype = p1
pos = 180,-15
bindtime = 0
scale = const(size.xscale)*1.5,const(size.yscale)*1.5
persistent = 4
sprpriority = 4
vel = (random%20)-10,16
accel = 0,-1.6
ownpal = 1

[State 1000, 2]
type = Helper
trigger1 = time = 79
helpertype = normal
name = "Gas Throw"
ID = 4000
stateno = 4050
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 1151, end]
type = changestate
trigger1 = animtime = 0
value = 1152


;-------------------------------------------------------------------------
;Jump off
[statedef 1152]
type = A
movetype = I
physics = N
velset = -25,-8

[state 1152, gravity]
type = gravity
trigger1 = 1

[state 1152, push]
type = playerpush
trigger1 = 1
value = 0

[state 1152, invun]
type = nothitby
trigger1 = 1
value = SCA

[state x, combo damage score]
type = varadd
trigger1 = time = 0
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > Const720p(-8)
trigger1 = SelfAnimExist(anim + 3)
trigger1 = anim >= 41 && anim <= 43
persistent = 0
value = Anim + 3

[state 1152, end]
type = changestate
triggerall = time > 3
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;-------------------------------------------------------------------------
;Sommersault Seat miss
[statedef 1155]
type = C
movetype = I
physics = N
anim = 1152
sprpriority = 2

[state 1155, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 3,2
ownpal = 1

[state 1155, velset]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1155, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1155, envshake]
type = envshake
trigger1 = time = 0
ampl = -12
time = 30
freq = 60
phase = 60

[state 1155, explod]
type = explod
trigger1 = time = 0
anim = 1156
id = 1155
scale = const(size.xscale),const(size.yscale)
postype = p1
bindtime = -1
sprpriority = -2

[state 1155, snd]
type = playsnd
trigger1 = time = 0
value = S52,0

[state 1155, end]
type = changestate
trigger1 = animtime =0
value = 648


;--------------------------------------------------------------------------
;Sommersault Seat Heavy
[Statedef 1160]
type    = A
movetype= A
physics = N
poweradd= 200
ctrl = 0
velset = 0,0
anim = 1160
sprpriority = -2	

[state X, AI charge limiter]
type = varset
trigger1 = time = 0
var(41) = 0

[state 1160, anti pushblock]
type = playerpush
trigger1 = animelemtime(4) >= 0
value = 0
ignorehitpause = 1

[state 1160, width]
type = width
trigger1 = 1
edge = 200,0

[state 1150, nothitby]
type = nothitby
trigger1 = animelemtime(3) > 0
value = ,AP

[state 1150, nothitby]
type = nothitby
trigger1 = movehit
value = SCA
time = 60

[state 1160, velset]
type = velset
trigger1 = animelemtime(4) = 0
x = 33
y = -21
persistent = 0

[state 1150, snd]
type = playsnd
trigger1 = animelemtime(4)=0
value = S1103,2

[State 1150, 2]
type = HitDef
trigger1 = animelem = 6
persistent = 0
attr = S, ST
animtype  = Medium
damage    = 0
guardflag = MA
pausetime = 4,4
sparkno = 1
id = 1160
sparkxy = -60,-270
hitsound   = F5,2
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
air.hittime = 20
ground.velocity = -4
air.velocity = -2,-6
guard.velocity = -18              
guard.hittime = 10
guard.slidetime = 10
airguard.velocity = -12,-4 
airguard.hittime = 18
forcenofall = 1
guard.dist = 270
kill = 0

[State 1160, 2]
type = HitDef
trigger1 = animelemtime(8) >= 0
trigger1 = !moveguarded
persistent = 0
attr = S, ST
animtype  = heavy
damage    = 0
guardflag = HA
hitflag = MA
id = 1161
pausetime = 8,8
getpower = 50
sparkno = -1
sparkxy = -10,-60
hitsound   = S1,1
priority = 1,miss
guardsound = S120, 0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
p2stateno = 1180
p2facing = 1
hitonce = 1
ground.velocity = -10,-12
air.velocity = -8,-12
guard.velocity = -28             
guard.hittime = 22
guard.slidetime = 22
guard.dist = 270
fall = 1
fall.recovertime = 30
down.hittime = 30
fall.recover = 0

[state 1150, guard bounce]
type = velmul
trigger1 = moveguarded
x = -0.15
persistent = 0
ignorehitpause = 0

[state 1150, guard bounce]
type = velset
trigger1 = moveguarded
y = -8
persistent = 0
ignorehitpause = 0

[state 1160, invuner]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause
persistent = 1

[state 1160, bind]
type = targetbind
trigger1 = numtarget(1161)
trigger1 = movehit
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(9) < 0
pos = 238, -352
ignorehitpause = 1

[state 1160, bind]
type = targetbind
trigger1 = numtarget(1161)
trigger1 = movehit
trigger1 = AnimElemTime(9) >= 0
pos = 288, -262
ignorehitpause = 1

[state 1160, gravity]
type = gravity
trigger1 = pos y < -1
ignorehitpause = 0
persistent = 1

[state 1160, end]
type = changestate
triggerall = movehit
trigger1 = numtarget(1161)
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1161

[state 1160, end]
type = changestate
trigger1 = !numtarget(1161)
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1165





;---------------------------------------------------------------------------
;Flip sit landing
[statedef 1161]
type = C
movetype = A
physics = N
anim = 1151
sprpriority = 2
poweradd = 200
movehitpersist = 1

[state 641, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 3,2
ownpal = 1
sprpriority = -4

[state 1161, velset]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1151, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1161, posset]
type = posset
trigger1 = !movehit
trigger1 = time = 0
y = 0

[state 1161, posset]
type = posset
trigger1 = movehit
trigger1 = time = 0
y = 0

[state 1161, envshake]
type = envshake
trigger1 = time = 0
ampl = -12
time = 30
freq = 60
phase = 60

[state 1161, snd]
type = playsnd
trigger1 = time = 0
value = S52,0

[state 1161, explod]
type = explod
trigger1 = time = 0
anim = 1155
id = 1160
scale = const(size.xscale),const(size.yscale)
postype = p1
bindtime = -1
sprpriority = -2

[state 1161, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
pos = 202,-32;160+(target,const(size.head.pos.y)/2), 0

[state 1151, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(6) >= 0 && animelemtime(16) < 0
pos = 214,-18

[state 1151, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(16) >= 0 && AnimElemTime(17) < 0
pos = 202,-32;160+(target,const(size.head.pos.y)/2), 0

[state 1161, target]
type = targetstate
trigger1 = time = 0
value = 1181

[state 1161, damage]
type = targetlifeadd
trigger1 = time = 0
value = floor(-70*fvar(10))

[state 1151, hitadd]
type = hitadd
trigger1 = time =0
value = 1

[state 1161, damage]
type = targetlifeadd
triggerall = enemy,name != "SOR2"
trigger1 = time > 34 && time < 74
value = floor(-4*fvar(10))
persistent = 2

[state 1161, damage]
type = targetlifeadd
triggerall = enemy,name = "SOR2"
trigger1 = time > 34 && time < 74
value = -8
persistent = 2

[state 1161, Fart Sound]
type = playsnd
trigger1 = animelemtime(6) = 0
value = S1150,0;S1000,2

[state 1161, envshake]
type = envshake
trigger1 = animelemtime(6) = 0
ampl = -2
time = 30

[state 1161, hitadd]
type = hitadd
trigger1 = time > 34 && time < 74
value = 1
persistent = 2

[state 1151, gas fx]
type = explod
trigger1 = time > 34 && time < 74
anim = 4011
postype = p1
pos = 180,-15
bindtime = 0
scale = const(size.xscale)*2.25,const(size.yscale)*2.25
persistent = 4
sprpriority = 4
vel = (random%20)-10,16
accel = 0,-1.6
ownpal = 1

[State 1000, 2]
type = Helper
trigger1 = time = 79
helpertype = normal
name = "Gas Throw"
ID = 4000
stateno = 4050
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 1161, end]
type = changestate
trigger1 = animtime = 0
value = 1152

;-------------------------------------------------------------------------
;Flip Sit miss landing
[statedef 1165]
type = C
movetype = I
physics = N
anim = 1162
sprpriority = 2

[state 1165, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 3,2
ownpal = 1

[state 1104, velset]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1104, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1104, envshake]
type = envshake
trigger1 = time = 0
ampl = -12
time = 30
freq = 60
phase = 60

[state 1104, explod]
type = explod
trigger1 = time = 0
anim = 1166
id = 1165
scale = const(size.xscale),const(size.yscale)
postype = p1
bindtime = -1
sprpriority = -2

[state 1104, snd]
type = playsnd
trigger1 = time = 0
value = S52,0

[state 1105, end]
type = changestate
trigger1 = animtime =0
value = 648
;---------------------------------------------------------------------
;Sommersault Seat EX
[Statedef 1170]
type    = A
movetype= A
physics = N
poweradd= -500
ctrl = 0
velset = 0,0
anim = 1170
sprpriority = -2

[state X, AI charge limiter]
type = varset
trigger1 = time = 0
var(41) = 0

[state 1170, width]
type = width
trigger1 = 1
edge = 200,0

[state 1150, anti pushblock]
type = playerpush
trigger1 = animelemtime(4) >= 0
value = 0
ignorehitpause = 1

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1170, nothitby]
type = nothitby
trigger1 = 1
value = ,AP

[state 1170, nothitby]
type = nothitby
trigger1 = movehit
value = SCA
time = 60

[state 1170, velset]
type = velset
trigger1 = animelemtime(4) = 0
x = 45
y = -21

[state 1170, statetypeset]
type = statetypeset
trigger1 = animelemtime(4) = 0
statetype = A

[state 1170, snd]
type = playsnd
trigger1 = time = 4
value = S1103,2

[state 1170, invuner]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause
persistent = 1

[State 210, 2]
type = HitDef
trigger1 = animelem = 6	
persistent = 0
attr = A, ST
animtype  = Medium
damage    = 0
guardflag = MA
pausetime = 4,4
sparkno = 2
sparkxy = -60,-270
hitsound   = F5,2
guardsound = S120, 0
id = 1170
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
air.hittime = 20
ground.velocity = -12
air.velocity = -12,-10
guard.velocity = -18              
guard.hittime = 10
guard.slidetime = 10
airguard.velocity = -12,-4 
airguard.hittime = 18
forcenofall = 1
guard.dist = 255

[State 1170, 2]
type = HitDef
trigger1 = animelemtime(8) > 0
trigger1 = !moveguarded
persistent = 0
attr = A, ST
animtype  = heavy
damage    = 0
guardflag = HA
hitflag = MA
pausetime = 8,8
sparkno = -1
sparkxy = -10,-60
hitsound   = S1,1	
guardsound = S120, 0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
p2stateno = 1180
p2facing = 1
id = 1171
hitonce = 1
ground.velocity = -10,-12
air.velocity = -8,-12
guard.velocity = -28             
guard.hittime = 20
guard.slidetime = 20
guard.dist = 175 
fall = 1
fall.recovertime = 30
down.hittime = 30
fall.recover = 0

[state 1150, guard bounce]
type = velmul
trigger1 = moveguarded
x = -0.45
persistent = 0
ignorehitpause = 1

[state 1150, guard bounce]
type = velset
trigger1 = moveguarded
y = -6
persistent = 0
ignorehitpause = 1

[state 1170, bind]
type = targetbind
trigger1 = numtarget(1171)
trigger1 = movehit
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = 210, -120
ignorehitpause =1 

[state 1170, bind]
type = targetbind
trigger1 = numtarget(1171)
trigger1 = movehit
trigger1 = AnimElemTime(6) >= 0 
pos = 210, -120
ignorehitpause =1 


[state 1170, gravity]
type = gravity
trigger1 = pos y < -1
ignorehitpause = 0
persistent = 1

[state 1170, end]
type = changestate
triggerall = movehit
trigger1 = numtarget(1171)
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1171

[state 1170, end]
type = changestate
trigger1 = !numtarget(1171)
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1175

;---------------------------------------------------------------------------
;Sommersault Seated hit
[statedef 1171]
type = C
movetype = A
physics = N
poweradd = 0
anim = 1151
sprpriority = 2
movehitpersist = 1

[state 1171, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 641, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 3,2
ownpal = 1
sprpriority = -4

[state 1171, width]
type = width
trigger1 = 1
edge = 250,0

[state 1171, velset]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1171, posset]
type = posset
trigger1 = !movehit
trigger1 = time = 0
y = 0

[state 1171, posset]
type = posset
trigger1 = movehit
trigger1 = time = 0
y = 0

[state 1171, envshake]
type = envshake
trigger1 = time = 0
ampl = -12
time = 30
freq = 60
phase = 60

[state 1171, snd]
type = playsnd
trigger1 = time = 0
value = S52,0

[state 1171, explod]
type = explod
trigger1 = time = 0
anim = 1175
id = 1170
scale = const(size.xscale),const(size.yscale)
postype = p1
bindtime = -1
sprpriority = -2

[state 1171, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
pos = 202,-32;160+(target,const(size.head.pos.y)/2), 0

[state 1171, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(6) >= 0 && animelemtime(7) < 0
pos = 214,-18

[state 1171, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
pos = 202,-32;160+(target,const(size.head.pos.y)/2), 0

[state 1171, target]
type = targetstate
trigger1 = time = 0
value = 1181

[state 1171, damage]
type = targetlifeadd
trigger1 = time = 0
value = floor(-20*fvar(10))

[state 1171, hitadd]
type = hitadd
trigger1 = time =0
value = 1


[state 1171, damage]
type = targetlifeadd
triggerall = enemy,name != "SOR2"
trigger1 = time > 34 && time < 74
value = floor(-5*fvar(10))
persistent = 2

[state 1171, damage]
type = targetlifeadd
triggerall = enemy,name = "SOR2"
trigger1 = time > 34 && time < 74
value = -10
persistent = 2

[state 1171, Fart Sound]
type = playsnd
trigger1 = animelemtime(6) = 0
value = S1150,0;S1000,2

[state 1151, envshake]
type = envshake
trigger1 = animelemtime(6) = 0
ampl = -4
time = 30

[state 1171, hitadd]
type = hitadd
trigger1 = time > 34 && time < 74
value = 1
persistent = 2

[state 1151, gas fx]
type = explod
trigger1 = time > 34 && time < 74
anim = 4011
postype = p1
pos = 180,-15
bindtime = 0
scale = const(size.xscale)*3,const(size.yscale)*3
persistent = 4
sprpriority = 4
vel = (random%20)-10,16
accel = 0,-1.6
ownpal = 1

[State 1171, 2]
type = Helper
trigger1 = time = 79
helpertype = normal
name = "Gas Throw"
ID = 4000
stateno = 4050
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 1171, end]
type = changestate
trigger1 = animtime = 0
value = 1172


;-------------------------------------------------------------------------
;Jump off
[statedef 1172]
type = A
movetype = I
physics = N
velset = -26,-12

[state 1172, gravity]
type = gravity
trigger1 = 1

[state 1172, push]
type = playerpush
trigger1 = 1
value = 0

[state 1172, invun]
type = nothitby
trigger1 = 1
value = SCA

[State 1172, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 1172, 3]
type = ChangeAnim
trigger1 = Vel y > Const720p(-8)
trigger1 = SelfAnimExist(anim + 3)
trigger1 = anim >= 41 && anim <= 43
persistent = 0
value = Anim + 3

[state 1172, end]
type = changestate
triggerall = time > 3
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;-------------------------------------------------------------------------
;Sommersault Seat miss
[statedef 1175]
type = C
movetype = I
physics = N
anim = 1172
sprpriority = 2

[state 1175, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 3,2
ownpal = 1

[state 1175, velset]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1175, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1175, envshake]
type = envshake
trigger1 = time = 0
ampl = -12
time = 30
freq = 60
phase = 60

[state 1175, explod]
type = explod
trigger1 = time = 0
anim = 1176
id = 1175
scale = const(size.xscale),const(size.yscale)
postype = p1
bindtime = -1
sprpriority = -2

[state 1175, snd]
type = playsnd
trigger1 = time = 0
value = S52,0

[state 1175, end]
type = changestate
trigger1 = animtime =0
value = 648




;==========================================================================
; Victim Animation
;==========================================================================
[statedef 1180]
type = A
movetype = H
physics = N
sprpriority = 1

[state 1105, poweradd]
type = poweradd
trigger1 = time = 0
value = 100

[state 1105, anim]
type = changeanim2
trigger1 = time = 0
value = 1180

[state 1108, end]
type = selfstate
trigger1 = time = 300
value = 5050

;--------------------------------------------------------------------------
[statedef 1181]
type = L
movetype = H
physics = N
sprpriority = 1

[state 1105, velset]
type = velset
trigger1 = time = 0
x = 1
y = 1

[state 1105, poweradd]
type = poweradd
trigger1 = time = 0
value = 100

[state 4020, color]
type = palFX
trigger1 = time > 36
time = 45
mul = 120,0,120

[state 1105, anim]
type = changeanim2
trigger1 = time = 0
value = 1181

[state 1105, anim]
type = changeanim
trigger1 = anim = 1181
trigger1 = animtime = 0
value = 5110


[state 1108, end]
type = selfstate
trigger1 = time = 118
value = 5110

[state 1108, end]
type = selfstate
trigger1 = time = 128
value = 5050
;-----------------------------------------------------------------------------------
; Pause before getting up
[Statedef 1182]
type    = L
movetype= H
physics = N

;[state 1182, posadd]
;type = posadd
;trigger1  = time = 0
;x = (const(size.head.pos.y)/2)

[state 1182, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State 1182, 1]
type = ChangeAnim
persistent = 0
trigger1 = time = 0
value = 5110 

[State 5110, 5]
type = PosSet
trigger1 = Time = 1
y = 0

[State 5110, 8]
type = VelSet
trigger1 = Time = 1
y = 0
x = 0


[State 5110, 11] ;If just died
type = selfState
triggerall = !alive
trigger1 = time > 10
value = 5150

[state 1182, selfstate]
type = selfstate
trigger1 = alive
trigger1 = time > 15
value = 5120




;---------------------------------------------------------------------------
;Smoke Bomb Escape
[statedef 1200]
type = U
movetype = A
physics = N
ctrl = 0
poweradd = 30
anim = 1200

[state 1200, slow]
type = velmul
trigger1 = time = 0
x = 0.1
y = 0.1

[state 1200, jump]
type = velset
trigger1 = time = 1
trigger1 = statetype != A
y = -9

[state 1200, set type]
type = statetypeset
trigger1 = animelemtime(2) >= 0
statetype = A

[state 1200, varset]
type = varset
trigger1 = time = 0
var(27) = 0

[state 1200, varset]
type = varset
trigger1 = command = "holdfwd"
trigger1 = ailevel = 0
trigger2 = ailevel > 0
trigger2 = backedgebodydist < 120
trigger3 = ailevel > 0
trigger3 = numhelper(4080)
trigger3 = helper(4080),movehit = 0
trigger3 = random < ailevel*64
var(27) = 1



[state 1200, varset]
type = varset
trigger1 = command = "holdback"
trigger1 = ailevel = 0
trigger2 = ailevel > 0
trigger2 = backedgebodydist >= 120
trigger3 = ailevel > 0
trigger3 = numhelper(4080)
trigger3 = helper(4080),movehit = 0
trigger3 = random < ailevel * 2
var(27) = 0

[state 1200, jump]
type = velset
trigger1 = time = 1
trigger1 = statetype = A
y = 0
x = 0

[state 1200, nothitby]
type = nothitby
trigger1 = animelemtime(2) >= 0
value = SCA

[State 1200, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, SP
animtype  = heavy
damage    = 40
guardflag = MA
hitflag = A+
pausetime = 8,8
sparkno = 0
id = 4000
getpower = 25
sparkxy = 40,-200
hitsound   = S1000,4
guardsound = S120, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 18
air.hittime = 24
ground.velocity = -14
air.velocity = -18,-16
guard.velocity = -18              
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -4,-12 
airguard.hittime = 22
air.fall = 0
fall.recover = 0
guard.dist = 215
guard.kill = 0

;[State 0, TargetState]
;type = TargetState
;triggerall = NumTarget(4000)
;trigger1 = movehit
;value = 4020
;ID = 4000

;[State 0, Helper]
;type = Helper
;trigger1 = NumTarget(4000)
;trigger1 = movehit
;name = "Poison effect Light"
;ID = 4006
;stateno = 4006 
;pos = 0,0
;postype = p2
;facing = -1
;ownpal = 1
;ignorehitpause = 1


[state 1200, smoke bomb]
type = explod
trigger1 = animelem = 3
anim = 2020
scale = const(size.xscale)*1.25,const(size.yscale)*1.25
postype = p1
pos = 0,-100
bindtime = 8
removetime = -2
sprpriority = 4
ownpal = 1

[state 1200, snd]
type = playsnd
trigger1 = animelem = 3
value = S1200,0

[state 1200, stop]
type = velset
trigger1 = time = 11
y = 0
x = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -6
persistent = 0
ignorehitpause = 1

;[state 1200, invisible]
;type = assertspecial
;trigger1 = time > 11
;flag = invisible

[state 1200, changestate]
type = changestate
triggerall = time = 24
trigger1 = var(27) = 0
value = 1202

[state 1200, changestate]
type = changestate
triggerall = time = 20
trigger1 = var(27) = 1
value = 1201


;---------------------------------------------------------------------------
;Smoke bomb forward
[statedef 1201]
type = A
movetype = A
physics = N
ctrl = 0
anim = 44
facep2 = 1

[state 1200, facing]
type = turn
trigger1 = p2dist x < -10
trigger1 = time = 6
persistent = 1
ignorehitpause = 1

[state 1200, invunerability]
type = nothitby
trigger1 = time < 12
value = SCA

[state 1201, limiter]
type = varadd
trigger1 = time = 0
var(32) = -1

[state 1200, visible]
type = assertspecial
trigger1 = time < 5
flag = invisible

;[state 1200, noairguard]
;type = assertspecial
;trigger1 = 1
;flag = noairguard

[State 1000, 2]
type = Helper
trigger1 = time = 5
helpertype = normal
name = "Reappear Hitbox"
ID = 1205
stateno = 1205
pos = 0,-100
postype = p1
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 1200, smoke bomb]
type = explod
trigger1 = time = 5
anim = 2020
scale = const(size.xscale)*1.25,const(size.yscale)*1.25
postype = p1
pos = 0,-100
bindtime = 8
removetime = -2
sprpriority = 4
ownpal = 1

[state 1200, snd]
type = playsnd
trigger1 = time = 5
value = S1200,0




[state 1201, playerpush]
type = playerpush
trigger1 = time < 5
value = 0

[state 1201, screenbound]
type = screenbound
trigger1 = time < 2
value = 0
movecamera = 1,1

[state 1201, moveforward]
type = posadd
trigger1 = time = 1
x = 700

[state 1201, pos set]
type = posadd
trigger1 = time = 1
y = -25

[state 1201, gravity]
type = gravity
trigger1 = time > 12

[state 1201, small jump]
type = velset
trigger1 = time = 12
y = -12

[state 50, steering]
type = veladd
trigger1 = time >= 12
trigger1 = command = "holdfwd"
trigger1 = vel x < 12
x = 0.3

[state 50, steering]
type = veladd
trigger1 = time >= 12
trigger1 = command = "holdback"
trigger1 = vel x > -12
x = -0.3


[state 1201, ctrl]
type = ctrlset
trigger1 = time = 12
value = 1

[state x, combo damage score]
type = varadd
trigger1 = time = 5
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1201, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;---------------------------------------------------------------------------
;Smoke bomb backward
[statedef 1202]
type = A
movetype = A
physics = N
ctrl = 0
anim = 44
facep2 = 1

[state 1202, facing]
type = turn
trigger1 = p2dist x < -10
trigger1 = time = 6
persistent = 1
ignorehitpause = 1

[state 1201, screenbound]
type = screenbound
trigger1 = time < 2
value = 0
movecamera = 1,1

[state 1201, limiter]
type = varadd
trigger1 = time = 0
var(32) = -1

[state 1200, visible]
type = assertspecial
trigger1 = time < 5
flag = invisible

[state 1200, noairguard]
type = assertspecial
trigger1 = time < 16
flag = noairguard

[State 1000, 2]
type = Helper
trigger1 = time = 5
helpertype = normal
name = "Reappear Hitbox"
ID = 1205
stateno = 1205
pos = 0,-100
postype = p1
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 1200, smoke bomb]
type = explod
trigger1 = time = 5
anim = 2020
scale = const(size.xscale)*1.25,const(size.yscale)*1.25
postype = p1
pos = 0,-100
bindtime = 8
removetime = -2
sprpriority = 4
ownpal = 1

[state 1200, snd]
type = playsnd
trigger1 = time = 5
value = S1200,0

[state 1201, playerpush]
type = playerpush
trigger1 = time < 5
value = 0

[state 1201, moveforward]
type = posadd
trigger1 = time = 1
x = -700

[state 1201, pos set]
type = posadd
trigger1 = time = 1
y = -25

[state 1201, gravity]
type = gravity
trigger1 = time > 12

[state 1201, small jump]
type = velset
trigger1 = time = 12
y = -12

;[state 1200, invunerability]
;type = nothitby
;trigger1 = time < 12
;value = SCA

[state 50, steering]
type = veladd
trigger1 = time >= 12
trigger1 = command = "holdfwd"
trigger1 = vel x < 6
x = 0.3

[state 50, steering]
type = veladd
trigger1 = time >= 12
trigger1 = command = "holdback"
trigger1 = vel x > -6
x = -0.3

[state x, combo damage score]
type = varadd
trigger1 = time = 5
v = 18
value = -3
persistent = 0
ignorehitpause = 1


[state 1201, ctrl]
type = ctrlset
trigger1 = time = 16
value = 1

[state 1201, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52


;--------------------------------------------------------------------------
;Reappear Hitbox
[statedef 1205]
type = U
movetype = A
physics = U
anim = 1201

[state 1205, combo limiter]
type = parentvaradd
trigger1 = movehit
var(33) = -1
ignorehitpause
persistent = 0

[State 1200, 2]
type = HitDef
trigger1 = animelem = 1
triggerall = roundstate = 2
attr = S, SP
animtype  = heavy
damage    = 20
guardflag = MA
hitflag = A+
pausetime = 6,6
sparkno = 0
getpower = 25
id = 4000
sparkxy = 40,-200
hitsound   = S1000,4
guardsound = S120, 0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
air.hittime = 24
ground.velocity = ifelse(parent,var(33) > 0,-8,-16),ifelse(parent,var(33) > 0,0,-4)
air.velocity = ifelse(parent,var(33) > 0,-1,-6),ifelse(parent,var(33) > 0,-16,-4)
guard.velocity = -16              
guard.hittime = 8
guard.slidetime = 8
airguard.velocity = -5,-12 
airguard.hittime = 22
fall = ifelse(parent,var(33) > 0,0,1)
fall.recover = 0
guard.dist = 215

[state 1205, parentvaradd]
type = parentvaradd
trigger1 = movehit
v = 18
value = -6
ignorehitpause = 1
persistent = 0


[state 1205, destroyself]
type = destroyself
trigger1 = animtime = 0
trigger2 = time > 10

;===========================================================================
;Anti Air Gas
;===========================================================================
; Light Version
[statedef 1260]
type = S
movetype = A
physics = S
anim = 1260
ctrl = 0
poweradd = 110

[state X , Y axis charge reset]
type = varset
trigger1 = time = 0
var(43) = 0

[state 1260, explod]
type = explod
trigger1 = animelemtime(8)=0
anim = 1002
postype = p1
pos = 0,0
removeongethit = 1
sprpriority = 2
id = 1260
removetime = -2
ignorehitpause = 0
scale = 1.1,1.1
ownpal = 1

;[state 1260, nothitby]
;type = nothitby
;trigger1 = animelemtime(13) < 0
;value = A


[state 1260, varset]
type = varset
trigger1 = time = 0
var(23) = -6;-6

[state 1280 varset]
type = varset
trigger1 = time = 0
var(24) = 12;10

[state 1260, snd]
type = playsnd
trigger1 = animelemtime(8) = 0
value = S1260,0;1103,0

[state 1260, proj 1, ]
type = projectile
trigger1 = animelemtime(8) = 0
attr = S,SP
projanim = 4000
projremovetime = 55
projremanim = 4011
offset = 170,-220
velocity = 0,-6
accel = -0.25,-0.35
air.fall = 1
postype = p1
hitflag = MAF
guardflag = MA
damage = 20,ifelse(enemy,statetype = A,6,2)
animtype = heavy
pausetime = 2,2
guard.pausetime =6,6
sparkxy = 0,0
hitsound= S1000,4
ground.type = High
; Ground
ground.velocity = 2,0
ground.hittime = 30
ground.slidetime = 30
air.velocity = -2,-6
guard.velocity = -20
airguard.velocity = -18,-4
guard.hittime = 14
guard.slidetime = 14

[state 1260, proj 2]
type = projectile
trigger1 = animelemtime(10) = 0
attr = S,SP
projanim = 4000
projremovetime = 55
projremanim = 4011
offset = 170,-220
velocity = 3,-6
accel = -0.25,-0.35
air.fall = 1
postype = p1
hitflag = MAF
guardflag = MA
damage = 20,ifelse(enemy,statetype = A,6,2)
animtype = heavy
pausetime = 2,2
sparkxy = 0,0
hitsound= S1000,4
ground.type = High
; Ground
ground.velocity = 2,0
ground.hittime = 30
ground.slidetime = 30
air.velocity = -4,-12
guard.velocity = -20
guard.pausetime =6,6
airguard.velocity = -18,-4
guard.hittime = 14
guard.slidetime = 14

[state 1260, proj 3]
type = projectile
trigger1 = animelemtime(13) = 0
attr = S,SP
projanim = 4000
projremovetime = 55
projremanim = 4011
offset = 170,-220
velocity = 6,-6
accel = -0.25,-0.35
air.fall = 1
postype = p1
hitflag = MAF
guardflag = MA
damage = 20,ifelse(enemy,statetype = A,6,2)
animtype = heavy
pausetime = 2,2
sparkxy = 0,0
hitsound= S1000,4
ground.type = High
; Ground
ground.velocity = -2,0
ground.hittime = 30
ground.slidetime = 30
guard.pausetime =6,6
airguard.velocity = -18,-4
air.velocity = -2,-6

guard.velocity = -20
guard.hittime = 14
guard.slidetime = 14

[state 1260, proj 5]
type = projectile
trigger1 = animelemtime(18) = 0
attr = S,SP
projanim = 4000
projremovetime = 55
projremanim = 4011
offset = 170,-220
velocity = 9,-6
accel = -0.25,-0.35
air.fall = 1
postype = p1
hitflag = MAF
guardflag = MA
damage = 20,ifelse(enemy,statetype = A,6,2)
animtype = up
pausetime = 6,6
sparkxy = 0,0
hitsound= S1000,4
ground.type = High
; Ground
ground.velocity = -24,-18
ground.hittime = 30
ground.slidetime = 30
air.velocity = -24,-18
guard.velocity = -20
guard.hittime = 30
guard.pausetime =6,6
airguard.velocity = -28,-6
guard.slidetime = 30
fall = 1
fall.recover = 0
fall.recovertime = 45

[State 1000, proj 4]
type = Helper
trigger1 = animelemtime(15) = 0
helpertype = normal
name = "Gas Light"
ID = 4060
stateno = 4060
pos = 170,-220
postype = p1
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 1260, combo dampener]
type = varadd
trigger1 = movehit
trigger1 = animelemtime(20) = 0
var(18) = -3

[state 1260, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;=============================================================
; Heavy Version
[statedef 1270]
type = S
movetype = A
physics = S
anim = 1270
ctrl = 0
poweradd = 120

[state X , Y axis charge reset]
type = varset
trigger1 = time = 0
var(43) = 0

[state 1270, varset]
type = varset
trigger1 = time = 0
var(23) = -8

[state 1280 varset]
type = varset
trigger1 = time = 0
var(24) = 21

[state 1260, nothitby]
type = nothitby
trigger1 = animelemtime(13) < 0
value = A

[state 1270, explod]
type = explod
trigger1 = animelemtime(8)=0
anim = 1002
postype = p1
pos = 0,0
removeongethit = 1
sprpriority = 2
id = 1260
removetime = -2
ignorehitpause = 0
scale = 1.1,1.1
ownpal = 1

[state 1270, snd]
type = playsnd
trigger1 = animelemtime(8) = 0
value = S1260,0;1103,0

[state 1270, proj]
type = projectile
trigger1 = animelemtime(8) = 0
attr = S,SP
projanim = 4000
projremovetime = 55
projremanim = 4011
offset = 170,-220
velocity = 9,-8
accel = -0.25,-0.35
air.fall = 1
postype = p1
hitflag = MAF
guardflag = MA
damage = 20,ifelse(enemy,statetype = A,6,2)
animtype = heavy
pausetime = 2,2
sparkxy = 0,0
hitsound= S1000,4
ground.type = High
; Ground
ground.velocity = -2,0
ground.hittime = 30
ground.slidetime = 30
air.velocity = -2,-6
guard.pausetime =6,6
airguard.velocity = -18,-4
guard.velocity = -18
guard.hittime = 14
guard.slidetime = 14

[state 1270, proj]
type = projectile
trigger1 = animelemtime(10) = 0
attr = S,SP
projanim = 4000
projremovetime = 55
projremanim = 4011
offset = 170,-220
velocity = 12,-8
accel = -0.25,-0.35
air.fall = 1
postype = p1
hitflag = MAF
guardflag = MA
damage = 20,ifelse(enemy,statetype = A,6,2)
animtype = heavy
pausetime = 2,2
sparkxy = 0,0
hitsound= S1000,4
ground.type = High
; Ground
ground.velocity = -2,0
ground.hittime = 30
ground.slidetime = 30
air.velocity = -2,-6
guard.pausetime =6,6
airguard.velocity = -18,-4
guard.velocity = -18
guard.hittime = 14
guard.slidetime = 14

[state 1270, proj]
type = projectile
trigger1 = animelemtime(12) = 0
attr = S,SP
projanim = 4000
projremovetime = 55
projremanim = 4011
offset = 170,-220
velocity = 15,-8
accel = -0.25,-0.35
air.fall = 1
postype = p1
hitflag = MAF
guardflag = MA
damage = 20,ifelse(enemy,statetype = A,6,2)
animtype = heavy
pausetime = 2,2
sparkxy = 0,0
hitsound= S1000,4
ground.type = High
; Ground
ground.velocity = -2,0
ground.hittime = 30
ground.slidetime = 30
air.velocity = -2,-6
guard.pausetime =6,6
airguard.velocity = -18,-4
guard.velocity = -18
guard.hittime = 14
guard.slidetime = 14

[state 1270, proj 5]
type = projectile
trigger1 = animelemtime(18) = 0
attr = S,SP
projanim = 4000
projremovetime = 55
projremanim = 4011
offset = 170,-220
velocity = 18,-8
accel = -0.25,-0.35
air.fall = 1
postype = p1
hitflag = MAF
guardflag = MA
damage = 20,ifelse(enemy,statetype = A,6,2)
animtype = up
pausetime = 6,6
sparkxy = 0,0
hitsound= S1000,4
ground.type = High
; Ground
ground.velocity = -24,-18
ground.hittime = 30
ground.slidetime = 30
air.velocity = -24,-18
guard.velocity = -18
guard.pausetime =6,6
airguard.velocity = -28,-6
guard.hittime = 30
guard.slidetime = 30
fall = 1
fall.recover = 0
fall.recovertime = 45

[State 1270, 2]
type = Helper
trigger1 = animelemtime(15) = 0
helpertype = normal
name = "Gas Light"
ID = 4060
stateno = 4060
pos =170,-220
postype = p1
ownpal = 1
persistent = 0
ignorehitpause = 1




[state 1270, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;EX Version
[statedef 1280]
type = S
movetype = A
physics = S
anim = 1280
ctrl = 0
poweradd = -500


[state X , Y axis charge reset]
type = varset
trigger1 = time = 0
var(43) = 0

[state 1280, invun]
type = nothitby
trigger1 = animelemtime(13) < 0
value = SCA

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
trigger1 = animelemtime(1) > 0 && animelemtime(12) < 0
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1280 varset]
type = varset
trigger1 = time = 0
var(23) = -10

[state 1280 varset]
type = varset
trigger1 = time = 0
var(24) = 24

[state 1280, explod]
type = explod
trigger1 = animelemtime(8)=0
anim = 1002
postype = p1
pos = 0,0
removeongethit = 1
sprpriority = 2
id = 1260
removetime = -2
ignorehitpause = 0
scale = 1.1,1.1
ownpal = 1

[state 1280, snd]
type = playsnd
trigger1 = animelemtime(8) = 0
value = S1260,0;1103,0

[State 1280, proj 4]
type = Helper
trigger1 = animelemtime(16) = 0
helpertype = normal
name = "Spray"
ID = 4060
stateno = 4060
pos = 170,-220
postype = p1
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 1280, proj 1,]
type = projectile
trigger1 = animelemtime(8) = 0
attr = S,SP
projanim = 4000
projremovetime = 55
projremanim = 4011
offset = 170,-220
velocity = 0,-10
accel = -0.25,-0.35
getpower = 0
air.fall = 1
postype = p1
hitflag = MAF
guardflag = MA
damage = 20,ifelse(enemy,statetype = A,6,2)
animtype = UP
pausetime = 2,4
sparkxy = 0,0
hitsound= S1000,4
ground.type = High
; Ground
ground.velocity = -2,-6
ground.hittime = 30
ground.slidetime = 30
air.velocity = -4,-6
guard.velocity = -18
guard.pausetime =6,6
airguard.velocity = -18,-2
guard.hittime = 14
guard.slidetime = 14

[state 1280, proj 2]
type = projectile
trigger1 = animelemtime(11) = 0
attr = S,SP
projanim = 4000
projremovetime = 55
projremanim = 4011
offset = 170,-220
velocity = 6,-10
accel = -0.25,-0.35
air.fall = 1
postype = p1
hitflag = MAF
guardflag = MA
damage = 20,ifelse(enemy,statetype = A,6,2)
animtype = heavy
pausetime = 2,2
getpower = 0
sparkxy = 0,0
hitsound= S1000,4
ground.type = High
; Ground
ground.velocity = 2,0
ground.hittime = 30
ground.slidetime = 30

air.velocity = -1,-6
guard.pausetime =6,6
airguard.velocity = -18,-2
guard.velocity = -18
guard.hittime = 14
guard.slidetime = 14

[state 1280, proj 3]
type = projectile
trigger1 = animelemtime(14) = 0
attr = S,SP
projanim = 4000
projremovetime = 55
projremanim = 4011
offset = 170,-220
velocity = 12,-10
accel = -0.25,-0.35
air.fall = 1
postype = p1
hitflag = MAF
guardflag = MA
damage = 20,ifelse(enemy,statetype = A,6,2)
animtype = heavy
pausetime = 2,2
getpower = 0
sparkxy = 0,0
hitsound= S1000,4
ground.type = High
; Ground
ground.velocity = -2,0
ground.hittime = 30
ground.slidetime = 30

air.velocity = -1,-6
guard.pausetime =6,6
airguard.velocity = -18,-2
guard.velocity = -18
guard.hittime = 14
guard.slidetime = 14

[state 1280, proj 5]
type = projectile
trigger1 = animelemtime(17) = 0
attr = S,SP
projanim = 4000
projremovetime = 55
projremanim = 4011
offset = 170,-220
velocity = 18,-10
accel = -0.25,-0.35
air.fall = 1
postype = p1
hitflag = MAF
guardflag = MA
damage = 20,ifelse(enemy,statetype = A,6,2)
animtype = up
pausetime = 6,6
getpower = 0
sparkxy = 0,0
hitsound= S1000,4
ground.type = High
; Ground
ground.velocity = -24,-18
ground.hittime = 30
ground.slidetime = 30
air.velocity = -24,-18
guard.pausetime =6,6
airguard.velocity = -30,-6
guard.velocity = -24
guard.hittime = 28
guard.slidetime = 28

fall = 1
fall.recover = 0
fall.recovertime = 45



[state 1280, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------





;===========================================================================
;Defensive Option
;===========================================================================
[statedef 1400]
type    = S
physics = N
ctrl = 0
sprpriority = 1
facep2 = 1

[state 1400, turn]
type = turn
trigger1 = p2bodydist x < -30
trigger1 = time = 0

[state 1400, prevstatenoset]
type = varset
trigger1 = time = 0
v = 14
value = prevstateno

[state 1400, playerpush]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause


[state 1400, HB]
Type = hitby
trigger1 = 1
value = SCA,AT

[state 1400, Jump]
type = velset
trigger1 = time = 3
x = ifelse(command = "holdfwd",-4, ifelse(command ="holdback",-16 ,-8))
y = -20

[state 1400, velset negate]
type = velset
trigger1 = moveguarded
x = 0
persistent = 0
ignorehitpause = 1

[state 1400, gas snd]
type = playsnd
trigger1 = time = 4
value = S1000,1

[state 1400, gas snd]
type = playsnd
trigger1 = time = 1
value = S1400,0



[state 1400, gas FX]
type = explod
trigger1 = time > 5  && time < 24
anim = 4011
postype = p1
pos = -10,-100
sprpriority = -1
bindtime = 1
scale = const(size.xscale)*4,const(size.yscale)*4
persistent = 4
ownpal = 1

[state 1400, gas FX Giant]
type = explod
trigger1 = time = 4 
anim = 4011
postype = p1
pos = 30,100
sprpriority = -1
bindtime = 1
scale = const(size.xscale)*8,const(size.yscale)*8
persistent = 0
ownpal = 1

[State 1000, 2]
type = Helper
trigger1 = time = 4
helpertype = normal
name = "Gas Knockback"
ID = 1400
stateno = 1410
pos = 30,-100
sprpriority = -1
postype = p1
ownpal = 1

ignorehitpause = 1

[state 1400, gravity]
type = gravity
trigger1 = time > 4

[state 1400, poweradd]
type = poweradd
trigger1 = time = 0
value = -1000
persistent = 0

[state 1400, afterimage]
type = afterimage
trigger1 = time = 0
;length = 1
time = 5
timegap = 1

[state 1400, freeze]
type = pause
trigger1 = time = 0
time = 8
endcmdbuftime = 8

[State 1400, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 1400

[State 1400, 3]
type = ChangeAnim
trigger1 = Vel y > 0
trigger1 = anim = 1400 
persistent = 0
value = 1401

[state 1400, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
trigger1 = time > 5
value = 1401
ctrl = 0
ignorehitpause
persistent = 1

;-----------------------------------------------------------------
[statedef 1401]
type = S
movetype = I
physics = N
velset = 0,0

[state 1401, pos set]
type = posset
trigger1 = time = 0
y = 0

[state 1401, nothitby]
type = hitby
trigger1 = 1
value = SCA, AT

[state 1401, end]
type = changestate
trigger1 = time = 1
value = var(14)
ctrl = 1

;---------------------------------------------------------------------------
; Posion Knockdown - No damage
[statedef 1410]
type = A
movetype = A
physics = N
ctrl = 0

[state 1410, arc]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1410, angledraw]
type = angledraw
trigger1 = 1
scale = const(size.xscale)*4, const(size.yscale)*4

[state 1410, turn]
type = turn
trigger1 = facing != parent,facing
trigger1 = parent,stateno = 1100 || parent, stateno = 1110

[state 1410, hitoverride]
type = hitoverride
trigger1 = 1
attr = SCA, AP
time = 1
stateno = 4005
ignorehitpause = 1

[state 1410, end]
type = changestate
trigger1 = movereversed
value = 4005
ignorehitpause = 1

[state 1410, smoke]
type = explod
trigger1 = Random%15 = 0
postype = p2
anim = 4011
scale = 1, 1
sprpriority = 4
removetime = -2
pos = -50 + (random%100),enemy,const(size.mid.pos.y) - 40 + (random%80)
ownpal = 1

[state 1410, smoke]
type = explod
trigger1 = Random%15 = 0
postype = p2
anim = 4011
scale = 1, 1
sprpriority = 4
removetime = -2
pos = -50+(random%100),enemy,const(size.head.pos.y) - 40 + (random%80)
ownpal = 1

[state 1410, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[state 1410, anim]
type = changeanim
trigger1 = time = 0
value = 1410



[State 1410, 5] 
type = hitdef
trigger1 = !movecontact
persistent = 0
attr = S,SP
animtype  = back
damage    = 60,6
guardflag = MA
hitflag = MA
pausetime = 14,14
sparkno = -1
sparkxy = -10,-60
ground.type = high
givepower = -250
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -25,-15
air.velocity = -25,-15
id = 4000
guard.velocity = -15            
guard.hittime = 13
kill = 0
guard.kill = 0
guard.slidetime = 13
airguard.velocity = -14,-6
airguard.hittime = 16

;[state 1410, gas fx]
;type = helper
;triggerall = Numtarget(4000)
;trigger1 = movehit
;stateno = 1415
;name = "Gas FX"
;postype = p2
;pos = 0,0



[State 1410, TargetState]
type = TargetState
triggerall = NumTarget(4000)
trigger1 = movehit
value = 1420
ID = 4000


[State 1410, 4]
type = DestroySelf
trigger1 = movecontact||movereversed
trigger2 = BackEdgeDist < -150
trigger3 = time = 180
ignorehitpause = 1

;---------------------------------------------------------------------------
;Gas FX
[statedef 1415]
type = U
movetype = U
physics = U
anim = 9999

[state 1415, smoke]
type = explod
trigger1 = Random%15 = 0
postype = p2
anim = 4011
scale = 1, 1
sprpriority = 4
removetime = -2
pos = -50 + (random%100),enemy,const(size.mid.pos.y) - 40 + (random%80)
ownpal = 1

[state 1415, smoke]
type = explod
trigger1 = Random%15 = 0
postype = p2
anim = 4011
scale = 1, 1
sprpriority = 4
removetime = -2
pos = -50+(random%100),enemy,const(size.head.pos.y) - 40 + (random%80)
ownpal = 1

[state 1415, end]
type = destroyself
trigger1 = time = 180
 

;===========================================================================
[statedef 1420]
type    = A
movetype= H
physics = N
ctrl = 0

[State 1420, 1]
type = ChangeAnim
trigger1 = Anim != [5000, 5199]
trigger1 = SelfAnimExist(5030)
value = 5030

;[state 1420, color]
;type = palFX
;trigger1 = 1
;time = 180
;mul = 120,0,120

[State 1420, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1420, 3]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

;[state 4020, smoke]
;type = explod
;trigger1 = Random%15 = 0
;postype = p2
;anim = 4011
;scale = 1, 1
;sprpriority = 4
;removetime = -2
;pos = -50 + (random%100),enemy,const(size.mid.pos.y) - 40 + (random%80)
;ownpal = 1

;[state 4020, smoke]
;type = explod
;trigger1 = Random%30 = 0
;postype = p2
;anim = 4011
;scale = 1, 1
;sprpriority = 4
;removetime = -2
;pos = -50+(random%100),enemy,const(size.head.pos.y) - 40 + (random%80)
;ownpal = 1

[State 1420, 4]
type = selfState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= Const(movement.air.gethit.groundlevel)
value = 5040 ;HITA_RECOV

[State 1420, 5]
type = selfState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= Const(movement.air.gethit.groundlevel)
value = 5050 ;HITA_FALL

[State 1420, 6]
type = selfState
trigger1 = AnimTime = 0
value = 5035 ;Air get-hit (transition)

;===========================================================================
;Stinkosho
;===========================================================================
; Base Damage: 465 Applies Poison

[statedef 3000]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 3000
sprpriority = 0

[state X, AI charge limiter]
type = varset
trigger1 = time = 0
var(41) = 0

[state x, Minimum Super combo damage]
type = varset
trigger1 = time = 0
trigger1 = var(18) < 90
v = 18
value = 90
ignorehitpause = 1

[state 3000, Projectile immune]
type = nothitby
trigger1 = animelemtime(7) < 0
value = ,AP

[state 3000, nothitby]
type = nothitby
trigger1 = animelemtime(7) >= 0
value = SCA

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelemtime(4) = 0
sound = S3000, 0
poweradd = -3000
pos = 30,-140
time = 60
movetime = 60


[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(4) =[0, 14] ;7
anim = 3100
postype = back
sprpriority = -4
supermovetime = 60
removetime = 1
pausemovetime = 60
scale = (3-(time*0.15))*(1),(3-(time*0.15))*(1)
pos = 0,60-time*5
ownpal = 1

[state 1000, Giant sphere]
type = explod
trigger1 = time = 74
anim = 3010
sprpriority = -1
bindtime = -1
id = 3010
removetime = 189
ignorehitpause = 0
scale = const(size.xscale),const(size.yscale)
ownpal = 1

[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(4) = 15
anim = 3100
postype = back
vel = -0.1,0
sprpriority = -4
supermovetime = 60
removetime = 45
pausemovetime = 60
pos = 0,0
scale = 1,1
ownpal = 1

[State 1000, 2]
type = HitDef
trigger1 = time = 73
attr = S, HA
animtype  = heavy
damage    = 30,4
guardflag = MA
pausetime = 0,7
getpower = 0
givepower = 50 
sparkno = 3
sparkxy = 40,-200
hitsound   = S1000,3
guardsound = S120, 0
ground.type = low
ground.slidetime = 36
ground.hittime  = 36
ground.velocity = -4,-12
air.velocity = -4,-12
guard.velocity = -6            
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -6,-8 
airguard.hittime = 22
fall = 1
fall.recover = 0
guard.dist = 480

[State 1000, 2]
type = Helper
trigger1 = numhelper(3005) < 1
trigger1 = time = 74
helpertype = normal
name = "Gas SUPER"
ID = 3005
stateno = 3005
pos = 0,0
postype = p1
ownpal = 1
ignorehitpause = 1
scale = const(size.xscale),const(size.yscale)

[state 3000, no bg]
type = assertspecial
trigger1 = animelemtime(4) =[0,60]
flag = nobg
ignorehitpause = 1

[state 1000, dust front]
type = explod
trigger1 = time = 89
anim = 2010
sprpriority = 4
bindtime = -1
id = 3010
postype = p1
pos = 120,-30
removetime = 189
ignorehitpause = 0
scale = const(size.xscale)*3.5,const(size.yscale)*2
ownpal = 1

[state 1000, dust back]
type = explod
trigger1 = time = 89
anim = 2011
sprpriority = -2
bindtime = -1
id = 3010
postype = p1
pos = 120,-30
removetime = 189
ignorehitpause = 0
scale = const(size.xscale)*3.5,const(size.yscale)*2
ownpal = 1

[state 3000, end]
type = changestate
trigger1 = time = 264
value = 3001

;---------------------------------------------------------------------------
; Recover
[Statedef 3001]
type = S
movetype = I
physics = S
anim = 3005

[state 3001, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------
;Super Plasma
[statedef 3005]
type = S
movetype = A
physics = S
anim = 3001
sprpriority = 2

[state 3005, possition]
type = posset
trigger1 = 1
x = parent,pos x
y = parent,pos y
ignorehitpause = 1

[state 3005, invun]
type = nothitby
trigger1 = 1
value = SCA

[state 3005, layers]
type = sprpriority
trigger1 = 1
value = 2
ignorehitpause = 1

;[state 3005, trans]
;type = trans
;trigger1 = 1
;trans = addalpha
;alpha = 192,256
;ignorehitpause = 1

[State 3005, 5] 
type = hitdef
trigger1 = time < 188
persistent = 6
attr = S, HP
animtype  = BACK
damage    = ifelse(enemy,name = "SOR2"  || enemy,name = "Onslaught",26, 13), 4
guardflag = MA
getpower = 0
givepower = 25
hitflag = MAFD
pausetime = 0,7
sparkno = -1
sparkxy = -10,-60
hitsound   = 5
guardsound = S120, 0
ground.type = high
p1sprpriority = 2
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -10,-10
air.velocity = -10,-10
id = 4000
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
guard.velocity = -25            
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = -20,-2 
airguard.hittime = 16
fall = 1
fall.recover = 0
guard.dist = 1280

[State 0, VarSet]
type = VarSet
trigger1 = numtarget(4000)
trigger1 = movehit = 1
var(0) = target(4000),id
ignorehitpause = 1

[State x, POISON]
type = Helper
trigger1 = NumTarget(4000)
triggerall = movehit
trigger1 = time = 167
name = "Poison effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1

[state 3005, snd]
type = playsnd
trigger1 = time = 3

value = S3000,2
channel = 2

[state 3005, snd]
type = playsnd
trigger1 = time = 210
value = S1000,2
channel = 2

[State 3005, 5] 
type = hitdef
trigger1 = time = 188
persistent = 0
attr = S, HP
animtype  = back
damage    = 30, 9
guardflag = MA
hitflag = MAFD
getpower = 0
givepower = 25
pausetime = 0,7
sparkno = -1
sparkxy = -10,-60
hitsound   = S5000, 1
guardsound = S120, 0
ground.type = high
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -25,-40
air.velocity = -25,-40
down.velocity = -50,0
down.hittime = 30
id = 4000
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
guard.velocity = -25            
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = -20,-2 
airguard.hittime = 16
fall = 1
fall.recover = 0
guard.dist = 1280 


[state 3005, end sound]
type = stopsnd
trigger1 = time = 189
channel = 2

[state 3005, end]
type = destroyself
trigger1 = time = 189

 ;-------------------------------------------------------------------------
;Stalking Gas : Pole Catastrophe
[statedef 3040]
type = S
movetype = A
physics = S
ctrl = 0
anim = 3040
sprpriority = 1

[state X, AI charge limiter]
type = varset
trigger1 = time = 0
var(41) = 0

[state x, Minimum Super combo damage]
type = varset
trigger1 = time = 0
trigger1 = var(18) < 70
v = 18
value = 70

[state 3040, projectile invun]
type = nothitby
trigger1 = 1
value = ,AP
ignorehitpause = 1

[state 3040, orb hit check]
type = varset
trigger1 = time = 0
v = 19
value = 1

[state 3040, no bg]
type = assertspecial
trigger1 = animelemtime(4) =[0,60]
flag = nobg
ignorehitpause = 1

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelemtime(4) = 0
sound = S3000, 0
poweradd = -1000
pos = 30,-140
time = 60
movetime = 60

[state 3040, varset]
type = varset
trigger1 = time = 0
v = 28
value = 2

[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(4) =[0, 14] ;7
anim = 3100
postype = back
sprpriority = -4
supermovetime = 60
removetime = 1
pausemovetime = 60
scale = (3-(time*0.15))*(1),(3-(time*0.15))*(1)
pos = 0,60-time*5
ownpal = 1

[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(4) = 15
anim = 3100
postype = back
vel = -0.1,0
sprpriority = -4
supermovetime = 60
removetime = 43
pausemovetime = 60
pos = 0,0
scale = 1,1
ownpal = 1

[state 3040, statetypeset]
type = statetypeset
trigger1 = animelem = 6
statetype = C

[State 1010, 2]
type = HitDef
trigger1 = animelem = 7
attr = S, HA
animtype  = back
damage    = 30,3
guardflag = MA
pausetime = 10,0
sparkno = 3
sparkxy = 40,-200
hitsound   = S1000,3
guardsound = S120, 0
ground.type = High
ground.slidetime = 36
ground.hittime  = 36
ground.velocity = -24,0
air.velocity = -12,-6
guard.velocity = -14              
guard.hittime = 20
guard.slidetime = 20
airguard.velocity = -14,-3 
airguard.hittime = 22
fall = 0
fall.recover = 0
guard.dist = 215

[state 1000, explod]
type = explod
trigger1 = animelemtime(7) = 6
anim = 1002
sprpriority = 2
bindtime = -1
id = 1002
removetime = -2
ignorehitpause = 0
scale = const(size.xscale),const(size.yscale)
ownpal = 1

[state 3040, end]
type = changestate
trigger1 = animtime = 0
value = 3041

;---------------------------------------------------------------------------
;Level 1 Charge
[statedef 3041]
type = C
movetype = A
physics = S
ctrl = 0
anim = 3041
sprpriority = 1

[state 3040, charge snd fx]
type = playsnd
trigger1 = time = 2
value = S3040,0
persistent = 1
volume = 30

[state 3040, varset]
type = varset
trigger1 = time = 0
v = 28
value = 3

[state 3040, nothitby]
type = nothitby
trigger1 = var(28) > 0
value = ,AP
ignorehitpause = 1

[State 1000, 2]
type = Helper
trigger1 = numhelper(4080) < 1
trigger1 = time = 0
helpertype = normal
name = "Pole Catastrophe"
ID = 4080
stateno = 4080
pos = 150,-200
postype = p1
sprpriority = 3
ownpal = 1
persistent = 0
ignorehitpause = 1

;Level 1 blast
[state 3041, end]
type = changestate
triggerall = time < 24
trigger1 = ailevel = 0
trigger1 = command != "holda" && command != "holdb"
trigger2 = !numhelper(4080)
trigger3 = ailevel
trigger3 = p2bodydist x < 200
trigger3 = random < ailevel * 2
trigger3 = p2movetype = A
trigger4 = var(28) <= 0
value = 3045

;Level 1 blast
[state 3041, end]
type = changestate
triggerall = time >= 24
trigger1 = command = "holda" || command = "holdb"
trigger1 = ailevel = 0
trigger2 = ailevel 
value = 3042

;---------------------------------------------------------------------------
;Level 2 Charge
[statedef 3042]
type = C
movetype = A
physics = S
ctrl = 0
anim = 3041

[state 3040, varset]
type = varadd
trigger1 = time = 0
v = 28
value = 3

[state 3040, nothitby]
type = nothitby
trigger1 = var(28) > 0
value = ,AP
ignorehitpause = 1

[state 641, fx]
type = explod
trigger1 = 1
anim = F61
pos = 150,0
scale = 1,1
ownpal = 1
persistent = 16


;ducking
[state 3040, ducking]
type = statetypeset
trigger1 = animelemtime(6) = 0
statetype = C

[state 3040, charge snd fx]
type = playsnd
trigger1 = time = 2
value = S3040,0
persistent = 1
volume = 60

[state 3040, slight intimidation]
type = envshake
trigger1 = 1
time = 6
ampl = 2
persistent = 6

;Level 1 blast
[state 3041, end]
type = changestate
triggerall = time < 24
trigger1 = command != "holda" && command != "holdb"
trigger1 = ailevel = 0
trigger2 = !numhelper(4080)
trigger3 = ailevel
trigger3 = p2bodydist x < 200
trigger3 = random < ailevel * 4
trigger3 = p2movetype = A
trigger4 = var(28) <= 0
value = 3045

;Level 3 blast
[state 3041, end]
type = changestate
triggerall = time = 24
trigger1 = command = "holda" || command = "holdb"
trigger1 = ailevel = 0
trigger2 = ailevel 
value = 3043

;---------------------------------------------------------------------------
;Level 3 Charge
[statedef 3043]
type = C
movetype = A
physics = S
ctrl = 0
anim = 3041

[state 3040, charge snd fx]
type = playsnd
trigger1 = time = 2
value = S3040,0
persistent = 1
volume = 100

[state 3040, nothitby]
type = nothitby
trigger1 = var(28) > 0
value = ,AP
ignorehitpause = 1

[state 641, fx]
type = explod
trigger1 = 1
anim = F61
pos = 150,0
scale = 1.4,1.2
ownpal = 1
persistent = 16

[state 3040, slight intimidation]
type = envshake
trigger1 = 1
time = 6
ampl = 4
persistent = 6

[state 3040, varset]
type = varadd
trigger1 = 1
trigger1 = var(28) < 9
v = 28
value = 3
persistent = 24

[state 3040, varset]
type = varset
trigger1 = time = 0
trigger1 = var(28) > 9
v = 28
value = 9
persistent = 0

;Level 3 blast
[state 3041, end]
type = changestate
;triggerall = time < 24
trigger1 = command != "holda" && command != "holdb"
trigger1 = !ailevel
trigger2 = ailevel
;trigger2 = time > 6
trigger2 = random < ailevel * 12
trigger3 = !numhelper(4080)
trigger4 = var(28) <= 0
value = 3045

;Level 1 blast
[state 3041, end]
type = changestate
trigger1 = time >= 24
trigger1 = command = "holda" || command = "holdb"
trigger1 = ailevel = 0
value = 3043



;--------------------------------------------------------------------------
;Launch Energy Ball
[statedef 3045]
type = C
movetype = A
physics = N
anim = 3042

[state 3040, nothitby]
type = nothitby
trigger1 = time < 24
trigger2 = var(28) > 0
value = ,AP
ignorehitpause = 1

[State 3045, 2]
type = Helper
trigger1 = !numhelper(4089)
trigger1 = time = 0
helpertype = normal
name = "Plasma Timer"
ID = 4089
stateno = 4089
pos = 0,0
postype = p1
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 3045, launch snd fx]
type = playsnd
trigger1 = time = 0
value = S3040,1

[state 3045, launch snd fx]
type = playsnd
trigger1 = time = 0
value = S3040,1

[state 3045, launch snd fx]
type = playsnd
trigger1 = time = 0
value = S3040,1

[state 3045, statetypeset]
type = statetypeset
trigger1 = animelemtime(3) = 0
statetype = S


[state 3045, end]
type = changestate
trigger1 = animtime = 0
ctrl = 1
value = 0

;--------------------------------------------------------------------------
;Sommersault Facesit
[Statedef 3080]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 3080
sprpriority = -2

[state 3080, anti pushblock]
type = playerpush
trigger1 = animelem = 4
value = 0
ignorehitpause = 1

[state 3080, Explod]
type = explod
trigger1 = time = 0
trigger1 = !numexplod(3080)
anim = 3085
id = 3080
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = 0,0
removeongethit = 1
sprpriority = 2


[state X, AI charge limiter]
type = varset
trigger1 = time = 0
var(41) = 0


[state 3040, no bg]
type = assertspecial
trigger1 = animelemtime(3) =[0,60]
flag = nobg
ignorehitpause = 1

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelemtime(3) = 0
sound = S3000, 0
poweradd = -1000
pos = 30,-140
time = 60
movetime = 60

[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(3) =[0, 14] ;7
anim = 3100
postype = back
sprpriority = -4
supermovetime = 60
removetime = 1
pausemovetime = 60
scale = (3-(time*0.15))*(1),(3-(time*0.15))*(1)
pos = 0,60-time*5
ownpal = 1

[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(3) = 15
anim = 3100
postype = back
vel = -0.1,0
sprpriority = -4
supermovetime = 60
removetime = 43
pausemovetime = 60
pos = 0,0
scale = 1,1
ownpal = 1

[state 3080, width]
type = width
trigger1 = 1
edge = 200,0

[state 3080, nothitby]
type = nothitby
trigger1 = 1
value = ,AP

[state 3080, nothitby]
type = nothitby
trigger1 = movehit
value = SCA
time = 60

[state 3080, velset]
type = velset
trigger1 = animelem = 4
x = 42
y = -18
persistent = 0

[state 3080, statetypeset]
type = statetypeset
trigger1 = animelem = 4
statetype = A
physics = N

[state 3080, snd]
type = playsnd
trigger1 = animelemtime(4)=0
value = S1103,2

[State 3080, 2]
type = HitDef
trigger1 = animelem = 6
persistent = 0
attr = A, HT
animtype  = Medium
damage    = 0
guardflag = HA
hitflag = MAF
pausetime = 4,4
sparkno = 1
id = 1150
sparkxy = -60,-270
hitsound   = F5,1
guardsound = S120, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
air.hittime = 20
ground.velocity = -12
air.velocity = -12,-10
guard.velocity = -18              
guard.hittime = 10
guard.slidetime = 10
airguard.velocity = -12,-4 
airguard.hittime = 18
forcenofall = 1
guard.dist = 270
kill = 0

[State 3080, 2]
type = HitDef
trigger1 = animelemtime(8) >= 0
trigger1 = !moveguarded
persistent = 0
attr = A, HT
animtype  = heavy
damage    = 0
guardflag = HA
hitflag = MAF
id = 1151
pausetime = 8,8
sparkno = -1
getpower = 0
priority = 1,miss
sparkxy = -10,-60
hitsound   = S1,1
guardsound = S120, 0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
p2stateno = 3090
p2facing = 1
hitonce = 1
ground.velocity = -10,-12
air.velocity = -8,-12
guard.velocity = -28             
guard.hittime = 20
guard.slidetime = 20
guard.dist = 270 
kill = 0
fall = 1
fall.recovertime = 30
down.hittime = 30
fall.recover = 0

[state 3080, bind]
type = targetbind
trigger1 = movehit
trigger1 = numtarget(1151)
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = 210, -120
ignorehitpause = 1

[state 3080, bind]
type = targetbind
trigger1 = movehit
trigger1 = numtarget(1151)
trigger1 = AnimElemTime(6) >= 0 
pos = 210, -120
ignorehitpause = 1

[state 3080, guard bounce]
type = velmul
trigger1 = moveguarded
x = -0.3
persistent = 0
ignorehitpause = 0

[state 3080, guard bounce]
type = velset
trigger1 = moveguarded
y = -12
persistent = 0
ignorehitpause = 0

[state 3080, invuner]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause
persistent = 1


[state 3080, gravity]
type = gravity
trigger1 = pos y < -1
ignorehitpause = 0
persistent = 1

[state 3080, end]
type = changestate
triggerall = movehit
trigger1 = numtarget(1151)
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 3081

[state 3080, end]
type = changestate
trigger1 = !numtarget(1151)
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 3085

;---------------------------------------------------------------------------
;Sommersault Seated hit
[statedef 3081]
type = C
movetype = A
physics = N
poweradd = 0
anim = 3081
sprpriority = -2
movehitpersist = 1

[state 3080, Explod]
type = explod
trigger1 = time = 0
trigger1 = !numexplod(3081)
anim = 3086
id = 3081
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = 0,0
removeongethit = 1
sprpriority = 2

[state 3081, Removeexplod]
type = removeexplod
trigger1 = numexplod(3080)
id = 3080

[state 3081, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 3,2
ownpal = 1
sprpriority = -4

[state 3081, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 3081, width]
type = width
trigger1 = 1
edge = 250,0

[state 3081, velset]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 3081, posset]
type = posset
trigger1 = !movehit
trigger1 = time = 0
y = 0

[state 3081, posset]
type = posset
trigger1 = movehit
trigger1 = time = 0
y = 0

[state 3081, envshake]
type = envshake
trigger1 = time = 0
ampl = -6
time = 12
freq = 60
phase = 60

[state 3081, snd]
type = playsnd
trigger1 = time = 0
value = S52,0

[state 3081, explod]
type = explod
trigger1 = time = 0
anim = 1155
id = 1150
scale = const(size.xscale),const(size.yscale)
postype = p1
bindtime = -1
sprpriority = -2

[state 3081, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
pos = 92,-16;160+(target,const(size.head.pos.y)/2), 0

[state 3081, bind]
type = targetbind
trigger1 = movehit
trigger1 = AnimElemTime(6) >= 0 && animelemtime(55) < 0
pos = 106,-4;140,-10



[state 3081, target]
type = targetstate
trigger1 = time = 0
value = 3091

[state 3081, damage]
type = targetlifeadd
trigger1 = time = 0
value = floor(-32*fvar(10))

[state 3081, hitadd]
type = hitadd
trigger1 = time =0
value = 1

[state 3081, explod]
type = explod
trigger1 = animelemtime(7) = 0
trigger2 = animelemtime(22) = 0
trigger3 = animelemtime(37) = 0
trigger1 = !numexplod(2020)
anim = 2020
id = 2020
scale = const(size.xscale)*1.75,const(size.yscale)*1.75
postype = p1
pos = 94,-36
bindtime = -1
sprpriority = 3

[state 3081, fx]
type = explod
trigger1 = animelemtime(7) >= 0 && animelemtime(18) < 0
trigger2 = animelemtime(22) >= 0 && animelemtime(33) < 0
trigger3 = animelemtime(37) >= 0 && animelemtime(53) < 0
anim = F61
pos = 94,0
scale = 4,3
ownpal = 1
sprpriority = -4
persistent = 8

[state 3081, damage]
type = targetlifeadd
triggerall = enemy,name != "SOR2"
trigger1 = animelemtime(7) >= 0 && animelemtime(18) < 0
trigger2 = animelemtime(22) >= 0 && animelemtime(33) < 0
trigger3 = animelemtime(37) >= 0 && animelemtime(53) < 0
value = floor(-6*fvar(10))
persistent = 3

[state 3081, damage]
type = targetlifeadd
triggerall = enemy,name = "SOR2"
trigger1 = animelemtime(7) >= 0 && animelemtime(18) < 0
trigger2 = animelemtime(22) >= 0 && animelemtime(33) < 0
trigger3 = animelemtime(37) >= 0 && animelemtime(53) < 0
value = -12
persistent = 3

[state 3081, Fart Sound]
type = playsnd
trigger1 = animelemtime(7) = 0
trigger2 = animelemtime(22) = 0
trigger3 = animelemtime(37) = 0
value = S3000,1;S1000,2

[state 3081, Fart Sound]
type = playsnd
trigger1 = animelemtime(22) = 0
trigger2 = animelemtime(37) = 0
value = S3000,1;S1000,2

[state 3081, Fart Sound]
type = playsnd
trigger1 = animelemtime(37) = 0
value = S3000,1;S1000,2

[state 3081, envshake]
type = envshake
trigger1 = animelemtime(7) = 0
trigger2 = animelemtime(22) = 0
ampl = -6
time = 30

[state 3081, envshake]
type = envshake
trigger1 = animelemtime(37) = 0
ampl = -12
time = 45

[state 3081, hitadd]
type = hitadd
trigger1 = animelemtime(7) >= 0 && animelemtime(18) < 0
trigger2 = animelemtime(22) >= 0 && animelemtime(33) < 0
trigger3 = animelemtime(37) >= 0 && animelemtime(53) < 0
value = 1
persistent = 4

[state 3081, gas fx]
type = explod
trigger1 = animelemtime(7) > 0 && animelemtime(18) < 0
trigger2 = animelemtime(22) >= 0 && animelemtime(33) < 0
trigger3 = animelemtime(37) >= 0 && animelemtime(53) < 0
anim = 4011
postype = p1
pos = 94,-12
bindtime = 0
scale = const(size.xscale)*1.5,const(size.yscale)*1.5
persistent = 4
sprpriority = 4
vel = (random%20)-10,4 + random%8
accel = 0,-1.8
ownpal = 1

[State 3081, 2]
type = Helper
trigger1 = animelemtime(54) = 0
helpertype = normal
name = "Gas Throw"
ID = 4000
stateno = 4050
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1

[state 3081, end]
type = changestate
trigger1 = animtime = 0
value = 3082


;-------------------------------------------------------------------------
;Jump off
[statedef 3082]
type = A
movetype = I
physics = N
velset = -24,-18

[state 3081, Removeexplod]
type = removeexplod
trigger1 = numexplod(3081)
id = 3081

[state 3082, gravity]
type = gravity
trigger1 = 1

[state 3082, push]
type = playerpush
trigger1 = 1
value = 0

[state 3082, invun]
type = nothitby
trigger1 = 1
value = SCA

[state x, combo damage score]
type = varadd
trigger1 = time = 0
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[State 3082, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 3082, 3]
type = ChangeAnim
trigger1 = Vel y > Const720p(-8)
trigger1 = SelfAnimExist(anim + 3)
trigger1 = anim >= 41 && anim <= 43
persistent = 0
value = Anim + 3

[state 3082, end]
type = changestate
triggerall = time > 3
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52

;-------------------------------------------------------------------------
;Sommersault Seat miss
[statedef 3085]
type = C
movetype = I
physics = N
anim = 3082
sprpriority = -2

[state 3085, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 0,0
scale = 3,2
ownpal = 1

[state 3080, Explod]
type = explod
trigger1 = time = 0
trigger1 = !numexplod(3082)
anim = 3087
id = 3082
scale = const(size.xscale),const(size.yscale)
postype = p1
pos = 0,0
removeongethit = 1
sprpriority = 2

[state 3081, Removeexplod]
type = removeexplod
trigger1 = numexplod(3080)
id = 3080

[state 3085, velset]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 3085, posset]
type = posset
trigger1 = time = 0
y = 0

[state 3085, envshake]
type = envshake
trigger1 = time = 0
ampl = -12
time = 30
freq = 60
phase = 60

[state 3085, explod]
type = explod
trigger1 = time = 0
anim = 1156
id = 1155
scale = const(size.xscale),const(size.yscale)
postype = p1
bindtime = -1
sprpriority = -2

[state 3085, snd]
type = playsnd
trigger1 = time = 0
value = S52,0

[state 3085, end]
type = changestate
trigger1 = animtime =0
value = 648


;==========================================================================
; Victim Animation
;==========================================================================
[statedef 3090]
type = A
movetype = H
physics = N
sprpriority = -1

[state 3090, poweradd]
type = poweradd
trigger1 = time = 0
value = 100

[state 3090, anim]
type = changeanim2
trigger1 = time = 0
value = 3090

[state 3090, end]
type = selfstate
trigger1 = time = 300
value = 5050

;--------------------------------------------------------------------------
[statedef 3091]
type = L
movetype = H
physics = N
sprpriority = -1

[state 3091, velset]
type = velset
trigger1 = time = 0
x = 1
y = 1

[state 3091, poweradd]
type = poweradd
trigger1 = time = 0
value = 100

[state 3091, anim]
type = changeanim2
trigger1 = time = 0
value = 3091

[state 3091, anim]
type = changeanim
trigger1 = anim = 3091
trigger1 = animtime = 0
value = 5110

[state 3091, end]
type = selfstate
trigger1 = time = 230
value = 5110

[state 3091, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 3091, end]
type = selfstate
trigger1 = time = 300
value = 5050
;-----------------------------------------------------------------------------------
; Pause before getting up
[Statedef 3092]
type    = L
movetype= H
physics = N

;[state 1182, posadd]
;type = posadd
;trigger1  = time = 0
;x = (const(size.head.pos.y)/2)

[state 3092, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State 3092, 1]
type = ChangeAnim
persistent = 0
trigger1 = time = 0
value = 5110 

[State 3092, 5]
type = PosSet
trigger1 = Time = 1
y = 0

[State 3092, 8]
type = VelSet
trigger1 = Time = 1
y = 0
x = 0


[State 3092, 11] ;If just died
type = selfState
triggerall = !alive
trigger1 = time > 40
value = 5150

[state 3092, selfstate]
type = selfstate
trigger1 = alive
trigger1 = time > 40
value = 5120


;---------------------------------------------------------------------------
; Projectile Gas - Light
[statedef 4000]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 3

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "Hey I'm Ikemen override shit!"

[state 4000, arc]
type = velset
trigger1 = time = 0
y = 0
x = parent,var(23)

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4000, attackdist]
type = attackdist
trigger1 = 1
value = 200

[state 4000, Light wind]
type = velset
triggerall = parent,stateno = 1100
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = floor(p2dist x * 0.0625)
Y = floor((p2dist y - 160) * 0.0625)
persistent = 0

[state 4000, Hard wind]
type = velset
triggerall = vel x < 25
trigger1 = parent,stateno = 1110
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = floor(p2dist x * 0.125)
y = floor((p2dist y - 160) * 0.125)
persistent = 0

[state 4000, EX wind]
type = velset
trigger1 = parent,stateno = 1120
trigger1 = parent,time > 8
trigger1 = rootdist x < 0
x = floor(p2dist x * 0.25)
y = floor((p2dist y - 160) * 0.25) 
persistent = 0

[state 4000, super wind]
type = veladd
triggerall = vel x < 25
trigger1 = parent,stateno = 3000
trigger1 = rootdist x < 0
x = 16

[state 4001, turn]
type = turn
trigger1 = facing != parent,facing
trigger1 = parent,stateno = 1100 || parent, stateno = 1110 || parent, stateno = 1120 || parent,stateno = 3000

[state 4000, hitoverride]
type = hitoverride
trigger1 = 1
attr = SCA, AP
time = 1
stateno = 4005
ignorehitpause = 1
persistent = 1

[state 4000, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4000, anim]
type = changeanim
trigger1 = time = 0
value = 4000

[state 4000, gas fx]
type = explod
trigger1 = (random%10)=0
pos = -10,0
scale = 1,2
removetime = -2
bindtime = 1
anim = 4010
ownpal = 1

[State 4000, 5] 
type = hitdef
trigger1 = !moveguarded
persistent = 2
attr = S, SP
animtype  = Hard
damage    = 40,4
guardflag = MA
getpower = 30
givepower = 50
hitflag = MAF
pausetime = 1,4
sparkno = -1
sparkxy = -10,-60
hitsound   = S1000,4
hitonce = 1
p2facing = 1
guardsound = S120, 0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -40,0
air.velocity = -18,-4
id = 4000
guard.velocity = -32            
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = -20,-2 
airguard.hittime = 16
guard.kill = 1
guard.dist = 640

[State 0, VarSet]
type = VarSet
trigger1 = movehit
trigger1 = numtarget(4000) 
var(0) = target(4000),id
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = NumTarget(4000)
trigger1 = movehit
;trigger1 = hitpausetime = 3
name = "Ranged Poison effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 4001, end]
type = changestate
trigger1 = movecontact
value = 4005

[state x, combo damage score]
type = parentvaradd
trigger1 = movehit
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[State 4001, 4]
type = DestroySelf
trigger1 = frontEdgeDist < -80
trigger2 = movereversed
trigger3 = time > parent,var(24)
trigger4 = backedgedist < -30

[state 4000, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -Vel y
value = 4001

;-------------------------------------------------------
; Projectile Gas - Light
[statedef 4002]
type = A
movetype = I
physics = N
ctrl = 0
sprpriority = 3

[state 4000, arc]
type = velset
trigger1 = time = 0
y = 5
x = 3

[state 4000, descent]
type = veladd
trigger1 = time > 0
y = 0.15

[state 4000, slow]
type = velmul
trigger1 = time = 180
x = 0.6

[state 4000, attackdist]
type = attackdist
trigger1 = 1
value = const(size.proj.attack.dist)


[state 4000, hitoverride]
type = hitoverride
trigger1 = 1
attr = SCA, AP,AA
time = 1
stateno = 4005
ignorehitpause = 1
persistent = 1

[state 4000, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4000, anim]
type = changeanim
trigger1 = time = 0
value = 4000

[state 4000, gas fx]
type = explod
trigger1 = (random%10)=0
pos = -10,0
scale = 1,2
removetime = -2
bindtime = 1
anim = 4010
ownpal = 1

[State 4000, 5] 
type = hitdef
trigger1 = !moveguarded && !movehit
persistent = 3
attr = S, SP
animtype  = Hard
damage    = 40, 4
persistent = 1
guardflag = MA
getpower = 30
givepower = 50
hitflag = MA
pausetime = 0,10
sparkno = -1
sparkxy = -10,-60
hitsound   = S1000,4
hitonce = 1
guardsound = S120, 0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -40,0
air.velocity = -18,-4
id = 4000
guard.velocity = -25            
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = -20,-2 
airguard.hittime = 16
guard.kill = 0
guard.dist = 640



[State 0, TargetState]
type = TargetState
triggerall = NumTarget(4000)
trigger1 = movehit
value = 4020
ID = 4000

[State 0, Helper]
type = Helper
;trigger1 = !numhelper(4006)
trigger1 = NumTarget(4000)
trigger1 = movehit
name = "Ranged Poison effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1


[State 4001, 4]
type = DestroySelf
trigger1 = moveguarded || movehit
trigger2 = BackEdgeDist < -10
trigger3 = movereversed
trigger4 = movecontact > 3

[state 4000, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -Vel y
value = 4001


;-------------------------------------------------------
;Poisoning State
[statedef 4020]
type = U
Movetype = H
physics = U


[State 4020, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = statetype = S || statetype = C
statetype = S
physics = S
ignorehitpause = 1

[State 4020, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = statetype = A ;|| statetype = L
statetype = A 
physics = A
ignorehitpause = 1

[State 4020, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = statetype = L
statetype = L 
physics = C
ignorehitpause = 1

[State 4020, 1]
type = ChangeAnim2
;trigger1 = !time
trigger1 = !hitshakeover
trigger1 = statetype != L
value = 4020+(statetype = A)
ignorehitpause = 1

[State 4020, 1]
type = ChangeAnim2
;trigger1 = !time
trigger1 = !hitshakeover
trigger1 = statetype = L
value = 4051
ignorehitpause = 1


[State 0, HitVelSet]
type = hitVelSet
trigger1 = !time
x = 1
y = 1
ignorehitpause = 1
persistent = 0

[State 4020, PosSet]
type = Posfreeze
trigger1 = !hitshakeover
ignorehitpause = 1


[state 4020, color]
type = palFX
trigger1 = 1
time = 1
mul = 140,0,140
persistent = 1

;[state 4020, color]
;type = palFX
;trigger1 = 1;root,stateno != [120,159]
;trigger1 = root,movetype = H
;time = 0
;mul = 140,0,140


[State 5000, 1]
Type = HitDef
Trigger1 = Time = 0
Attr = C, NP
Damage = 0
Priority = 1, Hit
HitFlag = F-
PauseTime = 8,8
SparkNo = -1
Guard.SparkNo = -1
;Ground.SlideTime = 0
Ground.HitTime = 9
;Ground.Velocity = 0
;Guard.Velocity = 0
;Air.Velocity = 0,0

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "vel x = %f vel y = %f"
params = vel x,vel y
ignorehitpause = 1

[State 4020, 2]
type = ChangeAnim
trigger1 = HitShakeOver
triggerall = statetype != L
value = ifelse(statetype = A,5030,5010)
ignorehitpause = 1

[State 4020, 2]
type = ChangeAnim
trigger1 = HitShakeOver
triggerall = statetype = L
value = 5100
ignorehitpause = 1

[State 4020, 6]
type = SelfState
trigger1 = HitShakeOver
triggerall = statetype != L
value = ifelse(statetype = A,5030,5001)
ignorehitpause = 1


[State 4020, 6]
type = SelfState
trigger1 = HitShakeOver
trigger1 = statetype = L
value = 5100
ignorehitpause = 1

;-------------------------------------------------------
;Poisoning State - With Knockback
[statedef 4021]
type = U
Movetype = H
physics = U


[State 4021, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = statetype = S || statetype = C
statetype = S
physics = S
ignorehitpause = 1

[State 4021, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = statetype = A || statetype = L
statetype = A 
physics = A
ignorehitpause = 1

[State 4021, 1]
type = ChangeAnim2
;trigger1 = !time
trigger1 = !hitshakeover
value = 4020+(statetype = A || statetype = L)
ignorehitpause = 1


;[State 0, HitVelSet]
;type = hitVelSet
;trigger1 = !time
;x = 1
;y = 1
;ignorehitpause = 1
;persistent = 0

;[State 4020, PosSet]
;type = Posfreeze
;trigger1 = !hitshakeover
;ignorehitpause = 1


[state 4021, color]
type = palFX
trigger1 = 1
time = 1
mul = 140,0,140
persistent = 1

;[state 4020, color]
;type = palFX
;trigger1 = 1;root,stateno != [120,159]
;trigger1 = root,movetype = H
;time = 0
;mul = 140,0,140


[State 5001, 1]
Type = HitDef
Trigger1 = Time = 0
Attr = C, NP
Damage = 0
Priority = 1, Hit
HitFlag = F-
PauseTime = 8,8
SparkNo = -1
Guard.SparkNo = -1
;Ground.SlideTime = 0
Ground.HitTime = 9
;Ground.Velocity = 0
;Guard.Velocity = 0
;Air.Velocity = 0,0

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "vel x = %f vel y = %f"
params = vel x,vel y
ignorehitpause = 1

[State 4021, 2]
type = ChangeAnim
trigger1 = HitShakeOver
value = ifelse(statetype = A,5030,5010)
ignorehitpause = 1

[State 4021, 6]
type = changeState
trigger1 = HitShakeOver
value = 1080
ignorehitpause = 1

;---------------------------------------------------------------------------
;Destroy self all projectiles
[statedef 4005]
type = U
Movetype = U
physics = U
anim = 9999

[state 4005, explod]
type = explod
trigger1 = time = 0
anim = 4004
postype = p1
pos = 0,0
bindtime = 0
scale = const(size.xscale)*3,const(size.yscale)*3
ownpal = 1
id = 4005

[state 4005, velmul]
type = velmul
trigger1 = time = 0
x = 0.1
y = 0.1

[state 4005, 1]
type = destroyself
trigger1 = time = 1


;------------------------------------------------------------
;Poison helper
[statedef 4006]
type = S
Movetype = I
physics = N
velset = 0,0
anim = 4006

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "Target ID = %d fvar(1) = %f  fvar(2) = %f"
params = var(0), var(1), var(2)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = prevstateno != 4000 && prevstateno != 4010
trigger1 = !time
var(0) = parent,var(0)

[State 0, posset]
type = posset
trigger1 = time >= 1
x = playerid(var(0)),pos x
y = playerid(var(0)),pos y

[state 4020, smoke]
type = explod
trigger1 = Random%15 = 0
postype = p2
anim = 4011
scale = 1, 1
sprpriority = 4
removetime = -2
pos = -50 + (random%100),playerid(var(0)),const(size.mid.pos.y) - 40 + (random%80)
ownpal = 1

[state 4020, smoke]
type = explod
trigger1 = Random%30 = 0
postype = p2
anim = 4011
scale = 1, 1
sprpriority = 4
removetime = -2
pos = -50+(random%100),playerid(var(0)),const(size.head.pos.y) - 40 + (random%80)
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(1) = ifelse(playerid(var(0)),name = "SOR2",1,0)

[State 0, PalFXWiz]
type = PalFX
trigger1 = !numhelper(4056)
trigger1 = gametime%30=[0,10]
time = 1
add = 140,0,140
mul = 128,128,128
color = 256
redirectid = var(0)
[State 0, LifeAdd]
type = LifeAdd
trigger1 = time%15=0
trigger1 = !var(1)
value = -ceil(playerid(var(0)),const(data.life)*0.002)  ;0.003
kill = 0
absolute = 1
persistent = 5
redirectid = var(0)

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time%15=0
trigger1 = var(1) = 1
value = -6
kill = 1
absolute = 1
persistent = 5
redirectid = var(0)

[State 0, Run Energy Sap]
type = powerAdd
triggerall = time%15=0
trigger1 = playerid(var(0)),stateno = 100;Running & jumping burns more oxygen
trigger2 = playerid(var(0)),stateno =[700,799]
value = ifelse(playerid(var(0)),vel x > 18,ifelse(playerid(var(0)), vel x > 27,-120,-60),-30)
persistent = 5
redirectid = var(0)
[State 0, Run Approach Energy Sap]
type = powerAdd
triggerall = time%15=0
trigger1 = (playerid(var(0)),stateno = [40,50]) && playerid(var(0)),vel x > 0
trigger2 = playerid(var(0)),stateno = 20  && playerid(var(0)),vel x > 0
value = -15 
persistent = 5
redirectid = var(0)
;Rapid Bunny
[State 0, Run Drain]
type = powerAdd
triggerall = time%15=0
triggerall = playerid(var(0)),name = "Rapid Bunny"
trigger1 = (playerid(var(0)),stateno = 1000) || (playerid(var(0)),stateno = 1010) || (playerid(var(0)),stateno = 1020)
trigger2 = (playerid(var(0)),stateno = 1101) || (playerid(var(0)),stateno = 1111) || (playerid(var(0)),stateno = 1121)
value = ifelse(playerid(var(0)),vel x > 18,ifelse(playerid(var(0)), vel x > 27,-120,-60),-30)
persistent = 5
redirectid = var(0)
;Violet Bunny
[State 0, Run Drain]
type = powerAdd
triggerall = time%15=0
triggerall = playerid(var(0)),name = "Violet 'Tyla' Bunny"
trigger1 = (playerid(var(0)),stateno = [1150,1155]) || (playerid(var(0)),stateno = 1170) 
value = ifelse(playerid(var(0)),vel x > 18,ifelse(playerid(var(0)), vel x > 27,-120,-60),-30)
persistent = 5
redirectid = var(0)
;Jumba Elephant
[State 0, Run Drain]
type = powerAdd
triggerall = time%15=0
triggerall = playerid(var(0)),name = "Jumba Elephant"
trigger1 = (playerid(var(0)),stateno = 1000) || (playerid(var(0)),stateno = 1010) || (playerid(var(0)),stateno = 1020)
value = ifelse(playerid(var(0)),vel x > 18,ifelse(playerid(var(0)), vel x > 27,-120,-60),-30)
persistent = 5
redirectid = var(0)
[state 4005, 1]
type = destroyself
trigger1 = time >= 480
trigger2 = roundstate = 3
trigger3 = time
trigger3 = playerid(var(0)),alive=0
trigger4 = time > 24 && root,movetype = H && root,stateno != [120,159]

;---------------------------------------------------------------------------



;---------------------------------------------------------------------------
;Grounded Skunk musk
[statedef 4001]
type = S
movetype = A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 3


[state 4001, posset]
type = posset
trigger1 = time = 0
y = 0

[state 4011, angledraw]
type = angledraw
trigger1 = 1
scale = 1,3

[state 4001, explod]
type = Explod
trigger1 = (random%20) = 0
pos = 50,0
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4001, explod]
type = Explod
trigger1 = (random%20) = 0
pos = -50,0
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4001, explod]
type = Explod
trigger1 = (random%20) = 0
pos = 75,0
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4001, explod]
type = Explod
trigger1 = (random%20) = 0
pos = -25,-30
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4001, explod]
type = Explod
trigger1 = (random%20) = 0
pos = 25,-30
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4001, explod]
type = Explod
trigger1 = (random%20) = 0
pos = -75,0
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4001, anim]
type = changeanim
trigger1 = time = 0
value = 4010

[State 4001, 5] 
type = hitdef
trigger1 = enemy,movetype != H
attr = S, SP
animtype  = Hard
damage    = 0,0
guardflag = M
hitflag = M
pausetime = 0,8
sparkno = -1
sparkxy = -10,-60
hitsound   = 5,4
guardsound = S120, 0
p2stateno = 4020
ground.type = high
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -8,0
air.velocity = -8,0
id = 4000
hitonce = 1
guard.hittime = 6
guard.slidetime = 6
guard.velocity = -8
guard.dist = 0

;Poison Trigger
[State 0, TargetState]
type = TargetState
triggerall = NumTarget(4000)
trigger1 = movehit
value = 4020
ID = 4000

[State 0, Helper]
type = Helper
;trigger1 = !numhelper(4006)
trigger1 = NumTarget(4000)
trigger1 = movehit
name = "Poison effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1
;----

[state 4001, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4000, hitoverride]
type = hitoverride
attr = SCA, AP,AA,AT
trigger1 = 1
time = 1
stateno = 4005
ignorehitpause = 1

[State 4001, 4]
type = DestroySelf
trigger1 = movecontact || movereversed 

[State 4001, 4]
type = DestroySelf
trigger1 = time > 420
trigger2 = backedgedist < -10

;---------------------------------------------------------------------------
; Projectile Gas - Hard
[statedef 4010]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 3

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "Hey I'm Ikemen override shit!"

[state 4000, arc]
type = velset
trigger1 = time = 0
y = 0
x = parent,var(23)

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4000, attackdist]
type = attackdist
trigger1 = 1
value = 200

[state 4000, Light wind]
type = velset
triggerall = parent,stateno = 1100
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = floor(p2dist x * 0.0625)
Y = floor((p2dist y - 160) * 0.0625)
persistent = 0

[state 4000, Hard wind]
type = velset
triggerall = vel x < 25
trigger1 = parent,stateno = 1110
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = floor(p2dist x * 0.125)
y = floor((p2dist y - 160) * 0.125)
persistent = 0

[state 4000, EX wind]
type = velset
trigger1 = parent,stateno = 1120
trigger1 = parent,time > 8
trigger1 = rootdist x < 0
x = floor(p2dist x * 0.25)
y = floor((p2dist y - 160) * 0.25) 
persistent = 0

[state 4000, super wind]
type = veladd
triggerall = vel x < 25
trigger1 = parent,stateno = 3000
trigger1 = rootdist x < 0
x = 16

[state 4001, turn]
type = turn
trigger1 = facing != parent,facing
trigger1 = parent,stateno = 1100 || parent, stateno = 1110 || parent, stateno = 1120 || parent,stateno = 3000

[state 4000, hitoverride]
type = hitoverride
trigger1 = 1
attr = SCA, AP
time = 1
stateno = 4005
ignorehitpause = 1
persistent = 1

[state 4000, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4000, anim]
type = changeanim
trigger1 = time = 0
value = 4000

[state 4000, gas fx]
type = explod
trigger1 = (random%10)=0
pos = -10,0
scale = 1,2
removetime = -2
bindtime = 1
anim = 4010
ownpal = 1

[State 4000, 5] 
type = hitdef
trigger1 = !moveguarded
persistent = 2
attr = S, SP
animtype  = Hard
damage    = 40,4
guardflag = MA
getpower = 30
givepower = 50
hitflag = MAF
pausetime = 1,4
sparkno = -1
sparkxy = -10,-60
hitsound   = S1000,4
hitonce = 1
p2facing = 1
guardsound = S120, 0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -40,0
air.velocity = -18,-4
id = 4000
guard.velocity = -32            
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = -20,-2 
airguard.hittime = 16
guard.kill = 1
guard.dist = 640

[State 0, VarSet]
type = VarSet
trigger1 = movehit
trigger1 = numtarget(4000) 
var(0) = target(4000),id
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = NumTarget(4000)
trigger1 = movehit
;trigger1 = hitpausetime = 3
name = "Ranged Poison effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 4001, end]
type = changestate
trigger1 = movecontact
value = 4005

[state x, combo damage score]
type = parentvaradd
trigger1 = movehit
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[State 4001, 4]
type = DestroySelf
trigger1 = frontEdgeDist < -80
trigger2 = movereversed
trigger3 = time > parent,var(24)
trigger4 = backedgedist < -30

[state 4000, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -Vel y
value = 4001

[statedef 4030]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 3

[state 4030, arc]
type = velset
trigger1 = time = 0
y = 0
x = parent,var(23)

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4001, turn]
type = turn
trigger1 = facing != parent,facing
trigger1 = parent,stateno = 1100 || parent, stateno = 1110

[state 4000, Light wind]
type = velset
triggerall = parent,stateno = 1100
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = floor(p2dist x * 0.0625)
Y = floor((p2dist y - 160) * 0.0625)
persistent = 0

[state 4000, Hard wind]
type = velset
triggerall = vel x < 25
trigger1 = parent,stateno = 1110
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = floor(p2dist x * 0.125)
y = floor((p2dist y - 160) * 0.125)
persistent = 0

[state 4000, EX wind]
type = velset
trigger1 = parent,stateno = 1120
trigger1 = parent,time > 8
trigger1 = rootdist x < 0
x = floor(p2dist x * 0.25)
y = floor((p2dist y - 160) * 0.25) 
persistent = 0

[state 4030, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4030, anim]
type = changeanim
trigger1 = time = 0
value = 4000

[state 4030, attackdist]
type = attackdist
trigger1 = 1
value = 200;const(size.proj.attack.dist)

[state 4030, gas fx]
type = explod
trigger1 = (random%10)=0
pos = -10,0
scale = 1,2
removetime = -2
bindtime = 1
anim = 4010
ownpal = 1

[State 4030, 5] 
type = hitdef
trigger1 = 1
attr = S, SP
animtype  = Hard
damage    = 40,4
getpower = 0
givepower = 50
persistent = 6
guardflag = MA
hitflag = MAF
pausetime = 2,6
sparkxy = -10,-60
hitsound   = S1000,4
guardsound = S120, 0
ground.type = high
ground.slidetime = 32
ground.hittime  = 18
ground.velocity = -40,0
air.velocity = -18,-8
id = 4000
hitonce = 1
p2facing = 1
guard.velocity = -32            
guard.hittime = 18
guard.slidetime = 18
guard.kill = 1
airguard.velocity = -20,-3 
airguard.hittime = 16
guard.dist = 640

[State 0, VarSet]
type = VarSet
trigger1 = movehit
trigger1 = numtarget(4000) 
var(0) = target(4000),id
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = NumTarget(4000)
trigger1 = movehit
;trigger1 = hitpausetime = 3
name = "Ranged Poison effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1
persistent = 0


[state 4001, end]
type = changestate
trigger1 = movecontact
value = 4005+(numtarget(4000)&&movehit)

[state 4030, hitoverride]
type = hitoverride
attr = SCA, AP,AA
trigger1 = 1
time = 1
stateno = 4005
ignorehitpause = 1

[state x, combo damage score]
type = parentvaradd
trigger1 = movehit
v = 18
value = -12
persistent = 0
ignorehitpause = 1

[State 4030, 4]
type = DestroySelf
trigger1 = movecontact
trigger2 = BackEdgeDist < -30
trigger3 = movereversed
trigger4 = frontEdgeDist < -80
trigger5 = time > parent,var(24)

[state 4000, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -Vel y
value = 4011

;---------------------------------------------------------------------------
;Heavy Gas Trap
[statedef 4012]
type = A
movetype = I
physics = N
ctrl = 0
sprpriority = 3

[state 4000, arc]
type = velset
trigger1 = time = 0
y = 5
x = 9

[state 4010, descent]
type = veladd
trigger1 = time > 0
y = 0.15

[state 4001, turn]
type = turn
trigger1 = facing != parent,facing
trigger1 = parent,stateno = 1100 || parent, stateno = 1110

[state 4000, wind]
type = veladd
triggerall = vel x < 30
trigger1 =  parent,stateno = 1100 || parent, stateno = 1110
trigger1 = time > 6
trigger1 = rootdist x < 0
x = ifelse(parent,stateno = 1100,2,4) 

[state 4010, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4010, attackdist]
type = attackdist
trigger1 = 1
value = 200 ;const(size.proj.attack.dist)

[state 4010, anim]
type = changeanim
trigger1 = time = 0
value = 4000

[state 4000, gas fx]
type = explod
trigger1 = (random%10)=0
pos = -10,0
scale = 1,2
removetime = -2
bindtime = 1
anim = 4010
ownpal = 1


[State 0, TargetState]
type = TargetState
triggerall = NumTarget(4000)
trigger1 = movehit
value = 4020
ID = 4000

[State 0, Helper]
type = Helper
;trigger1 = !numhelper(4006)
trigger1 = NumTarget(4000)
trigger1 = movehit
name = "Poison effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1

[state 4000, hitoverride]
type = hitoverride
attr = SCA, AP,AA
trigger1 = 1
time = 1
stateno = 4005
ignorehitpause = 1

[State 4010, 4]
type = DestroySelf
trigger1 = movecontact
trigger2 = BackEdgeDist < -10
trigger3 = movereversed


[state 4000, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -Vel y
value = 4011


;---------------------------------------------------------------------------
;Ground Skunk Musk Heavy
[statedef 4011]
type = S
movetype = A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 3

[state 4011, posset]
type = posset
trigger1 = time = 0
y = 0

[state 4001, Light wind]
type = velset
trigger1 =  parent,stateno = 1100 
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = 8 

[state 4001, Hard wind]
type = velset
trigger1 =  parent,stateno = 1110 
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = 16 

[state 4001, EX wind]
type = velset
trigger1 =  parent,stateno = 1120 
trigger1 = parent,time > 8
trigger1 = rootdist x < 0
x = 32 

[state 4001, SUPER wind]
type = velset
trigger1 =  parent,stateno = 3000 
trigger1 = PARENT,time > 74
trigger1 = rootdist x < 0
x = 16 

[state 4011, turn]
type = turn
trigger1 = facing != parent,facing


[state 4011, anim]
type = changeanim
trigger1 = time = 0
value = 4010

[state 4011, angledraw]
type = angledraw
trigger1 = 1
scale = 1,3

[state 4011, explod]
type = Explod
trigger1 = (random%20) = 0
pos = 50,0
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4011, explod]
type = Explod
trigger1 = (random%20) = 0
pos = -50,0
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4011, explod]
type = Explod
trigger1 = (random%20) = 0
pos = 75,0
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4011, explod]
type = Explod
trigger1 = (random%20) = 0
pos = -25,-30
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4011, explod]
type = Explod
trigger1 = (random%20) = 0
pos = 25,-30
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4011, explod]
type = Explod
trigger1 = (random%20) = 0
pos = -75,0
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[State 4011, 5] 
type = hitdef
trigger1 = 1
attr = S, SP
animtype  = light
damage    = 0,0
guardflag = M
hitflag = MF
pausetime = 0,8
sparkno = -1
sparkxy = -10,-60
hitsound   = 5,4
guardsound = S120, 0
ground.type = high
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4,0
p2stateno = 4020
air.velocity = -4,0
id = 4000
hitonce = 1
guard.velocity = 0             
guard.hittime = 6
guard.slidetime = 6
airguard.velocity = -10,0 
airguard.hittime = 6
guard.dist = 0

;Poison Trigger
[State 4011, TargetState]
type = TargetState
triggerall = NumTarget(4000)
trigger1 = movehit
value = 4020
ID = 4000

[State 4011, Helper]
type = Helper
trigger1 = NumTarget(4000)
trigger1 = movehit
name = "Poison effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1
;----

[state 4011, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4011, hitoverride]
type = hitoverride
attr = SCA, AP
trigger1 = 1
time = 1
stateno = 4005
ignorehitpause = 1

[State 4011, 4]
type = DestroySelf
trigger1 = movecontact 

[State 4011, 4]
type = DestroySelf
trigger1 = time > 420
trigger2 = backedgedist < -10

;---------------------------------------------------------------------------
;EX Gas cloud
[statedef 4030]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 3

[state 4030, arc]
type = velset
trigger1 = time = 0
y = 0
x = parent,var(23)

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4001, turn]
type = turn
trigger1 = facing != parent,facing
trigger1 = parent,stateno = 1100 || parent, stateno = 1110

[state 4000, Light wind]
type = velset
triggerall = parent,stateno = 1100
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = floor(p2dist x * 0.0625)
Y = floor((p2dist y - 160) * 0.0625)
persistent = 0

[state 4000, Hard wind]
type = velset
triggerall = vel x < 25
trigger1 = parent,stateno = 1110
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = floor(p2dist x * 0.125)
y = floor((p2dist y - 160) * 0.125)
persistent = 0

[state 4000, EX wind]
type = velset
trigger1 = parent,stateno = 1120
trigger1 = parent,time > 8
trigger1 = rootdist x < 0
x = floor(p2dist x * 0.25)
y = floor((p2dist y - 160) * 0.25) 
persistent = 0

[state 4030, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4030, anim]
type = changeanim
trigger1 = time = 0
value = 4000

[state 4030, attackdist]
type = attackdist
trigger1 = 1
value = 200;const(size.proj.attack.dist)

[state 4030, gas fx]
type = explod
trigger1 = (random%10)=0
pos = -10,0
scale = 1,2
removetime = -2
bindtime = 1
anim = 4010
ownpal = 1

[State 4030, 5] 
type = hitdef
trigger1 = 1
attr = S, SP
animtype  = Hard
damage    = 40,4
getpower = 0
givepower = 50
persistent = 6
guardflag = MA
hitflag = MAF
pausetime = 2,6
sparkxy = -10,-60
hitsound   = S1000,4
guardsound = S120, 0
ground.type = high
ground.slidetime = 32
ground.hittime  = 18
ground.velocity = -40,0
air.velocity = -18,-8
id = 4000
hitonce = 1
p2facing = 1
guard.velocity = -32            
guard.hittime = 18
guard.slidetime = 18
guard.kill = 1
airguard.velocity = -20,-3 
airguard.hittime = 16
guard.dist = 640

[State 4030, TargetState]
type = TargetState
triggerall = NumTarget(4000)
trigger1 = movehit
value = 4020
ID = 4000

[State 4030, Helper]
type = Helper
;trigger1 = !numhelper(4006)
trigger1 = NumTarget(4000)
trigger1 = movehit
name = "Ranged Poison effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1

[state 4030, hitoverride]
type = hitoverride
attr = SCA, AP,AA
trigger1 = 1
time = 1
stateno = 4005
ignorehitpause = 1

[state x, combo damage score]
type = parentvaradd
trigger1 = movehit
v = 18
value = -12
persistent = 0
ignorehitpause = 1

[State 4030, 4]
type = DestroySelf
trigger1 = movecontact
trigger2 = BackEdgeDist < -30
trigger3 = movereversed
trigger4 = frontEdgeDist < -80
trigger5 = time > parent,var(24)

[state 4000, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -Vel y
value = 4011

;---------------------------------------------------------------------------
;EX Gas Trap
[statedef 4032]
type = A
movetype = I
physics = N
ctrl = 0
sprpriority = 3

[state 4030, arc]
type = velset
trigger1 = time = 0
y = 5
x = 18

[state 4030, arc]
type = veladd
trigger1 = time > 0
y = 0.15


[state 4001, turn]
type = turn
trigger1 = facing != parent,facing
trigger1 = parent,stateno = 1100 || parent, stateno = 1110

[state 4000, wind]
type = veladd
triggerall = vel x < 30
trigger1 =  parent,stateno = 1100 || parent, stateno = 1110
trigger1 = time > 6
trigger1 = rootdist x < 0
x = ifelse(parent,stateno = 1100,2,4) 

[state 4030, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4030, anim]
type = changeanim
trigger1 = time = 0
value = 4000

[state 4030, attackdist]
type = attackdist
trigger1 = 1
value = const(size.proj.attack.dist)

[state 4030, gas fx]
type = explod
trigger1 = (random%10)=0
pos = -10,0
scale = 1,2
removetime = -2
bindtime = 1
anim = 4010
ownpal = 1


[State 4030, TargetState]
type = TargetState
triggerall = NumTarget(4000)
trigger1 = movehit
value = 4020
ID = 4000

[State 4030, Helper]
type = Helper
trigger1 = NumTarget(4000)
trigger1 = movehit
name = "Poison effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1

[state 4030, hitoverride]
type = hitoverride
attr = SCA, AP,AA
trigger1 = 1
time = 1
stateno = 4005
ignorehitpause = 1

[State 4030, 4]
type = DestroySelf
trigger1 = movecontact
trigger2 = BackEdgeDist < -10
trigger3 = movereversed

[state 4000, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -Vel y
value = 4031

;---------------------------------------------------------------------------
;Ground Skunk Musk Heavy
[statedef 4031]
type = S
movetype = A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 3

[state 4001, posset]
type = posset
trigger1 = time = 0
y = 0

[state 4001, Light wind]
type = velset
trigger1 =  parent,stateno = 1100 
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = 8 

[state 4001, Hard wind]
type = velset
trigger1 =  parent,stateno = 1110 
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = 16 

[state 4001, EX wind]
type = velset
trigger1 =  parent,stateno = 1120 
trigger1 = parent,time > 8
trigger1 = rootdist x < 0
x = 32 

[state 4001, SUPER wind]
type = velset
trigger1 =  parent,stateno = 3000 
trigger1 = PARENT,time > 74
trigger1 = rootdist x < 0
x = 16 

[state 4001, turn]
type = turn
trigger1 = facing != parent,facing


[state 4001, anim]
type = changeanim
trigger1 = time = 0
value = 4010

[state 4011, angledraw]
type = angledraw
trigger1 = 1
scale = 1,3

[state 4001, explod]
type = Explod
trigger1 = (random%20) = 0
pos = 50,0
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4001, explod]
type = Explod
trigger1 = (random%20) = 0
pos = -50,0
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4001, explod]
type = Explod
trigger1 = (random%20) = 0
pos = 75,0
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4001, explod]
type = Explod
trigger1 = (random%20) = 0
pos = -25,-30
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4001, explod]
type = Explod
trigger1 = (random%20) = 0
pos = 25,-30
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[state 4001, explod]
type = Explod
trigger1 = (random%20) = 0
pos = -75,0
scale = 1, 3
removetime = -2
anim = 4010
ownpal = 1

[State 4001, 5] 
type = hitdef
trigger1 = 1
attr = S, SP
animtype  = light
damage    = 0,0
guardflag = M
hitflag = MF
pausetime = 0,8
sparkno = -1
sparkxy = -10,-60
hitsound   = 5,4
guardsound = S120, 0
ground.type = high
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4,0
p2stateno = 4020
air.velocity = -4,0
id = 4000
hitonce = 1
guard.velocity = 0             
guard.hittime = 6
guard.slidetime = 6
airguard.velocity = -10,0 
airguard.hittime = 6
guard.dist = 0

;Poison Trigger
[State 0, TargetState]
type = TargetState
triggerall = NumTarget(4000)
trigger1 = movehit
value = 4020
ID = 4000

[State 0, Helper]
type = Helper
trigger1 = NumTarget(4000)
trigger1 = movehit
name = "Poison effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1
;----

[state 4001, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4000, hitoverride]
type = hitoverride
attr = SCA, AP,AA
trigger1 = 1
time = 1
stateno = 4005
ignorehitpause = 1

[State 4001, 4]
type = DestroySelf
trigger1 = movecontact 

[State 4001, 4]
type = DestroySelf
trigger1 = time > 420
trigger2 = backedgedist < -10
;---------------------------------------------------------------------------
;Gas Poison Trigger throw
[statedef 4050]
type = S
movetype = A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 3


[state 4001, posset]
type = posset
trigger1 = time = 0
y = 0

[state 4001, anim]
type = changeanim
trigger1 = time = 0
value = 4010

[State 4001, 5] 
type = hitdef
trigger1 = 1
persistent = 0
attr = S, SP
animtype  = Hard
damage    = 0
guardflag = 
hitflag = MAFD
pausetime = 0,12
sparkno = -1
sparkxy = -10,-60
p2stateno = 4020
ground.type = high
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = 60,-25
air.velocity = 60,-25
down.velocity = 0,0
down.hittime = 16
id = 4000
hitonce = 1
fall = 1
fall.recover = 0

[State 0, VarSet]
type = VarSet
trigger1 = movehit
trigger1 = numtarget(4000) 
var(0) = target(4000),id
ignorehitpause = 1


[State 0, Helper]
type = Helper
;trigger1 = !numhelper(4006)
trigger1 = NumTarget(4000)
trigger1 = movehit
name = "Melee Poison effect"
ID = 4006
stateno = 4056
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1
;----

[state 4001, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4000, hitoverride]
type = hitoverride
attr = SCA, AP
trigger1 = 1
time = 1
stateno = 4005
ignorehitpause = 1

[State 4001, 4]
type = DestroySelf
trigger1 = movecontact || movereversed 

[State 4001, 4]
type = DestroySelf
trigger1 = time > 10

;---------------------------------------------------------------------------

;----------------------Poisonstate THROWS----------------------------------
;Poisoning State
[statedef 4055]
type = U
Movetype = H
physics = U

[State 4020, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = statetype = S || statetype = C || statetype = A
statetype = A
physics = A
ignorehitpause = 1


[State 4020, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = statetype = L
statetype = L 
physics = C
ignorehitpause = 1

[State 4020, 1]
type = ChangeAnim2
trigger1 = statetype = A
trigger1 = !hitshakeover
value = 4021
ignorehitpause = 1

[state 4020, 2]
type = ChangeAnim2
trigger1 = statetype = L
trigger1 = !hitshakeover
value = 4051
ignorehitpause = 1

[State 0, HitVelSet]
type = hitVelSet
trigger1 = !time
x = 1
y = 1
ignorehitpause = 1 

[State 4020, PosSet]
type = Posfreeze
trigger1 = 1
ignorehitpause = 1


[state 4020, color]
type = palFX
trigger1 = 1
time = 1
mul = 120,0,120
persistent = 1

[state 4020, color]
type = null
trigger1 = enemynear,stateno != [120,159]
trigger1 = enemynear,movetype = H
time = 1
mul = 140,0,140


[State 5000, 1]
Type = HitDef
Trigger1 = Time = 0
Attr = C, NP
Damage = 0
Priority = 1, Hit
HitFlag = F-
PauseTime = 0,0
SparkNo = -1
Guard.SparkNo = -1
;Ground.SlideTime = 0
Ground.HitTime = 9
;Ground.Velocity = 0
;Guard.Velocity = 0
;Air.Velocity = 0,0

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "vel x = %f vel y = %f"
params = vel x,vel y
ignorehitpause = 1

[State 4020, 2]
type = ChangeAnim
trigger1 = HitShakeOver
trigger1 = statetype = A
value = 5030
ignorehitpause = 1

[State 4020, 2]
type = ChangeAnim
trigger1 = HitShakeOver
trigger1 = statetype = L
value = 5100
ignorehitpause = 1

[State 4020, 6]
type = SelfState
trigger1 = HitShakeOver
trigger1 = statetype = A
value = 5030
ignorehitpause = 1

[State 4020, 6]
type = changestate
trigger1 = HitShakeOver
trigger1 = statetype = L
value = 1182
ignorehitpause = 1
;--------------------------------------------------------------------------
;Poison helper
[statedef 4056]
type = S
Movetype = I
physics = N
velset = 0,0
anim = 4006

[State 0, VarAdd]
type = Varset
trigger1 = !time
var(0) = parent,var(0)

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "var(0) = %d fvar(1) = %f  fvar(2) = %f"
params = var(0), var(1), var(2)
ignorehitpause = 1

[State 0, posset]
type = posset
trigger1 = time
x = playerid(var(0)),pos x
y = playerid(var(0)),pos y

[state 4020, smoke]
type = explod
trigger1 = Random%15 = 0
postype = p2
anim = 4011
scale = 1, 1
sprpriority = 4
removetime = -2
pos = -50 + (random%100),playerid(var(0)),const(size.mid.pos.y) - 40 + (random%80)
ownpal = 1

[state 4020, smoke]
type = explod
trigger1 = Random%30 = 0
postype = p2
anim = 4011
scale = 1, 1
sprpriority = 4
removetime = -2
pos = -50+(random%100),playerid(var(0)),const(size.head.pos.y) - 40 + (random%80)
ownpal = 1

[State 0, PalFXWiz]
type = PalFX
trigger1 = gametime%30=[0,10]
time = 1
add = 180,0,180
mul = 64,0,64
color = 128
redirectid = var(0)

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time%15=0
trigger1 = playerid(var(0)),name != "SOR2"
value = -ceil(playerid(var(0)),const(data.life)*0.003)  ;0.009
kill = 0
absolute = 1
persistent = 5
redirectid = var(0)

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time%15=0
trigger1 = playerid(var(0)),name = "SOR2"
value = -24
kill = 1
absolute = 1
persistent = 5
redirectid = var(0)

[State 0, Run Drain]
type = powerAdd
triggerall = time%15=0
trigger1 = playerid(var(0)),stateno = 100;Running & jumping burns more oxygen
trigger2 = playerid(var(0)),stateno =[700,799]
value = ifelse(playerid(var(0)),vel x > 18,ifelse(playerid(var(0)), vel x > 27,-120,-60),-30)
persistent = 5
redirectid = var(0)

[State 0, Approach Drain]
type = powerAdd
triggerall = time%15=0
trigger1 = (playerid(var(0)),stateno = [40,50]) && playerid(var(0)),vel x > 0
trigger2 = playerid(var(0)),stateno = 20  && playerid(var(0)),vel x > 0
value = -15
persistent = 5
redirectid = var(0)

;============================================================
;Character Specific - Energy penalty for running in poison gas
;============================================================
;Rapid Bunny
[State 0, Run Drain]
type = powerAdd
triggerall = time%15=0
triggerall = playerid(var(0)),name = "Rapid Bunny"
trigger1 = (playerid(var(0)),stateno = 1000) || (playerid(var(0)),stateno = 1010) || (playerid(var(0)),stateno = 1020)
trigger2 = (playerid(var(0)),stateno = 1101) || (playerid(var(0)),stateno = 1111) || (playerid(var(0)),stateno = 1121)
value = ifelse(playerid(var(0)),vel x > 18,ifelse(playerid(var(0)), vel x > 27,-120,-60),-30)
persistent = 5
redirectid = var(0)
;Violet Bunny
[State 0, Run Drain]
type = powerAdd
triggerall = time%15=0
triggerall = playerid(var(0)),name = "Violet 'Tyla' Bunny"
trigger1 = (playerid(var(0)),stateno = [1150,1155]) || (playerid(var(0)),stateno = 1170) 
value = ifelse(playerid(var(0)),vel x > 18,ifelse(playerid(var(0)), vel x > 27,-120,-60),-30)
persistent = 5
redirectid = var(0)
;Jumba Elephant
[State 0, Run Drain]
type = powerAdd
triggerall = time%15=0
triggerall = playerid(var(0)),name = "Jumba Elephant"
trigger1 = (playerid(var(0)),stateno = 1000) || (playerid(var(0)),stateno = 1010) || (playerid(var(0)),stateno = 1020)
value = ifelse(playerid(var(0)),vel x > 18,ifelse(playerid(var(0)), vel x > 27,-120,-60),-30)
persistent = 5
redirectid = var(0)
[state 4005, 1]
type = destroyself
trigger1 = time >= 480
trigger2 = roundstate = 3
trigger3 = !playerid(var(0)),alive
trigger3 = numenemy < 2
trigger4 = root,statetype = L  || root,gethitvar(isbound) || root,hitfall =  1
;====================================================================

; Projectile Gas Rise - Light
[statedef 4060]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 3

[state 4000, arc]
type = velset
trigger1 = time = 0
y = parent,var(23)
x = parent,var(24)

[state 4060, accel]
type = veladd
trigger1 = time > 1
y = -0.35
x = -0.25
persistent = 1

[state 4000, attackdist]
type = attackdist
trigger1 = 1
value = 200

[state 4000, Light wind]
type = veladd
triggerall = vel x < 25
triggerall = parent,stateno = 1100
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = 8

[state 4000, Hard wind]
type = veladd
triggerall = vel x < 25
trigger1 = parent,stateno = 1110
trigger1 = parent,time > 10
trigger1 = rootdist x < 0
x = 16

[state 4000, EX wind]
type = veladd
triggerall = vel x < 25
trigger1 = parent,stateno = 1120
trigger1 = parent,time > 8
trigger1 = rootdist x < 0
x = 32

[state 4000, super wind]
type = veladd
triggerall = vel x < 25
trigger1 = parent,stateno = 3000
trigger1 = rootdist x < 0
x = 16

[state 4001, turn]
type = turn
trigger1 = facing != parent,facing
trigger1 = parent,stateno = 1100 || parent, stateno = 1110 || parent, stateno = 1120 || parent,stateno = 3000

[state 4000, hitoverride]
type = hitoverride
trigger1 = 1
attr = SCA, AP,AA,AT
time = 1
stateno = 4005
ignorehitpause = 1
persistent = 1

[state 4000, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 4000, anim]
type = changeanim
trigger1 = time = 0
value = 4000

[state 4000, gas fx]
type = explod
trigger1 = (random%10)=0
pos = -10,0
scale = 1,2
removetime = -2
bindtime = 1
anim = 4010
ownpal = 1

[State 4000, 5] 
type = hitdef
trigger1 = 1
trigger1 = !moveguarded
persistent = 2
attr = S, SP
animtype  = Hard
damage    = ifelse(parent,stateno = 1270, 20,20), ifelse(enemynear,statetype = A, 6, 2)
persistent = 1
guardflag = MA
getpower = 30
givepower = 50
hitflag = MAF
pausetime = 2,6
sparkno = -1
sparkxy = -10,-60
hitsound   = S1000,4
hitonce = 1
guardsound = S120, 0
ground.type = high
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -20,0
air.velocity = -18,-4
id = 4000
guard.velocity = -32            
guard.hittime = 12
guard.slidetime = 12
airguard.velocity = -20,-2 
airguard.hittime = 16
guard.kill = 0
guard.dist = 85



[State 0, TargetState]
type = TargetState
triggerall = NumTarget(4000)
trigger1 = movehit
value = 4020
ID = 4000

[State 0, Helper]
type = Helper
trigger1 = NumTarget(4000)
trigger1 = movehit
name = "Ranged Poison effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1


[State 4001, 4]
type = DestroySelf
trigger1 = movecontact
trigger2 = BackEdgeDist < -10
trigger3 = movereversed
trigger4 = time = 45

[state 4000, changestate]
type = changestate
trigger1 = time = 45
value = 4001

;---------------------------------------------------------------------------
;Small Plasma
[statedef 4080]
type =S
movetype = A
physics = N
velset = 0,0
sprpriority = 2

[state 4080, anim]
type = changeanim
trigger1 = anim != 4080
value = 4080
ignorehitpause = 1
persistent = 1

[state 4080, no shadow]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[State 4080, 2]
type = HitDef
trigger1 = !movecontact
attr = S, HP
animtype  = heavy
damage    = 54,5
guardflag = MA
pausetime = 2,2
guard.pausetime =1,1
sparkno = 3
sparkxy = 40,-200
hitsound   = S1000,4
guardsound = S120, 0
ground.type = high
hitonce = 1
id = 4080
ground.slidetime = 26
ground.hittime  = 26
p1sprpriority = 3
ground.velocity = ifelse(parent,var(28)=1,-8,2),ifelse(parent,var(28)=1,-12,0)
air.velocity = ifelse(parent,var(28)=1,-8,2),ifelse(parent,var(28)=1,-8,-4)
guard.velocity = ifelse(parent,var(28)=1,-9,2)             
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = ifelse(parent,var(28)=1,-6,2),-2 
airguard.hittime = 22
fall = ifelse(parent,var(28) = 1, 1,0)
fall.recover = 0
guard.dist = 480

;[State 0, Helper]
;type = Helper
;triggerALL = NumTarget(4080)
;trigger1 = movehit
;trigger1 = parent,var(28) = 2
;name = "Polecatastrophe Poison Effect"
;ID = 4006
;stateno = 4006 
;pos = 0,0
;postype = p2
;facing = -1
;ownpal = 1
;ignorehitpause = 1
;persistent = 0

[state 4080, hit count]
type = parentvaradd
trigger1 = movecontact
v = 28
value = -1
persistent = 0
ignorehitpause =1

[state 4080, hit count]
type = parentvaradd
trigger1 = gethitvar(damage) != 0
v = 28
value = -1
persistent = 0
ignorehitpause =1

[state 408x, ball hit]
type = parentvaradd
trigger1 = movecontact
trigger2 = movereversed
var(19) = -1
ignorehitpause = 1
persistent = 0

[state 4080, Unstoppable]
type = hitoverride
trigger1 = 1
attr = SCA, AP,AA
stateno = 4080
time = 1
persistent = 1
ignorehitpause = 1

[state 4080, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[state 4080, changestate]
type = changestate
trigger1 = movecontact
trigger1 = parent,var(28) > 0
value = 4080
ignorehitpause = 1


[state 4080, destroyself]
type = destroyself
trigger1 = parent,var(28) <= 0
trigger2 = parent,var(34) = 1
trigger3 = parent,movetype = H && parent,stateno != [120,155]
;trigger2 = parent,stateno != [3040,3044]
;trigger2 = time > 180

[state 4080, parentvaradd]
type = parentvaradd
trigger1 = movehit
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 4080, changestate]
type = changestate
trigger1 = parent,stateno = 3042
value = 4081
persistent = 1

[state 4080, changestate]
type = changestate
trigger1 = parent,stateno != 3041  
trigger2 = parent,stateno = 3045
value = 4086

;---------------------------------------------------------------------------
;Mid Plasma
[statedef 4081]
type =S
movetype = A
physics = N
velset = 0,0
sprpriority = 2

[state 4081, anim]
type = changeanim
trigger1 = anim != 4081
value = 4081
ignorehitpause = 1
persistent = 1

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1


[State 4081, 2]
type = HitDef
trigger1 = !movecontact
attr = S, HP
animtype  = heavy
damage    = 34,3
guardflag = MA
pausetime = 2,2
guard.pausetime =1,1
sparkno = 3
sparkxy = 40,-200
hitsound   = S1000,4
guardsound = S120, 0
id = 4080
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
p1sprpriority = 3
ground.velocity = ifelse(parent,var(28)=1,-16,4),ifelse(parent,var(28)=1,-12,0)
air.velocity = ifelse(parent,var(28)=1,-16,4),ifelse(parent,var(28)=1,-8,-4)
guard.velocity = ifelse(parent,var(28)=1,-18,4)              
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = ifelse(parent,var(28)=1,-12,4),-2 
airguard.hittime = 22
fall = ifelse(parent,var(28) = 1, 1,0)
fall.recover = 0
guard.dist = 480

[state 408x, ball hit]
type = parentvaradd
trigger1 = movecontact
var(19) = -1
ignorehitpause = 1
persistent = 0


[state 4080, hit count]
type = parentvaradd
trigger1 = movecontact
v = 28
value = -1
persistent = 0
ignorehitpause =1

[state 4080, hit count]
type = parentvaradd
trigger1 = gethitvar(damage) != 0
v = 28
value = -1
persistent = 0
ignorehitpause =1

;[State 0, Helper]
;type = Helper
;triggerALL = NumTarget(4080)
;trigger1 = movehit
;trigger1 = parent,var(28) = 2
;name = "Polecatastrophe Poison Effect"
;ID = 4006
;stateno = 4006 
;pos = 0,0
;postype = p2
;facing = -1
;ownpal = 1
;ignorehitpause = 1
;persistent = 0

[state 4081, Unstoppable]
type = hitoverride
trigger1 = 1
attr = SCA, AP,AA
stateno = 4081
time = 1
persistent = 1
ignorehitpause = 1

[state 4081, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[state 4080, parentvaradd]
type = parentvaradd
trigger1 = movehit
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 4080, changestate]
type = changestate
trigger1 = movecontact
trigger1 = parent,var(28) > 0
value = 4081
ignorehitpause = 1

[state 4080, destroyself]
type = destroyself
trigger1 = parent,var(28) <= 0
trigger2 = parent,var(34) = 1
trigger3 = parent,movetype = H && parent,stateno != [120,155]

[state 4080, changestate]
type = changestate
trigger1 = parent,stateno = 3043
value = 4082

[state 4080, changestate]
type = changestate
trigger1 = parent,stateno = 3045
trigger2 = parent,stateno != 3042
value = 4087

;-------------------------------------------------------------------------
;Large Plasma
[statedef 4082]
type =S
movetype = A
physics = N
velset = 0,0
sprpriority = 2

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4082, anim]
type = changeanim
trigger1 = anim != 4082
value = 4082


[State 4082, 2]
type = HitDef
trigger1 = !movecontact
attr = S, HP
animtype  = heavy
damage    = 27,3
guardflag = MA
pausetime = 2,2
guard.pausetime =2,2
sparkno = 3
sparkxy = 40,-200
hitsound   = S1000,4
guardsound = S120, 0
id = 4080
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
p1sprpriority = 3
ground.velocity = ifelse(parent,var(28)=1,-24,8),ifelse(parent,var(28)=1,-16,0)
air.velocity = ifelse(parent,var(28)=1,-24,8),ifelse(parent,var(28)=1,-12,-4)
guard.velocity = ifelse(parent,var(28)=1,-27,8)             
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = ifelse(parent,var(28)=1,-18,8),-2 
airguard.hittime = 22
fall = ifelse(parent,var(28) = 1, 1,0)
fall.recover = 0
guard.dist = 480

[state 408x, ball hit]
type = parentvaradd
trigger1 = movecontact
var(19) = -1
ignorehitpause = 1
persistent = 0

[state 4080, hit count]
type = parentvaradd
trigger1 = movecontact
v = 28
value = -1
persistent = 0
ignorehitpause =1

[state 4080, hit count]
type = parentvaradd
trigger1 = gethitvar(damage) != 0
v = 28
value = -1
persistent = 0
ignorehitpause =1

[state 4080, parentvaradd]
type = parentvaradd
trigger1 = movehit
v = 18
value = -3
persistent = 0
ignorehitpause = 1

;[State 4088, Helper]
;type = Helper
;trigger1 = NumTarget(4080)
;;triggerall = movehit
;trigger1 = parent,var(28) = 2
;name = "Polecatastrophe Poison Effect"
;ID = 4056
;stateno = 4056 
;pos = 0,0
;postype = p2
;facing = -1
;ownpal = 1
;ignorehitpause = 1
;persistent = 0

[state 4082, Unstoppable]
type = hitoverride
trigger1 = 1
attr = SCA, AP
stateno = 4082
time = 1
persistent = 1
ignorehitpause = 1

[state 4082, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[state 4082, changestate]
type = changestate
trigger1 = movecontact
trigger1 = parent,var(28) > 0
value = 4082
ignorehitpause = 1

[state 4082, destroyself]
type = destroyself
trigger1 = parent,var(28) <= 0
trigger2 = parent,var(34) = 1
trigger3 = parent,movetype = H && parent,stateno != [120,155]

[state 4080, changestate]
type = changestate
trigger1 = parent,stateno = 3045
trigger1 = parent,stateno != 3043
value = 4088



;--------------------------------------------------------------------------
;End state
[statedef 4085]
type = A
movetype = A
physics = N
ctrl = 0

[state 4085, end]
type = destroyself
trigger1 = time = 1


;---------------------------------------------------------------------------
;Send out level 1
[Statedef 4086]
type = A
movetype = A
physics = N
ctrl = 0

[state 4086, arc]
type = velset
trigger1 = time = 0
x = 3
y = 0
persistent = 1

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4086, anim]
type = changeanim
trigger1 = anim != 4081
value = 4081
ignorehitpause = 1
persistent = 1

[state 4086, turn]
type = turn
trigger1 = facing = enemynear,facing
persistent = 1

[state 4086, arc]
type = velset
trigger1 = time%3 = 0
trigger1 = time != 0 
x = ifelse(p2dist x > 0, 4,ifelse(p2dist x = 0, 0, -4))
persistent = 1

[state 4086, arc]
type = velset
trigger1 = time%3 = 0 
trigger1 = time != 0
y = ifelse(p2dist y > -180 && p2dist y < 220 ,0,ifelse(p2dist y >= 220,3,-3))
persistent = 1

[state 4086, attackdist]
type = attackdist
trigger1 = 1
value = 200

[State 4082, 2]
type = HitDef
trigger1 = !movecontact
attr = S, HP
animtype  = heavy
damage    = 54,11
guardflag = MA
pausetime = 2,2
guard.pausetime =1,1
sparkno = 3
hitonce = 1
id = 4080
sparkxy = 40,-200
hitsound   = S1000,3
guardsound = S120, 0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
p1sprpriority = 3
ground.velocity = ifelse(parent,var(28)=1,-8,2),ifelse(parent,var(28)=1,-12,0)
air.velocity = ifelse(parent,var(28)=1,-8,2),ifelse(parent,var(28)=1,-8,-4)
guard.velocity = ifelse(parent,var(28)=1,-9,2)              
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = ifelse(parent,var(28)=1,-6,2),-2 
airguard.hittime = 22
fall = ifelse(parent,var(28) = 1, 1,0)
fall.recover = 0
guard.dist = 480

[State 0, VarSet]
type = VarSet
trigger1 = numtarget(4080)
trigger1 = movehit
var(0) = target(4080),id
ignorehitpause =1
[State 0, Helper]
type = Helper
triggerALL = NumTarget(4080)
trigger1 = movehit
trigger1 = parent,var(28) = 2
name = "Polecatastrophe Poison Effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 4080, hit count]
type = parentvaradd
trigger1 = movecontact
v = 28
value = -1
persistent = 0
ignorehitpause =1

[state 4080, hit count]
type = parentvaradd
trigger1 = gethitvar(damage) != 0
v = 28
value = -1
persistent = 0
ignorehitpause =1

[state 4088, displaytoclipboard]
type = displayToClipboard
trigger1 = 1
params = pos y, p2dist y
text = "pos y: %d, p2dist y: %d"

[state 4086, Unstoppable]
type = hitoverride
trigger1 = 1
attr = SCA, AP
stateno = 4086
time = 1
persistent = 1
ignorehitpause = 1

[state 4080, parentvaradd]
type = parentvaradd
trigger1 = movehit
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 4086, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[state 4086, changestate]
type = changestate
trigger1 = movecontact
trigger1 = parent,var(28) > 0
value = 4086
ignorehitpause = 1

[state 4086, destroyself]
type = destroyself
trigger1 = parent,var(28) <= 0
trigger2 = parent,var(34) = 1
trigger3 = time > 420
trigger4 = parent,numhelper(4089) = 0
trigger5 = parent,movetype = H && parent,stateno != [120,155]

;---------------------------------------------------------------------------
;Send out level 2
[Statedef 4087]
type = A
movetype = A
physics = N
ctrl = 0

[state 4087, arc]
type = velset
trigger1 = time = 0
x = 3
y = 0
persistent = 1

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4086, turn]
type = turn
trigger1 = facing = enemynear,facing
persistent = 1

[state 4087, anim]
type = changeanim
trigger1 = anim != 4081
value = 4081
ignorehitpause = 1
persistent = 1

[state 4087, arc]
type = velset
trigger1 = time%3 = 0
trigger1 = time != 0 
x = ifelse(p2dist x > 0, 4,ifelse(p2dist x = 0, 0, -4))
persistent = 1

;[state 408x, Aroma hit]
;type = parentvaradd
;trigger1 = parent,movetype = H && parent,stateno != [120,159]
;v = 28 
;value = -1
;persistent = 30
;ignorehitpause = 1

[state 4087, arc]
type = velset
trigger1 = time%3 = 0 
trigger1 = time != 0
y = ifelse(p2dist y > -180 && p2dist y < 220 ,0,ifelse(p2dist y >= 220,3,-3))
persistent = 1

[state 4087, attackdist]
type = attackdist
trigger1 = 1
value = 200

[state 4080, hit count]
type = parentvaradd
trigger1 = movecontact
v = 28
value = -1
persistent = 0
ignorehitpause =1

[state 4080, hit count]
type = parentvaradd
trigger1 = gethitvar(damage) != 0
v = 28
value = -1
persistent = 0
ignorehitpause =1

[State 4087, 2]
type = HitDef
trigger1 = !movecontact
attr = S, HP
animtype  = heavy
damage    = 34,7
guardflag = MA
pausetime = ifelse(parent,var(28)=2,0,2),2
guard.pausetime =1,1
sparkno = 2
sparkxy = 40,-200
hitsound   = S1000,4
guardsound = S120, 0
hitonce = 1
id = 4080
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
p1sprpriority = 3
ground.velocity = ifelse(parent,var(28)=1,-16,4),ifelse(parent,var(28)=1,-12,0)
air.velocity = ifelse(parent,var(28)=1,-16,4),ifelse(parent,var(28)=1,-8,-4)
guard.velocity = ifelse(parent,var(28)=1,-18,4)              
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = ifelse(parent,var(28)=1,-12,4),-2 
airguard.hittime = 22
fall = ifelse(parent,var(28) = 1, 1,0)
fall.recover = 0
guard.dist = 480

[State 0, VarSet]
type = VarSet
trigger1 = numtarget(4080)
trigger1 = movehit
var(0) = target(4080),id
ignorehitpause =1

[State 0, Helper]
type = Helper
triggerALL = NumTarget(4080)
trigger1 = movehit
trigger1 = parent,var(28) = 2
name = "Polecatastrophe Poison Effect"
ID = 4006
stateno = 4006 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 4088, displaytoclipboard]
type = displayToClipboard
trigger1 = 1
params = pos y, p2dist y
text = "pos y: %d, p2dist y: %d"

[state 4087, Unstoppable]
type = hitoverride
trigger1 = 1
attr = SCA, AP
stateno = 4087
time = 1
persistent = 1
ignorehitpause = 1

[state 4087, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[state 4080, parentvaradd]
type = parentvaradd
trigger1 = movehit
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 4087, changestate]
type = changestate
trigger1 = movecontact
trigger1 = parent,var(28) > 0
value = 4087
ignorehitpause = 1

[state 4087, destroyself]
type = destroyself
trigger1 = parent,var(28) <= 0
trigger2 = parent,var(34) = 1
trigger3 = time > 420
trigger4 = parent,numhelper(4089) = 0
trigger5 = parent,movetype = H && parent,stateno != [120,155]
ignorehitpause = 0
;---------------------------------------------------------------------------
;Send out level 3
[Statedef 4088]
type = A
movetype = A
physics = N
ctrl = 0

[state 4088, arc]
type = velset
trigger1 = time = 0
x = 3
y = 0
persistent = 1

[State 40XX, attack scaling]
type = attackMulSet
trigger1 = 1
value = root,fvar(10)
ignorehitpause = 1

[state 4086, turn]
type = turn
trigger1 = facing = enemynear,facing
persistent = 1

[state 4088, anim]
type = changeanim
trigger1 = anim != 4082
value = 4082
ignorehitpause = 1
persistent = 1

[state 4088, arc]
type = velset
trigger1 = time%3 = 0
trigger1 = time != 0 
x = ifelse(p2dist x > 0, 4,ifelse(p2dist x = 0, 0, -4))
persistent = 1

[state 4088, arc]
type = velset
trigger1 = time%3 = 0 
trigger1 = time != 0
y = ifelse(p2dist y > -180 && p2dist y < 220 ,0,ifelse(p2dist y >= 220,3,-3))
persistent = 1

[state 4088, attackdist]
type = attackdist
trigger1 = 1
value = 200

[State 4088, 2]
type = HitDef
trigger1 = !movecontact
attr = S, HP
animtype  = heavy
damage    = 27,5
guardflag = MA
pausetime = ifelse(parent,var(28)=2,0,2),2
guard.pausetime =1,1
hitonce = 1
sparkno = 2
id = 4080
sparkxy = 40,-200
hitsound   = S1000,4
guardsound = S120, 0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
p1sprpriority = 3
ground.velocity = ifelse(parent,var(28)=1,-24,8),ifelse(parent,var(28)=1,-16,0)
air.velocity = ifelse(parent,var(28)=1,-24,8),ifelse(parent,var(28)=1,-12,-4)
guard.velocity = ifelse(parent,var(28)=1,-27,8)              
guard.hittime = 16
guard.slidetime = 16
airguard.velocity = ifelse(parent,var(28)=1,-18,8),-2 
airguard.hittime = 22
fall = ifelse(parent,var(28) = 1, 1,0)
fall.recover = 0
guard.dist = 480

[State 0, VarSet]
type = VarSet
trigger1 = numtarget(4080)
trigger1 = movehit
var(0) = target(4080),id
ignorehitpause =1

[state 4080, hit count]
type = parentvaradd
trigger1 = movecontact
v = 28
value = -1
persistent = 0
ignorehitpause =1

;[state 408x, Aroma hit]
;type = parentvaradd
;trigger1 = parent,movetype = H && parent,stateno != [120,159]
;v = 28 
;value = -1
;persistent = 30
;ignorehitpause = 1

[state 4080, hit count]
type = parentvaradd
trigger1 = gethitvar(damage) != 0
v = 28
value = -1
persistent = 0
ignorehitpause =1

[State 4088, Helper]
type = Helper
trigger1 = NumTarget(4080)
triggerall = movehit
trigger1 = parent,var(28) = 2
name = "Polecatastrophe Poison Effect"
ID = 4056
stateno = 4056 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 4088, displaytoclipboard]
type = displayToClipboard
trigger1 = 1
params = pos y, p2dist y
text = "pos y: %d, p2dist y: %d"

[state 4088, Unstoppable]
type = hitoverride
trigger1 = 1
attr = SCA, AP
stateno = 4088
time = 1
persistent = 1
ignorehitpause = 1

[state 4080, parentvaradd]
type = parentvaradd
trigger1 = movehit
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 4088, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT
ignorehitpause = 1

[state 4088, changestate]
type = changestate
trigger1 = movecontact
trigger1 = parent,var(28) > 0
value = 4088
ignorehitpause = 1

[state 4088, destroyself]
type = destroyself
trigger1 = parent,var(28) <= 0
trigger2 = parent,var(34) = 1
trigger3 = time > 420
trigger4 = parent,numhelper(4089) = 0


;--------------------------------------------------------------------------
;Plasma time Counter
[statedef 4089]
type = A
movetype = I
anim = 9741
physics = N

[state 4089, remove]
type = destroyself
trigger1 = time > 421
trigger2 = parent,numhelper(4080) = 0
ignorehitpause = 1
persistent = 1

;--------------------------------------------------------------------------
; Orb Counter
[statedef 4090]
type = A
movetype = A
physics = N
ctrl = 0
anim = 9999


[state 4090, timer]
type = parentvarset
trigger1 = time = 720
v = 34
value = 1

[State 4090, 4]
type = DestroySelf
trigger1 = time >= 730
trigger2 = numhelper(4080) = 0

;==========================================================================
;[Info]
;author = "Inktrebuchet" 
;versiondate = 12/13/2018                  
;goal = Detect enemy's projectile (helper). For use with AI.
;       敵の発射物（helper）を検出する。 AIで使用する場合。
;==========================================================================
;                Notes
;==========================================================================
;notes:
;-Enemy's projectile now has a PlayerID use PlayerID(helper(33333333),var(3)) as a redirect.
;
;base examples of trigger use: 
;
;;Enemy's projectile helper's distance from character.
;trigger1 = PlayerIDExist(helper(33333333),var(3))
;trigger1 = PlayerID(helper(33333333),var(3)), p2bodydist x 
;
;;Enemy's projectile helper's velocity.
;trigger1 = PlayerIDExist(helper(33333333),var(3))
;trigger1 = PlayerID(helper(33333333),var(3)), Vel X
;
;==========================================================================
;                Helper var usage.
;==========================================================================
; numhelper(33333333) Variable usage:
; This is a record of the variables that are used
;
; var(0) - highest playerid + 1
; var(3) - projectile player id while it exists
; 
;==========================================================================
[Statedef 33333333]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0, 0
 
;==========================================================================
;                Config Section
;==========================================================================
anim = 9741                   ; blank animation
 
;==========================================================================
 
[state 33333333, Clipboard] 
type = DisplayToClipboard
trigger1 = 1
text = "Highest Playerid = %d , Projectile helper's PlayerId = %d\nBy Inktrebuchet"
params = var(0)-1, var(3)
;==========================================================================
;                Detect Enemy's Projectile Helper
;==========================================================================
[State 33333333, 0]
type = Null
trigger1 = var(0) = 0
trigger1 = (var(0) := id)
ignorehitpause = 1
 
[state 33333333, 1] 
type = varadd
trigger1 = PlayerIdExist(var(0)) 
trigger2 = PlayerIdExist(var(0)+1) 
trigger3 = PlayerIdExist(var(0)+2) 
trigger4 = PlayerIdExist(var(0)+3) 
trigger5 = PlayerIdExist(var(0)+4) 
trigger6 = PlayerIdExist(var(0)+5) 
trigger7 = PlayerIdExist(var(0)+6) 
trigger8 = PlayerIdExist(var(0)+7) 
trigger9 = PlayerIdExist(var(0)+8) 
trigger10 = PlayerIdExist(var(0)+9) 
trigger11 = PlayerIdExist(var(0)+10) 
trigger12 = PlayerIdExist(var(0)+11) 
trigger13 = PlayerIdExist(var(0)+12) 
trigger14 = PlayerIdExist(var(0)+13) 
trigger15 = PlayerIdExist(var(0)+14) 
trigger16 = PlayerIdExist(var(0)+15) 
trigger17 = PlayerIdExist(var(0)+16) 
trigger18 = PlayerIdExist(var(0)+17) 
trigger19 = PlayerIdExist(var(0)+18) 
trigger20 = PlayerIdExist(var(0)+19) 
trigger21 = PlayerIdExist(var(0)+20) 
trigger22 = PlayerIdExist(var(0)+21) 
trigger23 = PlayerIdExist(var(0)+22) 
trigger24 = PlayerIdExist(var(0)+23) 
trigger25 = PlayerIdExist(var(0)+24) 
trigger26 = PlayerIdExist(var(0)+25) 
v = 0
value = 1
ignorehitpause = 1
 
[State 33333333, 2]
type = Null
triggerall = PlayerIdExist(Root,ID)
trigger1 = PlayerIdExist(var(0)-1)
trigger1 = cond(root,teamside = 1, PlayerID(var(0)-1),teamside = 2, PlayerID(var(0)-1),teamside = 1)
trigger1 = PlayerID(var(0)-1),hitdefattr = ASC, NP, SP, HP
trigger1 = var(3) := (var(0)-1)
trigger2 = PlayerIdExist(var(0)-2)
trigger2 = cond(root,teamside = 1, PlayerID(var(0)-2),teamside = 2, PlayerID(var(0)-2),teamside = 1)
trigger2 = PlayerID(var(0)-2),hitdefattr = ASC, NP, SP, HP
trigger2 = var(3) := (var(0)-2)
trigger3 = PlayerIdExist(var(0)-3)
trigger3 = cond(root,teamside = 1, PlayerID(var(0)-3),teamside = 2, PlayerID(var(0)-3),teamside = 1)
trigger3 = PlayerID(var(0)-3),hitdefattr = ASC, NP, SP, HP
trigger3 = var(3) := (var(0)-3)
trigger4 = PlayerIdExist(var(0)-4)
trigger4 = cond(root,teamside = 1, PlayerID(var(0)-4),teamside = 2, PlayerID(var(0)-4),teamside = 1)
trigger4 = PlayerID(var(0)-4),hitdefattr = ASC, NP, SP, HP
trigger4 = var(3) := (var(0)-4)
trigger5 = PlayerIdExist(var(0)-5)
trigger5 = cond(root,teamside = 1, PlayerID(var(0)-5),teamside = 2, PlayerID(var(0)-5),teamside = 1)
trigger5 = PlayerID(var(0)-5),hitdefattr = ASC, NP, SP, HP
trigger5 = var(3) := (var(0)-5)
trigger6 = PlayerIdExist(var(0)-6)
trigger6 = cond(root,teamside = 1, PlayerID(var(0)-6),teamside = 2, PlayerID(var(0)-6),teamside = 1)
trigger6 = PlayerID(var(0)-6),hitdefattr = ASC, NP, SP, HP
trigger6 = var(3) := (var(0)-6)
trigger7 = PlayerIdExist(var(0)-7)
trigger7 = cond(root,teamside = 1, PlayerID(var(0)-7),teamside = 2, PlayerID(var(0)-7),teamside = 1)
trigger7 = PlayerID(var(0)-7),hitdefattr = ASC, NP, SP, HP
trigger7 = var(3) := (var(0)-7)
trigger8 = PlayerIdExist(var(0)-8)
trigger8 = cond(root,teamside = 1, PlayerID(var(0)-8),teamside = 2, PlayerID(var(0)-8),teamside = 1)
trigger8 = PlayerID(var(0)-8),hitdefattr = ASC, NP, SP, HP
trigger8 = var(3) := (var(0)-8)
trigger9 = PlayerIdExist(var(0)-9)
trigger9 = cond(root,teamside = 1, PlayerID(var(0)-9),teamside = 2, PlayerID(var(0)-9),teamside = 1)
trigger9 = PlayerID(var(0)-9),hitdefattr = ASC, NP, SP, HP
trigger9 = var(3) := (var(0)-9)
trigger10 = PlayerIdExist(var(0)-10)
trigger10 = cond(root,teamside = 1, PlayerID(var(0)-10),teamside = 2, PlayerID(var(0)-10),teamside = 1)
trigger10 = PlayerID(var(0)-10),hitdefattr = ASC, NP, SP, HP
trigger10 = var(3) := (var(0)-10)
ignorehitpause = 1
 
[State 33333333, BindToRoot]
type = BindToRoot
trigger1 = PlayerIdExist(Root,ID)
time = 1
facing = 1
pos =0,-2
ignorehitpause = 1 




;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[statedef -2]

;=======================AI Detect Projectile System==========================
[state -2, AI Detect Projectile System]
type = helper
trigger1 = ailevel ;M.U.G.E.N 1.0+
trigger1 = !numhelper(33333333)
name = "AI Detect Projectile System"
ID = 33333333
stateno = 33333333
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 1.0
size.yscale = 1.0
supermovetime = 2147483647
pausemovetime = 2147483647
ignorehitpause = 1

[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 1151 
id = 1150
ignorehitpause =1

[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 1161
id = 1160
ignorehitpause = 1

[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 1171
id = 1170
ignorehitpause = 1

[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 1155  
id = 1155
ignorehitpause =1

[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 1165
id = 1165
ignorehitpause = 1

[state -2, remove explod]
type = removeexplod
trigger1 = stateno != 1175
id = 1175
ignorehitpause = 1

[State -2, Throws into poison]
type = Helper
triggerall = numhelper(4000)
triggerall = numenemy
trigger1 = enemy,stateno = 4055
trigger1 = time = 0
name = "Poison effect"
ID = 4056
stateno = 4056 
pos = 0,0
postype = p2
facing = -1
ownpal = 1
ignorehitpause = 1

;-----------Inhibitors----------

[state -2, Air Jump Counter]
type = varset
trigger1 = stateno = 0  || stateno = 52
var(3) = const(movement.airjump.num)
ignorehitpause = 1

[state -2, air dash]
type = varset
trigger1 = stateno = 0 || stateno = 52
var(4) = 1
ignorehitpause = 1

[state -2, Wall bounce limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(7) = 2
ignorehitpause = 1

[state -2, Ground Bounce limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(8) = 2
ignorehitpause = 1

[state -2, Launcher limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(11) = 3
ignorehitpause = 1

[state -2, Jump infinite check]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(29) = 1
ignorehitpause = 1

[state -2, Teleport Limiter]
type = varset
triggerall = numenemy
trigger1 = stateno = 0 || stateno = 52 ||stateno = 20 ||stateno = 11
trigger1 = enemynear,movetype != H
var(32) = 1
ignorehitpause = 1

[state -2, teleport combo limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(33) = 2
ignorehitpause =1

[state -2, Orb check]
type = varset
trigger1 = numhelper(4080) = 0
var(34) = 0
ignorehitpause=1

[state -2, displaytoclipboard]
type = displaytoclipboard
trigger1 = 1
text = "distance from enemy X: %d  Y: %d , Combo Scaling %d "
params = p2bodydist x, p2bodydist y, var(18),
;===========================================
; Victory quotes
;===========================================
[state -2, win quotes]
type = victoryquote
trigger1 = 1
value = 1+(random%6)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Jumbo Elephant"
value = 8+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Ana 'Jiggly' Bunny"
value = 11+(random%3)
ignorehitpause
persistent = 1


[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Bertha Hippo"
value = 14+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Enorma Pig"
value = 17+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Katrina Crocodile"
value = 20+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Luna Bunny"
value = 23+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Sonic"  || enemy,name = "Sonic the Hedgehog" || enemy,name = " Sonic"
value = 26+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Aroma Skunk"
value = 29+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Batman"
value = 32+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Ryu"
value = 35+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Ken"
value = 38+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Lardo Rat"
value = 41+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Zafta Giraffe"
value = 44+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Makuyama"
value = 47+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Pastilla Skunk"
value = 50+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Jumba Elephant"
value = 53+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Twiggi Bunny"
value = 56+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Undyne"
value = 60+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Ra Lord"
value = 63+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Violet 'Tyla' Bunny"
value = 66+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Battu Tri-red"
value = 69+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Julian Hippo"
value = 72+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Rapid Bunny"
value = 75+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Noah Sharker"
value = 78+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Akai R. Panda"
value = 81+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Montana Moth"
value = 84+(random%3)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, Name = "Andy Armadillo"
value = 87+(random%3)
ignorehitpause
persistent = 1

[state -2, win quote]
type = victoryquote
triggerall = numenemy
trigger1 = enemy,name = "Texas Stanton"
value = 90+(random%3)
ignorehitpause = 1
persistent = 1



;===========================================
;  Combo damage reduction
;===========================================

[State -2, attack scaling]
type = attackMulSet
trigger1 = 1
value = fvar (10)
ignorehitpause = 1

[state -2, combo points]
type = varset
trigger1 = numenemy
trigger1 = (enemynear, movetype != H)
trigger2 = !numenemy
ignorehitpause = 1
v = 18
value = 100

[state -2, gradual lowering]
type= varset
trigger1 =  var(18) >= 100
fvar(10) = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 100 && var(18) >= 90
fvar(10) = 0.9

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 90 && var(18) >= 80
fvar(10) = 0.8

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 80 && var(18) >= 70
fvar(10) = 0.7

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 70 && var(18) >= 60
fvar(10) = 0.6

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 60 && var(18) >= 50
fvar(10) = 0.5

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 50 && var(18) >= 40
fvar(10) = 0.4

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 40 && var(18) >= 30
fvar(10) = 0.3

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 30 && var(18) >= 20
fvar(10) = 0.2

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 20 && var(18) >= 10
fvar(10) = 0.1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 10
fvar(10) = 0.05

;---------------------------------------------------------------------------
;  Variables for AI
;---------------------------------------------------------------------------
[state -2, reset]
type = varset
trigger1 = !numhelper(4006) && !numhelper(4056)
trigger2 = statetype = L
var(6) = 0
persistent = 1

;Offense/Defense for AI
[state -2, run away AI]
type = varset
triggerall = ailevel
triggerall = var(30) = 59
triggerall = numenemy
triggerall = enemy,name != "Twiggi Bunny"
triggerall = enemy,name != "Enorma Pig"
triggerall = enemy,name != "Pastilla Skunk"
triggerall = enemy,name != "Noah Sharker"
triggerall = life > floor(p2life*0.75)
trigger1 = numhelper(4006)
trigger2 = numhelper(4056)
var(6) = 1
persistent = 1




;===========================================================================
; Poison Weaknesses/Resistances/Immunities
;===========================================================================
[state -2, value]
type = varset
trigger1 = 1
fv = 11
value = ifelse(var(10)=1, 0.5, 1)

; Resistant (those that resist poisons, have no nose, etc)


[state -2, resistent]
type = varset
triggerall = numenemy
trigger1 = enemy,name = "Jiggly Bunny"
trigger2 = enemy,name = "Lardo Rat"
v = 10
value = 1

;Weakness (those with enhance sense of smell, wolves, bears)

;Immune (all birds, those that lack sense of smell, robots)

[state -2, helper counter]
type = helper
trigger1 = numhelper(4080) > 0
trigger1 = helper(4080),stateno = [4086,4088]
trigger1 = numhelper(4090) = 0
id = 4090
stateno = 4090


;[state -2, projectile shield]
;type = nothitby
;triggerall = numhelper(4000) 
;trigger1 = helper(4000),parentdist x = [-400,0]
;value = ,AP
;time = 4
;ignorehitpause = 1
;persistent = 1

;[state -2, projectile shield]
;type = nothitby
;triggerall = numhelper(4080)
;trigger1 = helper(4080),parentdist x = [-400,0]
;value = ,AP
;time = 4;
;ignorehitpause = 1
;persistent = 1



;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

;This controller plays a sound everytime KFM lands from a jump, or
;from his back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = 40, 0

[state -3, gravity]
type = gravity
trigger1 = stateno = 5620
trigger1 = time > 0

[state -3, land]
type = changestate
triggerall = stateno = 5620
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52