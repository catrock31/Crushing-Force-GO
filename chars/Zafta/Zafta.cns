; KFM's constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
;Amount of life to start with
life = 1050
power = 5000
;attack power (more is stronger)
attack = 100
;defensive power (more is stronger)
defence = 100
;Percentage to increase defense everytime player is knocked down
fall.defence_up = 50
;Time which player lies down for, before getting up
liedown.time = 60
;Number of points for juggling
airjuggle = 45
;Default hit spark number for HitDefs
sparkno = 2
;Default guard spark number
guard.sparkno = 40
;1 to enable echo on KO
KO.echo = 0
;Volume offset (negative for softer)
volume = 0
;Variables with this index and above will not have their values
;reset to 0 between rounds or matches. There are 60 int variables,
;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
;If omitted, then it defaults to 60 and 40 for integer and float
;variables repectively, meaning that none are persistent, i.e. all
;are reset. If you want your variables to persist between matches,
;you need to override state 5900 from common1.cns.
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = 0.7;.68        ;Horizontal scaling factor.
yscale = 0.7          ;Vertical scaling factor.
ground.back = 80    ;Player width (back, ground)
ground.front = 80    ;Player width (front, ground)
air.back = 80        ;Player width (back, air)
air.front = 80       ;Player width (front, air)
height = 460          ;Height of player (for opponent to jump over)
attack.dist = 720   ;Default attack distance
proj.attack.dist = 360 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = -8, -436   ;Approximate position of head
mid.pos = -12, -200    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y). Recommended 0,0

[Velocity]
walk.fwd  = 4.5;4.6      ;Walk forward
walk.back = -4;-4.2     ;Walk backward
run.fwd  = 16.0, 0    ;Run forward (x, y)
run.back = -10,-6 ;Hop backward (x, y)
jump.neu = 0,-20   ;Neutral jumping velocity (x, y)
jump.back = -5    ;Jump back Speed (x, y)
jump.fwd = 5       ;Jump forward Speed (x, y)
runjump.back = -2.55,-8.1 ;Running jump speeds (opt)
runjump.fwd = 10,-10      ;.
airjump.neu = 0,-8.1      ;.
airjump.back = -2.55      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.
air.gethit.groundrecover = -.15,-3.5  ;Velocity for ground recovery state (x, y) **MUGEN 1.0**
air.gethit.airrecover.mul = .5,.2     ;Multiplier for air recovery velocity (x, y) **MUGEN 1.0**
air.gethit.airrecover.add = 0,-4.5    ;Velocity offset for air recovery (x, y) **MUGEN 1.0**
air.gethit.airrecover.back = -1       ;Extra x-velocity for holding back during air recovery **MUGEN 1.0**
air.gethit.airrecover.fwd = 0         ;Extra x-velocity for holding forward during air recovery **MUGEN 1.0**
air.gethit.airrecover.up = -2         ;Extra y-velocity for holding up during air recovery **MUGEN 1.0**
air.gethit.airrecover.down = 1.5      ;Extra y-velocity for holding down during air recovery **MUGEN 1.0**

[Movement]
airjump.num = 0       ;Number of air jumps allowed (opt)
airjump.height = 35   ;Minimum distance from ground before you can air jump (opt)
yaccel = .8          ;Vertical acceleration
stand.friction = 0.83;.85  ;Friction coefficient when standing
crouch.friction = 0.80;.82 ;Friction coefficient when crouching
stand.friction.threshold = 2          ;If player's speed drops below this threshold while standing, stop his movement **MUGEN 1.0**
crouch.friction.threshold = .05       ;If player's speed drops below this threshold while crouching, stop his movement **MUGEN 1.0**
air.gethit.groundlevel = 25           ;Y-position at which a falling player is considered to hit the ground **MUGEN 1.0**
air.gethit.groundrecover.ground.threshold = -20 ;Y-position below which falling player can use the recovery command **MUGEN 1.0**
air.gethit.groundrecover.groundlevel = 10   ;Y-position at which player in the ground recovery state touches the ground **MUGEN 1.0**
air.gethit.airrecover.threshold = -1  ;Y-velocity above which player may use the air recovery command **MUGEN 1.0**
air.gethit.airrecover.yaccel = 0.8    ;Vertical acceleration for player in the air recovery state **MUGEN 1.0**
air.gethit.trip.groundlevel = 15      ;Y-position at which player in the tripped state touches the ground **MUGEN 1.0**
down.bounce.offset = 0, 20            ;Offset for player bouncing off the ground (x, y) **MUGEN 1.0**
down.bounce.yaccel = 0.8              ;Vertical acceleration for player bouncing off the ground **MUGEN 1.0**
down.bounce.groundlevel = 12          ;Y-position at which player bouncing off the ground touches the ground again **MUGEN 1.0**
down.friction.threshold = .05         ;If the player's speed drops below this threshold while lying down, stop his movement **MUGEN 1.0**

;Default language victory quotes (optional).  **MUGEN 1.0**
;If this section is included, the default language victory quotes must be in English.
[Quotes]
; Up to 100 victory quotes can be specified per language (victory0 - victory99)
;Generic Victory
victory1 = "You must defeat dem legs to stand a chance."
victory2 = "Don't give me that 'You're too tall' nonsense."
victory3 = "With legs like mine who needs projectiles?"
victory4 = "Wow, does everyone really have such terrible reach?"
victory5 = "Next time I'll give you such a swift kick to the head while I'm still on this side of the room."
victory6 = "Well now you have another reason to look up to me."
victory7 = "I loving having such a great reach."

;Jumbo

victory8 = "Its nice knowing most of my kicks won't miss."
victory9 = "I'm pretty sure my leg strength can compete with your upper body strength and mass."
Victory10 = "That's good acting, but I know you're armoring through my hits but I know for certain my kicks do a ton of damage."

;Jiggly
victory11 = "You're speed is very impressive, but I bet you get that a lot."
victory12 = "Your cute appeal wore off when you started comboing my shins."
victory13 = "You share techniques with that huge bottomed hippo.  Is she running a class now?"

;Bertha
victory14 = "Don't worry if we both layed down I'm sure you would be taller."
victory15 = "Wow!  You're mass doesn't stop easy once it gets going does it."
victory16 = "I swear you ass gets bigger every time I see you."

;Katrina
victory17 = "You are just so distracting.  Your chest makes little sense."
victory18 = "Your teeth and chest worry me but I think my kicks will handle you every time."
victory19 = "That tail gives you some nice reach.  But you'll never outclass me in that department."

;Enorma
victory20 = "Why are you allowed to use guns here?!"
victory21 = "Yeah, you stop at shooting peeps and I'll gladly help you on your farm."
victory22 = "Whenever you reload you should expect a nice swift kick to your head."

;Aroma
victory23 = "Oh come on!!  I can even smell you from up here!"
victory24 = "Your techniques are just gross and rude.  Is that really fighting?"
victory25 = "You ability to control areas with gas would be useful if you were on my team."

;Lardo
victory26 = "Oh no no no!  I will not being eaten by the likes of you!"
victory27 = "You stink almost as bad as that skunk."
victory28 = "What an incredibly gross rodent."

;Makuyama
victory29 = "Wow, you bears sure are strong but you'll never out range me so I hope you can take a kick to the head."
victory30 = "I out speed you and out range you.  I won't let you just bulldoze your way in."
victory31 = "I didn't think bears got that big."

;Pastilla
Victory32 = "I'm don't know what your magic is capable of but I know what my kicks will do to you next time you try."
victory33 = "Strong legs beat terrible smells and magic."
victory34 = "The thick skin of a hippo isn't enough of a defense against these kicks."

;Jumba
Victory35 = "My legs could only be considered 'slender' next to huge bodies like you Jumba."
victory36 = "I don't need as much power as you since I'll never let you get close without resistance."
victory37 = "Even without my height I'm pretty sure I could see you coming."

;Twiggi
victory38 = "Sorry about your curse but you'll need some mass to make your kicks do actual damage."
victory39 = "Your strategy of just out ranging your opponents may need work. I can match your range and I bring the damage."
victory40 = "I kinda feel that you want to be sat on or something.  You may need to find another approach for that desire."

;Ra Lord
victory41 = "I won and I didn't even have to use my crane kick"
Victory42 = "I bet you thought you had good reach before you met me."
victory43 = "I like poking against you its a lot of fun."

;Violet
victory44 = "Nice to see someone with legs like mine.  It was a pleasure to meet you."
victory45 = "Your kicks are gonna need a lot more range and power to compete with mine."
victory46 = "If you can really do outfits for me that would be really appreciated.  I can't begin to tell you how hard it is for me to find clothes."

;Julian
victory47 = "Oh, I've fought hippos before.  Your thick skin isn't gonna be enough to save you from my kicks."
victory48 = "I know better than to let someone as large as you grab me."
victory49 = "Your rump has such an appealing curve to it."

;Battu
victory70 = "Oh my aren't you a little one.  I feel like the range advantage I'll have over you may be too much for you."
victory71 = "Alien are not my kicks can solve most problems."
victory72 = "Pretty sure my thighs are bigger than your entire body."

;Rapid
victory73 = "You maybe extremely fast but I can still easily see you coming from up here."
victory74 = "You may have effective legs but in terms of kicking power you're entirely outclassed."
victory75 = "Go whereever you like in the ring, You'll very seldomly be out of my range."

;Noah
Victory76 = "The dog ladies you bring as back up are pretty tough, but I've kicked tanky pachyderms into submission."
Victory77 = "That tail whip of yours is pretty sweet.  You should do more of that."
victory78 = "You may be demons but I'm sure my kicks will intimidate you."

;Akai
victory79 = "My thighs are bigger than your whole body and I kick from across rooms.  You shouldn't have tried me."
Victory80 = "You should use that speed to stay away from me short one."
Victory81 = "I don't need super speed when I have reach like mine."



; Mugen 51-90
;Ryu
victory51 = "Do you fight everything that moves?  I don't even think you get suprised by who your opponent is anymore."
victory52 = "I like your Tatsumaki Senpukyaku.  If I could do that I probably would be decapitating people though."
victory53 = "I see how you like fighting so much you have such a skill set that's fair against pretty much everybody and really test your skills.  Neat!"

;Ken
victory54 = "I really like your Tatsumaki Senpukyaku, but if I got that much speed trying it people would end up dead."
victory55 = "Do you voluntarilly set yourself on fire with that punch."
victory56 = "Must be nice to be rich, I guess you never run into low height ceilings if you didn't want."

;Dhalsim
victory57 = "Wow, I think Yoga would be fantastic for me to learn.  If I could stretch as much as you did I could reach anything."
victory58 = "Your techniques would have more power to them if you added more mass to your frame."
victory59 = "Don't think you'll have a range advantage against me."

;Goku
Victory60 = "Kaio- what now"
victory61 = "You're moves are so cool, but don't think I'll let you get in."

;Vegeta
Victory62 = "Damn, your so agressive, but you're also much closer to the ground than that other one."
victory63 = "Its a good thing you could fly since with that height your range leaves a lot to be desired."

;Piccolo
Victory64 = "You have stretchy powers too. That seems to be going around."
Victory65 = "I'm sorry but I think that multiform is only for shits and/or giggles.  Its not that intimidating."

;Chun-li
Victory66 = "I heard rumors about your legs.  Not really impressed by their size but seeing em in action is amazing."
victory67 = "Oh, I so wanna copy some of your techniques!"

;Elena
Victory68 = "^_^  Pleasure to meet you."
victory69 = "Maybe some day you can teach me how to dance."

;Andy
Victory82 = "I'm not scared of kicking an iron football around, Armadillo."
victory83= "Your durable hide isn't gonna save you from my strong legs."
victory84 = "Anti Air attacks like yours are unfair against tall bodies."

;Montana
Victory85 = "Flight is good and all but I can still reach you easily."
Victory86 = "You can zip around all you want but you'll still never out reach me."
Victory87 = "Keep your foul ass away from my head."

;Texas
Victory88 = "The long arm of the law looks pretty short from up here."
Victory89 = "If you want a tip from me.  You clearly have a prominent lower body so you should push that and use that to its full potential."
victory90 = "I've seen the Star Wars movies, don't go wrapping your lasso around my legs.  A lot of enemies try that and its really annoying."

;Special Win condition
Victory98 = "I hope the last part of that dance wasn't too much for you."
Victory99 = "You looked tougher than that, I didn't mean to crush your body that badly."
;Alternate language victory quotes (optional).
;0 or more alternate language sections may be added, preceded by the
;ISO 639-1 code followed by a ".", e.g. "[ja.Quotes]".
;See language setting in mugen.cfg.
[ja.Quotes]
victory1 = "カンフー突き手を破らぬ限り、お前に勝ち目はない！"
victory2 = "十年早いんだぞ"
victory3 = "お前は見覚えがあるな。テレビにでも…？"
victory4 = "お前の動きは見破りやすすぎる。　なに、カンフー突き手が覚えたいんだと？　素人には無理だぞ"
victory5 = "ふー。　いい汗だった"
victory6 = "もっと強い相手に挑戦したい"
victory7 = "なんだと！彼女はここにもいないと？"

;---------------------------------------------------------------------------
; Variable usage:
; This is a record of the variables that KFM uses. Keeping a record of your
; variable usage helps you avoid careless mistakes later.
; var(1)  - Used in kfm.cmd for combo condition (updated every tick)
; var(2)  - Used in Kung Fu Throw (state 800) to remember if fwd was being
;           held (remembered from state 800 through state 810).

; var(4) Butt drop recovery
; var (25) - grab check
; var (28) - Grab direction check
; var (29) - Jump infinite Check
; var(5) - Hit Height
; var(50) - win by condition

;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
; Win pose 1 - split
; CNS difficulty: basic
[Statedef 181]
type = S
physics = N
ctrl = 0
anim = 18001
velset = 0,0



[state 181, gravity]
type = gravity
trigger1 = pos y < -1

[state 181, spr priority]
type = sprpriority
trigger1 = 1
value = -2
persistent = 1

[state 181, velset]
type = velset
trigger1 = animelem = 1
y = -12
x = ifelse(frontedgedist > backedgedist,6,-6)

[state 181, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 18002





[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------
[statedef 18002]
type = S
movetype = I
physics = N
velset = 0,0
anim = 18002

[state 18002, posset]
type = posset
trigger1 = time = 0
y = 0

[state 181, announce]
type = playsnd
triggerall = teammode = single
trigger1 = time = 10
trigger1 = life != lifemax
value = S180,1

[state 181, announce]
type = playsnd
triggerall = teammode = single
trigger1 = time = 10
trigger1 = life = lifemax
value = S180,1

[state 18002, playsnd]
type = playsnd
trigger1 = animelem = 3
value = S52,1
volume = 25

[state 181, envshake]
type = envshake
trigger1 = animelem = 3
ampl = -6
time = 12
freq = 70
phase = 70

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 18002, bounce]
type = velset
trigger1 = animelem = 5
y = -4

[state 18002, gravity]
type = gravity
trigger1 = pos y < -1

[state 18002, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 18003

;--------------------------------
[statedef 18003]
type = S
anim = 18003
physics = N
velset = 0,0

[state 181, width]
type = width
trigger1 = 1
edge = 200,200

[state 18002, posset]
type = posset
trigger1 = time = 0
y = 0

[state 18002, playsnd]
type = playsnd
trigger1 = time = 0
value = S52,1
volume = 25
persistent = 0

[state 181, envshake]
type = envshake
trigger1 = time = 0
ampl = -8
time = 16
freq = 70
phase = 70

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1






;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[state 191, version]
type = explod
trigger1 = time = 0
anim = ifelse(facing = -1,9101,9100)
scale = 0.5,0.5
postype = Back
pos = ifelse(facing =1, 20, 157),180 ; Nice!
ontop = 1

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[state 191, camera]
type = helper
trigger1 = !numhelper(19000)
trigger1 = !time
helpertype = normal
stateno = 19000
id = 19000
postype = p1
pos = 0,0
ownpal = 1
name = "High Camera" 


[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0
persistent 

; You can delete the following two controllers if you're building your own
; character using KFM. These play back the sounds of the wood block being
; broken.
[State 191, Snd 1]
type = PlaySnd
trigger1 = AnimElemtime(3) = 0
trigger2 = AnimElemtime(7) = 0
trigger3 = AnimElemtime(11) = 0
trigger4 = AnimElemtime(15) = 0
value = S190,0
volumescale = 60
persistent = 1


;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Stand Light Punch
; CNS difficulty: easy
[Statedef 200]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                     
velset = 0,0                    
ctrl = 0                        
anim = 200                      
poweradd = 10                    
sprpriority = 2                 

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                    
damage = 25, 0                  
animtype = Light                
guardflag = MA                  
hitflag = MAF                   
priority = 3, Hit                
pausetime = 8, 8                 
sparkno = 0                      
sparkxy = -10, -176              
hitsound = S5000, 0                  
guardsound = S120, 0                
ground.type = High             
ground.slidetime = 13             
ground.hittime  = 13            
ground.velocity = -6             
airguard.velocity = -1.9,-.8    
air.type = High                  
air.velocity = -1.4,-3           
air.hittime = 15                
guard.slidetime = 13
guard.hittime = 13
guard.velocity = -9
guard.dist = 360
fall.recovertime = 20

[state x, attack dist]
type = attackdist
trigger1 = 1
value = 360

[State 200, 2]
type = PlaySnd
trigger1 = Time = 2
value = S200, 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 200, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Alt Stand Light Punch
; CNS difficulty: easy
[Statedef 201]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                     
velset = 0,0                    
ctrl = 0                        
anim = 201                      
poweradd = 10                    
sprpriority = 2                 

[State 201, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA                    
damage = 22,ifelse(enemy,statetype = A,6,0)                 
animtype = Light                
guardflag = MA                  
hitflag = MAF                   
priority = 4, Hit                
pausetime = 8, 8                 
sparkno = 0                      
sparkxy = -10, -270             
hitsound = S5000, 0                  
guardsound = S120, 0                
ground.type = High             
ground.slidetime = 10             
ground.hittime  = 10            
ground.velocity = -5            
airguard.velocity = -5,-2   
air.type = High                  
air.velocity = -2,-2           
air.hittime = 18                
guard.slidetime = 14
guard.hittime = 14
guard.velocity = -9
guard.dist = 390
guard.kill = 0
fall.recovertime = 30


[state x, attack dist]
type = attackdist
trigger1 = 1
value = 390

[State 201, 2]
type = PlaySnd
trigger1 = Time = 2
value = S200, 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 201, launcher]
type = changestate
trigger1 = command = "y"
trigger1 = movecontact
value = 410

[state 201, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 201, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong punch
; CNS difficulty: easy
; Note the width controller. It makes KFM's push box larger, so he doesn't
; stand so close to the opponent. Hit Ctrl-C and look at the red bar at his
; feet.
; The sprpriority for this state is at -1, instead of the usual 2 for
; attacks. This makes KFM appear behind the opponent initially.
; The SprPriority controller in [State 210, 4] brings KFM to the front when
; his arm has swung over.
; To stop KFM from pausing in his swing frame, there is a ChangeAnim in
; [State 210, 3] that detects if the hit has come in contact with the
; opponent during that frame, and switches to the next animation element
; (notice the elem=6 parameter). If you don't see what I mean, try commenting
; out that controller, then hit someone with this attack.
[Statedef 210]
type    = S
movetype= A
physics = S
poweradd= 30
ctrl = 0
anim = 210
sprpriority = -1

[state 210, velset]
type = velset
trigger1 = time = 0
trigger1 = prevstateno != 100

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 4
value = S210, 0


[State 210, 2]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype  = heavy
damage    = 70
guardflag = MA
Hitflag = FD
pausetime = 12,12
id = 210
nochainid = 1400
sparkno = 2
sparkxy = -10,-70
hitsound = S5000, 2
guardsound = S120,0
ground.type = high
air.velocity = -30,-2
air.hittime = 22
down.velocity = -35,0
down.hittime = 18
ground.cornerpush.veloff = -40
guard.cornerpush.veloff = -48

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 8
trigger1 = !movecontact
attr = S, NA
animtype  = heavy
damage    = 80
guardflag = MA
Hitflag = MAF
pausetime = 12,12
sparkno = 2
priority = 3,hit
sparkxy = -10,-160
hitsound = S5000, 2
guardsound = S120,0
ground.type = high
ground.slidetime = 29
ground.hittime  = 27
ground.velocity = -24
air.velocity = -14,-8
guard.velocity = -22
airguard.velocity = -14,-2
guard.slidetime = 18
guard.hittime = 18
guard.dist = 660
forcestand = 1
fall.recovertime = 40
ground.cornerpush.veloff = -40
guard.cornerpush.veloff = -48

[state 210, sprpriority]
type = sprPriority
trigger1 = animelem = 9
value = -2

[state x, attack dist]
type = attackdist
trigger1 = 1
value = 660

[state 210, ducking]
type = statetypeset
trigger1 = animelem = 4
statetype = C

[state 210, standing]
type = statetypeset
trigger1 = animelem = 9
statetype = S

[State 210, 3]
type = ChangeAnim
trigger1 = AnimElemTime(5) > 0 && AnimElemTime(6) <= 0
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
value = 210
elem = 6

[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 210, Not Active]
type = statetypeset
trigger1 = animelemtime(9) = 0
movetype = I


[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick
; CNS difficulty: easy
[Statedef 230]
type    = S
movetype= A
physics = S
poweradd= 11
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 230, 2]
type = HitDef
trigger1 = animelem = 3
persistent = 0
attr = S, NA
animtype  = Medium
damage    = 35,4
guardflag = MA
hitflag = MAF
priority = 3,hit
pausetime = 8,8
sparkno = 0
sparkxy = -10,-110
hitsound   = S5000,1
guardsound = S120,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -8
air.velocity = -2,-3.5
guard.velocity = -9
guard.hittime = 14
guard.slidetime = 14
guard.dist = 375
forcestand = 1
guard.kill = 0
fall.recovertime = 20
ground.cornerpush.veloff = -12
guard.cornerpush.veloff = -15

[state x, attack dist]
type = attackdist
trigger1 = 1
value = 375

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 230, xx]
type = changestate
trigger1 = movecontact
trigger1 = command = "a"
value = 231

[state 230, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing MEDIUM kick
; CNS difficulty: easy
[Statedef 231]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 11
ctrl = 0
anim = 231
sprpriority = 2

[state 231, velset]
type = velset
trigger1 = time = 0
trigger1 = prevstateno != 100
x = 0
y = 0


[State 231, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 231, 2]
type = HitDef
trigger1 = animelem = 3
persistent = 0
attr = S, NA
animtype  = Medium
damage    = 45,5
guardflag = MA
hitflag = MAF
pausetime = 10,10
sparkno = 0
priority = 2,hit
sparkxy = -10,-175
hitsound   = S5000,1
guardsound = S120,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -15
air.velocity = -5,-2
guard.velocity = -9
guard.hittime = 15
guard.slidetime = 15
guard.dist = 470
forcestand = 1
GUARD.kill = 0
fall.recovertime = 20
ground.cornerpush.veloff = -18
guard.cornerpush.veloff = -24

[state x, attack dist]
type = attackdist
trigger1 = 1
value = 470

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -6
persistent = 0
ignorehitpause = 1

[state 231, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 231, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Alt Standing light kick (stomp)
; CNS difficulty: easy
[Statedef 232]
type    = S
movetype= A
physics = S
poweradd= 11
juggle = 7
ctrl = 0
velset = 0,0
anim = 232
sprpriority = 2

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 230, 2]
type = HitDef
trigger1 = animelem = 3
persistent = 0
attr = S, NA
animtype  = Medium
damage    = ifelse(enemy,statetype = L,65,40),4
guardflag = M
hitflag = MFD
nochainid = 1400
priority = 3,hit
pausetime = 10,10
sparkno = 1
sparkxy = -10,-60
hitsound   = S5000,1
guardsound = S120,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -8
air.velocity = -2,-3.5
down.velocity = 0,0
down.hittime = 12
guard.velocity = -7
guard.hittime = 18
guard.slidetime = 18
guard.dist = 375
guard.kill = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -24

[state x, attack dist]
type = attackdist
trigger1 = 1
value = 375

[state 232, sound]
type = playsnd
trigger1 = animelemtime(4)=0
value = S20,0
persistent = 1
volumescale = 100

[state 232, sound]
type = playsnd
trigger1 = animelemtime(4)=0
value = S20,0
persistent = 1
volumescale = 100

[state 232, earthquakes]
type = envshake
trigger1 = animelemtime(4)=0
time = 8
ampl = -6
freq = 60
phase = 70

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 230, xx]
type = changestate
triggerall = movecontact
trigger1 = command = "a"
trigger2 = ailevel > 0
value = 233

[state 232, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Double Alt Standing light kick (stomp)
; CNS difficulty: easy
[Statedef 233]
type    = S
movetype= A
physics = S
poweradd= 11
ctrl = 0
velset = 0,0
anim = 232
sprpriority = 2

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 230, 2]
type = HitDef
trigger1 = animelem = 3
persistent = 0
attr = S, NA
animtype  = Medium
damage    = ifelse(enemynear,statetype = L,65,40),4
guardflag = M
hitflag = MFD
priority = 3,hit
pausetime = 8,8
sparkno = 1
nochainid = 1400
sparkxy = -10,-60
hitsound   = S5000,1
guardsound = S120,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -8
air.velocity = -2,-3.5
down.velocity = 0,0
down.hittime = 12
guard.velocity = -4
guard.hittime = 18
guard.slidetime = 18
guard.dist = 375
guard.kill = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -32

[state x, attack dist]
type = attackdist
trigger1 = 1
value = 375

[state 232, earthquakes]
type = envshake
trigger1 = animelemtime(4)=0
time = 8
ampl = -6
freq = 60
phase = 70

[state 232, sound]
type = playsnd
trigger1 = animelemtime(4)=0
value = S20,0
persistent = 1
volumescale = 100

[state 232, sound]
type = playsnd
trigger1 = animelemtime(4)=0
value = S20,0
persistent = 1
volumescale = 100

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 233, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[state 230, xx]
type = changestate
triggerall = movehit
trigger1 = command = "a"
trigger2 = ailevel > 0
triggerall = enemy,statetype != L
value = 231

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
; Standing strong kick
; CNS difficulty: easy
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 60
ctrl = 0
sprpriority = -2

[state 240, anim]
type = changeanim
trigger1 = time = 0
value = 240


[state 240, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 3
value = S240, 0

[State 240, 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype  = Heavy
damage    = 90,9
guardflag = MA
hitflag = MAF
pausetime = 12,12
sparkno = 2
p1sprpriority = -2
priority = 3,hit
sparkxy = -10,-175
hitsound = S5000, 2
guardsound = S120,0
ground.type = high
ground.slidetime = 32
ground.hittime  = 32
ground.velocity = -24,0
air.velocity = -16,-2
guard.dist = 595
guard.velocity  = -27
airguard.velocity = -6,-4
guard.hittime =  21
guard.slidetime =  21
fall = 0
fall.recover = 1
fall.recovertime = 30
guard.kill = 0
ground.cornerpush.veloff = -24
guard.cornerpush.veloff = -28

[state 240, sprpriority]
type = sprPriority
trigger1 = animelem = 5
value = 2

[state x, attack dist]
type = attackdist
trigger1 = 1
value = 595

[state 240, wall bounce]
type = targetstate
triggerall = var(7) > 0
trigger1 = movehit
trigger1 = prevstateno = 100
trigger1 = hitpausetime = 13
ignorehitpause=1
value = 675


[State 240, 3]
type = veladd
trigger1 = AnimElem = 2
x = 28

[State 240, 3]
type = velset
trigger1 = AnimElem = 3
trigger1 = prevstateno != 100
x = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 240, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Alt Roundhouse
[Statedef 241]
type    = S
movetype= A
physics = S
poweradd= 60
ctrl = 0
velset = 0,0
anim = 241
sprpriority = -2

[State 241, 1]
type = PlaySnd
trigger1 = animelem = 3
value = S240, 0

[state 241, high kick limiter]
type = varadd
trigger1 = movehit
v = 12
value = -1
persistent = 0

[State 241, 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype  = Heavy
damage    = ifelse(enemy,statetype = A,95,85),ifelse(enemy,statetype = A,29,9)
guardflag = MA
hitflag = MAF
pausetime = 14,14
sparkno = 3
p1sprpriority = -2
sparkxy = -10,-270
hitsound   = 5,4
guardsound = S120,0
ground.type = high
priority = 5,hit
ground.slidetime = 34
ground.hittime  = 32
ground.velocity = -4,ifelse(var(12)>0,-20,-10)
air.velocity = -4,ifelse(var(12)>0,-16,-8)
guard.dist = 490
guard.velocity  = -14
airguard.velocity = -16,-4 
guard.hittime = 16
guard.slidetime = 16
airguard.ctrltime = 24
fall = 1
fall.recover = 1
fall.recovertime = 30
guard.kill = 0
ground.cornerpush.veloff = -18
guard.cornerpush.veloff = -22

[state 240, sprpriority]
type = sprPriority
trigger1 = animelem = 5
value = 2

[state x, attack dist]
type = attackdist
trigger1 = 1
value = 490

;[state 241, wall bounce]
;type = targetstate
;trigger1 = movehit
;trigger1 = hitpausetime = 14
;value = 670
;ignorehitpause =1 


[State 240, 3]
type = velset
trigger1 = AnimElem = 2
x = 12

[State 240, 3]
type = velset
trigger1 = AnimElem = 3
x = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 241, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;Running roundhouse
[Statedef 245]
type    = S
movetype= A
physics = S
poweradd= 80
ctrl = 0
sprpriority = -2

[state 245, anim]
type = changeanim
trigger1 = time = 0
value = 242

[state 245, wall bounce check]
type = varadd
trigger1 = movehit
v = 7
value = -1

[State 245, 1]
type = PlaySnd
trigger1 = animelem = 3
value = S240, 0

[State 240, 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype  = Heavy
damage    =  100,10
guardflag = MA
hitflag = MAF
pausetime = 18,18
sparkno = 3
p1sprpriority = -2
priority = 3,hit
sparkxy = -10,-175
hitsound   = 5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 36
ground.hittime  = 32
ground.velocity = -40, ifelse(var(7) > 1, -30, -4)
air.velocity = -32,ifelse(var(7) > 1, -16, 4)
guard.dist = 595
guard.velocity  = -18
airguard.velocity = -6,-4
guard.hittime = 15
guard.slidetime = 15
airguard.ctrltime = 15
fall = 1
fall.recover = 1
fall.recovertime = 30
envshake.ampl =  -12
envshake.time = 18
guard.kill = 0

[state x, attack dist]
type = attackdist
trigger1 = 1
value = 595

[state 240, sprpriority]
type = sprPriority
trigger1 = animelem = 5
value = 2

[state 240, wall bounce]
type = targetstate
triggerall = var(7) > 0
trigger1 = movehit
trigger1 = hitpausetime = 13
ignorehitpause=1
value = 675

[State 245, 3]
type = veladd
trigger1 = AnimElem = 2
x = 28

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 245, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I

[State 245, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;---------------------------------------------------------------------------
;Crouching light punch
; CNS difficulty: easy
; Description: Simple crouching attack. The HitDef's guardflag parameter
;     is set to "L", meaning that the move can only be guarded low
;     (crouching), and not by standing or jumping opponents.
;     Like for all light attacks, it's a good idea to keep the slidetime
;     and hittime parameters at a smaller number, so the opponent isn't
;     stunned for too long. For all crouching attacks you have to
;     remember to set the attr parameter to indicate that it is crouching
;     attack. In this case, "C, NA" stands for "crouching, normal attack".
;     The HitDef's priority is set at 3, instead of the default of 4,
;     so this attack has a lower priority than most others, meaning
;     KFM will get hit instead of trading hits with his opponent if
;     their attack collision boxes (Clsn1) intersect each other's Clsn2
;     boxes at the same time.
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 8
ctrl = 0
anim = 400
sprpriority = 2

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = S200, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 25
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 10,10
sparkno = 0
sparkxy = -10,-155
hitsound   = S5000,0
guardsound = S120,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
air.velocity = -1.5,-4
guard.velocity = -8
guard.hittime = 13
guard.slidetime = 13
guard.dist = 420
fall.recovertime = 30
fall.recover = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 400, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching strong punch
; CNS difficulty: easy
; Description: This is a 2-hit move. It is done by having two HitDefs
;     triggered, one for each frame of animation that hits.
;     Notice how the first hit cannot be guarded by an opponent in the
;     air, because of the "M" in the guardflag, meaning it can only
;     be guarded "middle". The second hit has an "MA" guardflag, so
;     it can be guarded both on the ground and in the air.
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 25
ctrl = 0
anim = 410
sprpriority = 2

[State 410, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[state 410, varadd]
type = varadd
trigger1 = movehit
v = 11
value = -1


;This is the first hit, triggered on the 3rd element of animation.
[State 410, 2]
type = HitDef
trigger1 = time = 0
persistent = 0
attr = C, NA
damage    = 85
animtype  = Up
hitflag = MAF
guardflag = MA
pausetime = 18,18
sparkno = 3
sparkxy = -10,-120
hitsound   = 5,4
guardsound = S120,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 50
air.hittime = 50
ground.velocity = -1,ifelse(var(11)>0, -24,-4)
air.velocity = -1,ifelse(var(11)>0, -20,-2)
airguard.velocity = -6,0
guard.hittime = 8
guard.slidetime = 8
guard.velocity = -15
guard.dist = 410
fall.recover = 0
fall = ifelse(var(11)>0, 0,1)
fall.recovertime = 40
ground.cornerpush.veloff = -8
guard.cornerpush.veloff = -24

[state 410, super jump out]
type = changestate
triggerall = movehit
trigger1 = command = "holdup"
trigger2 = ailevel > 0
value = 42
ctrl = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 410, Not Active]
type = statetypeset
trigger1 = animelemtime(7) = 0
movetype = I

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light kick
; CNS difficulty: easy
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 11
ctrl = 0
anim = 430
sprpriority = 2

[State 430, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 430, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 35
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 12,12
sparkno = 0
sparkxy = -10,-60
hitsound   = S5000,1
guardsound = S120,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8
air.velocity = -2,-8
down.velocity = -5,0
down.hittime = 22
guard.velocity = -10
guard.hittime = 13
guard.slidetime = 13
airguard.velocity = -4,-4
guard.dist = 550
fall.recovertime = 20

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 430, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Strong Kick
; CNS difficulty: easy
; Description: This move uses "Trip" for the "ground.type" parameter in
;     its HitDef. It's a special type that puts the opponent in a tripped
;     animation as he falls. Also, the hitflag parameter in the HitDef
;     is set to "MAFD". The "D" indicates that a downed opponent can be
;     hit by the attack.
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 15
poweradd= 35
ctrl = 0
anim = 440
sprpriority = 2

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[state 440, vel frame 4]
type = velset
trigger1 = animelem = 4
x = 20

[state 210, width]
type = width
trigger1 = animelemtime(6) >= 0 && animelemtime(8) < 0
value = 200,0
ignorehitpause = 1

[State 440, 3]
type = HitDef
trigger1 = animelem = 4
attr = C, NA
damage    = ifelse(p2statetype = A, 10, 20)
hitflag = MA
guardflag = L
pausetime = 6,6
sparkno = 1
sparkxy = -5,-10
hitsound   = S5000,1
guardsound = S120,0
ground.type = low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -4
air.velocity = -4,-2
guard.velocity = -40
fall = 0
fall.recover = 0
guard.dist = 640
fall.recovertime = 40

[State 440, 3]
type = HitDef
trigger1 = animelem  = 6
attr = C, NA
damage    = ifelse(enemy,movetype = H,ifelse(enemy,statetype = L,40,60),80),8
hitflag = MAFD
guardflag = LA
pausetime = 12,12
sparkno = 2
nochainid = 1400
sparkxy = -5,-10
hitsound = S5000, 2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 28
ground.hittime  = 26
ground.velocity = -6,-10
air.velocity = -6,-10
guard.velocity = -5
fall = 1
fall.recover = 0
down.velocity = -50,0
guard.hittime = 19 ;-12 Bad Recovery: Sheer Range
guard.velocity = -32
guard.slidetime = 19
guard.kill = 0
guard.dist = 1280

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 440, Not Active]
type = statetypeset
trigger1 = animelemtime(7) = 0
movetype = I

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 5
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = S200, 0

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 17
guardflag = HA
priority = 3
pausetime = 7,8
sparkno = 0
sparkxy = -10,-58
hitsound   = S5000,0
guardsound = S120,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -8
air.velocity = -4,-8
air.hittime = 14
guard.hittime = 13
guard.velocity = -6
guard.slidetime = 13
airguard.hittime = 15
airguard.velocity = -2,-6
guard.dist = 400
fall.recovertime = 20

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 600, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[state 600, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Jump Strong Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
poweradd= 60
ctrl = 0
anim = 610
sprpriority = 2

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[state 610, ground bounce]
type = varadd
trigger1 = movehit = 1
v = 8
value = -1
ignorehitpause = 1

[state 610, jump combo infinite check]
type = varadd
trigger1 = movehit = 1
trigger1 = enemy,statetype != A
v = 29
value = 1
ignorehitpause = 1
persistent = 0

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 80
guardflag = HA
priority = 4
pausetime = 14,14
sparkno = 3
sparkxy = -10,-110
hitsound   = 5,4
guardsound = S120,0
animtype = back
ground.type = High
ground.slidetime = 24
ground.hittime  = floor(24/var(29))
ground.velocity = -10
air.velocity = -18,45
air.fall = 1
fall.recover = 0
guard.velocity = -22
airguard.velocity = -8, -8
guard.hittime = 17
airguard.hittime = 18
envshake.ampl = -6
envshake.time = 18
envshake.freq = 100
fall.recovertime = 40

[state 1100, target state]
type = targetstate
trigger1 = movehit
trigger1 = var(8) > 0
value = 680
ignorehitpause = 1
persistent = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 610, Not Active]
type = statetypeset
trigger1 = animelemtime(7) = 0
movetype = I

[state 610, end]
type = changestate
trigger1 = animtime = 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type    = A
movetype= A
physics = A
poweradd= 40
ctrl = 0
anim = 630
sprpriority = 2

[State 630, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 630, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 30
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 2
sparkxy = -5,-110
hitsound = S5000, 2
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -12
air.velocity = -4,-4
air.hittime = 22
guard.hittime = 13
guard.velocity = -14
guard.dist = 340
fall.recovertime = 20

;[state x, bounce]
;type = velset
;triggerall = enemy,statetype = A
;trigger1 = movehit
;y = -8
;persistent = 0
;ignorehitpause = 1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 630, Not Active]
type = statetypeset
trigger1 = animelemtime(4) = 0
movetype = I

[state 630, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1


;---------------------------------------------------------------------------
;Jump Strong Kick
; CNS difficulty: easy
[Statedef 640]
type    = A
movetype= A
physics = A
poweradd= 30
ctrl = 0
anim = 640
sprpriority = 2

[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[state 640, jump combo infinite check]
type = varadd
trigger1 = movehit = 1
trigger1 = enemy,statetype != A
v = 29
value = 1
ignorehitpause = 1
persistent = 0

[state 640, wall bounce check]
type = varadd
trigger1 = movehit
trigger1 = enemy,statetype = A
v = 7
value = -1
ignorehitpause = 1
persistent = 0

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 90,9
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = 3
sparkxy = -10,-110
hitsound   = 5,4
guardsound = S120,0
animtype = Med
ground.type = High
ground.slidetime = 24
ground.hittime  = floor(24/var(29))
ground.velocity = -14
air.velocity = -45,ifelse(var(7) > 1, -12, 8)
guard.velocity = -12
guard.hittime = 16
airguard.hittime = 16
airguard.velocity = -8,-8
air.fall = 1
fall.recover = 0
guard.dist = 520
fall.recovertime = 40

[state 1100, target]
type = targetstate
trigger1 = movehit =1
trigger1 = enemy,statetype = A
trigger1 = var(7) > 0
trigger1 = hitpausetime > 11
value = 675
ignorehitpause = 1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 640, Not Active]
type = statetypeset
trigger1 = animelemtime(5) = 0
movetype = I


[state 640, end]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Rode down
[statedef 655]
type = A
movetype = H
physics = N

[state 655, anim]
type = changeanim2
trigger1 = time = 0
value = 655

[State 655, 2]
type = changeState
trigger1 = !gethitvar(isbound)
value = 660




;===========================================================================
;---------------------------Crushed State-----------------------------------
;===========================================================================
; Moderate Crushed State
[statedef 660]
type    = L
movetype= H
physics = N
ctrl = 0
velset = 0,0

[state 660, 1]
type = changeanim
trigger1 = time = 0
value = 5080

[state 660, 1]
type = changeanim
trigger1 = time = 12
value = 5110

[State 660, flatten]
type = AngleDraw
trigger1 = time > 0
value = 0
scale = 1.2,0.4

[state 660, on ground]
type = posset
trigger1 = 1
y = 0

[state 660, passthrough]
type = playerpush
trigger1 = 1
value = 0
time = 600

[State 660, Width]
type = Width
trigger1 = time > 0
value = 0,0

[state 660, invunerable]
type = nothitby
trigger1 = 1
value = SCA


[State 660, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 660, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 660, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)


[State 660, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 660, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 660, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 660, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 660, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 660, 11] ;If just died
type = ChangeState
triggerall = !alive && p2stateno = 0 && roundstate = 3
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

;[State 660, 12]
;type = VarSet
;trigger1 = SysVar(0)
;trigger1 = Time = 0
;sysvar(0) = 0

[State 660, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 660, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 660, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[state 1108, nothitby]
type = nothitby
trigger1 = time > 90
value = SCA


[State 660, get up]
type = selfstate
trigger1 = alive
trigger1 = time > 90 ;95
value = 5120

[state 660, flat death]
type = changestate
trigger1 = !alive
trigger1 = time > 40
value = 5150

;---------------------------------------------------------------------------
;Brief Crushed State
[statedef 661]
type    = L
movetype= H
physics = N
ctrl = 0
velset = 0,0

[state 661, 1]
type = changeanim
trigger1 = time = 0
value = 5110

[State 661, flatten]
type = AngleDraw
trigger1 = time > 0
value = 0
scale = 1.25,0.2

[state 661, on ground]
type = posset
trigger1 = 1
y = 0

[state 661, passthrough]
type = playerpush
trigger1 = 1
value = 0
time = 600

[State 661, Width]
type = Width
trigger1 = time > 0
value = 0,0


[State 661, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 661, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 661, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)


[State 661, 5]
type = PosSet
trigger1 = Time = 0
y = 0

;[State 661, Var] ;Get fall velocity
;type = VarSet
;trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) != 0
;sysvar(1) = floor(vel y)

;[State 661, 6]
;type = PlaySnd
;trigger1 = Time = 0
;trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;persistent = 0

[State 661, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 661, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 661, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 661, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 661, 11] ;If just died
type = ChangeState
triggerall = !alive && p2stateno = 0 && roundstate = 3
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

;[State 661, 12]
;type = VarSet
;trigger1 = SysVar(0)
;trigger1 = Time = 0
;sysvar(0) = 0

[State 661, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 661, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 661, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 661, get up]
type = selfstate
triggerall = life >= 1
trigger1 = time > 60
value = 5120

[state 660, flat death]
type = changestate
trigger1 = !alive
trigger1 = time > 40
value = 5150

;---------------------------------------------------------------------------
;Super Crushed State
[statedef 662]
type    = L
movetype= H
physics = N
ctrl = 0
velset = 0,0

[state 661, 1]
type = changeanim
trigger1 = time = 0
value = 5080

[state 661, 1]
type = changeanim
trigger1 = time = 12
value = 5110

[State 661, flatten]
type = AngleDraw
trigger1 = 1
value = 0
scale = 1.2,0.2

[state 661, on ground]
type = posset
trigger1 = 1
y = 0

[state 661, passthrough]
type = playerpush
trigger1 = 1
value = 0
time = 600

[State 661, Width]
type = Width
trigger1 = time > 0
value = 0,0


[State 661, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 661, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 661, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)


[State 661, 5]
type = PosSet
trigger1 = Time = 0
y = 0

;[State 661, Var] ;Get fall velocity
;type = VarSet
;trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) != 0
;sysvar(1) = floor(vel y)

;[State 661, 6]
;type = PlaySnd
;trigger1 = Time = 0
;trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;persistent = 0

[State 661, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 661, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 661, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 661, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 661, 11] ;If just died
type = ChangeState
triggerall = !alive && p2stateno = 0 && roundstate = 3
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

;[State 661, 12]
;type = VarSet
;trigger1 = SysVar(0)
;trigger1 = Time = 0
;sysvar(0) = 0

[State 661, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 662, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 662, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[state 662, hitby]
type = hitby
trigger1 = time > 0
value = SCA, AA
ignorehitpause = 1

[State 662, get up]
type = selfstate
trigger1 = alive
trigger1 = time >  145
value = 5120

[state 660, flat death]
type = changestate
trigger1 = !alive
trigger1 = time > 40
value = 5150


;---------------------------------------------------------------------------
;Winning Crushed State
[statedef 665]
type    = L
movetype= H
physics = N
ctrl = 0
velset = 0,0

[state 665, 1]
type = changeanim
trigger1 = time = 0
value = 5110

[state 665, scream]
type = playsnd
trigger1 = 1
value = 11,0
persistent = 0


[State 665, flatten]
type = AngleDraw
trigger1 = time > 0  && time <25
value = 0
scale = 1.3,0.1

[state 665, on ground]
type = posset
trigger1 = 1
y = 0

[state 665, passthrough]
type = playerpush
trigger1 = 1
value = 0
time = 600

[State 665, Width]
type = Width
trigger1 = time > 0
value = 0,0

[State 665, 5]
type = PosSet
trigger1 = Time = 0
y = 0

;[State 661, Var] ;Get fall velocity
;type = VarSet
;trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) != 0
;sysvar(1) = floor(vel y)

;[State 665, 6]
;type = PlaySnd
;trigger1 = Time = 0
;trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;persistent = 0

[State 665, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 665, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 665, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 665, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 665, 11] ;If just died
type = ChangeState
triggerall = !alive && p2stateno = 0 && roundstate = 3
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

;[State 661, 12]
;type = VarSet
;trigger1 = SysVar(0)
;trigger1 = Time = 0
;sysvar(0) = 0

[State 665, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 665, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 665, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[state 665, hitby]
type = hitby
trigger1 = time > 0
value = SCA, AA
ignorehitpause = 1

[State 665, get up]
type = selfstate
triggerall = life >= 1
trigger1 = time > 600
value = 5120

[state 660, flat death]
type = changestate
trigger1 = !alive
trigger1 = time > 40
value = 5150

;---------------------------------------------------------------------------
;===========================================================================
;------------------------------Wall Bounce State
;===========================================================================
[statedef 670]
type = A
movetype = H
physics = N

[State 672, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 670]
type = changeanim
trigger1 = time = 0
value = 5030
ignorehitpause = 1

[state 670, changestate]
type = changestate
trigger1 = hitshakeover
value = 671
;------------------------------------------------------------------------

[statedef 671]
type    = A
movetype= H
physics = N

[state 671, anim]
type = changeanim
trigger1 = anim != 5030
value = 5030

[State 670, Velocity]
type = velset
trigger1 = Time = 0
x = facing * gethitvar(xvel)
y = gethitvar(yvel)

[State 670, Gravity]
type = veladd
trigger1 = 1
y = 1.05

;[State 670, No scroll]
;type = ScreenBound
;triggerall = Pos y < -15
;trigger1 = BackEdgeBodyDist < 65
;trigger2 = FrontEdgeBodyDist < 65
;value = 1
;movecamera = 0,1

[State 670, Hit wall]
type = ChangeState
triggerall = Pos y < 0
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 672

[State 670, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Hit wall - part 2 bounce off wall
[statedef 672]
type    = A
movetype= H
physics = N

[State 672, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 672, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 672, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 672, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 672, Spark]
type = Explod
trigger1 = Time = 1
anim = F72
pos = 0,const(size.mid.pos.y)
postype = back
sprpriority = 3
ownpal = 1

[state 672, anim]
type = changeanim
trigger1 = anim != 5030
value = 5030

[State 672, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,0

[State 672, State]
type = ChangeState
trigger1 = time = 10
value = 673
;--------------------------------------------------------------------------
;wall bounce - part 3 fall toward ground
[Statedef 673]
type    = A
movetype= H
physics = N

[State 673, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -14

[State 673, Vel X]
type = VelSet
trigger1 = Time = 0
x = ceil(p2dist x*0.02)

[State 673, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

;[State 672, Gravity]
;type = VelAdd
;trigger1 = 1
;y = .35

[state 673, gravity]
type = gravity
trigger1 = 1

[State 673, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 673, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 673, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 673, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 673, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100


;------------------------------------------------------------
;Wall Splat version
[statedef 675]
type = A
movetype = H
physics = N

[State 675, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 675]
type = changeanim
trigger1 = time = 0
value = 5030
ignorehitpause = 1

[state 675, changestate]
type = changestate
trigger1 = hitshakeover
value = 676
;------------------------------------------------------------------------

[statedef 676]
type    = A
movetype= H
physics = N

[state 676, anim]
type = changeanim
trigger1 = anim != 5030
value = 5030

[State 676, Velocity]
type = velset
trigger1 = Time = 0
x = facing * gethitvar(xvel)
y = gethitvar(yvel)

[State 676, Gravity]
type = veladd
trigger1 = 1
y = 1.05

;[State 670, No scroll]
;type = ScreenBound
;triggerall = Pos y < -15
;trigger1 = BackEdgeBodyDist < 65
;trigger2 = FrontEdgeBodyDist < 65
;value = 1
;movecamera = 0,1

[State 676, Hit wall]
type = ChangeState
triggerall = Pos y < 0
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 677

[State 676, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Hit wall - part 2 bounce off wall
[statedef 677]
type    = A
movetype= H
physics = N

[State 677, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 677, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 677, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 677, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 677, Spark]
type = Explod
trigger1 = Time = 1
anim = F72
pos = 0,const(size.mid.pos.y)
postype = back
sprpriority = 3
ownpal = 1

[state 677, anim]
type = changeanim
trigger1 = anim != 5030
value = 5030

[State 677, Sound]
type = PlaySnd
trigger1 = Time = 1
value = F7,0

[State 677, State]
type = ChangeState
trigger1 = time = 10
value = 678
;--------------------------------------------------------------------------
;wall bounce - part 3 fall toward ground
[Statedef 678]
type    = A
movetype= H
physics = N

[State 678, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -14

[State 678, Vel X]
type = VelSet
trigger1 = Time = 0
x = 2

[State 678, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 678, Gravity]
type = VelAdd
trigger1 = 1
y = 1.05

;[state 678, gravity]
;type = gravity
;trigger1 = 1

[State 678, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 678, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 678, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 678, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 678, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100





;---------------------------------------------------------------------------
;Hard Ground bounce - Freeze
[statedef 680]
type = A
movetype = H
physics = N

[State 680, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 680]
type = changeanim
trigger1 = time = 0
value = 5160
ignorehitpause = 1

[state 680, changestate]
type = changestate
trigger1 = hitshakeover
value = 681

;---------------------------------------------------------------------------
;Going Down
[statedef 681]
;Custom Hit state, ground bounce
type = A
movetype = H
physics = N


[state 680, anim]
type = changeanim
trigger1 = time = 0
value = 5160

[state 680, velocity]
type = hitvelset
trigger1 = time = 0
y = 60


[state 680, stop x]
type = velmul
trigger1 = time = 0
x = 0


[state 680]
type = gravity
trigger1 = 1

[state 680, changestate]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 682
;-----------------------------------------------------------------------------
;Hard Ground Bounce - Impact/bounce
[statedef 682]
type = A
movetype = H
physics = N
anim = 5160

[state 681, impact]
type = velset
trigger1 = time = 0
y = 0

[State 681, 8]
type = Explod
trigger1 = Time = 0
anim = F62 
pos = 0, 0
ontop = 1
scale = 2, 1
persistent = 0
ownpal = 1

[State 681, 10]
type = PlaySnd
trigger1 = Time = 0
value = F7,2
persistent = 0

[state 681, shake]
type = envshake
trigger1 = time = 0
ampl = 5
freq = 50
phase = 50
time = 10

[state 681, impact 2]
type = posset
trigger1 = time = 0
y = 0

[state 681, bounce]
type = velset
trigger1 = time = 1
y = -20

[state 681, gravity]
type = gravity
trigger1 = time > 1

[state 681, down]
type = selfstate
trigger1 = time >= 2 
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 5100



;---------------------------------------------------------------------------
;Thigh Clap
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = -2

[State 800, 1]
type = HitDef
triggerall = p2movetype != A
Trigger1 = Time = 0
attr = S, NT          
hitflag = M-   
id = 800       
priority = 1, Miss   
sparkno = -1       
p1sprpriority = -2     
p2sprpriority = 1                   
p1facing = 1
p2facing = 1          
p1stateno = 810      
p2stateno = 820       
guard.dist = 0        
fall = 1

[State 800, 1]
type = HitDef
triggerall = p2movetype = A
Trigger1 = Time = 0
attr = S, NT          
hitflag = M-   
id = 800       
priority = 1, Miss   
sparkno = -1       
p1sprpriority = -2     
p2sprpriority = 1                   
p1facing = 1
p2facing = 1          
p1stateno = 810      
p2stateno = 822       
guard.dist = 0        
fall = 1            

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Grab Escape - p2
[statedef 805]
type = A
movetype = H
physics = S
ctrl = 0
facep2 = 1
sprpriority = 4

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = SelfAnimExist(805)
value = 805

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = !selfanimexist(805)
value = 120

;[state 1400, dim]
;type = bgpalfx
;trigger1 = time = 0
;time = 8
;mul = 200,200,200

;[state 805, freeze]
;type = pause
;trigger1 = time = 0
;time = 8
;endcmdbuftime = 8

;[state 805, sound]
;type = playsnd
;trigger1 = time = 0
;value = S805,0

[state 805, pos y]
type = posset
trigger1 = time = 0
y = 0

[state 805, velset]
type = velset
trigger1 = time = 10
x= -24

[state 805, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 805, end]
type = selfstate
trigger1 = time = 35
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Grab Escape - p1
[statedef 806]
type = A
movetype = H
physics = S
ctrl = 0

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = SelfAnimExist(130)
value = 130

[state 805, anim]
type = changeanim
trigger1 = time = 0
trigger1 = !selfanimexist(805)
value = 130

[state 1400, dim]
type = bgpalfx
trigger1 = time = 0
time = 8
mul = 200,200,200

[state 805, freeze]
type = pause
trigger1 = time = 0
time = 12
endcmdbuftime = 8

[state 805, sound]
type = playsnd
trigger1 = time = 0
value = S805,0

[state 805, pos y]
type = posset
trigger1 = time = 0
y = 0

[state 805, turn]
type = turn
trigger1 = prevstateno = 820
trigger1 = time = 0
persistent = 0
ignorehitpause

[state 805, velset]
type = velset
trigger1 = time = 10
x= -24

[state 805, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 805, end]
type = selfstate
trigger1 = time = 35
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;Thunder Thigh Clap
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 0
sprpriority = -2

[state 810, tech]
type = changestate
trigger1 = enemynear,stateno = 805
value = 806
persistent = 1

[state 810, width]
type = width
trigger1 = 1
edge = 240,240
ignorehitpause = 1

[State 810, Holding Direction?]
type = VarSet
trigger1 = Time = 0
var(28) = command = "holdfwd"

[state 810, explod]
type = explod
trigger1 = time = 0
anim = 811
id = 810
scale = const(size.xscale),const(size.yscale)
removetime = -2
bindtime = -1
sprpriority = 2

[state 810, explod]
type = explod
trigger1 = animelem = 4
anim = 812
id = 810
scale = const(size.xscale),const(size.yscale)
removetime = -2
facing = ifelse(var(28),-1,1)
bindtime = -1
sprpriority = 2

[State 810, Grab Sound]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 1


[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 250, -200


[State 810, holdfwd - Turn 2] 
type = Turn
trigger1 = var(28)
trigger1 = AnimElem = 4

[State 810, holdfwd - Turn Target 2] 
type = TargetFacing
trigger1 = var(28)
trigger1 = AnimElem = 4
value = -1

[State 810, Bind 2]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 180, -140

[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
pos = 40, -140

[State 810, Bind 4]
type = TargetBind
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
pos = 42, -144

[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 24
pos = 45, -148

[state 810, quake]
type = envshake
trigger1 = animelem = 6
ampl = -4
time = 22
freq = 80

[state 810, snd]
type = playsnd
trigger1 = animelem = 6
value = S810,0

[state 810, snd]
type = playsnd
trigger1 = animelem = 6
value = S810,0

[state 810, explod]
type = explod
trigger1 = animelem = 6
anim = F61
pos = 30,0
scale = const(size.xscale)*1.5,const(size.yscale)*1.5
ownpal = 1
sprpriority = -3
persistent = 0

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 6
value = -120
persistent = 0

[state 810, pos add]
type = posadd
trigger1 = animelemtime(6) = 24
x = 30

[State 810, Throw 11]
type = TargetState
trigger1 = animelemtime(6) = 24
value = 821

[state x, combo dampener]
type = varadd
trigger1 = animtime = 0
v = 18
value = -18
persistent = 0
ignorehitpause =1 

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; TEchable Throw
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[state 820, tech throw]
type = changestate
triggerall = time < 12
trigger1 = ailevel = 0
trigger1 = command = "holdfwd" || command = "holdback"
trigger1 = command = "y" || command = "b" || command = "z" || command = "c"
trigger2 = command = "x" && command = "a"
trigger3 = ailevel > 4 
trigger3 = random < (ailevel * ifelse(ailevel>7,1,3))
value = 805

[state 820, changestate]
type = changestate
trigger1 = time = 63
value = 821

;In case attacker loses binding on player for any reason, this controller
;guarantees that the player will never get stuck in this thrown state.
[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
; Untechable Throw
[Statedef 822]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[state 820, changestate]
type = changestate
trigger1 = time = 63
value = 821

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
;Thrown by Kung Fu Throw - thrown into the air
; (a custom gethit state)
; Description: This state has the opponent flying through the air and
;     falling down onto the ground. The SelfState controller sets the
;     opponent back using to his own state file when he his the ground.
;     Controllers 821,2 and 821,3 allow the opponent to recover by
;     hitting his recovery command when he is falling.
[Statedef 821]
type    = A
movetype= H
physics = N
velset = 12,-4
poweradd = 40
sprpriority = -3

[State 821, 1] ;Gravity
type = gravity
Trigger1 = 1

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;---------------------------------------------------------------------------
;Scissor Grab Light
[statedef 1000]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2
poweradd = 125

[state 1000, down grab check]
type = varset
trigger1 = enemynear,statetype = L
trigger1 = time = 0
v = 25
value = 1

[state 1000, playerpush]
type = playerpush
trigger1 = animelem = 3
value = 0
ignorehitpause = 1

[state 1000, anim]
type = changeanim
trigger1 = time = 0
value = 1000

[State 1000, hitdef]
type = HitDef
trigger1 = pos y > -35
trigger1 = vel y > 0
persistent = 0
attr = A, ST
animtype  = Medium
damage    = 0
guardflag = 
hitflag = M-
id = 1000
pausetime = 0,0
priority = 1, miss 
p1sprpriority = 2
p2sprpriority = 1
hitonce = 1
p1stateno = 1002
p2stateno = 1030
pausetime = 10,10
sparkno = -1
sparkxy = -10,-37
hitsound   = S5000,1
guardsound = S120,0
ground.type = Low
guard.dist = 0

[state 1000, explod]
type = explod
trigger1 = time = 0
anim = 1001
sprpriority = -3
bindtime = -1
id = 1001
ignorehitpause = 0
removeongethit = 1
scale =  Const(size.xscale),Const(size.yscale)

[state 1000, playerpush]
type = playerpush
trigger1 = movehit
trigger1 = time < 30
value = 0
ignorehitpause = 1

[state 1000, bounce]
type = velmul
trigger1 = moveguarded
x = -0.25
y = ifelse(vel y > 0, -2, 2)
persistent = 0


[state 1000, nothitby]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause 

[state 1000, vel]
type = velset
trigger1 = animelemtime(3) = 0
x = 15
y = -8
persistent = 0

[state 1000, gravity]
type = gravity
trigger1 = pos y < -1


[state 1000, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1004
;---------------------------------------------------------------------------
;Hit 
[statedef 1002]
type = A
movetype = A
physics = N

[state 1002, velset]
type = velset
trigger1 = time = 0
y = -4

[state 1002, velmul]
type = velmul
trigger1 = time = 0
x = 0.5

[state 10x2, nothitby]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause

[state 1002, anim]
type = changeanim
trigger1 = time = 0
value = 1002

[state 1002, targetbind]
type = targetbind
trigger1 = 1
pos = 140, -90
id = 1000
persistent = 1

[state 1002, explod]
type = explod
trigger1 = time = 0
anim = 1007
sprpriority = -3
bindtime = -1
id = 1007
ignorehitpause = 0
scale =  Const(size.xscale),Const(size.yscale)

[state 1002, width]
type = width
trigger1 = 1
edge =120,100

[state 1002, gravity]
type = gravity
trigger1 = pos y < -1

[state 1002, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1005

;---------------------------------------------------------------------------
;Miss
[statedef 1004]
type = C
movetype = I
physics = N

[state X, Ground Shockwave]
type = explod
trigger1 = time = 0
anim = F61
pos = 40,0
sprpriority = -4
scale = 1.5,1.25
ownpal = 1

[state 1005, sprpriority]
type = sprpriority
trigger1 = time = 0
value = -2

[state 1005, width]
type = width
trigger1 = 1
edge = 200,100

[state 1005, anim]
type = changeanim
trigger1 = time  = 0
value = 1004

[state 1005, quake]
type = envshake
trigger1 = time = 0
ampl = -8
time = 15
freq = 80

[state 1005, snd]
type = playsnd
trigger1 = time = 0
value = S52,1

[state 1000, explod]
type = explod
trigger1 = time = 0
anim = 1008
sprpriority = -3
bindtime = -1
id = 1008
ignorehitpause = 0
removetime = -2
removeongethit = 1
scale =  Const(size.xscale),Const(size.yscale)

[state 1005, velset]
type = velset
trigger1 = time = 0
y = 0

[state 1005, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1005, velmul]
type = velmul
trigger1 = time = 0
x = 0.25

[state 1005, velmul]
type = velmul
trigger1 = time = 16
x = 0

[state 1005, end]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Hit Landing
[statedef 1005]
type = C
movetype = A
physics = N
movehitpersist = 1

[state X, Ground Shockwave]
type = explod
trigger1 = time = 0
anim = F61
pos = 40,0
sprpriority = -4
scale = 1.5,1.25
ownpal = 1

[state 1005, width]
type = width
trigger1 = 1
edge = 200,100

[state 10x5, nothitby]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause

[State 1005, Hurt 11]
type = TargetLifeAdd
trigger1 = time >= 24  && time < 54
value = floor(-15*fvar(10))
persistent = 6
kill = 0

[State 1005, Hurt 11]
type = TargetLifeAdd
trigger1 = time = 64
value = floor(-75*fvar(10))

[state 1005, poweradd]
type = poweradd
trigger1 = time = 64
value = 150

[state 1005, poweradd]
type = targetpoweradd
trigger1 = time = 64
value = 200

[state 1015, snd]
type = playsnd
trigger1 = time >= 25  && time < 54
value = 1000,(random%2+0)
persistent = 12

[state 1015, snd]
type = playsnd
trigger1 = time = 64
value = 1000,3
persistent = 0


[state 1005, nothitby]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause 

[state 1005, targetstate]
type = targetstate
trigger1 = time = 0
value = 1031
id = 1000

[state 1005, targetbind]
type = targetbind
trigger1 = time < 25
pos = 140, -80
id = 1000
persistent = 1


[state 1005, anim]
type = changeanim
trigger1 = time  = 0
value = 1005

[state 1005, quake]
type = envshake
trigger1 = time = 0
ampl = -8
time = 15
freq = 80

[state 1005, snd]
type = playsnd
trigger1 = time = 0
value = S52,1

[state 1000, explod]
type = explod
trigger1 = time = 0
anim = 1006
sprpriority = -3
bindtime = -1
id = 1006
ignorehitpause = 0
removetime = -1
scale =  Const(size.xscale),Const(size.yscale)

[state 1005, velset]
type = velset
trigger1 = time = 0
y = 0

[state 1005, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1005, velmul]
type = velmul
trigger1 = time = 0
x = 0.25

[state 1005, velmul]
type = velmul
trigger1 = time = 16
x = 0

[state 1005, end]
type = changestate
trigger1 = time = 84
value = 1008


;---------------------------------------------------------------------------
[statedef 1008]
type = A
movetype = I
physics = N
anim = 41

[state 1008, gravity]
type = gravity
trigger1 = time > 1

[state 1018, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1008, jump back]
type = velset
trigger1 = time = 0
y = -8
x = -4.5

[state 1008, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52
ctrl = 1

;---------------------------------------------------------------------------
;Scissor Bomb Hard
[statedef 1010]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2
poweradd = 140

[state 1000, anim]
type = changeanim
trigger1 = time = 0
value = 1010

[state 1000, playerpush]
type = playerpush
trigger1 = animelem = 3
value = 0
ignorehitpause = 1

[state 1000, down grab check]
type = varset
trigger1 = enemynear,statetype = L
trigger1 = time = 0
v = 25
value = 1

[State 1010, hitdef]
type = HitDef
trigger1 = pos y > -35
trigger1 = vel y > 0
persistent = 0
attr = A, ST
animtype  = Medium
damage    = 0,16
guardflag = 
hitflag = M-
id = 1000
pausetime = 0,0
priority = 1, miss 
p1sprpriority = 2
p2sprpriority = 1
hitonce = 1
p1stateno = 1012
p2stateno = 1030
pausetime = 10,10
sparkno = -1
sparkxy = -10,-37
hitsound   = S5000,1
ground.type = Low
guard.dist = 0

[state 1010, explod]
type = explod
trigger1 = time = 0
anim = 1011
sprpriority = -3
bindtime = -1
id = 1011
ignorehitpause = 0
removeongethit = 1
scale =  Const(size.xscale),Const(size.yscale)

[state 1010, playerpush]
type = playerpush
trigger1 = movehit
trigger1 = time < 30
value = 0
ignorehitpause = 1

[state 1010, bounce]
type = velmul
trigger1 = moveguarded
x = -0.25
y = ifelse(vel y > 0, -2, 2)
persistent = 0


[state 1010, nothitby]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause 

[state 1010, vel]
type = velset
trigger1 = animelemtime(3) = 0
x = 24
y = -8
persistent = 0

[state 1010, gravity]
type = gravity
trigger1 = pos y < -1

[state 1010, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1014
;---------------------------------------------------------------------------
;Hit 
[statedef 1012]
type = A
movetype = A
physics = N

[state 1012, velset]
type = velset
trigger1 = time = 0
y = -6

[state 1002, velmul]
type = velmul
trigger1 = time = 0
x = 0.5

[state 1012, anim]
type = changeanim
trigger1 = time = 0
value = 1002

[state 10x2, nothitby]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause

[state 1012, targetbind]
type = targetbind
trigger1 = 1
pos = 140, -90
id = 1000
persistent = 1

[state 1012, explod]
type = explod
trigger1 = time = 0
anim = 1017
sprpriority = -3
bindtime = -1
id = 1017
ignorehitpause = 0
scale =  Const(size.xscale),Const(size.yscale)

[state 1012, width]
type = width
trigger1 = 1
edge =120,100

[state 1012, gravity]
type = gravity
trigger1 = pos y < -1

[state 1012, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1015

;---------------------------------------------------------------------------
;Miss
[statedef 1014]
type = C
movetype = I
physics = N

[state X, Ground Shockwave]
type = explod
trigger1 = time = 0
anim = F61
pos = 40,0
sprpriority = -4
scale = 1.5,1.25
ownpal = 1

[state 1014, sprpriority]
type = sprpriority
trigger1 = time = 0
value = -2

[state 1014, width]
type = width
trigger1 = 1
edge = 200,100

[state 1014, anim]
type = changeanim
trigger1 = time  = 0
value = 1014

[state 1014, quake]
type = envshake
trigger1 = time = 0
ampl = -8
time = 15
freq = 80

[state 1014, snd]
type = playsnd
trigger1 = time = 0
value = S52,1

[state 1014, explod]
type = explod
trigger1 = time = 0
anim = 1018
sprpriority = -3
bindtime = -1
id = 1018
ignorehitpause = 0
removetime = -2
removeongethit = 1
scale =  Const(size.xscale),Const(size.yscale)

[state 1014, velset]
type = velset
trigger1 = time = 0
y = 0

[state 1014, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1014, velmul]
type = velmul
trigger1 = time = 0
x = 0.25

[state 1014, velmul]
type = velmul
trigger1 = time = 16
x = 0

[state 1014, end]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Hit Landing
[statedef 1015]
type = C
movetype = A
physics = N
movehitpersist = 1

[state X, Ground Shockwave]
type = explod
trigger1 = time = 0
anim = F61
pos = 40,0
sprpriority = -4
scale = 1.5,1.25
ownpal = 1

[state 1015, width]
type = width
trigger1 = 1
edge = 200,100

[state 10x5, nothitby]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause

[State 1015, Hurt 11]
type = TargetLifeAdd
trigger1 = time >= 24  && time < 54
value = floor(-15*fvar(10))
persistent = 6
kill = 0

[State 1015, Hurt 11]
type = TargetLifeAdd
trigger1 = time = 64
value = floor(-105*fvar(10))

[state 1015, snd]
type = playsnd
trigger1 = time >= 25  && time < 54
value = 1000,(random%2+0)
persistent = 12

[state 1015, poweradd]
type = poweradd
trigger1 = time = 64
value = 150

[state 1015, poweradd]
type = targetpoweradd
trigger1 = time = 64
value = 250

[state 1015, snd]
type = playsnd
trigger1 = time = 64
value = 1000,3
persistent = 0


[state 1015, nothitby]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause 

[state 1015, targetstate]
type = targetstate
trigger1 = time = 0
value = 1031
id = 1000

[state 1015, targetbind]
type = targetbind
trigger1 = time < 25
pos = 140, -80
id = 1000
persistent = 1


[state 1015, anim]
type = changeanim
trigger1 = time  = 0
value = 1015

[state 1015, quake]
type = envshake
trigger1 = time = 0
ampl = -8
time = 15
freq = 80

[state 1015, snd]
type = playsnd
trigger1 = time = 0
value = S52,1

[state 1015, explod]
type = explod
trigger1 = time = 0
anim = 1016
sprpriority = -3
bindtime = -1
id = 1016
ignorehitpause = 0
removetime = -1
scale =  Const(size.xscale),Const(size.yscale)

[state 1015, velset]
type = velset
trigger1 = time = 0
y = 0

[state 1015, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1015, velmul]
type = velmul
trigger1 = time = 0
x = 0.25

[state 1015, velmul]
type = velmul
trigger1 = time = 16
x = 0

[state 1015, end]
type = changestate
trigger1 = time = 84
value = 1018



;---------------------------------------------------------------------------
[statedef 1018]
type = A
movetype = I
physics = N
anim = 41

[state 1018, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1018, gravity]
type = gravity
trigger1 = time > 1

[state 1018, jump back]
type = velset
trigger1 = time = 0
y = -8
x = -4.5

[state 1018, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52
ctrl = 1

;---------------------------------------------------------------------------
;Scissor Bomb EX
[statedef 1020]
type = A
movetype = A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[state 1000, playerpush]
type = playerpush
trigger1 = animelem = 3
value = 0
ignorehitpause = 1

[State 1020, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1000, down grab check]
type = varset
trigger1 = enemynear,statetype = L
trigger1 = time = 0
v = 25
value = 1

[state 1020, nothitby]
type = nothitby
trigger1 = 1
value = ,AP

[state 1020, poweradd]
type = poweradd
trigger1 = time = 3
value = -500

[state 1020, anim]
type = changeanim
trigger1 = time = 0
value = 1020

[State 1020, hitdef]
type = HitDef
trigger1 = pos y > -35
trigger1 = vel y > 0
persistent = 0
attr = A, ST
animtype  = Medium
damage    = 0
guardflag = 
getpower = 0
hitflag = M-
id = 1000
pausetime = 0,0
priority = 1, miss 
p1sprpriority = 2
p2sprpriority = 1
hitonce = 1
p1stateno = 1022
p2stateno = 1030
pausetime = 10,10
sparkno = -1
sparkxy = -10,-37
hitsound   = S5000,1
ground.type = Low
guard.dist = 0

[state 1020, explod]
type = explod
trigger1 = time = 0
anim = 1021
sprpriority = -3
bindtime = -1
id = 1021
ignorehitpause = 0
removeongethit = 1
scale =  Const(size.xscale),Const(size.yscale)

[state 1020, playerpush]
type = playerpush
trigger1 = movehit
trigger1 = time < 30
value = 0
ignorehitpause = 1

[state 1020, bounce]
type = velmul
trigger1 = moveguarded
x = -0.25


[state 1020, nothitby]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause 

[state 1020, vel]
type = velset
trigger1 = animelem = 3
x = 30
y = -8
persistent = 0

[state 1020, gravity]
type = gravity
trigger1 = pos y < -1

[state 1020, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1024
;---------------------------------------------------------------------------
;Hit 
[statedef 1022]
type = A
movetype = A
physics = N

[state 1022, velset]
type = velset
trigger1 = time = 0
y = -8

[state 1022, velmul]
type = velmul
trigger1 = time = 0
x = 0.5

[state 10x2, nothitby]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause

[state 1022, anim]
type = changeanim
trigger1 = time = 0
value = 1002

[state 1022, targetbind]
type = targetbind
trigger1 = 1
pos = 140, -90
id = 1000
persistent = 1

[state 1022, explod]
type = explod
trigger1 = time = 0
anim = 1027
sprpriority = -3
bindtime = -1
id = 1027
ignorehitpause = 0
scale =  Const(size.xscale),Const(size.yscale)

[state 1022, width]
type = width
trigger1 = 1
edge =120,100

[state 1022, gravity]
type = gravity
trigger1 = pos y < -1

[state 1022, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1025

;---------------------------------------------------------------------------
;Miss
[statedef 1024]
type = C
movetype = I
physics = N

[state X, Ground Shockwave]
type = explod
trigger1 = time = 0
anim = F61
pos = 40,0
sprpriority = -4
scale = 1.5,1.25
ownpal = 1

[state 1024, sprpriority]
type = sprpriority
trigger1 = time = 0
value = -2

[state 1024, width]
type = width
trigger1 = 1
edge = 200,100

[state 1024, anim]
type = changeanim
trigger1 = time  = 0
value = 1024

[state 1024, quake]
type = envshake
trigger1 = time = 0
ampl = -8
time = 15
freq = 80

[state 1024, snd]
type = playsnd
trigger1 = time = 0
value = S52,1

[state 1024, explod]
type = explod
trigger1 = time = 0
anim = 1018
sprpriority = -3
bindtime = -1
id = 1018
ignorehitpause = 0
removetime = -2
removeongethit = 1
scale =  Const(size.xscale),Const(size.yscale)

[state 1024, velset]
type = velset
trigger1 = time = 0
y = 0

[state 1024, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1024, velmul]
type = velmul
trigger1 = time = 0
x = 0.25

[state 1024, velmul]
type = velmul
trigger1 = time = 16
x = 0

[state 1024, end]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Hit Landing
[statedef 1025]
type = C
movetype = A
physics = N
movehitpersist = 1

[state X, Ground Shockwave]
type = explod
trigger1 = time = 0
anim = F61
pos = 40,0
sprpriority = -4
scale = 1.5,1.25
ownpal = 1

[state 1025, width]
type = width
trigger1 = 1
edge = 200,100

[state 10x5, nothitby]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause

[State 1025, Hurt 11]
type = TargetLifeAdd
trigger1 = time >= 24  && time < 54
value = floor(-15*fvar(10))
persistent = 6
kill = 0

[State 1025, Hurt 11]
type = TargetLifeAdd
trigger1 = time = 64
value = floor(-75*fvar(10))

[state 1015, poweradd]
type = targetpoweradd
trigger1 = time = 54
value = 225

[state 1025, snd]
type = playsnd
trigger1 = time >= 25  && time < 54
value = 1000,(random%2+0)
persistent = 12

[state 1025, snd]
type = playsnd
trigger1 = time = 64
value = 1000,3
persistent = 0


[state 1025, nothitby]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause 

[state 1025, targetstate]
type = targetstate
trigger1 = time = 0
value = 1031
id = 1000

[state 1025, targetbind]
type = targetbind
trigger1 = time < 25
pos = 140, -80
id = 1000
persistent = 1


[state 1025, anim]
type = changeanim
trigger1 = time  = 0
value = 1025

[state 1025, quake]
type = envshake
trigger1 = time = 0
ampl = -8
time = 15
freq = 80

[state 1025, snd]
type = playsnd
trigger1 = time = 0
value = S52,1

[state 1025, explod]
type = explod
trigger1 = time = 0
anim = 1026
sprpriority = -3
bindtime = -1
id = 1026
ignorehitpause = 0
removetime = -1
scale =  Const(size.xscale),Const(size.yscale)

[state 1025, velset]
type = velset
trigger1 = time = 0
y = 0

[state 1025, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1025, velmul]
type = velmul
trigger1 = time = 0
x = 0.25

[state 1025, velmul]
type = velmul
trigger1 = time = 16
x = 0

[state 1025, end]
type = changestate
trigger1 = time = 84
value = 1028


;---------------------------------------------------------------------------
[statedef 1028]
type = A
movetype = I
physics = N
anim = 41

[state 1018, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1028, gravity]
type = gravity
trigger1 = time > 1

[state 1028, jump back]
type = velset
trigger1 = time = 0
y = -8
x = -2

[state 1028, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52
ctrl = 1

;---------------------------------------------------------------------------



; Victim Scissor Bomb
[statedef 1030]
type = A
movetype = H
physics = N

[state 1030, anim]
type = changeanim2
trigger1 = time = 0
value = 1030

[state 1030, Failsafe escape 3 sec]
type = selfstate
trigger1 = time > 180
value = 5050


;---------------------------------------------------------------------------
; Victim Scissor Bomb
[statedef 1031]
type = A
movetype = H
physics = N

[state 1030, anim]
type = changeanim2
trigger1 = time = 0
value = 1031

[state 1030, launch away]
type = velset
trigger1 = time = 85
x = -2
y = -14

[state 1030, changeanim]
type = changeanim
trigger1 = time = 85
value = 5030

[state 1030, gravity]
type = gravity
trigger1 = time > 85

[state 1030, land]
type = selfstate
trigger1 = vel y < 0
trigger1 = pos y < -vel y 
value = 5100

[state 1030, Failsafe escape 2 sec]
type = selfstate
trigger1 = time > 120
value = 5050

;---------------------------------------------------------------------------
; Victim Scissor Bomb
[statedef 1032]
type = A
movetype = H
physics = N

[state 1030, anim]
type = changeanim2
trigger1 = time = 0
value = 1032

[state 1030, launch away]
type = velset
trigger1 = time = 91
x = -6
y = -14

[state 1030, changeanim]
type = changeanim
trigger1 = time = 91
value = 5030

[state 1030, gravity]
type = gravity
trigger1 = time > 91

[state 1030, land]
type = selfstate
trigger1 = vel y < 0
trigger1 = pos y < -vel y 
value = 5100

[state 1030, Failsafe escape 2 sec]
type = selfstate
trigger1 = time > 120
value = 5050

;---------------------------------------------------------------------------
; Victim Scissor Bomb EX
[statedef 1033]
type = A
movetype = H
physics = N

[state 1030, anim]
type = changeanim2
trigger1 = time = 0
value = 1033

[state 1030, launch away]
type = velset
trigger1 = time = 111
x = -4
y = -14

[state 1030, changeanim]
type = changeanim
trigger1 = time = 111
value = 5030

[state 1030, gravity]
type = gravity
trigger1 = time > 111

[state 1030, land]
type = selfstate
trigger1 = vel y < 0
trigger1 = pos y < -vel y 
value = 5100

[state 1030, Failsafe escape 2 sec]
type = selfstate
trigger1 = time > 120
value = 5050

;===========================================================================
; Rising Knee
;===========================================================================
;Light
[statedef 1050]
type = A
movetype = A
physics = N
poweradd = 70
velset = 0,0
ctrl = 0

[state 1050, play sound]
type = playsnd
trigger1 = animelemtime(3) = 0
value = S1050,0

[state 1050, anim]
type = changeanim
trigger1 = time = 0
value = 1050

[state 1050, nothitby]
type = nothitby
trigger1 = animelemtime(4) < 0
trigger1 = !movehit
value = A

[state 1050, nothitby]
type = nothitby
trigger1 = MOVEHIT
value = SCA
ignorehitpause = 1 


[State 1050, 2]
type = HitDef
trigger1 = vel y < 0
persistent = 0
attr = A, SA
animtype  = heavy
damage    = 100,ifelse(enemy,statetype = A,30,10)
getpower = 45
guardflag = MA
hitflag = MAF
pausetime = 16,16
priority = 6,hit
sparkno = 3
sparkxy = -20,-260
hitsound = S5000, 2
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -6,-20
air.velocity = -6,-18
air.hittime = 60
guard.hittime = 20
guard.slidetime = 20
guard.velocity = -20
airguard.hittime = 24
airguard.velocity = -16,-2
fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 12
envshake.time = 20
guard.dist = 300



[state 1050, Rise]
type = velset
trigger1 = animelem = 3
x = 3
y = -16
persistent = 0

[state 1050, gravity]
type = gravity
trigger1 = pos y < -1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 1050, change]
type = changestate
trigger1 = vel y > 0
value = 1051

;---------------------------------------------------------------------------
;Recovery
[statedef 1051]
type = A
movetype = I
physics = N
ctrl = 0
anim = 46

[state 1051, gravity]
type = gravity
trigger1 = pos y < -1

[state 1051, forward momentum]
type = velset
trigger1 = time = 0
x = 0

[state 1051, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52
;---------------------------------------------------------------------------
;Hard Rising Knee
[statedef 1060]
type = A
movetype = A
physics = N
poweradd = 90
velset = 0,0
ctrl = 0

[state 1060, anim]
type = changeanim
trigger1 = time = 0
value = 1060

[state 1050, play sound]
type = playsnd
trigger1 = animelemtime(3) = 0
value = S1050,0

[state 1060, nothitby]
type = nothitby
trigger1 = animelemtime(4) < 0
trigger1 = !movehit
value = A

[state 1060, nothitby]
type = nothitby
trigger1 = MOVEHIT
value = SCA
ignorehitpause = 1 

[State 1060, 2]
type = HitDef
trigger1 = vel y < 0
persistent = 0
attr = A, SA
animtype  = heavy
damage    = 120,ifelse(enemy,statetype = A,36,12)
getpower = 45
guardflag = MA
hitflag = MAF
pausetime = 16,16
priority = 6,hit
sparkno = 3
sparkxy = -20,-260
hitsound = S5000, 2
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -8,-22
air.velocity = -8,-20
air.hittime = 60
guard.hittime = 20
guard.slidetime = 20
guard.velocity = -20
airguard.hittime = 24
airguard.velocity = -16,-2
fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 12
envshake.time = 20
guard.dist = 300

[state 1050, Rise]
type = velset
trigger1 = animelem = 3
x = 3
y = -18
persistent = 0

[state 1050, gravity]
type = gravity
trigger1 = pos y < -1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 1050, change]
type = changestate
trigger1 = vel y > 0
value = 1051

;---------------------------------------------------------------------------
;EX Rising Knee
[statedef 1070]
type = A
movetype = A
physics = N
poweradd = -1000
velset = 0,0
ctrl = 0

[state 1070, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1050, play sound]
type = playsnd
trigger1 = animelemtime(3) = 0
value = S1050,0

[State X, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 100,50,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1060, anim]
type = changeanim
trigger1 = time = 0
value = 1070

[State 1070, 2]
type = HitDef
trigger1 = vel y < 0
persistent = 0
attr = A, SA
animtype  = heavy
damage    = 100,ifelse(enemy,statetype = A,30,10)
getpower = 45
guardflag = MA
hitflag = MAF
pausetime = 16,16
priority = 6,hit
sparkno = 3
sparkxy = -20,-260
hitsound = S5000, 2
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -4,-28
air.velocity = -4,-16
air.hittime = 60
guard.hittime = 20
guard.slidetime = 20
guard.velocity = -20
airguard.hittime = 24
airguard.velocity = -16,-2
fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 12
envshake.time = 20
guard.dist = 300

[state 1070, Rise]
type = velset
trigger1 = animelem = 3
x = 3
y = -22
persistent = 0

[state 1070, gravity]
type = gravity
trigger1 = pos y < -1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = 9
persistent = 0
ignorehitpause = 1

[state 1070, change]
type = changestate
trigger1 = vel y > 0
value = 1051
;----------------------------------------------------------------------------
;Ground Heel Kick L
[statedef 1100]
type = S
movetype = A
physics = N
anim = 1100
ctrl = 0
poweradd = 60
velset = 0,0

[state 1110, jump]
type = velset
trigger1 = anim = 1100
trigger1 = animelem = 3
x = 5
y = -12

[state 1100, nothitby]
type = nothitby
trigger1 = animelemtime(3) < 1
trigger1 = !movehit
value = A

[state 1100, nothitby]
type = nothitby
trigger1 = movehit
trigger1 = vel y < 2
value = SCA
ignorehitpause = 1

[state 1110, statetype set]
type = statetypeset
trigger1 = animelem = 3
statetype = A

[state 1110, play sound]
type = playsnd
trigger1 = animelemtime(3) = 0
trigger1 = anim = 1100
value = S1050,0

[State 1050, 2]
type = HitDef
trigger1 = animelem = 3 || animelem = 4
persistent = 0
attr = A, SA
animtype  = heavy
damage    = 65,ifelse(enemy,statetype = A,20,7)
getpower = 20
guardflag = MA
hitflag = MAF
pausetime = 16,16
priority = 6,hit
sparkno = 3
id = 1100
sparkxy = -20,-260
hitsound = S5000, 2
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -5,-10
air.velocity = -5,-6
air.hittime = 60
guard.hittime = 20
guard.slidetime = 20
guard.velocity = -20
airguard.hittime = 24
airguard.velocity = -16,-2
fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 12
envshake.time = 20
guard.dist = 300

[state 1110, changestate]
type = changestate
triggerall= animelemtime(4) > 1
triggerall = anim = 1100
trigger1 = command = "a" || command = "b" || command = "holda" || command = "holdb"
trigger2 = ailevel > 0
trigger2 = movehit
trigger3 = ailevel > 0
trigger3 = enemy,statetype = C
value = 1101
ignorehitpause
persistent = 1

[state 1110, x stop]
type = velmul
trigger1 = vel y > 5
x = 0.5
persistent = 0

[state 1110, x stop]
type = velmul
trigger1 = vel y > 20
x = 0.1
persistent = 0

[state 1110, x stop animation]
type = changeanim
trigger1 = vel y > 5
value = 44

[state 1100, gravity]
type = gravity
trigger1 = pos y < -1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1100, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1102

;----------------------------------------------------------------------------
;Air Heel Kick L
[statedef 1101]
type = A
movetype = A
physics = N
anim = 1101
ctrl = 0
poweradd = 60

[state 1110, jump]
type = velset
trigger1 = animelem = 1
trigger1 = prevstateno != 1100
y = -6

[state 1110, statetype set]
type = statetypeset
trigger1 = time = 2
statetype = A

[state 1100, snd]
type = playsnd
trigger1 = animelem = 5
value = S1100,0

[State 1100, HIT]
type = HitDef
trigger1 = 1
persistent = 0
attr = A, SA
animtype  = heavy
damage    = ifelse(numtarget(1100) < 1,120,65),ifelse(enemy,statetype = A,20,7)
getpower = 45
guardflag = HA
hitflag = MAF
pausetime = 14,14
priority = 6,hit
sparkno = 3
sparkxy = -20,-260
hitsound = S5000, 2
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -10,40
air.velocity = -10,40
air.hittime = 60
guard.hittime = 16
guard.slidetime = 16
guard.velocity = -16
airguard.hittime = 18
airguard.velocity = -4,4
fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 12
envshake.time = 20
guard.dist = 450


[state 1100, gravity]
type = gravity
trigger1 = pos y < -1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1100, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1102


;---------------------------------------------------------------------------
; Heel Kick Landing - Faster Recovery
[statedef 1102]
type = S
movetype = I
physics = S
movehitpersist = 1


[state 1102, Slower Landing]
type = changeanim
trigger1 = time = 0
value = ifelse(prevstateno = 1101, 1103, 1102)

[state 20, sound1]
type = playsnd
trigger1 = time = 0
value = S20,0

[state 20, sound1]
type = playsnd
trigger1 = time = 0
value = S20,0

[state 1102, earthquakes]
type = envshake
trigger1 = time = 0
time = 12
ampl = -6
freq = 60
phase = 60
 
[state 1102, velset]
type = velset
trigger1 = time = 0
y = 0

[state 1102, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1102, ctrl]
type = ctrlset
trigger1 = movehit =1
trigger1 = time = 4
value = 1
ignorehitpause = 1

[state 1102, skid]
type = velmul
trigger1 = time = 0
x = 0.5

[state 1102, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1




;------------------------------------------------------------------------------
;Ground Heel Kick H
[statedef 1110]
type = A
movetype = A
physics = N
anim = 1110
ctrl = 0
poweradd = 60
velset = 0,0

[state 1110, jump]
type = velset
trigger1 = anim = 1110
trigger1 = animelem = 3
x = 8
y = -14

[state 1110, play sound]
type = playsnd
trigger1 = animelemtime(3) = 0
trigger1 = anim = 1110
value = S1050,0


[STATE 1110, nothitby]
type = nothitby
trigger1 = animelemtime(3) < 1
trigger1 = !movehit
value = A

[state 1110, nothitby]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause = 1

[State 1110, 2]
type = HitDef
trigger1 = animelem = 3 || animelem = 4
persistent = 0
attr = A, SA
animtype  = heavy
damage    = 75,ifelse(enemy,statetype = A,23,8)
getpower = 20
guardflag = MA
hitflag = MAF
id = 1110
pausetime = 16,16
priority = 6,hit
sparkno = 3
sparkxy = -20,-260
hitsound = S5000, 2
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -8,-14
air.velocity = -8,-8
air.hittime = 60
guard.hittime = 20
guard.slidetime = 20
guard.velocity = -20
airguard.hittime = 24
airguard.velocity = -16,-2
fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 12
envshake.time = 20
guard.dist = 300

[state 1100, gravity]
type = gravity
trigger1 = pos y < -1

[state 1110, changestate]
type = changestate
triggerall= animelemtime(4) > 1
triggerall = anim = 1110
trigger1 = command = "a" || command = "b" || command = "holda" || command = "holdb"
trigger2 = ailevel > 0
trigger2 = movehit
trigger3 = ailevel > 0
trigger3 = enemy,statetype = C
value = 1111
ignorehitpause
persistent = 1

[state 1110, x stop]
type = velmul
trigger1 = vel y > 5
x = 0.5
persistent = 0

[state 1110, x stop]
type = velmul
trigger1 = vel y > 20
x = 0.1
persistent = 0

[state 1110, x stop animation]
type = changeanim
trigger1 = vel y > 5
value = 44

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 1100, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1102

;----------------------------------------------------------------------------
;Air Heel Kick H
[statedef 1111]
type = A
movetype = A
physics = N
anim = 1111
ctrl = 0
poweradd = 80

[state 1110, jump]
type = velset
trigger1 = animelem = 1
trigger1 = prevstateno != 1110
y = -6

[state 1100, snd]
type = playsnd
trigger1 = animelem = 5
value = S1100,0

[State 1111, HIT]
type = HitDef
trigger1 = 1
persistent = 0
attr = A, SA
animtype  = heavy
damage    = ifelse(numtarget(1110) < 1,120,75),ifelse(enemy,statetype = A,23,8)
getpower = 45
guardflag = HA
hitflag = MAF
pausetime = 14,14
priority = 6,hit
sparkno = 3
sparkxy = -20,-260
hitsound = S5000, 2
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -10,40
air.velocity = -10,40
air.hittime = 60
guard.hittime = 16
guard.slidetime = 16
guard.velocity = -16
airguard.hittime = 16
airguard.velocity = -4,4
fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 12
envshake.time = 20
guard.dist = 450

[state 1100, gravity]
type = gravity
trigger1 = pos y < -1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1100, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1112

;---------------------------------------------------------------------------
; Heel Kick Landing - Slower Recovery
[statedef 1112]
type = S
movetype = I
physics = S
movehitpersist = 1

[state 1112, slower animation]
type = changeanim
trigger1 = time = 0
value = ifelse(prevstateno = 1111, 1113, 1112)

[state 20, sound1]
type = playsnd
trigger1 = time = 0
value = S20,0

[state 20, sound1]
type = playsnd
trigger1 = time = 0
value = S20,0

[state 1102, earthquakes]
type = envshake
trigger1 = time = 0
time = 12
ampl = -6
freq = 60
phase = 60


[state 1102, velset]
type = velset
trigger1 = time = 0
y = 0

[state 1102, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1102, ctrl]
type = ctrlset
trigger1 = movehit =1
trigger1 = time = 4
value = 1
ignorehitpause = 1

[state 1102, skid]
type = velmul
trigger1 = time = 0
x = 0.5

[state 1102, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------
;Ground Heel Kick EX
[statedef 1120]
type = S
movetype = A
physics = N
anim = 1120
ctrl = 0
poweradd = -500
velset = 0,0

[state 1110, jump]
type = velset
trigger1 = anim = 1120
trigger1 = animelem = 3
x = 14
y = -13

[state 1110, statetype set]
type = statetypeset
trigger1 = animelem = 3
statetype = A

[State 1120, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1120, nothitby]
type = nothitby
trigger1 = vel y < 2
value = SCA



[state 1110, play sound]
type = playsnd
trigger1 = animelemtime(3) = 0
trigger1 = anim = 1120
value = S1050,0

[State 1120, 2]
type = HitDef
trigger1 = animelem = 3 || animelem = 4
persistent = 0
attr = A, SA
animtype  = heavy
damage    = 70,ifelse(enemy,statetype = A,21,7)
getpower = 0
id = 1120
guardflag = MA
hitflag = MAF
pausetime = 16,16
priority = 6,hit
sparkno = 3
sparkxy = -20,-260
hitsound = S5000, 2
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -10,-18
air.velocity = -10,-13
air.hittime = 60
guard.hittime = 16
guard.slidetime = 20
guard.velocity = -20
airguard.hittime = 20
airguard.velocity = -16,-2
fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 12
envshake.time = 20
guard.dist = 300

[state 1120, gravity]
type = gravity
trigger1 = pos y < -1

[state 1120, changestate]
type = changestate
triggerall= animelemtime(4) > 1
triggerall = anim = 1120
trigger1 = command = "a" || command = "b" || command = "holda" || command = "holdb"
trigger2 = ailevel > 0
trigger2 = movehit
trigger3 = ailevel > 0
trigger3 = enemy,statetype = C
value = 1121
ignorehitpause
persistent = 1

[state 1120, x stop]
type = velmul
trigger1 = vel y > 5
x = 0.5
persistent = 0

[state 1120, x stop]
type = velmul
trigger1 = vel y > 20
x = 0.1
persistent = 0

[state 1120, x stop animation]
type = changeanim
trigger1 = vel y > 5
value = 44

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1120, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1102

;----------------------------------------------------------------------------
;Air Heel Kick EX
[statedef 1121]
type = A
movetype = A
physics = N
anim = 1101
ctrl = 0


[state 1110, jump]
type = velset
trigger1 = animelem = 1
trigger1 = statetype = A
y = -6

[state 1121, poweradd]
type = poweradd
trigger1 = prevstateno != 1120
trigger1 = time = 0
value = -500

[state 1100, snd]
type = playsnd
trigger1 = animelem = 5
value = S1100,0

[State 1120, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1120, nothitby]
type = nothitby
trigger1 = 1
value = ,AP



[state 1110, statetype set]
type = statetypeset
trigger1 = time = 2
statetype = A

[State 1100, HIT]
type = HitDef
trigger1 = 1
persistent = 0
attr = A, SA
animtype  = heavy
damage    = ifelse(numtarget(1120) < 1, 120,70),ifelse(enemy,statetype = A,21,7)
getpower = 45
guardflag = HA
hitflag = MAF
pausetime = 14,14
priority = 6,hit
sparkno = 3
sparkxy = -20,-260
hitsound = S5000, 2
guardsound = S120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 60
ground.velocity = -0,40
air.velocity = -0,40
air.hittime = 60
guard.hittime = 24
guard.slidetime = 24
guard.velocity = -16
airguard.hittime = 24
airguard.velocity = -4,4
fall = 1
fall.recover = 0
envshake.freq = 60
envshake.ampl = 12
envshake.time = 20
guard.dist = 450

[STATE 1120, ground bounce limiter]
type = varadd
trigger1 = movehit
trigger1 = enemy,statetype = A
v = 8
value = -1
ignorehitpause = 1
persistent = 0

[state 1100, target]
type = targetstate
trigger1 = movehit
trigger1 = var(8) > 0
trigger1 = hitpausetime > 13
value = 680
ignorehitpause = 1



[state 1120, gravity]
type = gravity
trigger1 = pos y < -1

[state x, combo damage score]
type = varadd
trigger1 = movehit = 1
v = 18
value = -9
persistent = 0
ignorehitpause = 1

[state 1120, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1122
;---------------------------------------------------------------------------

;EX Heel Kick Landing
[statedef 1122]
type = S
movetype = I
physics = S
movehitpersist = 1

[state 1122, Slower anim]
type = changeanim
trigger1 = time = 0
value = ifelse(prevstateno = 1121, 1122, 1102)


[state 1102, velset]
type = velset
trigger1 = time = 0
y = 0

[state 1102, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1102, ctrl]
type = ctrlset
trigger1 = movehit =1
trigger1 = time = 1
value = 1
ignorehitpause =1

[state 1102, skid]
type = velmul
trigger1 = time = 0
x = 0.5

[state 1102, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Light Windmill
[statedef 1150]
type = S
movetype = A
physics = S
poweradd = 80
ctrl = 0
velset = 0,0
anim = 1150

[state 115x, crouching]
type = statetypeset
trigger1 = animelem = 2
statetype = C
physics = C

[state 1150, nothitby]
type = nothitby
trigger1 = animelemtime(4) >= 0
value = ,AP,AT
ignorehitpause = 1

[state 1150, playsnd]
type = playsnd
trigger1 = time > 14
value = S1150,0
persistent = 18

[state 1150, explod]
type = explod
trigger1 = time = 0
anim = 1155
id = 1155
postype = p1
pos = 0,0
sprpriority = 4
bindtime = -1
removetime = -2
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 0


[State 1000, AE3  Head]
type = HitDef
trigger1 = animelem = 3
persistent = 7
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 5
guardflag = MA
pausetime = 6,6
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 24
ground.hittime  = 30
air.hittime = 24
ground.velocity = -6,0
air.velocity = -6,-4
guard.velocity = -4          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -4,-2
guard.dist = 720
fall = 1
fall.recover = 0

[State 1000, AE4]
type = HitDef
trigger1 = animelem = 4
persistent = 8
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 5
guardflag = MA
pausetime = 3,3
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,3
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 30
air.hittime = 24
ground.velocity = -4,0
air.velocity = -4,-4
guard.velocity = -2          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -2,-2
guard.dist = 720
fall.recover = 0
fall = 1


[State 1000, AE6 Low Kick]
type = HitDef
trigger1 = animelem = 6
persistent = 8
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 5
hitflag = MAF
guardflag = LA
pausetime = 3,3
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 14
ground.hittime  = 30
air.hittime = 36
ground.velocity = -1,-8
air.velocity = ifelse(p2bodydist x <= 200,-2,-6),-6
guard.velocity = -2          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -2,-3
fall.recover = 0
fall.recovertime = 60
guard.dist = 1280
fall = 1



[State 1000, AE10 Chest Kick]
type = HitDef
trigger1 = animelem = 10
persistent = 8
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 5
guardflag = MA
pausetime = 3,3
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 34
air.hittime = 24
ground.velocity = -6,0
air.velocity = ifelse(p2bodydist x <= 200,6,12),-6
guard.velocity = -4          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -4,-4
guard.dist = 720
fall.recover = 0
fall = 1


[State 1000, AE13]
type = HitDef
trigger1 = animelem = 13
persistent = 8
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 5
guardflag = MA
pausetime =  3,3
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 14
ground.hittime  = 30
air.hittime = 24
ground.velocity = -4,0
air.velocity = 2,-12
guard.velocity = -2          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -2,-4
guard.dist = 720
fall.recover = 0
fall = 1


[State 1000, AE17 Low Head]
type = HitDef
trigger1 = animelem = 17
persistent = 8
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 5
hitflag = MAF
guardflag = LA
pausetime = 3,3
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 26
ground.hittime  = 30
air.hittime = 30
ground.velocity = 2,-8
air.velocity = 0,-8
guard.velocity = -1          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -1,-8
guard.dist = 720
fall.recover = 0
fall = 1


[State 1000, AE17 Up Kick]
type = HitDef
trigger1 = animelem = 19
persistent = 8
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 5
hitflag = MAF
guardflag = MA
pausetime = 3,3
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 26
ground.hittime  = 30
air.hittime = 24
ground.velocity = -6,-4
air.velocity = -6,-4
guard.velocity = -4          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -4,-2
guard.dist = 720
fall.recover = 0
fall = 1


[State 1000, AE17 Chest Kick]
type = HitDef
trigger1 = animelem = 23
persistent = 8
attr = C, SA
animtype  = back
damage    = 75,24
getpower = 5
id = 1157
HITflag = MAF
guardflag = MA
pausetime = 14,14
priority = 3,hit
sparkno = 3
sparkxy = -20,-160
hitsound   = F5,3
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 30
air.hittime = 30
fall = 1
fall.recover = 1
fall.recovertime = 30
ground.velocity = -14,-6
air.velocity = -14,-6
guard.velocity = -20         
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = -16,-2
guard.dist = 720
envshake.ampl = 8
envshake.time = 14
ground.cornerpush.veloff = -70
guard.cornerpush.veloff = -54

[state x, combo damage score]
type = varadd
trigger1 = movehit
trigger1 = numtarget(1157)
v = 18
value = -3
persistent = 0
ignorehitpause = 1


[state 1150, velset]
type = velset
trigger1 = time > 14
x = ifelse(command = "holdfwd",1.75,ifelse(command="holdback",-1.75,0))

[state 1150, end]
type = changestate
trigger1 = animtime = 0
value = 1151



;-----------------------------------------------------------------------
;Winmill recovery
[statedef 1151]
type = C
movetype = I
physics = C
anim = 1151

[state 1151, quake]
type = envshake
trigger1 = time = 0
ampl = 12
time = 12

[state 1151, playsnd]
type = playsnd
trigger1 = time = 0
value = S51,1


[state 1151, end]
type = changestate
trigger1 = animtime = 0
value = 1152


[state 1151, removeexplod]
type = removeexplod
trigger1 = time = 0
id = 1155
;---------------------------------------------------------------------------
;Windmill standback up
;---------------------------------------------------------------------------
; Downed get-hit (getting up)
[Statedef 1152]
type    = C
movetype= I
physics = C

[State 1152, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 1152, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 1152, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[state 1152, statetypeset]
type = statetypeset
trigger1 = animelemtime(6) = 0
statetype = S
physics = S

[State 1152, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 1152, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Hard Windmill
[statedef 1160]
type = S
movetype = A
physics = S
poweradd = 80
ctrl = 0
velset = 0,0
anim = 1160

[state 1160, nothitby]
type = nothitby
trigger1 = animelemtime(4) >= 0
value = ,AP,AT
ignorehitpause = 1

[state 1160, playsnd]
type = playsnd
trigger1 = time > 14
value = S1150,0
persistent = 18

[state 115x, crouching]
type = statetypeset
trigger1 = animelem = 2
statetype = C
physics = C

[state 1160, explod]
type = explod
trigger1 = time = 0
anim = 1165
id = 1165
postype = p1
pos = 0,0
sprpriority = 4
bindtime = -1
removetime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 0


[State 1160, AE3  Head]
type = HitDef
trigger1 = animelem = 3
persistent = 7
attr = C, SA
animtype  = hard
damage    = 20,6
getpower = 5
guardflag = MA
pausetime = 6,6
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 14
ground.hittime  = 30
air.hittime = 24
ground.velocity = -6,0
air.velocity = -6,-4
guard.velocity = -4          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -4,-2
fall = 1
fall.recover = 0
guard.dist = 720

[State 1160, AE4]
type = HitDef
trigger1 = animelem = 4
persistent = 8
attr = C, SA
animtype  = hard
damage    = 20,6
getpower = 5
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,3
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 30
air.hittime = 24
ground.velocity = -4,0
air.velocity = -4,-4
guard.velocity = -2          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -2,-4
fall.recover = 0
guard.dist = 720
fall = 1


[State 1160, AE6 Low Kick]
type = HitDef
trigger1 = animelem = 6
trigger2 = animelem = 24
persistent = 8
attr = C, SA
animtype  = hard
damage    = 20,6
getpower = 5
hitflag = MAF
guardflag = LA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 14
ground.hittime  = 30
air.hittime = 36
ground.velocity = -1,-8
air.velocity = ifelse(p2bodydist x <= 200,2,6),-6
guard.velocity = -2          
guard.hittime = 14
guard.slidetime = 14
fall.recover = 0
fall.recovertime = 60
airguard.velocity = -2,-4
guard.dist = 1280
fall = 1


[State 1160, AE10 Chest Kick]
type = HitDef
trigger1 = animelem = 10
trigger2 = animelem = 28
persistent = 8
attr = C, SA
animtype  = hard
damage    = 20,6
getpower = 5
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 30
air.hittime = 32
ground.velocity = -6,0
air.velocity = ifelse(p2bodydist x <= 200,6,12),-6
guard.velocity = -4         
guard.hittime = 14
fall.recover = 0
guard.slidetime = 14
airguard.velocity = -4,-4
guard.dist = 720
fall = 1


[State 1160, AE13]
type = HitDef
trigger1 = animelem = 13
trigger2 = animelem = 31
persistent = 8
attr = C, SA
animtype  = hard
damage    = 20,6
getpower = 5
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 14
ground.hittime  = 30
air.hittime = 24
ground.velocity = -4,0
air.velocity = 2,-12
guard.velocity = -2          
guard.hittime = 14
fall.recover = 0
guard.slidetime = 14
airguard.velocity = -1,-2
guard.dist = 720
fall = 1


[State 1160, AE17 Low Head]
type = HitDef
trigger1 = animelem = 17
trigger2 = animelem = 35
persistent = 8
attr = C, SA
animtype  = hard
damage    = 20,6
getpower = 5
hitflag = MAF
guardflag = LA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 26
ground.hittime  = 30
air.hittime = 30
ground.velocity = 2,-8
air.velocity = 0,-8
guard.velocity = -6          
guard.hittime = 14
fall.recover = 0
guard.slidetime = 14
airguard.velocity = -4,-2
guard.dist = 1280
fall = 1


[State 1160, AE17 Up Kick]
type = HitDef
trigger1 = animelem = 19
trigger2 = animelem = 37
persistent = 8
attr = C, SA
animtype  = hard
damage    = 20,6
getpower = 5
hitflag = MAF
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 26
ground.hittime  = 30
air.hittime = 24
ground.velocity = -6,-4
air.velocity = -6,1
guard.velocity = -4          
guard.hittime = 14
fall.recover = 0
guard.slidetime = 14
airguard.velocity = -6,-4
guard.dist = 720
fall = 1


[State 1160, AE17 Chest Kick]
type = HitDef
trigger1 = animelem = 23
persistent = 8
attr = C, SA
animtype  = back
damage    = 20,6
getpower = 5
HITflag = MAF
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 3
sparkxy = -20,-160
hitsound   = F5,3
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 30
air.hittime = 24
ground.velocity = -2,-6
air.velocity = -2,-6
guard.velocity = -6          
guard.hittime = 14
fall.recover = 0
guard.slidetime = 14
airguard.velocity = -6,-2
guard.dist = 720
fall = 1


[State 1160, AE17 Chest Kick]
type = HitDef
trigger1 = animelem = 41
persistent = 8
attr = C, SA
animtype  = back
damage    = 120,36
getpower = 5
id = 1169
HITflag = MAF
guardflag = MA
pausetime = 14,14
priority = 3,hit
sparkno = 3
sparkxy = -20,-160
hitsound   = F5,3
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 30
air.hittime = 30
fall.recover = 0
ground.velocity = -14,-6
air.velocity = -14,-6
guard.velocity = -20          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = -16,-2
guard.dist = 720
envshake.ampl = 8
envshake.time = 14
fall = 1
ground.cornerpush.veloff = -70
guard.cornerpush.veloff = -46

[state x, combo damage score]
type = varadd
trigger1 = movehit
trigger1 = numtarget(1169)
v = 18
value = -3
persistent = 0
ignorehitpause = 1


[state 1160, velset]
type = velset
trigger1 = time > 14
x = ifelse(command = "holdfwd",0.75,ifelse(command="holdback",-0.75,0))

[state 1160, end]
type = changestate
trigger1 = animtime = 0
value = 1161

;-----------------------------------------------------------------------
[statedef 1161]
type = C
movetype = I
physics = C
anim = 1161

[state 1151, quake]
type = envshake
trigger1 = time = 0
ampl = 12
time = 12

[state 1151, playsnd]
type = playsnd
trigger1 = time = 0
value = S51,1

[state 1161, end]
type = changestate
trigger1 = animtime = 0
value = 1152

[state 1161, removeexplod]
type = removeexplod
trigger1 = time = 0
id = 1165

;-------------------------------------------------------------------------
; EX Windmill
[statedef 1170]
type = S
movetype = A
physics = S
poweradd = -500
ctrl = 0
velset = 0,0
anim = 1170

[State 1120, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1170, nothitby]
type = nothitby
trigger1 = 1
value = ,AP,AT
ignorehitpause = 1

[state 1170, playsnd]
type = playsnd
trigger1 = time > 14
value = S1150,0
persistent = 18

[state 117x, crouching]
type = statetypeset
trigger1 = animelem = 2
statetype = C
physics = C

[state 1170, explod]
type = explod
trigger1 = time = 0
anim = 1175
id = 1175
postype = p1
pos = 0,0
sprpriority = 4
bindtime = -1
removetime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 0


[State 1170, AE3  Head]
type = HitDef
trigger1 = animelem = 3
persistent = 7
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 0
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 14
ground.hittime  = 36
air.hittime = 12
ground.velocity = -4,0
air.velocity = -4,-2
guard.velocity = 4          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 4,-4
guard.dist = 720
fall = 1
fall.recover = 0

[State 1170, AE4]
type = HitDef
trigger1 = animelem = 4
persistent = 8
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 0
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,3
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 12
ground.velocity = -2,0
air.velocity = -2,-2
guard.velocity = 4          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 4,-4
guard.dist = 720
fall.recover = 0
fall = 1


[State 1170, AE6 Low Kick]
type = HitDef
trigger1 = animelem = 6
persistent = 8
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 0
hitflag = MAF
guardflag = LA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 14
ground.hittime  = 36
air.hittime = 28
ground.velocity = 2,-12
air.velocity = 2,-12
guard.velocity = 4          
guard.hittime = 14
guard.slidetime = 14
fall.recover = 0
fall.recovertime = 60
airguard.velocity = 4,-4
guard.dist = 1280
fall = 1


[State 1170, AE10 Chest Kick]
type = HitDef
trigger1 = animelem = 10
persistent = 8
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 0
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 18
ground.velocity = 2,0
air.velocity = 2,-8
guard.velocity = 1          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 2,-2
guard.dist = 720
fall.recover = 0
fall = 1


[State 1170, AE13]
type = HitDef
trigger1 = animelem = 13
persistent = 8
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 0
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 14
ground.hittime  = 36
air.hittime = 24
ground.velocity = 2,0
air.velocity = 2,-8
guard.velocity = -1          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -1,-4
guard.dist = 1280
fall.recover = 0
fall = 1


[State 1170, AE17 Low Head]
type = HitDef
trigger1 = animelem = 17
persistent = 8
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 0
hitflag = MAF
guardflag = LA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 30
ground.velocity = 2,-8
air.velocity = 2,-8
guard.velocity = 1          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 1,-4
guard.dist = 1280
fall.recover = 0
fall = 1


[State 1170, AE17 Up Kick]
type = HitDef
trigger1 = animelem = 19
persistent = 8
attr = C, SA
animtype  = hard
damage    = 23,6
getpower = 0
hitflag = MAF
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 18
ground.velocity = -6,-4
air.velocity = -6,-4
guard.velocity = 2          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 2,-2
guard.dist = 720
fall.recover = 0
fall = 1


[State 1170, AE17 Chest Kick]
type = HitDef
trigger1 = animelem = 23
persistent = 8
attr = C, SA
animtype  = back
damage    = 75,24
getpower = 0
HITflag = MAF
guardflag = MA
pausetime = 14,14
priority = 3,hit
sparkno = 3
id = 1178
sparkxy = -20,-160
hitsound   = F5,4
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 24
ground.velocity = -30,-8
air.velocity = -30,-8
guard.velocity = -24         
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -20,-4
envshake.ampl = 8
envshake.time = 14
guard.dist = 720
fall.recover = 0
fall = 1
ground.cornerpush.veloff = -80
guard.cornerpush.veloff = -64

[state 1170, comboscale]
type = varadd
trigger1 = movehit
trigger1 = numtarget(1178)
var(18) = -3
ignorehitpause = 1
persistent = 0

;[state 1220, targetstate]
;type = targetstate
;trigger1 = movehit
;trigger1 = numtarget(1178)
;trigger1 = hitpausetime = 13
;trigger1 = var(7) > 0
;value = 670
;ignorehitpause = 1
;persistent = 0

;[state 1220, wall bounce check]
;type = varadd
;trigger1 = movehit
;trigger1 = numtarget(1178)
;var(7) = -1
;ignorehitpause = 1
;persistent = 0

[state 1170, velset]
type = velset
trigger1 = time > 14
x = ifelse(command = "holdfwd",1.75,ifelse(command="holdback",-1.75,0))

[state 1160, end]
type = changestate
trigger1 = animtime = 0
value = 1171

;-----------------------------------------------------------------------
[statedef 1171]
type = C
movetype = I
physics = C
anim = 1171


[state 1151, quake]
type = envshake
trigger1 = time = 0
ampl = 12
time = 12

[state 1151, playsnd]
type = playsnd
trigger1 = time = 0
value = S51,1

[state 1171, end]
type = changestate
trigger1 = animtime = 0
value = 1152

[state 1171, removeexplod]
type = removeexplod
trigger1 = time = 0
id = 1175

;==========================================================================
;Double Kicks
[statedef 1200]
type = S
movetype = A
physics = S
poweradd = 70
ctrl = 0
anim = 1200

[state 1210, attack dist]
type = attackdist
trigger1 = 1
value = 500

[state 1200, Movement]
type = velset
trigger1 = animelemtime(3) >0 && animelemtime(5) <0
trigger2 = animelemtime(7) >0 && animelemtime(9) < 0
x = 12
persistent = 1

[state 20, earthquakes]
type = envshake
trigger1 = animelemtime(8) = 0
time = 12
ampl = -6
freq = 60
phase = 60

[state 1200, explod]
type = explod
trigger1 = animelemtime(8) > 0 && animelemtime(10) <0
anim = F120
postype = p1
pos = 0,0
persistent = 4

[state 1200, playsnd]
type = playsnd
trigger1 = animelemtime(4) = 0
trigger2 = animelemtime(8) = 0
value = S240,0
persistent = 1

[State 1200, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
animtype  = Heavy
damage    = 50,10
guardflag = MA
hitflag = MAF
pausetime = 6,10
guard.pausetime = 8,8
sparkno = 2
priority = 3,hit
sparkxy = -10,-175
hitsound = S5000, 2
guardsound = S120,0
ground.type = high
ground.slidetime = 36
ground.hittime  = 32
ground.velocity = -8,0
air.velocity = -8,-4
guard.dist = 595
envshake.time = 12
envshake.freq = 60
envshake.ampl = 6
envshake.phase = 60
guard.velocity  = -18
airguard.velocity = -6,-4
guard.hittime = 22
guard.slidetime = 26
forcestand = 1
fall = 0
air.fall = 0
fall.recover = 1
fall.recovertime = 30
guard.kill = 1

[state 240, sprpriority]
type = sprPriority
trigger1 = animelem = 6
value = -2

[state 240, sprpriority]
type = sprPriority
trigger1 = animelem = 8
value = 2

[State 1200, 2]
type = HitDef
trigger1 = animelem = 9
attr = S, SA
animtype  = Heavy
damage    = 50,10
guardflag = MA
hitflag = MAF
pausetime = 14,14
guard.pausetime = 10,12
sparkno = 2
priority = 3,hit
sparkxy = -10,-175
hitsound = S5000, 2
guardsound = S120,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -16,-2
air.velocity = -16,-2
guard.dist = 595
guard.velocity  = -22
airguard.velocity = -12,-4
guard.hittime = 18 ;0
guard.slidetime = 18
envshake.time = 12
envshake.freq = 60
envshake.ampl = 6
envshake.phase = 60
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 30
guard.kill = 1
ground.cornerpush.veloff = -32
guard.cornerpush.veloff = -48

[state x, combo damage score]
type = varadd
trigger1 = animelem = 9
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1200, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;--------------------------------------------------------------------------
; Double Kicks Hard
[statedef 1210]
type = S
movetype = A
physics = S
poweradd = 70
ctrl = 0
anim = 1210

[state 1210, attack dist]
type = attackdist
trigger1 = 1
value = 500

[state 1200, Movement]
type = velset
trigger1 = animelemtime(3) >0 && animelemtime(5) <0
trigger2 = animelemtime(7) >0 && animelemtime(9) < 0
x = 16
persistent = 1

[state 20, earthquakes]
type = envshake
trigger1 = animelemtime(8) = 0
time = 12
ampl = -6
freq = 60
phase = 60

[state 1200, explod]
type = explod
trigger1 = animelemtime(8) > 0 && animelemtime(10) <0
anim = F120
postype = p1
pos = 0,0
persistent = 4

[state 1200, playsnd]
type = playsnd
trigger1 = animelemtime(4) = 0
trigger2 = animelemtime(8) = 0
value = S240,0
persistent = 1

[State 1210, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
animtype  = Heavy
damage    = 60,12
guardflag = MA
hitflag = MAF
pausetime = 6,10
sparkno = 2
priority = 3,hit
sparkxy = -10,-175
hitsound = S5000, 2
guardsound = S120,0
ground.type = high
ground.slidetime = 36
ground.hittime  = 32
ground.velocity = -8,0
air.velocity = -8,-8
guard.dist = 500
envshake.time = 12
envshake.freq = 60
envshake.ampl = 6
envshake.phase = 60
guard.velocity  = -18
airguard.velocity = -6,-4
guard.hittime = 24
guard.slidetime = 24
fall = 0
air.fall = 0
fall.recover = 1
fall.recovertime = 30
guard.kill = 1
forcestand = 1

[state 240, sprpriority]
type = sprPriority
trigger1 = animelem = 6
value = -2

[state 240, sprpriority]
type = sprPriority
trigger1 = animelem = 8
value = 2


[State 1210, 2]
type = HitDef
trigger1 = animelem = 9
attr = S, SA
animtype  = Heavy
damage    = 60,12
guardflag = MA
hitflag = MAF
pausetime = 14,14
guard.pausetime = 11,12
sparkno = 2
priority = 3,hit
sparkxy = -10,-175
hitsound = S5000, 2
guardsound = S120,0
ground.type = high
ground.slidetime = 36
ground.hittime  = 32
ground.velocity = -18,-2
air.velocity = -18,-2
guard.dist = 500
guard.velocity  = -22
airguard.velocity = -12,-4
guard.hittime = 18 ;-2
guard.slidetime = 18
envshake.time = 12
envshake.freq = 60
envshake.ampl = 6
envshake.phase = 60
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 30
guard.kill = 1
ground.cornerpush.veloff = -35
guard.cornerpush.veloff = -45

[state x, combo damage score]
type = varadd
trigger1 = animelem = 9
trigger1 = movehit = 1
v = 18
value = -3
persistent = 0
ignorehitpause = 1

[state 1200, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------
; Double Kicks EX
[statedef 1220]
type = S
movetype = A
physics = S
poweradd = -500
ctrl = 0
anim = 1220

[state 1210, attack dist]
type = attackdist
trigger1 = 1
value = 500

[state 1220, nothitby]
type = nothitby
trigger1 = time < 12
value = SCA

[State 1120, Blink Yellow]
type = PalFX
trigger1 = time%2
time = 1
add = 150,75,0 ;32,16,0
sinadd = 64,32,5,3
ignorehitpause

[state 1200, Movement]
type = velset
trigger1 = animelemtime(3) >0 && animelemtime(5) <0
trigger2 = animelemtime(7) >0 && animelemtime(9) < 0
x = 16
persistent = 1

[state 20, earthquakes]
type = envshake
trigger1 = animelemtime(8) = 0
time = 12
ampl = -6
freq = 60
phase = 60

[state 1200, explod]
type = explod
trigger1 = animelemtime(8) > 0 && animelemtime(10) <0
anim = F120
postype = p1
pos = 0,0
persistent = 4

[state 1200, playsnd]
type = playsnd
trigger1 = animelemtime(4) = 0
trigger2 = animelemtime(8) = 0
value = S240,0
persistent = 1

[State 1200, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
animtype  = Heavy
damage    = 50,10
guardflag = MA
hitflag = MAF
pausetime = 6,10
id = 1220
sparkno = 2
getpower = 0
priority = 3,hit
sparkxy = -10,-175
hitsound = S5000, 2
guardsound = S120,0
ground.type = high
ground.slidetime = 36
ground.hittime  = 32
ground.velocity = -8,0
air.velocity = -8,-8
guard.dist = 500
envshake.time = 12
envshake.freq = 60
envshake.ampl = 6
envshake.phase = 60
guard.velocity  = -16
airguard.velocity = -6,-4
guard.hittime = 20
guard.slidetime = 20
fall = 0
air.fall = 0
fall.recover = 1
fall.recovertime = 30
guard.kill = 1
forcestand = 1

[state 240, sprpriority]
type = sprPriority
trigger1 = animelem = 6
value = -2

[state 240, sprpriority]
type = sprPriority
trigger1 = animelem = 8
value = 2


[State 1200, 2]
type = HitDef
trigger1 = animelem = 9
attr = S, SA
animtype  = Heavy
damage    = 50,10
guardflag = MA
hitflag = MAF
getpower = 0
pausetime = 14,14
sparkno = 2
id = 1221
priority = 3,hit
sparkxy = -10,-175
hitsound = S5000, 2
guardsound = S120,0
ground.type = high
ground.slidetime = 36
ground.hittime  = 32
ground.velocity = -45,ifelse(var(7) > 1, -18, -4)
air.velocity = -45,ifelse(var(7) > 1,-18,-4)
guard.dist = 500
guard.velocity  = -18
airguard.velocity = -12,-2
guard.hittime = 24
guard.slidetime = 24
envshake.time = 14
envshake.ampl = 8
fall = 1
fall.recover = 1
fall.recovertime = 30
guard.kill = 1
ground.cornerpush.veloff = -35
guard.cornerpush.veloff = -54

[state 1220, targetstate]
type = targetstate
trigger1 = movehit
trigger1 = numtarget(1221)
trigger1 = hitpausetime = 13
trigger1 = var(7) > 0
value = 670
ignorehitpause = 1
persistent = 0



[state 1220, wall bounce check]
type = varadd
trigger1 = movehit
trigger1 = numtarget(1221)
var(7) = -1
ignorehitpause = 1
persistent = 0

[state x, combo damage score]
type = varadd
trigger1 = movehit
v = 18
value = -18
persistent = 0
ignorehitpause = 1

[state 1200, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1




;--------------------------------------------------------------------------




;Zafta Dodge IN
[statedef 1300]
type = S
movetype = I
physics = U
poweradd = 60
velset = 0,0
ctrl = 0
sprpriority = -2

[state 1300, anim]
type = changeanim
trigger1 = time = 0
value = 1300

[state 1301, nothitby]
type = nothitby
trigger1 = 1
value = ,AP,AT
persistent = 1

[state 1300, end]
type = changestate
trigger1 = animtime = 0
value = 1301

;-----------------------------------------------------------------------------
;Zafta dodge 
[Statedef 1301]
type = S
movetype = I
physics = U
poweradd = 0

[state 1301, anim]
type = changeanim
trigger1 = time = 0
trigger1 = time < 24
value = 1301

[state 1301, poweradd]
type = poweradd
trigger1 = time > 0
value = 30
persistent = 20

[state 1301, vunerable stand]
type = changeanim
trigger1 = time > 24
trigger1 = anim != 1303
value = 1303

[state 1301, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 1301, dodge everything]
type = nothitby
trigger1 = time < 8
value = SCA


[state 1301, nothitby]
type = nothitby
trigger1 = 1
value = ,AP,AT
persistent = 1

;[state 1301, Nothitby]
;type = nothitby
;trigger1 = 1
;value = C, AA
;persistent = 1

;[state 1301, end]
;type = changestate
;trigger1 = animtime = 0
;trigger1 = command = "holda" && command = "holdb" || command = "holdc"
;value = 1301

[state 1301, butt drop]
type = changestate
triggerall = time > 8
trigger1 = command = "holda" && command != "holdb"
trigger1 = ailevel = 0
trigger1 = command != "holddown" || command != "holdback"
trigger2 = command != "holda" && command = "holdb"
trigger2 = ailevel = 0
trigger2 = command != "holddown" || command != "holdback"
trigger3 = ailevel > 0 
trigger3 = p2bodydist x < 250
trigger3 = !inguarddist
value = 1310

[State -1, Exit Dodge] ;by Inktrebuchet
type = ChangeState
triggerall = time > 8
triggerall = var(30) = 59 
triggerall = ailevel
trigger1 = !PlayerIdExist(helper(33333333),var(3)) && enemynear,numproj = 0;enemy projectile exists
trigger2 = time > 80
value = 1302


[state 1301, end]
type = changestate
triggerall = time > 8
trigger1 = command != "dodge" 
trigger1 = !ailevel
value = 1302

;----------------------------------------------------------------------------------
;Zafta dodge out
[Statedef 1302]
type = S
movetype = I
physics = U

[state 1301, anim]
type = changeanim
trigger1 = time = 0
value = 1302

[state 1301, nothitby]
type = nothitby
trigger1 = 1
value = ,AP,AT

[state 1301, end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Zafta Butt Drop
[statedef 1310]
type = A
movetype = A
physics = N
ctrl = 0
poweradd = 140
sprpriority = -2

[state 1310, anim]
type = changeanim
trigger1 = time = 0
value = 1310

[state 1310, width]
type = width
trigger1 = 1
edge = 100,100

[State 330, Spark]
type = Explod
trigger1 = time = 0
id = 1315
anim = 1315
postype = p1
pos = 0,0
sprpriority = 3
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)

[state 1310, removeexplod]
type = removeexplod
trigger1 = moveguarded
id = 1315
ignorehitpause


[state 1310, nothitby]
type = nothitby
trigger1 = animelemtime(3) < 0
value = ,AP

[state 1310, set type]
type = statetypeset
trigger1 = animelem = 2
statetype = A
ignorehitpause = 1

[state 1310, invun if hit]
type = nothitby
trigger1 = movehit = 1
value = SCA
time = 60

[State 44, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 1310, 2]
type = VarSet
trigger1 = command = "holdfwd"
trigger1 = time < 8
sysvar(1) = 1

[State 1310, 3]
type = VarSet
trigger1 = command = "holdback"
trigger1 = time < 8
sysvar(1) = -1


[state 1310, varset]
type = varset
triggerall = animelem = 3
trigger1 = sysvar(1) = -1
trigger2 = ailevel > 0
trigger2 = p2bodydist x <= 200
v = 4
value = 12

[state 1310, varset]
type = varset
triggerall = animelem = 3
trigger1 = sysvar(1) = 0
trigger2 = ailevel > 0
trigger2 = p2bodydist x < 380  && p2bodydist x > 200
v = 4
value = 16

[state 1310, varset]
type = varset
triggerall = animelem = 3
trigger1 = sysvar(1) = 1
trigger2 = ailevel > 0
trigger2 = p2bodydist x >= 380
v = 4
value = 20



[state 1310, velset]
type = velset
trigger1 = animelemtime(2) = 0
x = ifelse(sysvar(1)=0, 6, ifelse(sysvar(1)=1, 12, 3))
y = ifelse(sysvar(1)=0,-8,ifelse(sysvar(1)=1,-10,-8))

[State 1310, Hit]
type = HitDef
trigger1 = vel y > 0
trigger1 = !movecontact || !movereversed
persistent = 0
attr = A, SA
damage    = 180,54
guardflag = HA
hitflag = MA
priority = 4
pausetime = 0,0
nochainid = 1400
guard.pausetime = 14,14
sparkno = 3
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
animtype = heavy
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -20,-4
air.velocity = -6,-4
down.hittime = 30
guard.velocity = -40            
guard.hittime = 38
guard.slidetime = 38
airguard.velocity = -10,10
airguard.hittime = 26
guard.dist = 400
Fall = 1
fall.recover = 0


;--------------------------
;[state 650, enemy state]
;type = targetstate
;triggerall = vel y > 0
;triggerall = movehit
;trigger1 = enemy,statetype != A
;trigger2 = p2bodydist x < 140
;value = 660

;Ride down mechanic
[state 650, Ride down]
type = targetbind
trigger1 = movehit
pos = 120, 0

[state 650, state of ride down]
type = targetstate
trigger1 = movehit
value = 655
;----------------------------------------------

[state 1310, gravity]
type = gravity
trigger1 = pos y < -1


[state 1310, land 1]
type = changestate
trigger1 = pos y > 0
trigger1 = vel y > -pos y
value = 1311

;--------------------------------------------------------------------------
;1st Bounce

[statedef 1311]
type = C
movetype = A
physics = N
ctrl = 0
sprpriority = - 2
movehitpersist = 1

[state 1311, snd]
type = playsnd
trigger1 = time = 0
value = S52,1
volume = 50

[State 651, 3]
type = HitDef
trigger1 = Time = 0
trigger1 = !movecontact
attr = A, SA
damage    = 200 
guardflag = 
hitflag = FD
priority = 4
pausetime = 0,0
sparkno = 1
sparkxy = -10,-40
hitsound = S5000, 2
guardsound = S120,0
animtype = Med
p2stateno = 660
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,0

[state 1311, earthquakes]
type = envshake
trigger1 = time = 0
time = 20
ampl = -8
freq = 75
phase = 75

[state 651, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 100,0
scale = 2,1.5
ownpal = 1
sprpriority = -4

[state 1311, anim]
type = changeanim
trigger1 = time = 0
value = 1311

[State 330, Spark]
type = Explod
trigger1 = time = 0
trigger1 = movehit
id = 1316
anim = 1316
postype = p1
pos = 0,0
sprpriority = 3
bindtime = -1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 1

[state 1310, removeexplod]
type = removeexplod
trigger1 = moveguarded
id = 1316
ignorehitpause

[state 1311, pos]
type = posset
trigger1 = time = 0
y = 0

[state 1311, pos]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 1311, bounce]
type = velset
trigger1 = time = 14
y = -6

[state 1311, statetypeset]
type = statetypeset
trigger1 = time = 14
statetype = A
ignorehitpause = 1

[state 1311, changeanim]
type = changeanim
trigger1 = time = 14
value = 1312

[state 1311, gravity]
type = gravity
trigger1 = time > 14
trigger1 = pos y < -1

[state 1311, change state]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 1312
;-------------------------------------------------------
;2nd Landing
[statedef 1312]
type = C
movetype = I
physics = N
anim = 1311
sprpriority = -2
movehitpersist = 1

[State 330, Spark]
type = Explod
trigger1 = time = 0
trigger1 = movehit
id = 1317
anim = 1317
postype = p1
pos = 0,0
sprpriority = 3
bindtime = -1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 1



[state 1312, pos]
type = posset
trigger1 = time = 0
y = 0

[state 1312, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 1312, changestate]
type = changestate
trigger1 = time = var(4)
value = 1315

;---------------------------------------------------------------------------
; Recovery
[statedef 1315]
movetype = I
type = C
physics = C
velset = 0,0
anim = 1320
movehitpersist = 1

[state 1315, sprpriority]
type = sprpriority
trigger1 = movehit
trigger1 = time = 0
value = 3

[state 1315, posadd]
type = veladd
trigger1 = animelem = 7
x = -30
persistent = 0


[state 1315, end]
type = changestate 
trigger1 = animtime = 0
value = 0
ctrl = 1

;===========================================================================
;  Hip Bump (Push Block)
;===========================================================================

[Statedef 1400]
type = S
movetype = I
physics = S
velset = 0,0
anim = 1400
ctrl = 0

[state 1400, poweradd]
type = poweradd
trigger1 = time = 0
value = -500

[state 1400, awareness pause]
type = pause
trigger1 = time = 0
time = 8
endcmdbuftime = 8

[state 1400, dim]
type = bgpalfx
trigger1 = time = 0
time = 8
mul = 200,200,200

[State 330, Spark]
type = Explod
trigger1 = AnimElem = 6
id = 1410
anim = 1410
postype = p1
pos = 155,-140
sprpriority = 3
bindtime = 1
scale = 2.2,2.2
ownpal = 1

[State 211, 2]
type = HitDef
trigger1 = 1
persistent = 0
attr = S, NA
animtype  = Heavy
damage    = 40
Hitflag = MA
guardflag = MA
pausetime = 8,8
sparkno = -1
ground.hittime = 8
guard.hittime = 4
ground.Velocity = -8,-1
air.Velocity = -8,-1
fall = 1
fall.recover = 0
kill = 0
guard.kill = 0

[state 1400, moveforward]
type = velset
trigger1 = time = 0
x = 0

[state 1400, snd]
type = playsnd
trigger1 = time = 10
value = 1400,0

[State 1400, Push]
type = Helper
trigger1 = Time = 14
trigger2 = time = 16
ignorehitpause = 1
ID = 1401
name = "Shove"
pos = -20,0
postype = p1
stateno = 1401
keyctrl = 0
ownpal = 1
helpertype = normal

[state 1400, moveforward]
type = velset
trigger1 = time = 0
x = 5

[state 1400, HB]
Type = hitby
trigger1 = 1
value = SCA,AT

[state 1400, previous state]
type = varset
trigger1 = time = 0
v = 5
value = prevstateno


[State 1400, 3]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-----------------------------------------------------------------------------
; Pushing part
[Statedef 1401]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 1401

[State 1440, Push]
type = posset
trigger1 = time = 0
y = 0

[State 1440, Push]
type = PlayerPush
trigger1 = 1
value = 1

[State 1440, NHB]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State 1440, Vel]
type = VelSet
trigger1 = Time >= 0
x = 30

[State 345, End]
type = DestroySelf
trigger1 = Time = 15



;==========================================================================
; Super Combo
;==========================================================================
;First Portion
; Damage: 540


[Statedef 3000]
type = A
movetype = A
physics = N
anim = 3000
ctrl = 0
velset = 0,0

[state x, combo damage score]
type = varset
trigger1 = time = 0
trigger1 = var(18) < 90
v = 18
value = 90
persistent = 0
ignorehitpause = 1

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelemtime(2) = 0
sound = S3000, 0
poweradd = -3000
pos = -10,-200
time = 60
movetime = 60

[state 3000, no bg]
type = assertspecial
trigger1 = 1
flag = nobg
ignorehitpause = 1

[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(2) =[0, 14]
anim = 3100
postype = back
sprpriority = -3
supermovetime = 1
removetime = 1
pausemovetime = 60
scale = (3-(time*0.15))*(1),(3-(time*0.15))*(1)
pos = 0,60-time*5
ownpal = 1

[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(2) = 15
anim = 3100
postype = back
vel = -0.1,0
sprpriority = -3
supermovetime = 40
removetime = 45
pos = 0,0
scale = 1,1
ownpal = 1


[State 3000, hitdef]
type = HitDef
trigger1 = vel y > 0
trigger1 = p2stateno != [150,155]
persistent = 0
attr = A, HT
animtype  = Medium
damage    = 0
guardflag = 
hitflag = M
id = 3000
hitonce = 1
pausetime = 0,0
priority = 1, miss 
p1sprpriority = 2
p2sprpriority = 1
hitonce = 1
p1stateno = 3010
p2stateno = 3020
p2facing = 1
pausetime = 10,10
sparkno = -1
sparkxy = -10,-37
hitsound   = S5000,1
ground.type = Low
guard.dist = 0
fall = 1

[state 3000, explod]
type = explod
trigger1 = time = 0
anim = 3001
sprpriority = -3
bindtime = -1
id = 3001
ignorehitpause = 0
supermovetime = 76
removeongethit = 1
scale =  Const(size.xscale),Const(size.yscale)

[state 3000, playerpush]
type = playerpush
trigger1 = p2stateno = [1400,1410]
value = 0
ignorehitpause = 1

[state 1000, nothitby]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause 

[state 3000, vel]
type = velset
trigger1 = animelemtime(3) = 0
x = 18
y = -8
persistent = 0

;[state 3000, float]
;type = veladd
;trigger1 = animelemtime(3) > 0
;trigger1 = vel y > 0
;y = 2
;persistent = 6




[state 3000, gravity]
type = veladd;gravity
trigger1 = pos y < -1
y = ifelse(command = "holdup",0.5, ifelse(command="holddown", 1.0,0.75))



[state 3000, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 3004


;--------------------------------------------------------------------------
;Miss
[statedef 3004]
type = C
movetype = I
physics = N

[state X, Ground Shockwave]
type = explod
trigger1 = time = 0
anim = F61
pos = 40,0
sprpriority = -4
scale = 1.5,1.25
ownpal = 1

[state 3005, sprpriority]
type = sprpriority
trigger1 = time = 0
value = -2

[state 3005, width]
type = width
trigger1 = 1
edge = 200,100

[state 3005, anim]
type = changeanim
trigger1 = time  = 0
value = 3004

[state 3005, quake]
type = envshake
trigger1 = time = 0
ampl = -8
time = 15
freq = 80

[state 3005, snd]
type = playsnd
trigger1 = time = 0
value = S52,1

[state 3000, explod]
type = explod
trigger1 = time = 0
anim = 3008
sprpriority = -3
bindtime = -1
id = 3008
ignorehitpause = 0
removetime = -2
removeongethit = 1
scale =  Const(size.xscale),Const(size.yscale)

[state 3005, velset]
type = velset
trigger1 = time = 0
y = 0

[state 3005, posset]
type = posset
trigger1 = time = 0
y = 0

[state 3005, velmul]
type = velmul
trigger1 = time = 0
x = 0.25

[state 3005, velmul]
type = velmul
trigger1 = time = 30
x = 0

[state 3005, end]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Surra de Bunda
[Statedef 3010]
type    = S
movetype= A
physics = N
anim = 3010
poweradd = 0
sprpriority = 3

[state 3010, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 3010, no bg]
type = assertspecial
trigger1 = 1
flag = nobg
ignorehitpause = 1

[state 3010, width]
type = width
trigger1 = time = 0
edge = 280,200

[state 3010, grounded]
type = posset
trigger1 = time = 0
y = 0



[State 810, Grab Sound]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 1

[State 810, Bind hold]
type = TargetBind
trigger1 = AnimElemTime(6) < 0
trigger2 = animelemtime(9) >= 0 && animelemtime(13) < 0 
trigger3 = animelemtime(15) >= 0 && animelemtime(21) < 0
pos = 290, -200

[State 810, Bind hit]
type = TargetBind
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
trigger2 = AnimElemTime(13) >= 0 && AnimElemTime(15) < 0
trigger3 = AnimElemTime(21) >= 0 && AnimElemTime(24) < 0
pos = 295, -200



[state 810, quake]
type = envshake
trigger1 = time = 0
trigger2 = animelem = 5
trigger3 = animelem = 13
trigger4 = animelem = 21
ampl = -8
phase = 110
time = 12
freq = 40

[state 810, snd]
type = playsnd
trigger1 = animelem = 5
trigger2 = animelem = 13
trigger3 = animelem = 21
value = F5,3

[state 810, hitadd]
type = hitadd
trigger1 = animelem = 5
trigger2 = animelem = 13
trigger3 = animelem = 21
value = 1

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 5
trigger2 = animelem = 13
trigger3 = animelem = 21
value = floor(-80*fvar(10))
persistent = 5
kill = 0

[State 810, Hurt 11]
type = TargetpowerAdd
trigger1 = AnimElem = 5
trigger2 = animelem = 13
trigger3 = animelem = 21
value =  168
persistent = 5


[State 810, Throw 11]
type = TargetState
trigger1 = animelemtime(24) = 3
value = 3021

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 3011

;---------------------------------------------------------------------------
;Stand over body
[statedef 3011]
type = S
movetype = A
physics = N
anim = 3011
velset = 0,0
sprpriority = -2


[state 3010, sprpriority]
type = sprpriority
trigger1 = animelem = 6
value = 2

[state 3011, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3010, explod]
type = explod
trigger1 = time = 0
anim = 3012
sprpriority = 3
bindtime = -1
removetime = -2
id = 3012
ignorehitpause = 0
removeongethit = 1
scale =  Const(size.xscale),Const(size.yscale)

[state 1310, posset]
type = posset
trigger1 = time = 0
y = 0

[state 1310, velset]
type = velset
trigger1 = animelem = 4
y = -18
x = 0.25
persistent = 0

[state 1310, veladd]
type = veladd
trigger1 = vel y > 0
y = 0.5
persistent = 1

[state 1310, gravity]
type = gravity
trigger1 = time > 0
trigger1 = pos y < -1

[State 1310, Hit]
type = HitDef
trigger1 = vel y > 0
trigger1 = !movecontact || !movereversed
persistent = 0
attr = A, SA
damage    = 160,16
guardflag = HA
getpower = 0
hitflag = MA
priority = 4
pausetime = 6,6
sparkno = 3
sparkxy = 0,0
hitsound   = 5,4
guardsound = S120,0
animtype = heavy
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0
air.velocity = 0,0
down.hittime = 60
guard.velocity = -20            
guard.hittime = 22
guard.slidetime = 30
airguard.velocity = -10,10
airguard.hittime = 26
guard.dist = 400

[state 3011, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 3012

;---------------------------------------------------------------------
;1st Bounce
;Butt Drop Landing
[statedef 3012]
type = C
movetype = A
physics = N
ctrl = 0
sprpriority = -2

[state 3012, removeexplod]
type = removeexplod
trigger1 = time = 0
id = 3012

[state 3012, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3012, snd]
type = playsnd
trigger1 = time = 0
value = S52,1
volume = 100

[State 3012, 3]
type = HitDef
trigger1 = Time = 0
attr = A, HA
damage    = 300 
getpower = 0
givepower = 496
guardflag = 
hitflag = FD
priority = 4
pausetime = 0,0
sparkno = 1
p2sprpriority = 1
sparkxy = -10,-40
hitsound = S5000, 2
guardsound = S120,0
p2stateno = 662
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,0

;[state 3012, victory condition]
;type = varset
;trigger1 = enemy,alive = 0
;trigger1 = movehit
;var(50) = 1
;ignorehitpause = 1


[state 3012, earthquakes]
type = envshake
trigger1 = time = 0
time = 24
ampl = -14
freq = 75
phase = 75

[state 3012, slow-mo]
type = pause
trigger1 = time > 0 && time < 32
trigger1 = enemy,stateno = 662
time = 1
persistent = 1

[state 3012, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 100,0
scale = 2,1.5
ownpal = 1
sprpriority = -4

[state 3012, anim]
type = changeanim
trigger1 = time = 0
value = 1311

[state 3012, explod]
type = explod
trigger1 = time = 0
anim = 3015
id = 3015
bindtime = -1
removetime = -2
ignorehitpause = 1
removeongethit = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)

[state 3012, pos]
type = posset
trigger1 = time = 0
y = 0

[state 3012, pos]
type = velset
trigger1 = time = 0
y = 0
x = 0

[state 3012, bounce]
type = velset
trigger1 = time = 14
y = -4.5

[state 3012, statetypeset]
type = statetypeset
trigger1 = time = 14
statetype = A
ignorehitpause = 1

[state 3012, changeanim]
type = changeanim
trigger1 = time = 14
value = 1312

[state 3012, gravity]
type = gravity
trigger1 = time > 14
trigger1 = pos y < -1

[state 3012, change state]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 3013
;-------------------------------------------------------
;2nd Landing
[statedef 3013]
type = C
movetype = I
physics = N
anim = 1311
sprpriority = -2
movehitpersist = 1

[state 3013, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1313, snd]
type = playsnd
trigger1 = time = 0
value = S52,1
volume = 50

[state 3013, explod]
type = explod
trigger1 = time = 0
trigger1 = movehit
anim = 1316
id = 3016
bindtime = -1
removetime = -2
ignorehitpause = 1
removeongethit = 1
sprpriority = 3
scale = const(size.xscale),const(size.yscale)

[state 651, fx]
type = explod
trigger1 = time = 0
anim = F61
pos = 100,0
scale = 1,1
ownpal = 1
sprpriority = -4

[state 1312, pos]
type = posset
trigger1 = time = 0
y = 0

[state 1311, earthquakes]
type = envshake
trigger1 = time = 0
time = 18
ampl = -8
freq = 75
phase = 75

[state 1312, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 1312, changestate]
type = changestate
trigger1 = time = 80
value = 1315




;---------------------------------------------------------------------------
;Thrown by Kung Fu Throw
; (a custom gethit state)
; Description: This is the state that the opponent changes to after being
;     hit by KFM's throw HitDef. The important thing here is to use a
;     ChangeAnim2 controller. The difference between ChangeAnim2 and
;     ChangeAnim is that ChangeAnim2 changes the player's animation to
;     an action in the AIR file of the attacker (in this case, kfm.air),
;     whereas ChangeAnim always changes the player to an action in his
;     own AIR file. Look at Action 820 in kfm.air for some extra
;     comments.
[Statedef 3020]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3020

[state 820, changestate]
type = changestate
trigger1 = time = 117
value = 3021

[state 810, screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,0
value = 0

;In case attacker loses binding on player for any reason, this controller
;guarantees that the player will never get stuck in this thrown state.
;[State 820, 2]
;type = SelfState
;trigger1 = !gethitvar(isbound)
;value = 5050

;---------------------------------------------------------------------------
;Thrown by Kung Fu Throw - thrown into the air
; (a custom gethit state)
; Description: This state has the opponent flying through the air and
;     falling down onto the ground. The SelfState controller sets the
;     opponent back using to his own state file when he his the ground.
;     Controllers 821,2 and 821,3 allow the opponent to recover by
;     hitting his recovery command when he is falling.
[Statedef 3021]
type    = A
movetype= H
physics = N
velset = 8,0
poweradd = 40
sprpriority = -1

[State 821, 1] ;Gravity
type = gravity
Trigger1 = 1

[State 821, 4] ;Hit ground
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3022 ;Hit ground


;---------------------------------------------------------------------------
[statedef 3022]
type = L
movetype = H
physics = C
velset = 0,0

[state 3022, laydown]
type = changeanim
trigger1 = time = 0
value = 5110

[state 3022, posset]
type = posset
trigger1 = time = 0
y = 0

[state 3022, selfstate]
type = selfstate
trigger1 = time > 300
value = 5100


;--------------------------------------------------------------------------
;Super Windmill
[statedef 3040]
type = S
movetype = A
physics = S
ctrl = 0
anim = 3040

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelemtime(1) =1
sound = S3000, 0
poweradd = -1000
pos = -10,-200
time = 60
movetime = 60
persistent = 0

[state 3040, noninvunerable]
type = nothitby
trigger1 = 1
value = ,AP,AT
ignorehitpause = 1


[state 3000, no bg]
type = assertspecial
trigger1 = animelemtime(1) = [0,60]
flag = nobg
ignorehitpause = 1

[state 3040, combo scaling]
type = varset
trigger1 = var(18) < 50
trigger1 = time = 0
v = 18
value = 50

[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(1) =[0, 14]
anim = 3100
postype = back
sprpriority = -3
supermovetime = 1
removetime = 1
pausemovetime = 60
scale = (3-(time*0.15))*(1),(3-(time*0.15))*(1)
pos = 0,60-time*5
ownpal = 1

[state 3000, Super Portrait]
type = explod
trigger1 = animelemtime(1) = 15
anim = 3100
postype = back
vel = -0.1,0
sprpriority = -3
supermovetime = 60
removetime = 45
pausemovetime = 60
pos = 0,0
scale = 1,1
ownpal = 1

[state 3040, snd]
type = playsnd
trigger1 = animelemtime(3) = 0
trigger2 = animelemtime(13) = 0
trigger3 = animelemtime(23) = 0
trigger4 = animelemtime(33) = 0
trigger5 = animelemtime(43) = 0
trigger6 = animelemtime(53) = 0
trigger7 = animelemtime(63) = 0
trigger8 = animelemtime(73) = 0
value = S1150,0
persistent = 1

;Damage

[State 3040, AE3  Head]
type = HitDef
trigger1 = animelem = 3
persistent = 7
attr = C, HA
animtype  = hard
damage    = 40,8
getpower = 0
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
id = 3040
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 14
ground.hittime  = 36
air.hittime = 12
ground.velocity = -4,0
air.velocity = -4,-6
guard.velocity = 4          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 4,-4
guard.dist = 720
fall.recover = 0

[State 3040, AE4]
type = HitDef
trigger1 = animelem = 4
persistent = 8
attr = C, HA
animtype  = hard
damage    = 25,6
getpower = 0
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,3
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 12
id = 3040
ground.velocity = -2,0
air.velocity = -2,-6
guard.velocity = 4          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 4,-4
guard.dist = 720
fall.recover = 0

[State 3040, AE4]
type = HitDef
trigger1 = animelem = 42
persistent = 8
attr = C, HA
animtype  = hard
damage    = 25,6
getpower = 0
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,3
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 12
ground.velocity = -2,0
air.velocity = -2,-6
guard.velocity = 4          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 4,-4
guard.dist = 720
fall.recover = 0

[State 3040, AE6 Low Kick]
type = HitDef
trigger1 = animelem = 6
persistent = 8
attr = C, HA
animtype  = hard
damage    = 25,6
getpower = 0
hitflag = MAF
guardflag = LA
pausetime = 4,4
priority = 3,hit
sparkno = 1
id = 3040
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 14
ground.hittime  = 36
air.hittime = 28
ground.velocity = 2,-8
air.velocity = 2,-8
guard.velocity = 4          
guard.hittime = 14
guard.slidetime = 14
fall = 1
fall.recover = 0
fall.recovertime = 60
airguard.velocity = 4,-4
guard.dist = 1280

[State 3040, AE6 Low Kick]
type = HitDef
trigger1 = animelem = 24
trigger2 = animelem = 44
trigger3 = animelem = 62
persistent = 8
attr = C, HA
animtype  = hard
damage    = 25,6
getpower = 0
hitflag = MAF
guardflag = LA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 14
ground.hittime  = 36
air.hittime = 28
ground.velocity = 2,-8
air.velocity = 2,-8
guard.velocity = 4          
guard.hittime = 14
guard.slidetime = 14
fall = 1
fall.recover = 0
fall.recovertime = 60
airguard.velocity = 4,-4
guard.dist = 1280

[State 3040, AE10 Chest Kick]
type = HitDef
trigger1 = animelem = 10
persistent = 8
attr = C, HA
animtype  = hard
damage    = 25,6
getpower = 0
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
id = 3040
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 18
ground.velocity = 2,0
air.velocity = 2,-8
guard.velocity = 1          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 2,-2
guard.dist = 720
fall.recover = 0

[State 3040, AE10 Chest Kick]
type = HitDef
trigger1 = animelem = 28
trigger2 = animelem = 48
trigger3 = animelem = 66
persistent = 8
attr = C, HA
animtype  = hard
damage    = 25,6
getpower = 0
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 18
ground.velocity = 2,0
air.velocity = 2,-8
guard.velocity = 1          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 2,-2
guard.dist = 720
fall.recover = 0

[State 3040, AE13]
type = HitDef
trigger1 = animelem = 13
persistent = 8
attr = C, HA
animtype  = hard
damage    = 25,6
getpower = 0
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
id = 3040
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 14
ground.hittime  = 36
air.hittime = 24
ground.velocity = 2,0
air.velocity = 2,-8
guard.velocity = -1          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -1,-4
guard.dist = 720
fall.recover = 0

[state 3040, targetstate]
type = targetstate
trigger1 = animelemtime(14) < 0
trigger1 = movehit
trigger1 = hitpausetime = 3
ignorehitpause = 1
id = 3040
value = 3050

[State 3040, AE13]
type = HitDef
trigger1 = animelem = 31
trigger2 = animelem = 51
trigger3 = animelem = 69
persistent = 8
attr = C, HA
animtype  = hard
damage    = 25,6
getpower = 0
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,1
guardsound = S120,0
ground.type = high
ground.slidetime = 14
ground.hittime  = 36
air.hittime = 24
ground.velocity = 2,0
air.velocity = 2,-8
guard.velocity = -1          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = -1,-4
guard.dist = 720
fall.recover = 0

[State 3040, AE17 Low Head]
type = HitDef
trigger1 = animelem = 17
trigger2 = animelem = 35
trigger3 = animelem = 55
trigger4 = animelem = 73
persistent = 8
attr = C, HA
animtype  = hard
damage    = 25,6
getpower = 0
hitflag = MAF
guardflag = LA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 30
ground.velocity = 2,-8
air.velocity = 2,-8
guard.velocity = 1          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 1,-4
guard.dist = 1280
fall.recover = 0

[State 3040, AE17 Up Kick]
type = HitDef
trigger1 = animelem = 19
trigger2 = animelem = 37
trigger3 = animelem = 57
trigger4 = animelem = 75
persistent = 8
attr = C, HA
animtype  = hard
damage    = 25,6
getpower = 0
hitflag = MAF
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 1
sparkxy = -20,-160
hitsound   = F5,2
guardsound = S120,0
ground.type = Trip
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 18
ground.velocity = -6,-2
air.velocity = -6,-2
guard.velocity = 2          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 2,-2
guard.dist = 720
fall.recover = 0

[State 3040, AE17 Chest Kick]
type = HitDef
trigger1 = animelem = 23
trigger2 = animelem = 61
trigger3 = animelem = 41
persistent = 8
attr = C, HA
animtype  = back
damage    = 25,6
getpower = 0
HITflag = MAF
guardflag = MA
pausetime = 4,4
priority = 3,hit
sparkno = 3
sparkxy = -20,-160
hitsound   = F5,3
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 24
ground.velocity = -2,-6
air.velocity = -2,-6
guard.velocity = 2          
guard.hittime = 14
guard.slidetime = 14
airguard.velocity = 2,-4
guard.dist = 720
fall.recover = 0

[State 3040, AE17 Chest Kick]
type = HitDef
trigger1 = animelem = 79
persistent = 8
attr = C, HA
animtype  = back
damage    = 60,18
getpower = 0
HITflag = MAF
guardflag = MA
pausetime = 14,14
priority = 3,hit
sparkno = 3
sparkxy = -20,-160
hitsound   = F5,3
guardsound = S120,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 36
air.hittime = 30
fall = 1
fall.recover = 0
ground.velocity = -20,-22
air.velocity = -20,-22
guard.velocity = -32          
guard.hittime = 18
guard.slidetime = 18
airguard.velocity = -24,-4
guard.dist = 720
envshake.ampl = 8
envshake.time = 14
ground.cornerpush.veloff = -100
guard.cornerpush.veloff = -38

[state 3040, velset]
type = velset
trigger1 = time > 14
trigger1 = animelemtime(4) > 0
x = ifelse(command = "holdfwd",1.75,ifelse(command="holdback",-1.75,0))

[state 3040, Transition into elevatordrop]
type = changestate
triggerall = animelemtime(13) = 2 || animelemtime(31) = 2  || animelemtime(51) =2
trigger1 = numtarget(3040)
trigger1 = target,stateno = 3051
value = 3042
ignorehitpause = 1


[state 3040, end]
type = changestate
trigger1 = animtime = 0
value = 3041


;---------------------------------------------------------------------------
[statedef 3041]
type = C
movetype = I
physics = C
anim = 3041


[state 1151, quake]
type = envshake
trigger1 = time = 0
ampl = 15
time = 18

[state 1151, playsnd]
type = playsnd
trigger1 = time = 0
value = S51,1

[state 1151, playsnd]
type = playsnd
trigger1 = time = 0
value = S51,1

[state 1161, end]
type = changestate
trigger1 = animtime = 0
value = 5120

[state 3041, removeexplod]
type = removeexplod
trigger1 = time = 0
id = 1155


;---------------------------------------------------------------------------
;Elevator Drop
[statedef 3042]
type = S
movetype = A
physics = S
anim = 3042
sprpriority = -2

[state 3042, Layered sprites]
type = explod
trigger1 = !numexplod(3042)
trigger1 = time = 0
anim = 3043
postype = p1
pos = 0,0
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ignorehitpause = 0

[state 3042, envshake]
type = envshake
trigger1 = animelemtime(7) = 0
ampl = 15
time = 18
ignorehitpause = 1

[state 3042, pause]
type = pause
trigger1 = animelemtime(7) = 0
time = 18

[state 3042, playsnd]
type = playsnd
trigger1 = animelemtime(7) = 0
value= 52,1
ignorehitpause = 1

[state 3042, playsnd]
type = playsnd
trigger1 = animelemtime(7) = 0
value= 52,1
ignorehitpause = 1

[state 651, fx]
type = explod
trigger1 = animelemtime(7) = 0
trigger2 = animelemtime(7) = 3
anim = F61
pos = 0,0
scale = 2,1.25
ownpal = 1
sprpriority = -3


[state 3042, targetlifeadd]
type = targetlifeadd
trigger1 = animelemtime(7) = 0
value = floor(fvar(10)*-280)

[state 3042, targetbind]
type = targetbind
trigger1 = animelemtime(7) >= 0 && animelemtime(8) < 0
pos = 15,-10

[state 3042, targetstate]
type = targetstate
trigger1 = animelemtime(7) = 0
value = 3052

[state 3042, end]
type = changestate
trigger1 = animtime = 0
value = 3043

;---------------------------------------------------------------------------
; Hop backwards
[Statedef 3043]
type    = A
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 3043, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)*1.5
y = const(velocity.run.back.y)*1.25


[State 3043, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106
;---------------------------------------------------------------------------
;Knocked To
[statedef 3050]
type = A
movetype = H
physics = N
ctrl = 0
sprpriority = -1

[state 3050, velset]
type = velset
trigger1 = time = 0
x = Floor(p2dist x * 0.03)
y = -18
[state 3050, gravity]
type = gravity
trigger1 = pos y < 0

[state 3050, changeanim]
type = changeanim
trigger1 = time = 0
value = 5070

[state 3050, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 3050, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 3050, landing]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 3051

;---------------------------------------------------------------------------
;Landing
[statedef 3051]
type = L
movetype = H
physics = C

[state 3051, changeanim]
type = changeanim
trigger1 = time = 0
value = 5100

[state 3051, changeanim]
type = changeanim
trigger1 = animtime = 0
trigger1 = anim = 5100
value = 5110

[state 3051, velset]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state 3051, on ground]
type = posset
trigger1 = time = 0
y = 0

[state 3051, selfstate]
type = selfstate
trigger1 = time = 240
value = 5120

;---------------------------------------------------------------------------
;Facesat
[statedef 3052]
type = L
movetype = H
physics = C

[state 3052, changeanim2]
type = changeanim2
trigger1 = time = 0
value = 3052

[state 3052, squashed]
type = angledraw
trigger1 = time < 42
value = 0
scale = 1.4,0.6

[state 3052, on ground]
type = posset
trigger1 = time = 42
y = 0

[state 3052, chagneanim]
type = changeanim
trigger1 = time = 42
value = 5110

[state 3052, selfstate]
type = selfstate
trigger1 = !alive
trigger1 = time = 84
value = 5150

[state 3052, selfstate]
type = selfstate
trigger1 = alive
trigger1 = time = 84
value = 5120

[state 3052, playerpush]
type = playerpush
trigger1 = 1
value = 0


;---------------------------------------------------------------------------
;Super 3
;Kicking Combo
;Damage: 290
[statedef 3080]
type = S
movetype = A
anim = 3080
ctrl = 0
physics = S

[State 3080, Super Pause]
type = SuperPause
trigger1 = animelemtime(2) = 0
sound = S3000, 0
poweradd = -1000
pos = -10,-200
time = 60
movetime = 60
persistent = 0

[State 3080, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[state 3080, no bg]
type = assertspecial
trigger1 = animelemtime(2) = [0,60]
flag = nobg
ignorehitpause = 1

[state 3080, combo scaling]
type = varset
trigger1 = var(18) < 70
trigger1 = time = 0
v = 18
value = 70

[state 3080, velset]
type = veladd
trigger1 = animelemtime(3) = 0
trigger2 = animelemtime(8) = 0
trigger3 = animelemtime(15) = 0
trigger4 = animelemtime(19) = 0
trigger5 = animelemtime(25) = 0
trigger6 = animelemtime(29) = 0
x = 30

[State 3080, 1]
type = PlaySnd
trigger1 = animelemtime(3) = 0
trigger2 = animelemtime(7) = 0
value = 0, 1
persistent = 1

[State 3080, 1]
type = PlaySnd
trigger1 = animelemtime(14) = 0
trigger2 = animelemtime(18) = 0
trigger3 = animelemtime(24) = 0
trigger4 = animelemtime(28) = 0
value = S240,0
persistent = 1

[state 3080, Super Portrait]
type = explod
trigger1 = animelemtime(2) =[0, 14]
anim = 3100
postype = back
sprpriority = -3
supermovetime = 1
removetime = 1
pausemovetime = 60
scale = (3-(time*0.15))*(1),(3-(time*0.15))*(1)
pos = 0,60-time*5
ownpal = 1

[state 3080, Super Portrait]
type = explod
trigger1 = animelemtime(2) = 15
anim = 3100
postype = back
vel = -0.1,0
sprpriority = -3
supermovetime = 60
removetime = 45
pausemovetime = 60
pos = 0,0
scale = 1,1
ownpal = 1

[State 3080, 2]
type = HitDef
trigger1 = animelem = 4
persistent = 0
attr = S, HA
animtype  = Medium
damage    = 30,6
getpower = 0
guardflag = MA
hitflag = MAF
priority = 3,hit
pausetime = 8,8
sparkno = 0
sparkxy = -10,-110
hitsound   = S5000,1
guardsound = S120,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -8
air.velocity = -2,-6
guard.velocity = -4
guard.hittime = 14
guard.slidetime = 14
guard.dist = 375
guard.kill = 1
forcestand = 1

[State 3080, 2]
type = HitDef
trigger1 = animelem = 9
persistent = 0
attr = S, HA
animtype  = Medium
damage    = 30,7
getpower = 0
guardflag = MA
hitflag = MAF
priority = 3,hit
pausetime = 8,8
sparkno = 0
sparkxy = -10,-110
hitsound   = S5000,1
guardsound = S120,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -8
air.velocity = -2,-6
guard.velocity = -4
guard.hittime = 14
guard.slidetime = 14
guard.dist = 375
guard.kill = 1
forcestand = 1

[State 3080, 2]
type = HitDef
trigger1 = animelem = 16
trigger2 = animelem = 26
persistent = 4
attr = S, HA
animtype  = Medium
damage    = 45,8
getpower = 0
guardflag = MA
hitflag = MAF
priority = 3,hit
pausetime = 8,8
sparkno = 3
sparkxy = -10,-110
hitsound = S5000, 2
guardsound = S120,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -8
air.velocity = -2,-6
guard.velocity = -4
guard.hittime = 14
guard.slidetime = 14
guard.dist = 375
guard.kill = 1
forcestand = 1

[State 3080, 2]
type = HitDef
trigger1 = animelem = 20
persistent = 0
attr = S, HA
animtype  = Medium
damage    = 45,8
getpower = 0
guardflag = MA
hitflag = MAF
priority = 3,hit
pausetime = 8,8
sparkno = 3
sparkxy = -10,-110
hitsound = S5000, 2
guardsound = S120,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -8
air.velocity = -2,-6
guard.velocity = -4
guard.hittime = 20
guard.slidetime = 20
guard.dist = 375
guard.kill = 1

[State 3080, 2]
type = HitDef
trigger1 = animelem = 30
persistent = 0
attr = S, HA
animtype  = Medium
damage    = 105,19
getpower = 0
guardflag = MA
hitflag = MAF
priority = 3,hit
pausetime = 14,14
sparkno = 3
sparkxy = -10,-110
hitsound = S5000, 2
guardsound = S120,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -24,-12
air.velocity = -24,-12
guard.velocity = -20
guard.hittime = 16
guard.slidetime = 16
guard.dist = 375
guard.kill = 1
fall = 1
fall.recover = 0
ground.cornerpush.veloff = -100
guard.cornerpush.veloff = -38


[state x, attack dist]
type = attackdist
trigger1 = 1
value = 375

[state 3080, end]
type = changestate
trigger1 = animtime = 0
ctrl = 1
value = 0


;==========================================================================
;Camera Intro
;==========================================================================
[statedef 19000]
type = A
movetype = I
physics = N
anim = 9741

[state 19000]
type = screenbound
trigger1 = 1
movecamera = 0,1
value = 1

[state 19000]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause

[state 19000]
type = posset
trigger1 = !time
y = -320

[state 19000]
type = velset
trigger1 = time > 160
y = 2.2

[state 19000]
type = destroyself
trigger1 = time > 300
trigger2 = roundstate = 2

;==========================================================================
;[Info]
;author = "Inktrebuchet" 
;versiondate = 12/13/2018                  
;goal = Detect enemy's projectile (helper). For use with AI.
;       敵の発射物（helper）を検出する。 AIで使用する場合。
;==========================================================================
;                Notes
;==========================================================================
;notes:
;-Enemy's projectile now has a PlayerID use PlayerID(helper(33333333),var(3)) as a redirect.
;
;base examples of trigger use: 
;
;;Enemy's projectile helper's distance from character.
;trigger1 = PlayerIDExist(helper(33333333),var(3))
;trigger1 = PlayerID(helper(33333333),var(3)), p2bodydist x 
;
;;Enemy's projectile helper's velocity.
;trigger1 = PlayerIDExist(helper(33333333),var(3))
;trigger1 = PlayerID(helper(33333333),var(3)), Vel X
;
;==========================================================================
;                Helper var usage.
;==========================================================================
; numhelper(33333333) Variable usage:
; This is a record of the variables that are used
;
; var(0) - highest playerid + 1
; var(3) - projectile player id while it exists
; 
;==========================================================================
[Statedef 33333333]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0, 0
 
;==========================================================================
;                Config Section
;==========================================================================
anim = 9741                   ; blank animation
 
;==========================================================================
 
[state 33333333, Clipboard] 
type = DisplayToClipboard
trigger1 = 1
text = "Highest Playerid = %d , Projectile helper's PlayerId = %d\nBy Inktrebuchet"
params = var(0)-1, var(3)
;==========================================================================
;                Detect Enemy's Projectile Helper
;==========================================================================
[State 33333333, 0]
type = Null
trigger1 = var(0) = 0
trigger1 = (var(0) := id)
ignorehitpause = 1
 
[state 33333333, 1] 
type = varadd
trigger1 = PlayerIdExist(var(0)) 
trigger2 = PlayerIdExist(var(0)+1) 
trigger3 = PlayerIdExist(var(0)+2) 
trigger4 = PlayerIdExist(var(0)+3) 
trigger5 = PlayerIdExist(var(0)+4) 
trigger6 = PlayerIdExist(var(0)+5) 
trigger7 = PlayerIdExist(var(0)+6) 
trigger8 = PlayerIdExist(var(0)+7) 
trigger9 = PlayerIdExist(var(0)+8) 
trigger10 = PlayerIdExist(var(0)+9) 
trigger11 = PlayerIdExist(var(0)+10) 
trigger12 = PlayerIdExist(var(0)+11) 
trigger13 = PlayerIdExist(var(0)+12) 
trigger14 = PlayerIdExist(var(0)+13) 
trigger15 = PlayerIdExist(var(0)+14) 
trigger16 = PlayerIdExist(var(0)+15) 
trigger17 = PlayerIdExist(var(0)+16) 
trigger18 = PlayerIdExist(var(0)+17) 
trigger19 = PlayerIdExist(var(0)+18) 
trigger20 = PlayerIdExist(var(0)+19) 
trigger21 = PlayerIdExist(var(0)+20) 
trigger22 = PlayerIdExist(var(0)+21) 
trigger23 = PlayerIdExist(var(0)+22) 
trigger24 = PlayerIdExist(var(0)+23) 
trigger25 = PlayerIdExist(var(0)+24) 
trigger26 = PlayerIdExist(var(0)+25) 
v = 0
value = 1
ignorehitpause = 1
 
[State 33333333, 2]
type = Null
triggerall = PlayerIdExist(Root,ID)
trigger1 = PlayerIdExist(var(0)-1)
trigger1 = cond(root,teamside = 1, PlayerID(var(0)-1),teamside = 2, PlayerID(var(0)-1),teamside = 1)
trigger1 = PlayerID(var(0)-1),hitdefattr = ASC, NP, SP, HP
trigger1 = var(3) := (var(0)-1)
trigger2 = PlayerIdExist(var(0)-2)
trigger2 = cond(root,teamside = 1, PlayerID(var(0)-2),teamside = 2, PlayerID(var(0)-2),teamside = 1)
trigger2 = PlayerID(var(0)-2),hitdefattr = ASC, NP, SP, HP
trigger2 = var(3) := (var(0)-2)
trigger3 = PlayerIdExist(var(0)-3)
trigger3 = cond(root,teamside = 1, PlayerID(var(0)-3),teamside = 2, PlayerID(var(0)-3),teamside = 1)
trigger3 = PlayerID(var(0)-3),hitdefattr = ASC, NP, SP, HP
trigger3 = var(3) := (var(0)-3)
trigger4 = PlayerIdExist(var(0)-4)
trigger4 = cond(root,teamside = 1, PlayerID(var(0)-4),teamside = 2, PlayerID(var(0)-4),teamside = 1)
trigger4 = PlayerID(var(0)-4),hitdefattr = ASC, NP, SP, HP
trigger4 = var(3) := (var(0)-4)
trigger5 = PlayerIdExist(var(0)-5)
trigger5 = cond(root,teamside = 1, PlayerID(var(0)-5),teamside = 2, PlayerID(var(0)-5),teamside = 1)
trigger5 = PlayerID(var(0)-5),hitdefattr = ASC, NP, SP, HP
trigger5 = var(3) := (var(0)-5)
trigger6 = PlayerIdExist(var(0)-6)
trigger6 = cond(root,teamside = 1, PlayerID(var(0)-6),teamside = 2, PlayerID(var(0)-6),teamside = 1)
trigger6 = PlayerID(var(0)-6),hitdefattr = ASC, NP, SP, HP
trigger6 = var(3) := (var(0)-6)
trigger7 = PlayerIdExist(var(0)-7)
trigger7 = cond(root,teamside = 1, PlayerID(var(0)-7),teamside = 2, PlayerID(var(0)-7),teamside = 1)
trigger7 = PlayerID(var(0)-7),hitdefattr = ASC, NP, SP, HP
trigger7 = var(3) := (var(0)-7)
trigger8 = PlayerIdExist(var(0)-8)
trigger8 = cond(root,teamside = 1, PlayerID(var(0)-8),teamside = 2, PlayerID(var(0)-8),teamside = 1)
trigger8 = PlayerID(var(0)-8),hitdefattr = ASC, NP, SP, HP
trigger8 = var(3) := (var(0)-8)
trigger9 = PlayerIdExist(var(0)-9)
trigger9 = cond(root,teamside = 1, PlayerID(var(0)-9),teamside = 2, PlayerID(var(0)-9),teamside = 1)
trigger9 = PlayerID(var(0)-9),hitdefattr = ASC, NP, SP, HP
trigger9 = var(3) := (var(0)-9)
trigger10 = PlayerIdExist(var(0)-10)
trigger10 = cond(root,teamside = 1, PlayerID(var(0)-10),teamside = 2, PlayerID(var(0)-10),teamside = 1)
trigger10 = PlayerID(var(0)-10),hitdefattr = ASC, NP, SP, HP
trigger10 = var(3) := (var(0)-10)
ignorehitpause = 1
 
[State 33333333, BindToRoot]
type = BindToRoot
trigger1 = PlayerIdExist(Root,ID)
time = 1
facing = 1
pos =0,-2
ignorehitpause = 1 

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------

[statedef -2]

;=======================AI Detect Projectile System==========================
[state -2, AI Detect Projectile System]
type = helper
trigger1 = ailevel ;M.U.G.E.N 1.0+
trigger1 = !numhelper(33333333)
name = "AI Detect Projectile System"
ID = 33333333
stateno = 33333333
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 1.0
size.yscale = 1.0
supermovetime = 2147483647
pausemovetime = 2147483647
ignorehitpause = 1

[state -2, combo scale score]
type = displayToClipboard
trigger1 = 1
text = "Dist x: %f  Dist Y: %f Pos Y: %f  COMBO SCALE: %d"
params = p2bodydist x, p2bodydist y, pos y, var(18)

;-----------------------------
;Explod removes

[state -2, Scissor Clap 810]
type = removeexplod
trigger1 = stateno != 810  
id = 810

[state -2, Scissor Grab 1001]
type = removeexplod
trigger1 = stateno != 1000  
id = 1001


[state -2, Scissor Grab 1002]
type = removeexplod
trigger1 = stateno != 1002  
id = 1007

[state -2, Scissor Grab 1012]
type = removeexplod
trigger1 = stateno != 1012  
id = 1017

[state -2, Scissor Grab 1012]
type = removeexplod
trigger1 = stateno != 1022  
id = 1027

[state -2, Scissor Grab 1011]
type = removeexplod
trigger1 = stateno != 1010
id = 1011

[state -2, Scissor Grab 1021]
type = removeexplod
trigger1 = stateno != 1020
id = 1021

[state -2, Scissor Grab Landing 1006]
type = removeexplod
trigger1 = stateno != 1005
id = 1006

[state -2, Scissor Grab Landing 1016]
type = removeexplod
trigger1 = stateno != 1015
id = 1016

[state -2, Scissor Grab Landing 1026]
type = removeexplod
trigger1 = stateno != 1025
id = 1026

[state -2, Windmill L]
type = removeexplod
trigger1 = stateno != 1150
id = 1155

[state -2, Windmill H]
type = removeexplod
trigger1 = stateno != 1160
id = 1165

[state -2, Windmill EX]
type = removeexplod
trigger1 = stateno != 1170
id = 1175

[state -2, Butt drop]
type = removeexplod
trigger1 = stateno != 1310
id = 1315

[state -2, butt drop]
type = removeexplod
trigger1 = stateno != 1311 
id = 1316
ignorehitpause = 1

[state -2, Scissor Grab Landing 1026]
type = removeexplod
trigger1 = stateno != 1312 
id = 1317
ignorehitpause = 1

[state -2, Scissor Grab 1001]
type = removeexplod
trigger1 = stateno != 3000  
id = 3001
ignorehitpause = 1

[state -2, Scissor Grab 1001]
type = removeexplod
trigger1 = stateno != 3012  
id = 3015
ignorehitpause = 1

[state -2, Scissor Grab 1001]
type = removeexplod
trigger1 = stateno != 3013  
id = 3016
ignorehitpause = 1


;===========================================
;   Victory Quotes
;===========================================

[state -2, win quotes]
type = victoryquote
trigger1 = 1
value = 1+(random%6)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Jumbo Elephant"
value = 8+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Ana 'Jiggly' Bunny"
value = 11+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Bertha Hippo"
value = 14+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Katrina Crocodile"
value = 17+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Enorma Pig"
value = 20+(random%3)
ignorehitpause =1
persistent = 1


[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Aroma Skunk"
value = 23+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Lardo Rat"
value = 26+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Makuyama"
value = 29+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Pastilla Skunk"
value = 32+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Jumba Elephant"
value = 35+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Twiggi Bunny"
value = 38+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Ra Lord"
value = 41+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Violet 'Tyla' Bunny"
value = 44+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Julian Hippo"
value = 47+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Battu Tri-red"
value = 70+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Rapid Bunny"
value = 73+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Noah Sharker"
value = 76+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Akai R. Panda"
value = 79+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Andy Armadillo" 
value = 82+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Montana Moth" 
value = 85+(random%3)
ignorehitpause =1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Ryu"
value = 51+(random%3)
ignorehitpause = 1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Ken Masters" || enemy, name = "Ken"
value = 54+(random%3)
ignorehitpause = 1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Dhalsim"
value = 57+(random%3)
ignorehitpause = 1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Goku Z2" || enemy,name = "Goku" || enemy,name = "SSJ Goku Z2"  || enemy,name = "SSJ Goku"
value = 60+(random%2)
ignorehitpause = 1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Vegeta Z2" || enemy,name = "Vegeta" || enemy,name = "Majin Vegeta Z2"  || enemy,name = "Majin Vegeta"
value = 62+(random%2)
ignorehitpause
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Piccolo" || enemy,name = "Piccolo Z2"
value = 64+(random%2)
ignorehitpause = 1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Chun-li" || enemy,name = "Chunli" || Enemy,name = "Chun Li" || enemy,name = "Shadow Lady" 
value = 66+(random%2)
ignorehitpause=1
persistent = 1

[state -2, win quotes]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Elena" 
value = 68+(random%2)
ignorehitpause =1
persistent = 1

[state -2, win quote]
type = victoryquote
triggerall = numenemy
trigger1 = enemy, name = "Texas Stanton"
value = 88+(random%3)
ignorehitpause
persistent = 1



;Special Condition
;[state -2, Win Quotes]
;type = victoryquote
;trigger1 = var(50) = 1
;trigger1 = roundno != 1
;trigger1 = roundstate = 4
;value = 98+(random%2)
;ignorehitpause=1
;persistent = 1


;===========================================
;  Combo damage reduction
;===========================================

[State -2, attack scaling]
type = attackMulSet
trigger1 = 1
value = fvar(10)
ignorehitpause = 1

[state -2, combo points]
type = varset
trigger1 = numenemy
trigger1 = (enemynear, movetype != H)
trigger2 = !numenemy
ignorehitpause = 1
v = 18
value = 100

[state -2, gradual lowering]
type= varset
trigger1 =  var(18) >= 100
fvar(10) = 1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 100 && var(18) >= 90
fvar(10) = 0.9

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 90 && var(18) >= 80
fvar(10) = 0.8

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 80 && var(18) >= 70
fvar(10) = 0.7

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 70 && var(18) >= 60
fvar(10) = 0.6

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 60 && var(18) >= 50
fvar(10) = 0.5

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 50 && var(18) >= 40
fvar(10) = 0.4

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 40 && var(18) >= 30
fvar(10) = 0.3

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 30 && var(18) >= 20
fvar(10) = 0.2

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 20 && var(18) >= 10
fvar(10) = 0.1

[state -2, gradual lowering]
type= varset
trigger1 = var(18) < 10
fvar(10) = 0.05

;==========================================
; Combo inhibitors
;==========================================

[state -2, Wall bounce limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(7) = 2
ignorehitpause = 1

[state -2, Ground Bounce limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(8) = 2
ignorehitpause = 1

[state -2, Launcher limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(11) = 2
ignorehitpause = 1

[state -2, High Kick limiter]
type = varset
triggerall = numenemy
trigger1 = (enemynear, movetype != H)
var(12) = 1
ignorehitpause = 1


[state -2, Grab combo limiter]
type = varset
triggerall = numenemy
trigger1 = enemynear,ctrl = 1
v = 25
value = 0
ignorehitpause = 1

[state -2, jump combo limiter]
type = varset
triggerall = numenemy
trigger1 = enemynear,movetype != H
v = 29
value = 1
ignorehitpause = 1


;Dizzy fall sound

[State -2, quakes]
type = envshake
triggerall = time = 1
trigger1 = anim = 5300
time = 12
ampl = -8
freq = 60
phase = 60

[State -2, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = anim = 5300
value = S52, 1



;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

;This controller plays a sound everytime KFM lands from a jump, or
;from his back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = 40, 0

[State -3, quakes]
type = envshake
triggerall = time = 1
trigger1 = stateno = 5100
time = 10
ampl = -6
freq = 60
phase = 60


[state -3, gravity]
type = gravity
trigger1 = stateno = 5620
trigger1 = time > 0

[state -3, land]
type = changestate
triggerall = stateno = 5620
trigger1 = vel y > 0
trigger1 = pos y > -vel y
value = 52